!function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(f&&f(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={8:0},o={8:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{0:1,1:1,5:1,6:1,13:1,15:1,16:1}[e]&&t.push(a[e]=new Promise((function(t,n){for(var r=e+".538f607d3148abfa81d4.css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=(f=i[c]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(u===r||u===o))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){var f;if((u=(f=l[c]).getAttribute("data-href"))===r||u===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=function(e){return s.p+""+({0:"ConnectedStandaloneRouting~IHEInvokeImageDisplay~StudyListRouting~ViewerLocalFileData~ViewerRouting",1:"ConnectedStandaloneRouting~IHEInvokeImageDisplay~ViewerLocalFileData~ViewerRouting",2:"CallbackPage",3:"ConnectedStandaloneRouting",4:"IHEInvokeImageDisplay",5:"StudyListRouting",6:"ViewerLocalFileData",7:"ViewerRouting",9:"vendors~ViewerLocalFileData",11:"vendors~dicom-microscopy-viewer"}[e]||e)+".bundle."+{0:"48327dca4a4e1f6ce3d2",1:"112ba00d3f8e671d312a",2:"5b77f2398e3d18b934d6",3:"fdd0ec8e491ab9f201ba",4:"ba50f250ce9fd9c0acf3",5:"5bb094db1829fa79593c",6:"64bcd498004a86f7d7a7",7:"20c3a2d3bddd3bd0db89",9:"b0b348cdb93121f7b88e",11:"3112d728c86a7dc63760",12:"1cfeb205b3adc7a50dc7",13:"fb0089badbef3a554511",14:"8bda014f6cd8a3633276",15:"507b08170c86439a3b0b",16:"fa64642990dbfdbb3540",17:"8e1456d3516f9e64ad82",18:"d389f1b45c9b5e25dc19"}[e]+".js"}(e);var u=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(l);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",u.name="ChunkLoadError",u.type=r,u.request=a,n[1](u)}o[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var f=u;i.push([1036,10]),n()}([,,,,,,,,,function(e,t,n){"use strict";var r={error:console.error,warn:console.warn,info:console.log,trace:console.trace,debug:console.debug,time:console.time,timeEnd:console.timeEnd};t.a=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={ComputedRadiographyImageStorage:"1.2.840.10008.5.1.4.1.1.1",DigitalXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.1",DigitalXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.1.1",DigitalMammographyXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.2",DigitalMammographyXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.2.1",DigitalIntraOralXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.3",DigitalIntraOralXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.3.1",CTImageStorage:"1.2.840.10008.5.1.4.1.1.2",EnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.1",LegacyConvertedEnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.2",UltrasoundMultiframeImageStorage:"1.2.840.10008.5.1.4.1.1.3.1",MRImageStorage:"1.2.840.10008.5.1.4.1.1.4",EnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.1",MRSpectroscopyStorage:"1.2.840.10008.5.1.4.1.1.4.2",EnhancedMRColorImageStorage:"1.2.840.10008.5.1.4.1.1.4.3",LegacyConvertedEnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.4",UltrasoundImageStorage:"1.2.840.10008.5.1.4.1.1.6.1",EnhancedUSVolumeStorage:"1.2.840.10008.5.1.4.1.1.6.2",SecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7",MultiframeSingleBitSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.1",MultiframeGrayscaleByteSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.2",MultiframeGrayscaleWordSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.3",MultiframeTrueColorSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.4",Sop12LeadECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.1",GeneralECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.2",AmbulatoryECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.3",HemodynamicWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.2.1",CardiacElectrophysiologyWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.3.1",BasicVoiceAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.1",GeneralAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.2",ArterialPulseWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.5.1",RespiratoryWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.6.1",GrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.1",ColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.2",PseudoColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.3",BlendingSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.4",XAXRFGrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.5",XRayAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.12.1",EnhancedXAImageStorage:"1.2.840.10008.5.1.4.1.1.12.1.1",XRayRadiofluoroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.12.2",EnhancedXRFImageStorage:"1.2.840.10008.5.1.4.1.1.12.2.1",XRay3DAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.1",XRay3DCraniofacialImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.2",BreastTomosynthesisImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.3",BreastProjectionXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.13.1.4",BreastProjectionXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.13.1.5",IntravascularOpticalCoherenceTomographyImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.14.1",IntravascularOpticalCoherenceTomographyImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.14.2",NuclearMedicineImageStorage:"1.2.840.10008.5.1.4.1.1.20",RawDataStorage:"1.2.840.10008.5.1.4.1.1.66",SpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.1",SpatialFiducialsStorage:"1.2.840.10008.5.1.4.1.1.66.2",DeformableSpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.3",SegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.4",SurfaceSegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.5",RealWorldValueMappingStorage:"1.2.840.10008.5.1.4.1.1.67",SurfaceScanMeshStorage:"1.2.840.10008.5.1.4.1.1.68.1",SurfaceScanPointCloudStorage:"1.2.840.10008.5.1.4.1.1.68.2",VLEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1",VideoEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1.1",VLMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2",VideoMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2.1",VLSlideCoordinatesMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.3",VLPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4",VideoPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4.1",OphthalmicPhotography8BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.1",OphthalmicPhotography16BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.2",StereometricRelationshipStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.3",OphthalmicTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.4",VLWholeSlideMicroscopyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.6",LensometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.1",AutorefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.2",KeratometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.3",SubjectiveRefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.4",VisualAcuityMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.5",SpectaclePrescriptionReportStorage:"1.2.840.10008.5.1.4.1.1.78.6",OphthalmicAxialMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.7",IntraocularLensCalculationsStorage:"1.2.840.10008.5.1.4.1.1.78.8",MacularGridThicknessandVolumeReport:"1.2.840.10008.5.1.4.1.1.79.1",OphthalmicVisualFieldStaticPerimetryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.80.1",OphthalmicThicknessMapStorage:"1.2.840.10008.5.1.4.1.1.81.1",CornealTopographyMapStorage:"1.2.840.10008.5.1.4.1.1.82.1",BasicTextSR:"1.2.840.10008.5.1.4.1.1.88.11",EnhancedSR:"1.2.840.10008.5.1.4.1.1.88.22",ComprehensiveSR:"1.2.840.10008.5.1.4.1.1.88.33",Comprehensive3DSR:"1.2.840.10008.5.1.4.1.1.88.34",ProcedureLog:"1.2.840.10008.5.1.4.1.1.88.40",MammographyCADSR:"1.2.840.10008.5.1.4.1.1.88.50",KeyObjectSelection:"1.2.840.10008.5.1.4.1.1.88.59",ChestCADSR:"1.2.840.10008.5.1.4.1.1.88.65",XRayRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.67",RadiopharmaceuticalRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.68",ColonCADSR:"1.2.840.10008.5.1.4.1.1.88.69",ImplantationPlanSRDocumentStorage:"1.2.840.10008.5.1.4.1.1.88.70",EncapsulatedPDFStorage:"1.2.840.10008.5.1.4.1.1.104.1",EncapsulatedCDAStorage:"1.2.840.10008.5.1.4.1.1.104.2",PositronEmissionTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.128",EnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.130",LegacyConvertedEnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.128.1",BasicStructuredDisplayStorage:"1.2.840.10008.5.1.4.1.1.131",RTImageStorage:"1.2.840.10008.5.1.4.1.1.481.1",RTDoseStorage:"1.2.840.10008.5.1.4.1.1.481.2",RTStructureSetStorage:"1.2.840.10008.5.1.4.1.1.481.3",RTBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.4",RTPlanStorage:"1.2.840.10008.5.1.4.1.1.481.5",RTBrachyTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.6",RTTreatmentSummaryRecordStorage:"1.2.840.10008.5.1.4.1.1.481.7",RTIonPlanStorage:"1.2.840.10008.5.1.4.1.1.481.8",RTIonBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.9",RTBeamsDeliveryInstructionStorage:"1.2.840.10008.5.1.4.34.7",GenericImplantTemplateStorage:"1.2.840.10008.5.1.4.43.1",ImplantAssemblyTemplateStorage:"1.2.840.10008.5.1.4.44.1",ImplantTemplateGroupStorage:"1.2.840.10008.5.1.4.45.1"}},,,,function(e,t,n){"use strict";n(275);var r=n(210),a=n(0),o=n.n(a),i=n(1),s=n.n(i);n(749);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=l(t).call(this,e),n=!a||"object"!==c(a)&&"function"!=typeof a?f(r):a,m(f(n),"isRange",(function(e,t){return e.row<=t.row&&e.col<=t.col})),m(f(n),"highlightCells",(function(e){for(var t=[],r=0;r<n.props.Rows;r++){for(var a=[],o=0;o<n.props.Columns;o++){var i={row:r,col:o};n.isRange(i,e)?i.className="hover":n.isRange(e,n.emptyCell)&&n.isRange(i,n.state.selectedCell)&&(i.className="selectedBefore"),a.push(i)}t.push(a)}n.setState({table:t})})),n.emptyCell={row:-1,column:-1},n.state={table:[[]],selectedCell:n.props.selectedCell},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.highlightCells(this.emptyCell)}},{key:"onClick",value:function(e){this.setState({selectedCell:e}),this.highlightCells(e),this.props.onClick&&this.props.onClick(e),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.Columns,n={display:this.props.visible?"block":"none",minWidth:t*this.props.boxSize+(t+5)*this.props.cellBorder};return o.a.createElement("div",{className:"layoutChooser layoutChooser-dropdown-menu",role:"menu",style:n},o.a.createElement("table",null,o.a.createElement("tbody",null,this.state.table.map((function(t,n){return o.a.createElement("tr",{key:n},t.map((function(t,n){return o.a.createElement("td",{className:t.className,style:{width:e.props.boxSize,height:e.props.boxSize,border:"solid 1px black"},key:n,onMouseEnter:function(){return e.highlightCells(t)},onMouseLeave:function(){return e.highlightCells(e.emptyCell)},onClick:function(){return e.onClick(t)}})})))})))))}}])&&u(n.prototype,r),a&&u(n,a),t}(a.PureComponent);m(d,"propTypes",{Rows:s.a.number.isRequired,Columns:s.a.number.isRequired,visible:s.a.bool.isRequired,selectedCell:s.a.object,boxSize:s.a.number.isRequired,cellBorder:s.a.number.isRequired,onClick:s.a.func,onChange:s.a.func}),m(d,"defaultProps",{Rows:3,Columns:3,visible:!0,boxSize:20,cellBorder:1,selectedCell:{row:-1,col:-1}});n(750);var h=n(20),v=n(19),g=n.n(v),y=n(29);function b(e){var t=e.isActive,n=e.icon,r=e.labelWhenActive,a=e.onClick,i=e.t,s=g()(e.className,{active:t}),c="string"==typeof n?{name:n}:n,u=t&&r?r:e.label,l=e.isExpanded?"caret-up":"caret-down",f=e.isExpandable&&o.a.createElement(h.a,{name:l,className:"expand-caret"}),p=e.label.toLowerCase();return o.a.createElement("div",{className:s,onClick:function(t){a&&a(t,e)},"data-cy":p},c&&o.a.createElement(h.a,c),o.a.createElement("div",{className:"toolbar-button-label"},i(u),f))}b.propTypes={id:s.a.string,isActive:s.a.bool,label:s.a.string.isRequired,labelWhenActive:s.a.string,className:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),onClick:s.a.func,isExpandable:s.a.bool,isExpanded:s.a.bool,t:s.a.func.isRequired},b.defaultProps={isActive:!1,className:"toolbar-button"};var S=Object(y.i)("Buttons")(b);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?D(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n;O(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return T(D(n=E(this,(e=P(t)).call.apply(e,[this].concat(a)))),"state",{dropdownVisible:n.props.dropdownVisible}),T(D(n),"onClick",(function(){n.setState({dropdownVisible:!n.state.dropdownVisible})})),T(D(n),"onChange",(function(e){n.props.onChange&&n.props.onChange(e)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.dropdownVisible!==e.dropdownVisible&&this.setState({dropdownVisible:this.props.dropdownVisible})}},{key:"render",value:function(){return o.a.createElement("div",{className:"btn-group"},o.a.createElement(S,{isActive:this.state.dropdownVisible,label:"Layout",icon:"th",onClick:this.onClick}),o.a.createElement(d,{visible:this.state.dropdownVisible,onChange:this.onChange,onClick:this.onClick,selectedCell:this.props.selectedCell}))}}])&&I(n.prototype,r),a&&I(n,a),t}(a.PureComponent);T(x,"defaultProps",{dropdownVisible:!1}),T(x,"propTypes",{dropdownVisible:s.a.bool.isRequired,onChange:s.a.func,selectedCell:s.a.object});n(751);var k=n(79),j=n(86);n(752);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?L(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=function(e){function t(){var e,n;N(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return V(L(n=_(this,(e=A(t)).call.apply(e,[this].concat(a)))),"onItemClick",(function(e){n.props.onItemClick&&(e.preventDefault(),e.stopPropagation(),n.props.onItemClick(e,n.props.itemKey))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"tableListItem ".concat(this.props.itemClass),onClick:this.onItemClick},o.a.createElement("div",{className:"itemIndex ".concat(this.props.itemMetaClass)},this.props.itemIndex,this.props.itemMeta,o.a.createElement("span",{className:"warning-icon"},o.a.createElement(h.a,{name:"exclamation-triangle"}))),o.a.createElement("div",{className:"itemContent"},this.props.children))}}])&&M(n.prototype,r),a&&M(n,a),t}(a.Component);V(F,"propTypes",{children:s.a.node,itemClass:s.a.string,itemIndex:s.a.number,itemMeta:s.a.node,itemMetaClass:s.a.string,itemKey:s.a.oneOfType([s.a.string,s.a.number]),onItemClick:s.a.func.isRequired}),V(F,"defaultProps",{itemMeta:null,itemMetaClass:""});n(753);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){var t=e.color;return o.a.createElement("div",{className:"item-color",style:{backgroundColor:t}})};$.propTypes={color:s.a.string.isRequired};var J=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=z(t).call(this,e),n=!a||"object"!==B(a)&&"function"!=typeof a?H(r):a,G(H(n),"getActionButton",(function(e,t){return o.a.createElement("button",{key:e,className:"btnAction",onClick:t},o.a.createElement("span",{style:{marginRight:"4px"}},o.a.createElement(h.a,{name:"edit",width:"14px",height:"14px"})),n.props.t(e))})),G(H(n),"getTableListItem",(function(){var e=n.props.measurementData.hasWarnings&&!n.props.measurementData.isReadOnly?"hasWarnings":"",t=[];if("function"==typeof n.props.onRelabel){var r=n.getActionButton("Relabel",n.onRelabelClick);t.push(r)}if("function"==typeof n.props.onEditDescription){var a=n.getActionButton("Description",n.onEditDescriptionClick);t.push(a)}if("function"==typeof n.props.onDelete){var i=n.getActionButton("Delete",n.onDeleteClick);t.push(i)}return!0===n.props.measurementData.isSRText&&n.props.measurementData.labels&&n.props.measurementData.labels.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(F,{key:n.props.measurementData.measurementNumber,itemKey:n.props.measurementData.measurementNumber,itemClass:"measurementItem ".concat(n.props.itemClass," ").concat(e),itemIndex:n.props.itemIndex,onItemClick:n.onItemClick},o.a.createElement("div",null,o.a.createElement("div",{className:"measurementLocation"},n.props.t(n.props.measurementData.label,{keySeparator:">",nsSeparator:"|"}))),o.a.createElement("div",{className:"icons"},o.a.createElement("div",{className:"displayTexts"},n.getDataDisplayText()),o.a.createElement(h.a,{className:"eye-icon",name:n.state.visible?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(){n.props.measurementData.labels.forEach((function(e){e.visible=!n.state.visible})),n.setState({visible:!n.state.visible})}}),o.a.createElement(h.a,{className:"angle-double-".concat(n.state.collapsed?"down":"up"),name:"angle-double-".concat(n.state.collapsed?"down":"up"),width:"20px",height:"20px",onClick:function(){n.setState({collapsed:!n.state.collapsed})}}))),n.state.collapsed&&n.props.measurementData.labels.map((function(e,t){return o.a.createElement(F,{key:t,itemKey:t,itemMeta:o.a.createElement($,{color:e.color}),itemMetaClass:"item-color-section",onItemClick:n.onItemClick},o.a.createElement("div",null,o.a.createElement("div",{className:"icons"},o.a.createElement("span",{style:{width:"90px"}},e.label+" : "+e.value),o.a.createElement(h.a,{className:"eye-icon",name:e.visible?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(){e.visible=!e.visible}}))))}))):o.a.createElement(F,{key:n.props.measurementData.measurementNumber,itemKey:n.props.measurementData.measurementNumber,itemClass:"measurementItem ".concat(n.props.itemClass," ").concat(e),itemIndex:n.props.itemIndex,onItemClick:n.onItemClick},o.a.createElement("div",null,o.a.createElement("div",{className:"measurementLocation"},n.props.t(n.props.measurementData.label,{keySeparator:">",nsSeparator:"|"})),o.a.createElement("div",{className:"displayTexts"},n.getDataDisplayText()),!n.props.measurementData.isReadOnly&&o.a.createElement("div",{className:"rowActions"},t)))})),G(H(n),"onItemClick",(function(e){n.props.onItemClick(e,n.props.measurementData)})),G(H(n),"onRelabelClick",(function(e){e.stopPropagation(),n.props.onRelabel(e,n.props.measurementData)})),G(H(n),"onEditDescriptionClick",(function(e){e.stopPropagation(),n.props.onEditDescription(e,n.props.measurementData)})),G(H(n),"onDeleteClick",(function(e){e.stopPropagation(),n.props.onDelete(e,n.props.measurementData)})),G(H(n),"getDataDisplayText",(function(){return n.props.measurementData.data.map((function(e,t){return o.a.createElement("div",{key:"displayText_".concat(t),className:"measurementDisplayText"},e.displayText?e.displayText:"...")}))})),G(H(n),"getWarningContent",(function(){var e=n.props.measurementData.warningList,t=void 0===e?"":e;if(Array.isArray(t)){var r=t.map((function(e,t){return o.a.createElement("li",{key:t},e)}));return o.a.createElement("ol",null,r)}return o.a.createElement(o.a.Fragment,null,t)})),n.state={collapsed:!0,visible:!0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.measurementData,t=e.warningTitle,n=void 0===t?"":t,r=e.hasWarnings,a=e.isReadOnly;return o.a.createElement(o.a.Fragment,null,r&&!a?o.a.createElement(k.a,{key:this.props.itemIndex,placement:"left",overlay:o.a.createElement(j.a,{placement:"left",className:"in tooltip-warning",id:"tooltip-left"},o.a.createElement("div",{className:"warningTitle"},this.props.t(n)),o.a.createElement("div",{className:"warningContent"},this.getWarningContent()))},o.a.createElement("div",null,this.getTableListItem())):o.a.createElement(o.a.Fragment,null,this.getTableListItem()))}}])&&q(n.prototype,r),a&&q(n,a),t}(a.Component);G(J,"propTypes",{measurementData:s.a.object.isRequired,onItemClick:s.a.func.isRequired,onRelabel:s.a.func,onDelete:s.a.func,onEditDescription:s.a.func,itemClass:s.a.string,itemIndex:s.a.number,t:s.a.func});var Y=Object(y.i)("MeasurementTable")(J);n(754);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=function(e){function t(e){var n,r,a,o,i,s,c,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Z(t).call(this,e),n=!a||"object"!==X(a)&&"function"!=typeof a?Q(r):a,te(Q(n),"scrollNavDown",(function(e){var t=n.scrollableElement,r=t.scrollTop,a=t.offsetHeight,o=t.scrollHeight-a,i=r+n.props.scrollStep;i=i>o?o:i,n.scrollableElement.scrollTop=i})),te(Q(n),"scrollNavUp",(function(e){var t=n.scrollableElement.scrollTop-n.props.scrollStep;t=t<0?0:t,n.scrollableElement.scrollTop=t})),te(Q(n),"adjustMargins",(function(){if(n.props.hideScrollbar){var e=n.props.scrollX?1:0,t=n.props.scrollY?1:0,r=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="100px",t.style.height="100px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth,r=e.offsetHeight;t.style.overflow="scroll";var a=e.offsetWidth,o=e.offsetHeight;return n===a&&(a=t.clientWidth),r===o&&(o=t.clientHeight),document.body.removeChild(t),[n-a,r-o]}();n.scrollableElement.style.marginRight="".concat(0-r[0]*t,"px"),n.scrollableElement.style.marginBottom="".concat(0-r[1]*e,"px")}})),te(Q(n),"scrollHandler",(function(){var e=n.scrollableElement,t=e.offsetHeight,r=e.scrollTop,a="";r&&(a+="canScrollUp"),r+t<e.scrollHeight&&(a+=" canScrollDown"),n.state.scrollAreaClasses!==a&&n.setState({scrollAreaClasses:a})})),n.state={scrollAreaClasses:""},n.scrollHandlerThrottled=(o=150,i=n.scrollHandler,u=!1,function e(){if(u)return s=arguments,void(c=this);u=!0,i.apply(this,arguments),setTimeout((function(){u=!1,s&&(e.apply(c,s),s=c=null)}),o)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t="scrollable";return this.props.scrollableClass&&(t+=" ".concat(this.props.scrollableClass)),this.props.scrollX&&(t+=" scrollX"),this.props.scrollY&&(t+=" scrollY"),o.a.createElement("div",{className:"scrollArea ".concat(this.props.class," ").concat(this.state.scrollAreaClasses)},o.a.createElement("div",{className:t,ref:function(t){e.scrollableElement=t},onScroll:this.scrollHandlerThrottled,onMouseEnter:this.scrollHandlerThrottled,onTransitionEnd:this.scrollHandlerThrottled},this.props.children),o.a.createElement("div",{className:"scrollNav scrollNavUp",onClick:this.scrollNavUp},o.a.createElement(h.a,{name:"angle-double-up"})),o.a.createElement("div",{className:"scrollNav scrollNavDown",onClick:this.scrollNavDown},o.a.createElement(h.a,{name:"angle-double-down"})))}},{key:"componentDidMount",value:function(){this.adjustMargins(),this.scrollHandler(),window.addEventListener("resize",this.adjustMargins)}},{key:"componentDidUpdate",value:function(){this.adjustMargins(),this.scrollHandler()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.adjustMargins)}}])&&K(n.prototype,r),a&&K(n,a),t}(a.Component);te(ne,"propTypes",{children:s.a.node.isRequired,class:s.a.string,scrollableClass:s.a.string,scrollX:s.a.bool,scrollY:s.a.bool,hideScrollbar:s.a.bool,scrollStep:s.a.number}),te(ne,"defaultProps",{hideScrollbar:!0,class:"flex-grow fit",scrollY:!0,scrollX:!1,scrollStep:100});n(755);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ce(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=function(e){function t(){var e,n;ae(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return le(ce(n=ie(this,(e=se(t)).call.apply(e,[this].concat(a)))),"getHeader",(function(){return n.props.customHeader?n.props.customHeader:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tableListHeaderTitle"},n.props.headerTitle),o.a.createElement("div",{className:"numberOfItems"},n.props.children.length))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"tableList"},!this.props.headless&&o.a.createElement("div",{className:"tableListHeader",onClick:this.onHeaderClick},this.getHeader()),o.a.createElement("div",{className:"tableListContent"},this.props.children))}}])&&oe(n.prototype,r),a&&oe(n,a),t}(a.Component);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){me(o,r,a,i,s,"next",e)}function s(e){me(o,r,a,i,s,"throw",e)}i(void 0)}))}}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?be(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}le(fe,"propTypes",{customHeader:s.a.node,defaultItems:s.a.object,children:s.a.node.isRequired,headerTitle:s.a.string,headless:s.a.bool}),le(fe,"defaultProps",{headless:!1});var Oe=function(e){function t(){var e,n;he(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return we(be(n=ge(this,(e=ye(t)).call.apply(e,[this].concat(a)))),"state",{selectedKey:null}),we(be(n),"saveFunction",function(){var e=de(regeneratorRuntime.mark((function e(t){var r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.saveFunction,o=r.onSaveComplete,!a){e.next=12;break}return e.prev=2,e.next=5,a();case 5:i=e.sent,o&&o({title:"STOW SR",message:i.message,type:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o&&o({title:"STOW SR",message:e.t0.message,type:"error"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),we(be(n),"getMeasurementsGroups",(function(){return n.props.measurementCollection.map((function(e,t){return o.a.createElement(fe,{key:t,customHeader:n.getCustomHeader(e)},n.getMeasurements(e))}))})),we(be(n),"getMeasurements",(function(e){var t=n.props.selectedMeasurementNumber?n.props.selectedMeasurementNumber:n.state.selectedKey;return e.measurements.map((function(e,r){var a=e.measurementNumber,i=e.itemNumber||r+1,s=t!==a||n.props.readOnly?"":"selected";return o.a.createElement(Y,{key:a,itemIndex:i,itemClass:s,measurementData:e,onItemClick:n.onItemClick,onRelabel:n.props.onRelabelClick,onDelete:n.props.onDeleteClick,onEditDescription:n.props.onEditDescriptionClick})}))})),we(be(n),"onItemClick",(function(e,t){n.props.readOnly||(n.setState({selectedKey:t.measurementNumber}),n.props.onItemClick&&n.props.onItemClick(e,t))})),we(be(n),"getCustomHeader",(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"tableListHeaderTitle"},n.props.t(e.groupName)),e.maxMeasurements&&o.a.createElement("div",{className:"maxMeasurements"},n.props.t("MAX")," ",e.maxMeasurements),o.a.createElement("div",{className:"numberOfItems"},e.measurements.length))})),we(be(n),"getTimepointsHeader",(function(){var e=n.props,t=e.timepoints,r=e.t;return t.map((function(e,t){return o.a.createElement("div",{key:t,className:"measurementTableHeaderItem"},o.a.createElement("div",{className:"timepointLabel"},r(e.key)),o.a.createElement("div",{className:"timepointDate"},e.date))}))})),we(be(n),"getWarningContent",(function(){var e=n.props.overallWarnings.warningList,t=void 0===e?"":e;if(Array.isArray(t)){var r=t.map((function(e,t){return o.a.createElement("li",{key:t},e)}));return o.a.createElement("ol",null,r)}return o.a.createElement(o.a.Fragment,null,t)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.overallWarnings,n=e.saveFunction,r=e.t,a=t.warningList.length>0;return o.a.createElement("div",{className:"measurementTable"},o.a.createElement("div",{className:"measurementTableHeader"},a&&o.a.createElement(k.a,{key:"overwall-warning",placement:"left",overlay:o.a.createElement(j.a,{placement:"left",className:"in tooltip-warning",id:"tooltip-left",style:{}},o.a.createElement("div",{className:"warningTitle"},r("Criteria nonconformities")),o.a.createElement("div",{className:"warningContent"},this.getWarningContent()))},o.a.createElement("span",{className:"warning-status"},o.a.createElement("span",{className:"warning-border"},o.a.createElement(h.a,{name:"exclamation-triangle"})))),this.getTimepointsHeader()),o.a.createElement(ne,null,o.a.createElement("div",null,this.getMeasurementsGroups())),o.a.createElement("div",{className:"measurementTableFooter"},n&&o.a.createElement("button",{onClick:this.saveFunction,className:"saveBtn","data-cy":"save-measurements-btn"},o.a.createElement(h.a,{name:"save",width:"14px",height:"14px"}),"Save measurements")))}}])&&ve(n.prototype,r),a&&ve(n,a),t}(a.Component);we(Oe,"propTypes",{measurementCollection:s.a.array.isRequired,timepoints:s.a.array.isRequired,overallWarnings:s.a.object.isRequired,readOnly:s.a.bool,onItemClick:s.a.func,onRelabelClick:s.a.func,onDeleteClick:s.a.func,onEditDescriptionClick:s.a.func,selectedMeasurementNumber:s.a.number,t:s.a.func,saveFunction:s.a.func,onSaveComplete:s.a.func}),we(Oe,"defaultProps",{overallWarnings:{warningList:[]},readOnly:!1});var Ie=Object(y.i)(["MeasurementTable","Common"])(Oe),Ee=n(639),Pe=n(38),De=(n(756),function(){var e,t=Object(Pe.c)("AboutContent").t,n=Object(Ee.a)(),r=n.os,a=n.version,i=n.name;return o.a.createElement("div",{className:"AboutContent","data-cy":"about-modal"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("a",{className:"btn btn-default",target:"_blank",rel:"noopener noreferrer",href:"https://groups.google.com/forum/#!forum/cornerstone-platform"},t("Visit the forum"))," ",o.a.createElement("a",{className:"btn btn-default",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OHIF/Viewers/issues/new/choose"},t("Report an issue"))," ",o.a.createElement("a",{className:"btn btn-default",target:"_blank",rel:"noopener noreferrer",href:"http://ohif.org"},t("More details"))),o.a.createElement("div",null,o.a.createElement("h3",null,t("Version Information")),o.a.createElement("table",{className:"table table-responsive"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,t("Name")),o.a.createElement("th",null,t("Value")))),o.a.createElement("tbody",null,[{name:t("Repository URL"),value:"https://github.com/OHIF/Viewers/",link:"https://github.com/OHIF/Viewers/"},{name:t("Latest Master Commits"),value:"https://github.com/OHIF/Viewers/commits/master",link:"https://github.com/OHIF/Viewers/commits/master"},{name:"Version Number",value:"4.12.51"},{name:t("Build Number"),value:"0"},{name:t("Browser"),value:"".concat((e=i,e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase())," ").concat(a)},{name:t("OS"),value:r}].map((function(e){return function(e){var t=e.name,n=e.value,r=e.link;return o.a.createElement("tr",{key:t,style:{backgroundColor:"transparent"}},o.a.createElement("td",null,t),o.a.createElement("td",null,r?o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r},n):n))}(e)}))))))});n(757);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").join("-").toLowerCase()};function ke(e){var t=e.tabs,n=e.customProps,r=void 0===n?{}:n,i=Te(Object(a.useState)(0),2),s=i[0],c=i[1];return t.length>0&&o.a.createElement("div",{className:"TabComponents"},o.a.createElement("div",{className:"TabComponents_tabHeader"},o.a.createElement("div",{className:"TabComponents_tabHeader_selector"},o.a.createElement("div",{className:"dialog-separator-after"},o.a.createElement("ul",{className:"nav nav-tabs"},t.map((function(e,t){var n=e.name,r=e.hidden;return!(void 0!==r&&r)&&o.a.createElement("li",{key:t,onClick:function(){c(t)},className:g()("nav-link",t===s&&"active"),"data-cy":xe(n)},o.a.createElement("button",null,n))})))))),t.map((function(e,t){var n=e.Component,a=e.customProps,i=e.hidden;return!(void 0!==i&&i)&&o.a.createElement("div",{key:t,className:g()("TabComponents_content",t===s&&"active")},o.a.createElement(n,Ce({},r,a)))})))}ke.propTypes={tabs:s.a.arrayOf(s.a.shape({name:s.a.string,Component:s.a.any,customProps:s.a.object,hidden:s.a.bool})),customProps:s.a.object};n(758);var je=function(e){return e};function Re(e){var t=e.onResetPreferences,n=e.onSave,r=e.onCancel,a=e.hasErrors,i=e.t,s=void 0===i?je:i;return o.a.createElement("div",{className:"footer"},o.a.createElement("button",{className:"btn btn-danger pull-left","data-cy":"reset-default-btn",onClick:t},s("Reset to Defaults")),o.a.createElement("div",null,o.a.createElement("div",{onClick:r,"data-cy":"cancel-btn",className:"btn btn-default"},s("Cancel")),o.a.createElement("button",{className:"btn btn-primary","data-cy":"save-btn",disabled:a,onClick:n},s("Save"))))}Re.propTypes={onResetPreferences:s.a.func,onSave:s.a.func,onCancel:s.a.func,hasErrors:s.a.bool,t:s.a.func};var Ne=n(90);function Me(e){var t=e.keys,n=e.handleChange,r=e.classNames,a=e.modifier_keys,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.join("+")}(t);return o.a.createElement("input",{readOnly:!0,type:"text",value:i,className:r,onKeyDown:function(e){e.stopPropagation(),e.preventDefault(),Ne.a.record((function(e){var t=function(e){var t=e.sequence,n=e.modifier_keys,r=t.join(" ").split("+"),a=[],o=[];return r.forEach((function(e){n&&n.includes(e)?o.push(e):a.push(e)})),[].concat(o,a)}({sequence:e,modifier_keys:a});Ne.a.unpause(),n(t)}))},onFocus:function(){Ne.a.pause(),Ne.a.startRecording()}})}Me.propTypes={keys:s.a.array.isRequired,handleChange:s.a.func.isRequired,classNames:s.a.string,modifier_keys:s.a.array,allowed_keys:s.a.array};n(759);var _e=function(e){var t=e.language,n=e.onLanguageChange,r=e.languages;return o.a.createElement("select",{name:"language-select",id:"language-select",className:"language-select",value:t,onChange:function(e){var t=e.target.value;n(t)}},r.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)})))};_e.propTypes={language:s.a.string.isRequired,languages:s.a.array.isRequired,onLanguageChange:s.a.func.isRequired};n(760);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be,qe,ze,He=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,Ve(t).call(this,e))).state={checked:!!e.checked,label:e.label},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,e),n=t,(r=[{key:"handleChange",value:function(e){var t=e.target.checked;this.setState({checked:t}),this.props.onChange&&this.props.onChange(t)}},{key:"componentDidUpdate",value:function(e){var t=e.checked,n=void 0!==t&&t,r=e.label;this.state.checked===n&&this.state.label===r||this.setState({checked:n,label:r})}},{key:"render",value:function(){var e;return e=this.state.checked?o.a.createElement("span",{className:"ohif-checkbox ohif-checked"}):o.a.createElement("span",{className:"ohif-checkbox"}),o.a.createElement("div",{className:"ohif-check-container"},o.a.createElement("form",null,o.a.createElement("label",{className:"ohif-check-label"},o.a.createElement("input",{type:"checkbox",checked:this.state.checked,onChange:this.handleChange.bind(this)}),e,this.state.label)))}}])&&Le(n.prototype,r),a&&Le(n,a),t}(a.Component);Be=He,qe="propTypes",ze={label:s.a.string.isRequired,checked:s.a.bool,onChange:s.a.func},qe in Be?Object.defineProperty(Be,qe,{value:ze,enumerable:!0,configurable:!0,writable:!0}):Be[qe]=ze;n(761);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=$e(t).call(this,e),n=!a||"object"!==We(a)&&"function"!=typeof a?Je(r):a,Xe(Je(n),"handleInputChange",(function(e){var t=e.target,r=t.value;"range"===t.type&&(r=parseFloat(t.value));var a=t.name;n.setState(Xe({},a,r)),"cineFrameRate"===a&&n.props.onFrameRateChanged&&n.props.onFrameRateChanged(parseFloat(r))})),Xe(Je(n),"onClickPlayPause",(function(){var e=!n.state.isPlaying;n.setState({isPlaying:e}),n.props.onPlayPauseChanged&&n.props.onPlayPauseChanged(e)})),Xe(Je(n),"onClickNextButton",(function(e){n.props.onClickNextButton&&n.props.onClickNextButton(e)})),Xe(Je(n),"onClickBackButton",(function(e){n.props.onClickBackButton&&n.props.onClickBackButton(e)})),Xe(Je(n),"onClickSkipToStart",(function(e){n.props.onClickSkipToStart&&n.props.onClickSkipToStart(e)})),Xe(Je(n),"onClickSkipToEnd",(function(e){n.props.onClickSkipToEnd&&n.props.onClickSkipToEnd(e)})),n.state={cineFrameRate:e.cineFrameRate,isPlaying:e.isPlaying},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.isPlaying===e.isPlaying&&this.props.isPlaying===this.state.isPlaying||this.setState({isPlaying:this.props.isPlaying}),this.props.cineFrameRate===e.cineFrameRate&&this.props.cineFrameRate===this.state.cineFrameRate||this.setState({cineFrameRate:this.props.cineFrameRate})}},{key:"render",value:function(){var e=this.props.t;return o.a.createElement("div",{className:"CineDialog"},o.a.createElement("div",{className:"noselect double-row-style"},o.a.createElement("div",{className:"cine-controls"},o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{title:e("Skip to first image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickSkipToStart},o.a.createElement(h.a,{name:"fast-backward"})),o.a.createElement("button",{title:e("Previous image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickBackButton},o.a.createElement(h.a,{name:"step-backward"})),o.a.createElement("button",{title:e("Play / Stop"),className:"btn","data-toggle":"tooltip",onClick:this.onClickPlayPause},o.a.createElement(h.a,{name:this.state.isPlaying?"stop":"play"})),o.a.createElement("button",{title:e("Next image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickNextButton},o.a.createElement(h.a,{name:"step-forward"})),o.a.createElement("button",{title:e("Skip to last image"),className:"btn","data-toggle":"tooltip",onClick:this.onClickSkipToEnd},o.a.createElement(h.a,{name:"fast-forward"})))),o.a.createElement("div",{className:"cine-options"},o.a.createElement("div",{className:"fps-section"},o.a.createElement("input",{type:"range",name:"cineFrameRate",min:this.props.cineMinFrameRate,max:this.props.cineMaxFrameRate,step:this.props.cineStepFrameRate,value:this.state.cineFrameRate,onChange:this.handleInputChange})),o.a.createElement("span",{className:"fps"},this.state.cineFrameRate.toFixed(1)," ",e("fps")))))}}])&&Ge(n.prototype,r),a&&Ge(n,a),t}(a.PureComponent);Xe(Ke,"propTypes",{cineMinFrameRate:s.a.number.isRequired,cineMaxFrameRate:s.a.number.isRequired,cineStepFrameRate:s.a.number.isRequired,cineFrameRate:s.a.number.isRequired,isPlaying:s.a.bool.isRequired,onPlayPauseChanged:s.a.func,onFrameRateChanged:s.a.func,onClickNextButton:s.a.func,onClickBackButton:s.a.func,onClickSkipToStart:s.a.func,onClickSkipToEnd:s.a.func,t:s.a.func.isRequired}),Xe(Ke,"defaultProps",{cineMinFrameRate:1,cineMaxFrameRate:90,cineStepFrameRate:1,cineFrameRate:24,isPlaying:!1});var Ze=Object(y.i)("CineDialog")(Ke);n(762);function Qe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function et(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qe(o,r,a,i,s,"next",e)}function s(e){Qe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(n,!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ot=[{key:"jpg",value:"jpg"},{key:"png",value:"png"}],it=function(e){var t=e.activeViewport,n=e.onClose,r=e.updateViewportPreview,i=e.enableViewport,s=e.disableViewport,c=e.toggleAnnotations,u=e.loadImage,l=e.downloadBlob,f=e.defaultSize,p=e.minimumSize,m=e.maximumSize,d=e.canvasClass,v=at(Object(Pe.c)("ViewportDownloadForm"),1)[0],y=at(Object(a.useState)("image"),2),b=y[0],S=y[1],w=at(Object(a.useState)("jpg"),2),O=w[0],I=w[1],E=at(Object(a.useState)({width:f,height:f}),2),P=E[0],D=E[1],C=at(Object(a.useState)(!0),2),T=C[0],x=C[1],k=at(Object(a.useState)(!0),2),j=k[0],R=k[1],N=at(Object(a.useState)({width:1,height:1}),2),M=N[0],_=N[1],A=at(Object(a.useState)(),2),L=A[0],U=A[1],V=at(Object(a.useState)({width:f,height:f}),2),F=V[0],B=V[1],q=at(Object(a.useState)({ref:Object(a.createRef)(),width:f,height:f}),2),z=q[0],H=q[1],W=at(Object(a.useState)({src:null,width:f,height:f}),2),G=W[0],$=W[1],J=at(Object(a.useState)({width:!1,height:!1,filename:!1}),2),Y=J[0],X=J[1],K=Object.values(Y).includes(!0),Z=Object(a.useRef)(null),Q=function(e,t){var n="height"===t?"width":"height",r=e.target.value.replace(/\D/,""),a=""===r,o=nt({},P),i=a?"":Math.min(r,m);i!==P[t]&&(o[t]=i,j&&""!==o[n]&&(o[n]=Math.round(o[t]*M[n])),D(o),a||(B(o),H((function(e){return nt({},e,{},o)}))))},ee={width:v("minWidthError"),height:v("minHeightError"),filename:v("emptyFilenameError")},te=function(e){return Y[e]?o.a.createElement("div",{className:"input-error"},ee[e]):null},ne=function(e){return e>=p?e:p},re=Object(a.useCallback)(et(regeneratorRuntime.mark((function e(){var n,a,o,i,s,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t,L,P.width,P.height);case 2:return n=e.sent,a=n.width,o=n.height,c(T,L),i={height:ne(o),width:ne(a)},B(i),H((function(e){return nt({},e,{},i)})),e.next=11,r(L,z.ref.current,O);case 11:s=e.sent,l=s.dataUrl,f=s.width,p=s.height,$((function(e){return nt({},e,{src:l,width:ne(f),height:ne(p)})}));case 16:case"end":return e.stop()}}),e)}))),[t,L,T,u,c,r,O,z.ref,p,m,F]);return Object(a.useEffect)((function(){return i(L),function(){s(L)}}),[s,i,L]),Object(a.useEffect)((function(){null!==Z.current&&clearTimeout(Z.current),Z.current=setTimeout((function(){Z.current=null,re()}),1e3)}),[t,L,T,P,u,c,r,O,z.ref,p,m]),Object(a.useEffect)((function(){var e=P.width,t=P.height;X(nt({},{width:e<p,height:t<p,filename:!b}))}),[P,b,p]),o.a.createElement("div",{className:"ViewportDownloadForm"},o.a.createElement("div",{className:"title"},v("formTitle")),o.a.createElement("div",{className:"file-info-container","data-cy":"file-info-container"},o.a.createElement("div",{className:"dimension-wrapper"},o.a.createElement("div",{className:"dimensions"},o.a.createElement("div",{className:"width"},o.a.createElement(Fa,{type:"number",min:p,max:m,value:P.width,label:v("imageWidth"),onChange:function(e){return Q(e,"width")},"data-cy":"image-width"}),te("width")),o.a.createElement("div",{className:"height"},o.a.createElement(Fa,{type:"number",min:p,max:m,value:P.height,label:v("imageHeight"),onChange:function(e){return Q(e,"height")},"data-cy":"image-height"}),te("height"))),o.a.createElement("div",{className:"keep-aspect-wrapper"},o.a.createElement("button",{id:"keep-aspect",className:g()("form-button btn",j?"active":""),"data-cy":"keep-aspect",alt:v("keepAspectRatio"),onClick:function(){var e=P.width,t=P.height,n=nt({},n);if(!j){var r=Math.min(e,t);n.width=e/r,n.height=t/r,_(n)}R(!j)}},o.a.createElement(h.a,{name:j?"link":"unlink",alt:j?"Dismiss Aspect":"Keep Aspect"})))),o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"file-name"},o.a.createElement(Fa,{type:"text","data-cy":"file-name",value:b,onChange:function(e){return S(e.target.value)},label:v("filename"),id:"file-name"}),te("filename")),o.a.createElement("div",{className:"file-type"},o.a.createElement(va,{value:O,"data-cy":"file-type",onChange:function(e){return I(e.target.value)},options:ot,label:v("fileType")}))),o.a.createElement("div",{className:"col"},o.a.createElement("div",{className:"show-annotations"},o.a.createElement("label",{htmlFor:"show-annotations",className:"form-check-label"},o.a.createElement("input",{id:"show-annotations","data-cy":"show-annotations",type:"checkbox",className:"form-check-input",checked:T,onChange:function(e){return x(e.target.checked)}}),v("showAnnotations"))))),o.a.createElement("div",{style:{height:F.height,width:F.width,position:"absolute",left:"9999px"},ref:function(e){return U(e)}},o.a.createElement("canvas",{className:d,style:{height:z.height,width:z.width,display:"block"},width:z.width,height:z.height,ref:z.ref})),G.src?o.a.createElement("div",{className:"preview","data-cy":"image-preview"},o.a.createElement("div",{className:"preview-header"}," ",v("imagePreview")),o.a.createElement("img",rt({className:"viewport-preview",src:G.src,alt:v("imagePreview"),"data-cy":"image-preview"},"data-cy","viewport-preview-img"))):o.a.createElement("div",{className:"loading-image"},o.a.createElement(h.a,{name:"circle-notch",className:"icon-spin"}),v("loadingPreview")),o.a.createElement("div",{className:"actions"},o.a.createElement("div",{className:"action-cancel"},o.a.createElement("button",{type:"button","data-cy":"cancel-btn",className:"btn btn-danger",onClick:n},v("Buttons:Cancel"))),o.a.createElement("div",{className:"action-save"},o.a.createElement("button",{disabled:K,onClick:function(){l(b||"image",O,L,z.ref.current)},className:"btn btn-primary","data-cy":"download-btn"},v("Buttons:Download")))))};it.propTypes={onClose:s.a.func.isRequired,activeViewport:s.a.object,updateViewportPreview:s.a.func.isRequired,enableViewport:s.a.func.isRequired,disableViewport:s.a.func.isRequired,toggleAnnotations:s.a.func.isRequired,loadImage:s.a.func.isRequired,downloadBlob:s.a.func.isRequired,defaultSize:s.a.number.isRequired,minimumSize:s.a.number.isRequired,maximumSize:s.a.number.isRequired,canvasClass:s.a.string.isRequired};var st=it;n(763);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?mt(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vt=function(e){function t(){var e,n;ut(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ht(mt(n=ft(this,(e=pt(t)).call.apply(e,[this].concat(a)))),"getModalitiesStyle",(function(){return{}})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.studyData,t=e.StudyDate,n=e.StudyDescription,r=e.modalities,a=e.studyAvailable,i=this.props.active?" active":"",s=t&&n;return o.a.createElement("div",{className:"studyBrowseItem".concat(i),onClick:this.props.onClick},o.a.createElement("div",{className:"studyItemBox"},o.a.createElement("div",{className:"studyModality"},o.a.createElement("div",{className:"studyModalityText",style:this.getModalitiesStyle()},r)),o.a.createElement("div",{className:"studyText"},s?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"studyDate"},t),o.a.createElement("div",{className:"studyDescription"},n)):o.a.createElement("div",{className:"studyAvailability"},a?o.a.createElement(o.a.Fragment,null,"N/A"):o.a.createElement(o.a.Fragment,null,"Click to load")))))}}])&&lt(n.prototype,r),a&&lt(n,a),t}(a.Component);ht(vt,"propTypes",{onClick:s.a.func.isRequired,studyData:s.a.object.isRequired,active:s.a.bool});n(764);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?Ot(e):t}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pt=function(e){function t(){var e,n;yt(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Et(Ot(n=St(this,(e=wt(t)).call.apply(e,[this].concat(a)))),"getBrowserItems",(function(){return n.props.studyListData.map((function(e,t){return o.a.createElement(vt,{key:t,studyData:e,active:e.StudyInstanceUID===n.props.activeStudyInstanceUID,onClick:function(t){return n.props.onClick(e)}})}))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"studiesList ".concat(this.props.class)},this.getBrowserItems())}}])&&bt(n.prototype,r),a&&bt(n,a),t}(a.Component);Et(Pt,"propTypes",{class:s.a.string,studyListData:s.a.array.isRequired,onClick:s.a.func.isRequired,activeStudyInstanceUID:s.a.string});n(765);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?Rt(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _t=function(e){function t(){var e,n;Tt(this,t);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return Mt(Rt(n=kt(this,(e=jt(t)).call.apply(e,[this].concat(i)))),"getSeriesItems",(function(){return n.props.seriesItems.map((function(e,t){return o.a.createElement(r.a,Ct({key:e.displaySetInstanceUID,id:"series_thumb_".concat(t)},e,{active:e.displaySetInstanceUID===n.props.activeDisplaySetInstanceUID,onClick:function(){return n.props.onClick(e)}}))}))})),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"study-browser-series clearfix thumbnails-wrapper"},o.a.createElement("div",{className:"study-series-container"},this.getSeriesItems())))}}])&&xt(n.prototype,a),i&&xt(n,i),t}(a.Component);Mt(_t,"propTypes",{seriesItems:s.a.array.isRequired,onClick:s.a.func.isRequired,activeDisplaySetInstanceUID:s.a.string});n(766);function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qt=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ut(t).call(this,e),n=!a||"object"!==At(a)&&"function"!=typeof a?Vt(r):a,Bt(Vt(n),"getSeriesItems",(function(){var e;if(n.props.seriesData)e=n.props.seriesData;else if(n.state.activeStudyInstanceUID){e=n.props.studyListData.find((function(e){return e.StudyInstanceUID===n.state.activeStudyInstanceUID})).thumbnails}else e=n.props.studyListData[0].thumbnails;return e||[]})),Bt(Vt(n),"getSmallListItems",(function(){return(n.getSeriesItems()||[]).map((function(e,t){var r=e.displaySetInstanceUID===n.state.activeDisplaySetInstanceUID;return o.a.createElement("div",{key:t,className:"series-item ".concat(r?"active":"")})}))})),Bt(Vt(n),"onStudyClick",(function(e){n.props.onStudySelected&&n.props.onStudySelected(e),n.setState({activeStudyInstanceUID:e.StudyInstanceUID,seriesQuickSwitchOpen:!0})})),Bt(Vt(n),"onSeriesClick",(function(e){n.setState({activeDisplaySetInstanceUID:e.displaySetInstanceUID}),n.props.onSeriesSelected(e)})),Bt(Vt(n),"showSeriesSwitch",(function(){n.setState({seriesQuickSwitchOpen:!0})})),Bt(Vt(n),"hideSeriesSwitch",(function(){n.setState({seriesQuickSwitchOpen:!1})})),n.state={seriesQuickSwitchOpen:!1,sideClass:n.props.side||"",activeStudyInstanceUID:n.props.activeStudyInstanceUID,activeDisplaySetInstanceUID:n.props.activeDisplaySetInstanceUID},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props;t.activeStudyInstanceUID!==e.activeStudyInstanceUID&&this.setState({activeStudyInstanceUID:t.activeStudyInstanceUID}),t.activeDisplaySetInstanceUID!==e.activeDisplaySetInstanceUID&&this.setState({activeDisplaySetInstanceUID:t.activeDisplaySetInstanceUID})}},{key:"render",value:function(){var e=this.state.seriesQuickSwitchOpen?"series-triggered":"";return o.a.createElement("div",{className:"series-quick-switch clearfix noselect ".concat(this.state.sideClass," ").concat(e),onMouseLeave:this.hideSeriesSwitch},o.a.createElement("div",{className:"series-switch",onMouseEnter:this.showSeriesSwitch},o.a.createElement("div",{className:"title-label"},"Series"),o.a.createElement("div",{className:"series-box"},this.getSmallListItems(),o.a.createElement(ne,{scrollStep:201,class:"series-browser"},o.a.createElement(_t,{seriesItems:this.getSeriesItems(),onClick:this.onSeriesClick,activeDisplaySetInstanceUID:this.state.activeDisplaySetInstanceUID})))),o.a.createElement("div",{className:"study-switch"},o.a.createElement("div",{className:"title-label"},"Study"),o.a.createElement("div",{className:"study-box"},o.a.createElement(ne,{scrollStep:91,class:"study-browser"},o.a.createElement(Pt,{studyListData:this.props.studyListData,onClick:this.onStudyClick,activeStudyInstanceUID:this.state.activeStudyInstanceUID})))))}}])&&Lt(n.prototype,r),a&&Lt(n,a),t}(a.Component);Bt(qt,"propTypes",{side:s.a.string,studyListData:s.a.array.isRequired,onSeriesSelected:s.a.func.isRequired,seriesData:s.a.array,onStudySelected:s.a.func,activeStudyInstanceUID:s.a.string,activeDisplaySetInstanceUID:s.a.string});n(767);function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yt=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=Wt(t).call(this),e=!r||"object"!==zt(r)&&"function"!=typeof r?Gt(n):r,Jt(Gt(e),"state",{badgeNumbers:[]}),Jt(Gt(e),"onClickOption",(function(t){var n=t;e.props.value===t&&(n=null),e.props.onValueChanged&&e.props.onValueChanged(n)})),e.onStateEvent=e.onStateEvent.bind(Gt(e)),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,e),n=t,(r=[{key:"onStateEvent",value:function(e){var t=this.props.options.findIndex((function(t){return t.value===e.detail.target}));if(t>-1){var n=this.state.badgeNumbers;n[t]=e.detail.badgeNumber,this.setState({badgeNumbers:n})}}},{key:"componentDidMount",value:function(){var e=this;this.props.options.forEach((function(t){t.stateEvent&&document.addEventListener(t.stateEvent,e.onStateEvent)}))}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.options.forEach((function(t,r){t.stateEvent&&t.stateEvent!==(e.options[r]?e.options[r].stateEvent:null)&&(document.removeEventListener(t.stateEvent,n.onStateEvent),document.addEventListener(t.stateEvent,n.onStateEvent))}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.options.forEach((function(t){t.stateEvent&&document.removeEventListener(t.stateEvent,e.onStateEvent)}))}},{key:"render",value:function(){var e=this,n=g()(t.className,"clearfix center-table"),r=this.props.options.map((function(t,n){var r=g()({roundedButtonWrapper:!0,noselect:!0,active:e.props.value===t.value}),a=t.label&&o.a.createElement("span",null,t.label),i="string"==typeof t.icon?{name:t.icon}:t.icon,s=t.bottomLabel&&o.a.createElement("div",{className:"bottomLabel"},t.bottomLabel),c=e.state.badgeNumbers[n],u=String(c).length>2;return c=c?u?99:c:null,o.a.createElement("div",{key:n,className:r,onClick:function(){return e.onClickOption(t.value)}},o.a.createElement("div",{className:"roundedButton"},a,c&&o.a.createElement("div",{className:"badgeNumber-container"},o.a.createElement("span",{className:"badgeNumber"},c,u&&"+")),i&&o.a.createElement(h.a,i)),s)}));return o.a.createElement("div",{className:n},r)}}])&&Ht(n.prototype,r),a&&Ht(n,a),t}(a.Component);Jt(Yt,"className","RoundedButtonGroup"),Jt(Yt,"propTypes",{options:s.a.arrayOf(s.a.shape({value:s.a.any,label:s.a.string,stateEvent:s.a.string,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})),value:s.a.string,onValueChanged:s.a.func}),Jt(Yt,"defaultProps",{options:[],value:null});n(768);function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?tn(e):t}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var an=function(e){function t(){var e,n;Kt(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return rn(tn(n=Qt(this,(e=en(t)).call.apply(e,[this].concat(a)))),"onSelected",(function(e){n.props.onSelected(e,n.props.itemData)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.labelClass?this.props.labelClass:"";return o.a.createElement("label",{className:"wrapperLabel radioLabel "+e,htmlFor:this.props.id},o.a.createElement("input",{type:"radio",id:this.props.id,className:"radioInput",value:this.props.value,onChange:this.onSelected}),o.a.createElement("span",{className:"wrapperText"},this.props.label))}}])&&Zt(n.prototype,r),a&&Zt(n,a),t}(a.Component);function on(e){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return!t||"object"!==on(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}rn(an,"propTypes",{value:s.a.string,label:s.a.string.isRequired,itemData:s.a.object.isRequired,labelClass:s.a.string,id:s.a.string.isRequired,onSelected:s.a.func.isRequired});var pn=function(e){function t(){return sn(this,t),un(this,ln(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"selectTreeBreadcrumb"},o.a.createElement("label",{className:"wrapperLabel radioLabel",htmlFor:"selectTreeBreadcrumb"},o.a.createElement("input",{type:"radio",id:"selectTreeBreadcrumb",className:"treeNode radioInput",value:this.props.value,onChange:this.props.onSelected}),o.a.createElement("span",{className:"wrapperText"},o.a.createElement("span",{className:"backIcon"},o.a.createElement(h.a,{name:"fast-backward"})),this.props.label)))}}])&&cn(n.prototype,r),a&&cn(n,a),t}(a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pn,"propTypes",{label:s.a.string.isRequired,value:s.a.string.isRequired,onSelected:s.a.func.isRequired});var mn=n(48),dn=n.n(mn);function hn(e){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bn(e,t){return(bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wn=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=gn(t).call(this,e),n=!a||"object"!==hn(a)&&"function"!=typeof a?yn(r):a,Sn(yn(n),"componentDidUpdate",(function(){n.props.onComponentChange&&n.props.onComponentChange()})),Sn(yn(n),"isLeafSelected",(function(e){return e&&!Array.isArray(e.items)})),Sn(yn(n),"getLabelClass",(function(e){var t="treeLeaf";return(n.state.searchTerm||Array.isArray(e.items))&&(t="treeNode"),t})),Sn(yn(n),"headerItem",(function(){var e=n.props.selectTreeFirstTitle;return n.state.currentNode&&n.props.selectTreeSecondTitle&&(e=n.props.selectTreeSecondTitle),o.a.createElement("div",{className:"wrapperLabel treeHeader"},o.a.createElement("div",{className:"wrapperText"},e),n.props.searchEnabled&&o.a.createElement("div",{className:"wrapperSearch"},o.a.createElement("div",{className:"searchIcon"},o.a.createElement(h.a,{name:"search"})),o.a.createElement("input",{type:"text",className:"searchInput",placeholder:"Search labels",autoFocus:n.props.autoFocus,onChange:n.searchLocations,value:n.state.searchTerm?n.state.searchTerm:""})))})),Sn(yn(n),"searchLocations",(function(e){n.setState({currentNode:null,searchTerm:e.currentTarget.value})})),Sn(yn(n),"onSelected",(function(e,t){return n.isLeafSelected(t)?n.setState({searchTerm:null,currentNode:null,value:null}):n.setState({currentNode:t}),n.props.onSelected(e,t)})),Sn(yn(n),"onBreadcrumbSelected",(function(){n.setState({currentNode:null})})),n.state={searchTerm:null,currentNode:null,value:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.getTreeItems();return o.a.createElement("div",{className:"selectTree selectTreeRoot"},o.a.createElement("div",{className:"treeContent"},this.headerItem(),o.a.createElement("div",{className:"treeOptions"},this.state.currentNode&&o.a.createElement(pn,{onSelected:this.onBreadcrumbSelected,label:this.state.currentNode.label,value:this.state.currentNode.value}),o.a.createElement("div",{className:"treeInputsWrapper"},o.a.createElement("div",{className:"treeInputs"},e)))))}},{key:"filterItems",value:function(){var e=this,t=[];return dn()(this.props.items).forEach((function(n){if(Array.isArray(n.items))n.items.forEach((function(n){var r=n.label.toLowerCase(),a=e.state.searchTerm.toLowerCase();-1!==r.indexOf(a)&&t.push(n)}));else{var r=n.label.toLowerCase(),a=e.state.searchTerm.toLowerCase();-1!==r.indexOf(a)&&t.push(n)}})),t}},{key:"getTreeItems",value:function(){var e=this;return(this.state.searchTerm?this.filterItems():this.state.currentNode?dn()(this.state.currentNode.items):dn()(this.props.items)).map((function(t,n){var r=n;return e.state.currentNode&&(r+="_".concat(e.state.currentNode.value)),o.a.createElement(an,{key:r,id:"".concat("SelectTree","_").concat(t.value),name:n,itemData:t,value:t.value,label:t.label,labelClass:e.getLabelClass(t),onSelected:e.onSelected})}))}}])&&vn(n.prototype,r),a&&vn(n,a),t}(a.Component);Sn(wn,"propTypes",{autoFocus:s.a.bool,searchEnabled:s.a.bool,selectTreeFirstTitle:s.a.string,selectTreeSecondTitle:s.a.string,onComponentChange:s.a.func,items:s.a.array.isRequired,onSelected:s.a.func.isRequired}),Sn(wn,"defaultProps",{searchEnabled:!0,autoFocus:!0,selectTreeFirstTitle:"First Level itens",items:[]});n(769);function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?Tn(e):t}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jn=function(e){function t(){var e,n;En(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return kn(Tn(n=Dn(this,(e=Cn(t)).call.apply(e,[this].concat(a)))),"onClose",(function(e){e.preventDefault(),e.stopPropagation(),n.props.onClose()})),kn(Tn(n),"onConfirm",(function(e){e.preventDefault(),e.stopPropagation(),n.props.onConfirm()})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.isOpen&&o.a.createElement("div",{className:"simpleDialog ".concat(this.props.rootClass," "),ref:this.props.componentRef,style:this.props.componentStyle},o.a.createElement("form",null,o.a.createElement("div",{className:"header"},o.a.createElement("span",{className:"closeBtn",onClick:this.onClose},o.a.createElement("span",{className:"closeIcon"},"x")),o.a.createElement("h4",{className:"title"},this.props.headerTitle)),o.a.createElement("div",{className:"content"},this.props.children),o.a.createElement("div",{className:"footer"},o.a.createElement("button",{className:"btn btn-default",onClick:this.onClose},"Cancel"),o.a.createElement("button",{className:"btn btn-primary",onClick:this.onConfirm},"Confirm")))))}}])&&Pn(n.prototype,r),a&&Pn(n,a),t}(a.Component);kn(jn,"propTypes",{children:s.a.node,componentRef:s.a.any,componentStyle:s.a.object,rootClass:s.a.string,isOpen:s.a.bool,headerTitle:s.a.string.isRequired,onClose:s.a.func.isRequired,onConfirm:s.a.func.isRequired}),kn(jn,"defaultProps",{isOpen:!0,componentStyle:{},rootClass:""}),kn(jn,"InputDialog",(function(e){var t=e.onSubmit,n=e.defaultValue,r=e.title,i=e.label,s=e.onClose,c=On(Object(a.useState)(n),2),u=c[0],l=c[1];return o.a.createElement("div",{className:"InputDialog"},o.a.createElement(jn,{headerTitle:r,onClose:s,onConfirm:function(){t(u)}},o.a.createElement(Fa,{type:"text",value:u,onChange:function(e){return l(e.target.value)},label:i})))}));var Rn=n(268),Nn=n.n(Rn),Mn=(n(776),{overlay:{zIndex:1071,backgroundColor:"rgb(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center"}});Nn.a.setAppElement(document.getElementById("root"));var _n=function(e){var t=e.className,n=e.closeButton,r=e.shouldCloseOnEsc,a=e.isOpen,i=e.fullscreen,s=e.title,c=e.onClose,u=e.children,l=i?g()("OHIFModal",t,"OHIFModal-fullscreen"):g()("OHIFModal",t);return o.a.createElement(Nn.a,{className:l,"data-cy":"modal",shouldCloseOnEsc:r,isOpen:a,title:s,style:Mn},o.a.createElement(o.a.Fragment,null,s&&o.a.createElement("div",{className:"OHIFModal__header","data-cy":"modal-header"},o.a.createElement("h4",null,s),n&&o.a.createElement("button",{"data-cy":"close-button",onClick:c},"×")),o.a.createElement("div",{className:"OHIFModal__content","data-cy":"modal-content"},u)))};_n.propTypes={className:s.a.string,closeButton:s.a.bool,shouldCloseOnEsc:s.a.bool,isOpen:s.a.bool,title:s.a.string,onClose:s.a.func,children:s.a.oneOfType([s.a.arrayOf(s.a.node),s.a.node]).isRequired};var An=_n,Ln=(n(777),function(e){var t=e.items,n=e.onClick;return o.a.createElement("div",{className:"ContextMenu",onContextMenu:function(e){return e.preventDefault()}},o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement("li",{key:t},o.a.createElement("button",{className:"form-action",onClick:function(){return n(e)}},o.a.createElement("span",{key:t},e.label)))}))))});Ln.propTypes={items:s.a.array.isRequired,onClick:s.a.func.isRequired};var Un=Ln,Vn=(n(778),function(e){var t=e.error,n=e.title,r=e.description,a=e.onRetry;return o.a.createElement("div",{className:"ErrorPage"},n&&o.a.createElement("h3",null,n),o.a.createElement("p",null,r),o.a.createElement(h.a,{className:"retry-icon",name:"rotate-right",width:"25px",height:"25px",onClick:a}),t&&o.a.createElement("div",{className:"error-container"},o.a.createElement("pre",null,t.message),o.a.createElement("pre",null,t.stack)))});Vn.propTypes={error:s.a.object,title:s.a.string,description:s.a.string,onRetry:s.a.func},Vn.defaultProps={description:"Oh snap, something went wrong, please try reloading",onRetry:function(){return window.location.reload()}};var Fn=Vn,Bn=(n(779),n(6)),qn=n.n(Bn),zn=n(213),Hn=(n(849),n(868),n(869),n(120));function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $n(e){qn.a.locale(Hn.a.language);var t=Object(Pe.c)("DatePicker").t,n=e.onDatesChange,r=e.startDate,a=e.endDate,i=(e.presets,Gn(e,["onDatesChange","startDate","endDate","presets"]));return o.a.createElement(zn.DateRangePicker,Wn({},i,{startDate:r,endDate:a,renderCalendarInfo:function(){var t=e.presets;return o.a.createElement("div",{className:"PresetDateRangePicker_panel"},t.map((function(e){var t=e.text,i=e.start,s=e.end,c=r===i&&a===s;return o.a.createElement("button",{key:t,type:"button",className:"PresetDateRangePicker_button ".concat(c?"PresetDateRangePicker_button__selected":""),onClick:function(){return n({startDate:i,endDate:s,preset:!0})}},t)})))},onDatesChange:n,renderMonthElement:function e(t){var n=t.month,r=t.onMonthSelect,a=t.onYearSelect,i={margin:"0 5px"};return e.propTypes={onMonthSelect:s.a.func,onYearSelect:s.a.func},o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},o.a.createElement("div",{style:i},o.a.createElement("select",{className:"DateRangePicker_select",value:n.month(),onChange:function(e){return r(n,e.target.value)}},qn.a.months().map((function(e,t){return o.a.createElement("option",{key:t,value:t},e)})))),o.a.createElement("div",{style:i},o.a.createElement("select",{className:"DateRangePicker_select",value:n.year(),onChange:function(e){return a(n,e.target.value)}},function(){for(var e=[],t=0;t<20;t++){var n=qn()().year()-t;e.push(o.a.createElement("option",{value:n},n))}return e}())))},startDatePlaceholderText:t("Start Date"),endDatePlaceholderText:t("End Date"),phrases:{closeDatePicker:t("Common:Close"),clearDates:t("Clear dates")}}))}$n.propTypes={presets:s.a.arrayOf(s.a.shape({text:s.a.string,start:s.a.required,end:s.a.required})),onDatesChange:s.a.func.isRequired,startDate:s.a.instanceOf(Date),endDate:s.a.instanceOf(Date),month:s.a.instanceOf(Date)};var Jn=$n;function Yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Xn=function(e,t){return t||e||null},Kn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"start";if("number"==typeof t)return"end"===n?e:void e.subtract(t,"days")};function Zn(e){var t=e.meta,n=e.values,r=e.onSort,i=e.onValueChange,s=e.sortFieldName,c=e.sortDirection,u=e.studyListDateFilterNumDays,l=n||{},f=l.studyDateTo,p=l.studyDateFrom,m=Yn(Object(a.useState)(null),2),d=m[0],v=m[1],g=Object(Pe.c)("Common"),y=g.t,b=g.ready,S=["sort","sort-up","sort-down"],w="asc"===c?S[1]:S[2],O=qn()(),I=qn()().subtract(7,"day"),E=qn()().subtract(1,"month"),P=Kn(O,u,"start"),D=Kn(O,u,"end"),C=[{text:y("Today"),start:O,end:O},{text:y("Last 7 days"),start:I,end:O},{text:y("Last 30 days"),start:E,end:O}];return b?t.map((function(e,t){var a=e.displayText,c=e.fieldName,u=e.inputType,l=s===c?w:S[0];return o.a.createElement("th",{key:"".concat(c,"-").concat(t)},o.a.createElement("label",{htmlFor:"filter-".concat(c),onClick:function(){return r(c)}},"".concat(a),o.a.createElement(h.a,{name:l,style:{fontSize:"12px"}})),"text"===u&&o.a.createElement("input",{type:"text",id:"filter-".concat(c),className:"form-control studylist-search",value:n[c],onChange:function(e){return i(c,e.target.value)}}),"date-range"===u&&o.a.createElement(Jn,{startDate:Xn(p,P),startDateId:"start-date",endDate:Xn(f,D),endDateId:"end-date",onDatesChange:function(e){var t=e.startDate,n=e.endDate;e.preset;i("studyDateFrom",t),i("studyDateTo",n)},focusedInput:d,onFocusChange:function(e){return v(e)},numberOfMonths:1,showClearDates:!0,anchorDirection:"left",presets:C,hideKeyboardShortcutsPanel:!0,isOutsideRange:function(e){return!Object(zn.isInclusivelyBeforeDay)(e,qn()())}}))})):null}Zn.propTypes={meta:s.a.arrayOf(s.a.shape({displayText:s.a.string.isRequired,fieldName:s.a.string.isRequired,inputType:s.a.oneOf(["text","date-range"]).isRequired,size:s.a.number.isRequired})).isRequired,values:s.a.object.isRequired,onSort:s.a.func.isRequired,sortFieldName:s.a.string,sortDirection:s.a.oneOf([null,"asc","desc"])},Zn.defaultProps={};var Qn=Zn;var er=Object(y.i)("StudyListLoadingText")((function(e){var t=e.t;return o.a.createElement("div",{className:"loading-text"},t("Loading"),"... ",o.a.createElement(h.a,{name:"circle-notch",animation:"pulse"}))})),tr=function(e,t,n){return e in t?t[e]:n};function nr(e){var t=e.isLoading,n=e.hasError,r=e.studies,a=e.sort,i=e.onSort,s=e.filterValues,c=e.onFilterChange,u=e.onSelectItem,l=e.studyListDateFilterNumDays,f=e.displaySize,p=Object(Pe.c)("StudyList"),m=p.t,d=p.ready,h=[{displayText:m("PatientName"),fieldName:"PatientName",inputType:"text",size:330},{displayText:m("MRN"),fieldName:"PatientID",inputType:"text",size:378},{displayText:m("AccessionNumber"),fieldName:"AccessionNumber",inputType:"text",size:180},{displayText:m("StudyDate"),fieldName:"StudyDate",inputType:"date-range",size:300},{displayText:m("Modality"),fieldName:"modalities",inputType:"text",size:114},{displayText:m("StudyDescription"),fieldName:"StudyDescription",inputType:"text",size:335}],v=[{displayText:"".concat(m("PatientName")," / ").concat(m("MRN")),fieldName:"patientNameOrId",inputType:"text",size:250},{displayText:m("Description"),fieldName:"accessionOrModalityOrDescription",inputType:"text",size:350},{displayText:m("StudyDate"),fieldName:"StudyDate",inputType:"date-range",size:300}],g=[{displayText:m("Search"),fieldName:"allFields",inputType:"text",size:100}],y=tr(f,{large:h,medium:v,small:g},g),b=y.map((function(e){return e.size})).reduce((function(e,t){return e+t}));return d?o.a.createElement("table",{className:"table table--striped table--hoverable"},o.a.createElement("colgroup",null,y.map((function(e,t){var n=e.size/b*100;return o.a.createElement("col",{key:t,style:{width:"".concat(n,"%")}})}))),o.a.createElement("thead",{className:"table-head"},o.a.createElement("tr",{className:"filters"},o.a.createElement(Qn,{meta:y,values:s,onSort:i,onValueChange:c,sortFieldName:a.fieldName,sortDirection:a.direction,studyListDateFilterNumDays:l}))),o.a.createElement("tbody",{className:"table-body","data-cy":"study-list-results"},t&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:y.length},o.a.createElement(er,null))),!t&&n&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:y.length},o.a.createElement("div",{className:"notFound"},m("There was an error fetching studies")))),!t&&!r.length&&o.a.createElement("tr",{className:"no-hover"},o.a.createElement("td",{colSpan:y.length},o.a.createElement("div",{className:"notFound"},m("No matching results")))),!t&&r.map((function(e,t){return o.a.createElement(rr,{key:"".concat(e.StudyInstanceUID,"-").concat(t),onClick:function(e){return u(e)},AccessionNumber:e.AccessionNumber||"",modalities:e.modalities,PatientID:e.PatientID||"",PatientName:e.PatientName||"",StudyDate:e.StudyDate,StudyDescription:e.StudyDescription||"",StudyInstanceUID:e.StudyInstanceUID,displaySize:f})})))):null}function rr(e){var t=e.AccessionNumber,n=e.isHighlighted,r=e.modalities,a=e.PatientID,i=e.PatientName,s=e.StudyDate,c=e.StudyDescription,u=e.StudyInstanceUID,l=e.onClick,f=e.displaySize,p=Object(Pe.c)("StudyList").t,m=o.a.createElement("tr",{onClick:function(){return l(u)},className:g()({active:n})},o.a.createElement("td",{className:g()({"empty-value":!i})},i||"(".concat(p("Empty"),")")),o.a.createElement("td",null,a),o.a.createElement("td",null,t),o.a.createElement("td",null,s),o.a.createElement("td",{className:g()({"empty-value":!r})},r||"(".concat(p("Empty"),")")),o.a.createElement("td",null,c)),d=o.a.createElement("tr",{onClick:function(){return l(u)},className:g()({active:n})},o.a.createElement("td",{className:g()({"empty-value":!i})},i||"(".concat(p("Empty"),")"),o.a.createElement("div",{style:{color:"#60656f"}},a)),o.a.createElement("td",null,o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("div",{className:"hide-xs",style:{whiteSpace:"pre-wrap",flexGrow:1}},c),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"80px",width:"80px"}},o.a.createElement("div",{className:g()({modalities:r,"empty-value":!r}),"aria-label":r,title:r},r||"(".concat(p("Empty"),")")),o.a.createElement("div",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},"aria-label":t,title:t},t)))),o.a.createElement("td",{style:{textAlign:"center"}},s)),h=o.a.createElement("tr",{onClick:function(){return l(u)},className:g()({active:n})},o.a.createElement("td",{style:{position:"relative",overflow:"hidden"}},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement("div",{className:g()({"empty-value":!i}),style:{width:"150px",minWidth:"150px"}},o.a.createElement("div",{style:{fontWeight:500,paddingTop:"3px"}},i||"(".concat(p("Empty"),")")),o.a.createElement("div",{style:{color:"#60656f"}},a)),o.a.createElement("div",{className:"hide-xs",style:{whiteSpace:"pre-wrap",flexGrow:1,paddingLeft:"35px"}},c),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"80px",width:"80px"}},o.a.createElement("div",{className:g()({modalities:r,"empty-value":!r}),"aria-label":r,title:r},r||"(".concat(p("Empty"),")")),o.a.createElement("div",null,s)))));return tr(f,{large:m,medium:d,small:h},h)}nr.propTypes={isLoading:s.a.bool.isRequired,hasError:s.a.bool.isRequired,studies:s.a.array.isRequired,onSelectItem:s.a.func.isRequired,sort:s.a.shape({fieldName:s.a.string,direction:s.a.oneOf(["desc","asc",null])}).isRequired,onSort:s.a.func.isRequired,filterValues:s.a.shape({PatientName:s.a.string.isRequired,PatientID:s.a.string.isRequired,AccessionNumber:s.a.string.isRequired,StudyDate:s.a.string.isRequired,modalities:s.a.string.isRequired,StudyDescription:s.a.string.isRequired,patientNameOrId:s.a.string.isRequired,accessionOrModalityOrDescription:s.a.string.isRequired,allFields:s.a.string.isRequired,studyDateTo:s.a.any,studyDateFrom:s.a.any}).isRequired,onFilterChange:s.a.func.isRequired,studyListDateFilterNumDays:s.a.number,displaySize:s.a.string},nr.defaultProps={},rr.propTypes={AccessionNumber:s.a.string.isRequired,isHighlighted:s.a.bool,modalities:s.a.string,PatientID:s.a.string.isRequired,PatientName:s.a.string.isRequired,StudyDate:s.a.string.isRequired,StudyDescription:s.a.string.isRequired,StudyInstanceUID:s.a.string.isRequired,displaySize:s.a.string},rr.defaultProps={isHighlighted:!1};n(870);function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?ur(e):t}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pr=function(e){function t(){var e,n;or(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return fr(ur(n=sr(this,(e=cr(t)).call.apply(e,[this].concat(a)))),"nextPage",(function(){n.props.nextPageFunc(n.props.currentPage)})),fr(ur(n),"prevPage",(function(){n.props.prevPageFunc(n.props.currentPage)})),fr(ur(n),"onRowsPerPageChange",(function(e){n.props.onRowsPerPageChange(parseInt(e.target.value))})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(t,e),n=t,(r=[{key:"renderPaginationButtons",value:function(){return o.a.createElement("div",{className:"col-xs-8 col-sm-9 col-md-9"},o.a.createElement("div",{className:"form-inline form-group page-buttons noselect"},o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{className:"pagination-control no-margins"},o.a.createElement("li",{className:"page-item prev"},o.a.createElement("button",{onClick:this.prevPage,disabled:0===this.props.currentPage,className:"btn page-link"},this.props.t("Previous"))),o.a.createElement("li",{className:"page-item next"},o.a.createElement("button",{onClick:this.nextPage,disabled:0===this.props.recordCount||this.props.rowsPerPage>this.props.recordCount,className:"btn page-link"},this.props.t("Next")))))))}},{key:"renderRowsPerPageDropdown",value:function(){return o.a.createElement("div",{className:"form-inline form-group rows-per-page"},o.a.createElement("span",null,this.props.t("Show")),o.a.createElement("select",{onChange:this.onRowsPerPageChange,defaultValue:this.props.rowsPerPage},this.props.pageOptions.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("span",null,this.props.t("RowsPerPage")))}},{key:"render",value:function(){return o.a.createElement("div",{className:"pagination-area"},o.a.createElement("div",{className:"rows-dropdown"},this.renderRowsPerPageDropdown()),o.a.createElement("div",{className:"pagination-buttons"},o.a.createElement("div",{className:"form-inline form-group page-number pull-right"},this.renderPaginationButtons())))}}])&&ir(n.prototype,r),a&&ir(n,a),t}(a.PureComponent);fr(pr,"defaultProps",{pageOptions:[5,10,25,50,100],rowsPerPage:25,currentPage:0}),fr(pr,"propTypes",{pageOptions:s.a.array,rowsPerPage:s.a.number.isRequired,currentPage:s.a.number.isRequired,nextPageFunc:s.a.func,prevPageFunc:s.a.func,onRowsPerPageChange:s.a.func,recordCount:s.a.number.isRequired});var mr=Object(y.i)("Common")(pr);function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gr(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?br(e):t}function yr(e){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Or=function(e){function t(){var e,n;hr(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return wr(br(n=gr(this,(e=yr(t)).call.apply(e,[this].concat(a)))),"onImport",(function(e){n.props.onImport&&n.props.onImport(e)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(t,e),n=t,(r=[{key:"getImportTool",value:function(){if(this.props.onImport)return o.a.createElement("div",{className:"addNewStudy btn-file"},o.a.createElement("label",{htmlFor:"btnImport",style:{width:"18px"},onClick:this.onImport},o.a.createElement(h.a,{name:"plus"})))}},{key:"render",value:function(){return o.a.createElement("div",{className:"studylistToolbar"},this.getImportTool())}}])&&vr(n.prototype,r),a&&vr(n,a),t}(a.PureComponent);wr(Or,"propTypes",{onImport:s.a.func});n(871),n(872);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Dr(t).call(this,e),n=!a||"object"!==Ir(a)&&"function"!=typeof a?Cr(r):a,xr(Cr(n),"toolbarMenuOverlay",(function(){return o.a.createElement(j.a,{placement:"bottom",className:"tooltip-toolbar-overlay",id:"".concat(Math.random(),"_tooltip-toolbar-overlay}")},n.getButtons())})),xr(Cr(n),"getButtons",(function(){return n.props.buttons.map((function(e,t){return o.a.createElement(S,Er({key:t},e,{isActive:e.id===n.props.activeCommand}))}))})),xr(Cr(n),"isActive",(function(){var e=!1;return n.props.activeCommand&&n.props.buttons.forEach((function(t){n.props.activeCommand===t.id&&(e=!0)})),e})),xr(Cr(n),"activeIcon",(function(){return n.props.activeCommand&&n.props.buttons.find((function(e){return n.props.activeCommand===e.id})).icon||n.props.icon})),xr(Cr(n),"onExpandableToolClick",(function(){n.props.onGroupMenuClick&&n.props.onGroupMenuClick(),n.setState({isExpanded:!n.state.isExpanded})})),xr(Cr(n),"onOverlayHide",(function(){n.setState({isExpanded:!1})})),n.state={isExpanded:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=o.a.createElement(S,{key:"menu-button",type:"tool",label:e.props.label,icon:e.activeIcon(),className:"toolbar-button expandableToolMenu",isActive:e.isActive(),isExpandable:!0,isExpanded:e.state.isExpanded});return o.a.createElement(k.a,{key:"menu-button",trigger:"click",placement:"bottom",rootClose:!0,handleHide:this.onOverlayHide,onClick:this.onExpandableToolClick,overlay:this.toolbarMenuOverlay()},t)}}])&&Pr(n.prototype,r),a&&Pr(n,a),t}(o.a.Component);xr(kr,"propTypes",{label:s.a.string.isRequired,buttons:s.a.arrayOf(s.a.shape({id:s.a.string,label:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})).isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),onGroupMenuClick:s.a.func,activeCommand:s.a.string}),xr(kr,"defaultProps",{buttons:[],icon:"ellipse-circle",label:"More"});var jr=kr;function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(){return(Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ar(e,t){return!t||"object"!==Rr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fr=function(e){function t(){return Mr(this,t),Ar(this,Lr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.buttons.map((function(t,n){return t.buttons&&Array.isArray(t.buttons)?o.a.createElement(jr,Nr({key:"expandable-".concat(n)},t,{activeCommand:t.activeButton})):o.a.createElement(S,Nr({key:n},t,{isActive:e.props.activeButtons.includes(t.id)}))}));return o.a.createElement("div",{className:g()("ToolbarSection",this.props.className)},t)}}])&&_r(n.prototype,r),a&&_r(n,a),t}(a.PureComponent);Vr(Fr,"defaultProps",{className:""}),Vr(Fr,"propTypes",{buttons:s.a.arrayOf(s.a.shape({id:s.a.string,label:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})]),buttons:s.a.arrayOf(s.a.shape({}))})).isRequired,activeButtons:s.a.arrayOf(s.a.string).isRequired,className:s.a.string});var Br=n(640),qr=(n(873),function(e){var t=e.error,n=e.componentStack;e.resetErrorBoundary;return o.a.createElement("div",{className:"ErrorFallback",role:"alert"},o.a.createElement("p",null,"Something went wrong."),o.a.createElement("pre",null,t.message),o.a.createElement("pre",null,n))}),zr=function(e){var t=e.context,n=void 0===t?"OHIF":t,r=e.onReset,a=void 0===r?function(){}:r,i=e.onError,s=void 0===i?function(){}:i,c=e.fallbackComponent,u=e.children;return o.a.createElement(Br.ErrorBoundary,{FallbackComponent:c||qr,onReset:function(){a()},onError:function(e,t){console.error("".concat(n," Error Boundary"),e,t),s(e,t)}},u)};zr.propTypes={context:s.a.string,onReset:s.a.func,onError:s.a.func,children:s.a.node.isRequired,fallbackComponent:s.a.oneOfType([s.a.node,s.a.func,s.a.element])};var Hr=zr,Wr=n(246),Gr=n.n(Wr);function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$r(n,!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Kr=function(e,t,n){if((t||n)&&e){var r=e.findIndex((function(e){return e.matches}));return r>=0&&void 0!==t[r]?t[r]:n}},Zr=function(e){return e&&e.map((function(e){return window.matchMedia(e)}))},Qr=function(e,t,n){var r=Xr(Object(a.useState)((function(){var r=Zr(e);return{mediaQueryMap:r,displaySize:Kr(r,t,n),mediaQueriesStringList:e,mediaTypesAliases:t,defaultMediaType:n}})),2),o=r[0],i=r[1],s=Object(a.useRef)(!1),c=Object(a.useCallback)((function(e){if(e.matches){var t=function(e,t){var n=e.media,r=t.mediaQueriesStringList;return t.mediaTypesAliases[r.findIndex((function(e){return window.matchMedia(e).media===n}))]}(e,o);n=t,s.current&&i(Jr({},o,{displaySize:n}))}var n}),[]);return Object(a.useEffect)((function(){var n=o.mediaQueriesStringList,r=o.mediaTypesAliases;(e&&!Gr()(e,n)||t&&!Gr()(t,r))&&function(e){var t=e.mediaQueriesStringList,n=e.mediaTypesAliases,r=e.defaultMediaType,a=Zr(t),c=Kr(a,n,r);s.current&&i(Jr({},o,{mediaQueriesStringList:t,mediaTypesAliases:n,displaySize:c,mediaQueryMap:a}))}({mediaQueriesStringList:e,mediaTypesAliases:t})}),[e,t]),Object(a.useEffect)((function(){o.mediaQueryMap.forEach((function(e){e.removeListener(c),e.addListener(c)}))}),[o.mediaQueryMap]),Object(a.useEffect)((function(){return s.current=!0,function(){s.current=!1,o.mediaQueryMap.forEach((function(e){e.removeListener(c)}))}}),[]),o.displaySize};function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ta(e,t){var n=ea(Object(a.useState)(e),2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e]),r}n(495);function na(e){return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ia(e,t){return(ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sa=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=aa(t).call(this,e),n=!a||"object"!==na(a)&&"function"!=typeof a?oa(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(oa(n),"handleChange",(function(e){var t=e.target.value;n.setState({value:t}),n.props.onChange&&n.props.onChange(t)})),n.state={value:n.props.value},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("select",{className:"select-ohif",value:this.state.selected,onChange:this.handleChange},this.props.options.map((function(e){var t=e.key,n=e.value;return o.a.createElement("option",{key:t,value:n},t)})))}}])&&ra(n.prototype,r),a&&ra(n,a),t}(a.Component);sa.propTypes={options:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,value:s.a.string.isRequired})),value:s.a.string,onChange:s.a.func};var ca=sa;function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var va=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=pa(t).call(this,e),n=!a||"object"!==ua(a)&&"function"!=typeof a?ma(r):a,ha(ma(n),"handleChange",(function(e){var t=e.target.value;n.setState({value:t}),n.props.onChange&&n.props.onChange(t)})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"select-ohif-container"},this.props.label&&o.a.createElement("label",{className:"select-ohif-label",htmlFor:this.id},this.props.label),o.a.createElement("select",la({className:"form-control select-ohif"},this.props),this.props.options.map((function(e){var t=e.key,n=e.value;return o.a.createElement("option",{key:t,value:n},t)}))))}}])&&fa(n.prototype,r),a&&fa(n,a),t}(a.Component);ha(va,"propTypes",{options:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,value:s.a.string.isRequired})),value:s.a.string,onChange:s.a.func});n(874);function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ba(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sa(e){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e,t){return(wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ba(this,Sa(t).call(this,e))).state={value:n.props.text},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wa(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("label",{className:"label-ohif",htmlFor:this.props.for},this.props.text)}}])&&ya(n.prototype,r),a&&ya(n,a),t}(o.a.Component)).propTypes={text:s.a.string.isRequired,for:s.a.string};n(875);function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Da(e,t){return(Da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ca=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ea(t).call(this,e),n=!a||"object"!==Oa(a)&&"function"!=typeof a?Pa(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pa(n),"handleChange",(function(e){n.setState({value:e.target.value}),n.props.onChange&&n.props.onChange(e)})),n.state={value:e.value||0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Da(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{type:"range",value:this.state.value,min:this.props.min,max:this.props.max,step:this.props.step||1,onChange:this.handleChange,id:this.props.id,className:"range"}),this.props.showPercentage&&o.a.createElement("span",null,"".concat(this.state.value,"%")),this.props.showValue&&o.a.createElement("span",null,this.props.valueRenderer?this.props.valueRenderer(this.state.value):this.state.value))}}])&&Ia(n.prototype,r),a&&Ia(n,a),t}(a.Component);Ca.propTypes={value:s.a.number,min:s.a.number.isRequired,max:s.a.number.isRequired,step:s.a.number,id:s.a.string,valueRenderer:s.a.func,onChange:s.a.func,showPercentage:s.a.bool,showValue:s.a.bool},Ca.defaultProps={showPercentage:!1,showValue:!1};n(876);function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ka(e){return(ka=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=ka(t).call(this,e),n=!a||"object"!==Ta(a)&&"function"!=typeof a?ja(r):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ja(n),"handleChange",(function(e){n.setState({value:e.target.value}),n.props.onChange&&n.props.onChange()})),n.state={value:n.props.value},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("textarea",{className:"textarea-ohif",value:this.state.value,Rows:this.props.Rows,cols:this.props.cols,onChange:this.handleChange,id:this.props.id})}}])&&xa(n.prototype,r),a&&xa(n,a),t}(o.a.Component)).propTypes={value:s.a.string,Rows:s.a.number,cols:s.a.number,id:s.a.string,onChange:s.a.func};n(877);function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ma(){return(Ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e,t){return!t||"object"!==Na(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Va(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fa=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Aa(this,La(t).call(this,e))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"input-ohif-container"},this.props.label&&o.a.createElement("label",{className:"input-ohif-label",htmlFor:this.props.id},this.props.label),o.a.createElement("input",Ma({type:this.props.type,id:this.props.id,className:"form-control input-ohif"},this.props)))}}])&&_a(n.prototype,r),a&&_a(n,a),t}(o.a.Component);Va(Fa,"propTypes",{value:s.a.oneOfType([s.a.string,s.a.number]),id:s.a.string,label:s.a.string,type:s.a.string}),Va(Fa,"defaultProps",{value:"",id:"TextInput-".concat((new Date).toTimeString()),label:void 0,type:"text"});n(878);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wa(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?$a(e):t}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xa=function(e){function t(){var e,n;za(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return Ya($a(n=Wa(this,(e=Ga(t)).call.apply(e,[this].concat(a)))),"state",{open:!1}),Ya($a(n),"getListItems",(function(){var e=n.props,t=e.list;e.align;return t.map((function(e,t){var r=e.icon,a=e.title,i=e.link,s=e.onClick;return i?o.a.createElement("a",{href:i||"#",key:t,className:"dd-item",onClick:function(){return n.handleOnClick(s)}},r&&o.a.createElement(h.a,qa({},r,{className:"dd-item-icon"})),o.a.createElement("span",null,a)):o.a.createElement("button",{key:t,className:"dd-item","data-cy":"dd-item-menu",onClick:function(){return n.handleOnClick(s)}},r&&o.a.createElement(h.a,qa({},r,{className:"dd-item-icon"})),o.a.createElement("span",null,a))}))})),Ya($a(n),"renderList",(function(){var e=n.props.align;return n.state.open?o.a.createElement("div",{className:"dd-menu-list ".concat(e||"left")},n.getListItems()):null})),Ya($a(n),"handleOnClick",(function(e){n.toggleList(),e&&e()})),Ya($a(n),"handleMouseClick",(function(e){n.node.contains(e.target)||n.toggleList()})),Ya($a(n),"renderTitleElement",(function(){var e=n.props,t=e.titleElement,r=e.title;return t||o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{className:"dd-title"},r),o.a.createElement("span",{className:"dd-caret-down"}))})),Ya($a(n),"toggleList",(function(){var e=n.state.open,t=!0;document.addEventListener("mousedown",n.handleMouseClick,!1),e&&(document.removeEventListener("mousedown",n.handleMouseClick,!1),t=!1),n.setState({open:t})})),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"dd-menu","data-cy":"options-menu",ref:function(t){return e.node=t}},o.a.createElement("div",{className:"dd-menu-toggle",onClick:this.toggleList},this.renderTitleElement()),this.renderList())}}])&&Ha(n.prototype,r),a&&Ha(n,a),t}(a.Component);function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ya(Xa,"propTypes",{titleElement:s.a.node,title:s.a.string,align:s.a.oneOf(["left","center","right"]),list:s.a.arrayOf(s.a.shape({title:s.a.string.isRequired,icon:s.a.object,onClick:s.a.func,link:s.a.string}))});var ao=function(e){function t(){return Za(this,t),eo(this,to(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.isPlaying?"stop":"play";return o.a.createElement("div",{className:"btn-group"},o.a.createElement("button",{id:"playClip",type:"button",className:"imageViewerCommand btn btn-sm btn-default","data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:"Play/Stop Clip"},o.a.createElement(h.a,{name:e})),o.a.createElement("button",{id:"toggleCineDialog",type:"button",className:"imageViewerCommand btn btn-sm btn-default","data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:"Toggle CINE Dialog"},o.a.createElement(h.a,{name:"youtube"})))}}])&&Qa(n.prototype,r),a&&Qa(n,a),t}(a.Component);function oo(e){var t=g()(e.className,"btn btn-sm btn-default");return o.a.createElement("button",{id:e.id,type:"button",className:t,"data-container":"body","data-toggle":"tooltip","data-placement":"bottom",title:e.title},e.icon&&o.a.createElement(h.a,{name:e.icon}))}ro(ao,"propTypes",{isPlaying:s.a.bool.isRequired}),ro(ao,"defaultProps",{isPlaying:!1}),oo.propTypes={icon:s.a.string,title:s.a.string,className:s.a.string,id:s.a.string,onClick:s.a.func};var io=oo;function so(e){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function co(){return(co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fo(e,t){return!t||"object"!==so(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mo(e,t){return(mo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vo=function(e){function t(){return uo(this,t),fo(this,po(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mo(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t;return this.props.includePlayClipButton&&(e=o.a.createElement(ao,null)),this.props.includeLayoutButton&&(t=o.a.createElement(x,null)),o.a.createElement("div",{id:"toolbar"},o.a.createElement("div",{className:"btn-group"},this.props.buttons.map((function(e,t){return o.a.createElement(io,co({},e,{key:t}))})),e,t))}}])&&lo(n.prototype,r),a&&lo(n,a),t}(a.Component);ho(vo,"propTypes",{buttons:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,title:s.a.string.isRequired,icon:s.a.oneOfType([s.a.string,s.a.shape({name:s.a.string.isRequired})])})).isRequired,includeLayoutButton:s.a.bool.isRequired,includePlayClipButton:s.a.bool.isRequired}),ho(vo,"defaultProps",{buttons:[{id:"wwwc",title:"WW/WC",className:"imageViewerTool",icon:"sun"},{id:"wwwcRegion",title:"Window by Region",className:"imageViewerTool",icon:"stop"},{id:"magnify",title:"Magnify",className:"imageViewerTool",icon:"circle"},{id:"annotate",title:"Annotation",className:"imageViewerTool",icon:"arrows-alt-h"},{id:"invert",title:"Invert",className:"imageViewerCommand",icon:"adjust"},{id:"zoom",title:"Zoom",className:"imageViewerTool",icon:"search-plus"},{id:"pan",title:"Pan",className:"imageViewerTool",icon:"arrows"},{id:"stackScroll",title:"Stack Scroll",className:"imageViewerTool",icon:"bars"},{id:"length",title:"Length Measurement",className:"imageViewerTool",icon:"arrows-alt-v"},{id:"angle",title:"Angle Measurement",className:"imageViewerTool",icon:"fa fa-angle-left"},{id:"dragProbe",title:"Pixel Probe",className:"imageViewerTool",icon:"fa fa-dot-circle-o"},{id:"ellipticalRoi",title:"Elliptical ROI",className:"imageViewerTool",icon:"circle-o"},{id:"rectangleRoi",title:"Rectangle ROI",className:"imageViewerTool",icon:"square-o"},{id:"resetViewport",title:"Reset Viewport",className:"imageViewerCommand",icon:"reset"},{id:"clearTools",title:"Clear tools",className:"imageViewerCommand",icon:"trash"}],includeLayoutButton:!0,includePlayClipButton:!0});var go=n(209),yo=n(669),bo=n(670),So=!(!("ontouchstart"in window)&&!navigator.maxTouchPoints);function wo(e){var t=So?bo.a:yo.a,n=So?{enableMouseEvents:!0}:{};return function(r){return o.a.createElement(go.b,{backend:t,opts:n},o.a.createElement(e,r))}}function Oo(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Io(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Oo(o,r,a,i,s,"next",e)}function s(e){Oo(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Po=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return new Promise((function(r,a){e().then(r).catch((function(o){setTimeout((function(){1!==t?retry(e,t-1,n).then(r,a):a(o)}),n)}))}))},Do=function(e,t){return t({component:Fn})},Co=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onError:Do};return function(n){var r=Eo(Object(a.useState)({component:null}),2),i=r[0],s=r[1],c=function(e){return"function"==typeof e};Object(a.useEffect)((function(){(function(){var n=Io(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:r=n.sent,a=r.default,s({component:a}),t.onLoaded&&c(t.onLoaded)&&t.onLoaded(a),n.next=16;break;case 9:if(n.prev=9,n.t0=n.catch(0),console.error("[AsyncComponent] Failed to import chunk:",n.t0),!t.onError||!c(t.onError)){n.next=15;break}return t.onError(n.t0,s),n.abrupt("return");case 15:n.t0.toString().indexOf("ChunkLoadError")>-1&&(console.error("[AsyncComponent] Reloading due to chunk error"),window.location.reload());case 16:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}})()()}),[]);var u=i.component;return u?o.a.createElement(u,n):null}};n.d(t,"b",(function(){return He})),n.d(t,"G",(function(){return Fa})),n.d(t,"c",(function(){return Ze})),n.d(t,"d",(function(){return Un})),n.d(t,"K",(function(){return st})),n.d(t,"h",(function(){return jr})),n.d(t,"j",(function(){return h.a})),n.d(t,"l",(function(){return x})),n.d(t,"n",(function(){return Ie})),n.d(t,"r",(function(){return k.a})),n.d(t,"s",(function(){return Or})),n.d(t,"t",(function(){return Ca})),n.d(t,"u",(function(){return Yt})),n.d(t,"v",(function(){return ne})),n.d(t,"w",(function(){return va})),n.d(t,"q",(function(){return ca})),n.d(t,"x",(function(){return wn})),n.d(t,"y",(function(){return jn})),n.d(t,"A",(function(){return nr})),n.d(t,"D",(function(){return fe})),n.d(t,"E",(function(){return F})),n.d(t,"B",(function(){return ke})),n.d(t,"C",(function(){return Re})),n.d(t,"i",(function(){return Me})),n.d(t,"k",(function(){return _e})),n.d(t,"F",(function(){return mr})),n.d(t,"H",(function(){return S})),n.d(t,"I",(function(){return j.a})),n.d(t,"a",(function(){return De})),n.d(t,"z",(function(){return y.d})),n.d(t,"Q",(function(){return y.f})),n.d(t,"o",(function(){return y.c})),n.d(t,"S",(function(){return y.h})),n.d(t,"p",(function(){return An})),n.d(t,"e",(function(){return y.a})),n.d(t,"R",(function(){return y.g})),n.d(t,"f",(function(){return Hr})),n.d(t,"g",(function(){return Fn})),n.d(t,"m",(function(){return y.b})),n.d(t,"O",(function(){return y.e})),n.d(t,"N",(function(){return ta})),n.d(t,"P",(function(){return Qr})),n.d(t,"J",(function(){return wo})),n.d(t,"L",(function(){return Co})),n.d(t,"M",(function(){return Po}))},,function(e,t,n){"use strict";var r=n(643),a=n(1057),o=n(1058),i=n(256),s=n(257),c=n(148),u=n(17),l=n(260),f=n(87),p=n(8),m=n.n(p),d=n(7),h=n.n(d);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g={metadataProvider:f.a,getBoundingBox:function(e,t,n,r,a){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var o=h.a.textStyle.getFont(),i=h.a.textStyle.getFontSize();e.save(),e.font=o,e.textBaseline="top";var s=0;t.forEach((function(t){var n=e.measureText(t).width;s=Math.max(s,n)}));var c={width:s+10,height:5+t.length*(i+5)};return a&&a.centering&&!0===a.centering.x&&(n-=c.width/2),a&&a.centering&&!0===a.centering.y&&(r-=c.height/2),c.left=n,c.top=r,e.restore(),c},pixelToPage:function(e,t){var n=m.a.getEnabledElement(e),r={x:0,y:0};if(!n||"object"!==v(t))return r;var a=n.canvas,o=$(a).offset();r.x+=o.left,r.y+=o.top;var i=m.a.pixelToCanvas(e,t);return r.x+=i.x,r.y+=i.y,r},repositionTextBox:function(e,t,n){if(t.isCreating){var r=e.element,a=m.a.getEnabledElement(r),o=a.image,i=OHIF.uiSettings.autoPositionMeasurementsTextCallOuts,s={T:!i||i.includes("T"),R:!i||i.includes("R"),B:!i||i.includes("B"),L:!i||i.includes("L")},c=function(e,t){var n={};n.x=e.x/2,n.y=e.y/2;var r={};r.x=t.x<n.x?-1:1,r.y=t.y<n.y?-1:1;for(var a=r.x<0?t.x:e.x-t.x,o=(r.y<0?t.y:e.y-t.y)<a?"y":"x",i={"x-1":"L","y-1":"T",x1:"R",y1:"B"},c=0;c<4&&!s[i[o+r[o]]];)r[o]*=-1,o="x"===o?"y":"x",c++;return{directions:r,cornerAxis:o}},u=function(e,t,n){var r=t[e],a=n[e],o=Math.min(r,a);return o+(Math.max(r,a)-o)/2},l=t.handles,f=l.textBox,p=$(a.canvas),d=p.outerWidth(),h=p.outerHeight(),v=p.offset(),g={x:d,y:h},y={};y.x=f.boundingBox.width,y.y=f.boundingBox.height;var b=function(e){var t=l[e];return{x:t.x,y:t.y}},S=b("start"),w=b("end"),O={};O.x=u("x",S,w),O.y=u("y",S,w);var I={};I.x=o.width,I.y=o.height;for(var E,P=c(I,O),D=P.directions,C=P.cornerAxis,T=function(e,t,n){var r=e.element,a=e.canvas,o=e.image,i=m.a.pixelToCanvas(r,{x:0,y:0}),c=m.a.pixelToCanvas(r,{x:o.width,y:o.height}),u=$(a),l=u.outerWidth(),f=u.outerHeight(),p={};return p["x-1"]=s.L&&i.x>t,p["y-1"]=s.T&&i.y>n,p.x1=s.R&&l-c.x>t,p.y1=s.B&&f-c.y>n,p}(a,y.x,y.y),x=Object.assign({},D),k=C,j=!1,R=0;R<4;){if(T[k+x[k]]){j=!0;break}x[k]*=-1,k="x"===k?"y":"x",R++}if(j)E=(D=Object.assign({},D,x))[C=k]<0?0:I[C];else{var N=c(I=Object.assign({},I,g),m.a.pixelToCanvas(r,O));D=N.directions,C=N.cornerAxis;var M={x:D.x<0?v.left:v.left+d,y:D.y<0?v.top:v.top+h};E=m.a.pageToPixel(r,M.x,M.y)[C]}var _="x"===C?"y":"x",A=function(e,t){var n=m.a.pageToPixel(e,0,0),r=m.a.pageToPixel(e,t.x,t.y);return{x:r.x-n.x,y:r.y-n.y}}(r,y);f[C]=E,f[_]=O[_];var L=function(e,t,n,r){var a=(e=e||{}).centering||{},o=!!a.x,i=!!a.y,s=r.x/2,c=r.y/2,u={x:[],y:[]};if("x"===t){var l=i?0:c;u.x[-1]=o?s:0,u.x[1]=o?-s:-r.x,u.y[-1]=l,u.y[1]=l}else{var f=o?0:s;u.x[-1]=f,u.x[1]=f,u.y[-1]=i?c:0,u.y[1]=i?-c:-r.y}return u}(n,C,0,A);f[C]+=L[C][D[C]];var U=m.a.pixelToCanvas(r,f),V={x:U.x+y.x,y:U.y+y.y},F={x0:v.left,y0:v.top,x1:v.left+d,y1:v.top+h};if(U[_]<0){var B=F.x0,q=F.y0,z=m.a.pageToPixel(r,B,q);f[_]=z[_]}else if(V[_]>g[_]){var H=F.x1-y.x,W=F.y1-y.y,G=m.a.pageToPixel(r,H,W);f[_]=G[_]}}}},y=n(41),b=n(95),S=n(118),w=n(149),O=n(113),I=n.n(O);I.a.validators.equals=function(e,t,n,r){if(t&&e!==t.value)return n+"must equal "+t.value},I.a.validators.doesNotEqual=function(e,t,n){if(t&&e===t.value)return n+"cannot equal "+t.value},I.a.validators.contains=function(e,t,n){if(t&&e.indexOf&&-1===e.indexOf(t.value))return n+"must contain "+t.value},I.a.validators.doesNotContain=function(e,t,n){if(t&&e.indexOf&&-1!==e.indexOf(t.value))return n+"cannot contain "+t.value},I.a.validators.startsWith=function(e,t,n){if(t&&e.startsWith&&!e.startsWith(t.value))return n+"must start with "+t.value},I.a.validators.endsWith=function(e,t,n){if(t&&e.endsWith&&!e.endsWith(t.value))return n+"must end with "+t.value};var E={};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=b.a.InstanceMetadata,C=function(e,t){if(!(e instanceof D))throw new y.a("HPMatcher::match metadataInstance must be an instance of InstanceMetadata");var n={format:"grouped"},r={passed:[],failed:[]},a=!1,o=0;return t.forEach((function(t){var i=t.attribute;if(E.hasOwnProperty(i)){var s=E[i];e.setCustomAttribute(i,s.callback(e))}var c,u=P({},i,t.constraint),l=P({},i,e.customAttributeExists(i)?e.getCustomAttribute(i):e.getTagValue(i));try{c=I()(l,u,[n])}catch(e){c=["Something went wrong during validation.",e]}c?(t.required&&(a=!0),r.failed.push({rule:t,errorMessages:c})):(o+=parseInt(t.weight,10),r.passed.push({rule:t}))})),a&&(o=0),{score:o,details:r,requiredFailed:a}},T=n(9),x=n(175),k={};var j=[{id:"equals",name:"= (Equals)",validator:"equals",validatorOption:"value",description:"The attribute must equal this value."},{id:"doesNotEqual",name:"!= (Does not equal)",validator:"doesNotEqual",validatorOption:"value",description:"The attribute must not equal this value."},{id:"contains",name:"Contains",validator:"contains",validatorOption:"value",description:"The attribute must contain this value."},{id:"doesNotContain",name:"Does not contain",validator:"doesNotContain",validatorOption:"value",description:"The attribute must not contain this value."},{id:"startsWith",name:"Starts with",validator:"startsWith",validatorOption:"value",description:"The attribute must start with this value."},{id:"endsWith",name:"Ends with",validator:"endsWith",validatorOption:"value",description:"The attribute must end with this value."},{id:"onlyInteger",name:"Only Integers",validator:"numericality",validatorOption:"onlyInteger",description:"Real numbers won't be allowed."},{id:"greaterThan",name:"> (Greater than)",validator:"numericality",validatorOption:"greaterThan",description:"The attribute has to be greater than this value."},{id:"greaterThanOrEqualTo",name:">= (Greater than or equal to)",validator:"numericality",validatorOption:"greaterThanOrEqualTo",description:"The attribute has to be at least this value."},{id:"lessThanOrEqualTo",name:"<= (Less than or equal to)",validator:"numericality",validatorOption:"lessThanOrEqualTo",description:"The attribute can be this value at the most."},{id:"lessThan",name:"< (Less than)",validator:"numericality",validatorOption:"lessThan",description:"The attribute has to be less than this value."},{id:"odd",name:"Odd",validator:"numericality",validatorOption:"odd",description:"The attribute has to be odd."},{id:"even",name:"Even",validator:"numericality",validatorOption:"even",description:"The attribute has to be even."}];Object.freeze(j);var R=n(34);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=/^equals$/,_=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(R.a)(),this.weight=a||1,t&&(this.attribute=t),n&&(this.constraint=n),this.required=void 0!==r&&r,this._constraintInfo=void 0,this._validatorAndValue=void 0}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){this.id=e.id||Object(R.a)(),this.required=e.required,this.weight=e.weight,this.attribute=e.attribute,this.constraint=e.constraint}},{key:"getConstraintInfo",value:function(){var e=this._constraintInfo;if(void 0!==e)return e;var t=Object.keys(this.constraint)[0];return void 0!==t&&(e=j.find((function(e){return t===e.id}))),this._constraintInfo=e,e}},{key:"isRuleForPrior",value:function(){return"abstractPriorValue"===this.attribute}},{key:"getNumberOfPriorsReferenced",value:function(){if(!this.isRuleForPrior())return-1;var e=this.getConstraintValidatorAndValue(),t=e.value,n=e.validator,r=parseInt(t,10)||0;return M.test(n)?r<0?1:r:0}},{key:"getConstraintValidatorAndValue",value:function(){var e=this._validatorAndValue;if(void 0!==e)return e;var t=this.getConstraintInfo();if(void 0!==t){var n=t.validator,r=this.constraint[n];r&&(e={value:r[t.validatorOption],validator:t.id},this._validatorAndValue=e)}return e}}])&&N(t.prototype,n),r&&N(t,r),e}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(){return L(this,t),U(this,V(t).apply(this,arguments))}return F(t,e),t}(_),z=function(e){function t(){return L(this,t),U(this,V(t).apply(this,arguments))}return F(t,e),t}(_),H=function(e){function t(){return L(this,t),U(this,V(t).apply(this,arguments))}return F(t,e),t}(_),W=function(e){function t(){return L(this,t),U(this,V(t).apply(this,arguments))}return F(t,e),t}(_),G=function(e,t){return!(!e||!e.length)&&(e.forEach((function(e,n){if(e===t)return indexToRemove=n,!1})),void 0!==indexToRemove&&(e.splice(indexToRemove,1),!0))};function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.properties=n}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){this.type=e.type,this.properties=e.properties}},{key:"getLayoutTemplateName",value:function(){switch(this.type){case"grid":return"gridLayout"}}},{key:"getNumViewports",value:function(){switch(this.type){case"grid":return this.properties.Rows*this.properties.Columns}}}])&&J(t.prototype,n),r&&J(t,r),e}();function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewportSettings={},this.imageMatchingRules=[],this.seriesMatchingRules=[],this.studyMatchingRules=[]}var t,n,r;return t=e,(n=[{key:"fromObject",value:function(e){var t=this;e.imageMatchingRules&&e.imageMatchingRules.forEach((function(e){var n=new W;n.fromObject(e),t.imageMatchingRules.push(n)})),e.seriesMatchingRules&&e.seriesMatchingRules.forEach((function(e){var n=new H;n.fromObject(e),t.seriesMatchingRules.push(n)})),e.studyMatchingRules&&e.studyMatchingRules.forEach((function(e){var n=new z;n.fromObject(e),t.studyMatchingRules.push(n)})),e.viewportSettings&&(this.viewportSettings=e.viewportSettings)}},{key:"removeRule",value:function(e){var t;e instanceof z?t=this.studyMatchingRules:e instanceof H?t=this.seriesMatchingRules:e instanceof W&&(t=this.imageMatchingRules),G(t,e)}}])&&X(t.prototype,n),r&&X(t,r),e}();function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Q=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(R.a)(),this.name=n,this.viewportStructure=t,this.viewports=[],this.createdDate=new Date}var t,n,r;return t=e,(n=[{key:"createClone",value:function(t){var n=Object.assign({},this),r=new e;return n.id=r.id,r.fromObject(n),t&&(r.name=t),r}},{key:"fromObject",value:function(e){var t=this;this.id=e.id||Object(R.a)(),this.name=e.name,this.viewportStructure=new Y,this.viewportStructure.fromObject(e.viewportStructure),e.viewports&&e.viewports.forEach((function(e){var n=new K;n.fromObject(e),t.viewports.push(n)}))}}])&&Z(t.prototype,n),r&&Z(t,r),e}(),ee=n(45);function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Object(R.a)(),this.locked=!1,this.hasUpdatedPriorsInformation=!1,this.name=t,this.createdDate=new Date,this.modifiedDate=new Date,ee.a.userLoggedIn&&ee.a.userLoggedIn()&&(this.createdBy=ee.a.getUserId(),this.modifiedBy=ee.a.getUserId()),this.availableTo=new Set,this.editableBy=new Set,this.protocolMatchingRules=[],this.stages=[],this.numberOfPriorsReferenced=-1}var t,n,r;return t=e,(n=[{key:"getNumberOfPriorsReferenced",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!0!==e?this.numberOfPriorsReferenced:-1;return t>-1||(t=0,this.stages.forEach((function(e){e.viewports&&e.viewports.forEach((function(e){e.studyMatchingRules&&e.studyMatchingRules.forEach((function(e){var n=e.getNumberOfPriorsReferenced();n>t&&(t=n)}))}))})),this.numberOfPriorsReferenced=t),t}},{key:"updateNumberOfPriorsReferenced",value:function(){this.getNumberOfPriorsReferenced(!0)}},{key:"protocolWasModified",value:function(){ee.a.userLoggedIn&&ee.a.userLoggedIn()&&(this.modifiedBy=ee.a.getUserId()),this.hasUpdatedPriorsInformation=!1,this.updateNumberOfPriorsReferenced(),this.modifiedDate=new Date}},{key:"fromObject",value:function(e){var t=this;this.id=e.id||Object(R.a)(),this.name=e.name,this.locked=!!e.locked,e.protocolMatchingRules&&e.protocolMatchingRules.forEach((function(e){var n=new q;n.fromObject(e),t.protocolMatchingRules.push(n)})),e.stages&&e.stages.forEach((function(e){var n=new Q;n.fromObject(e),t.stages.push(n)}))}},{key:"createClone",value:function(t){var n=Object.assign({},this),r=new e;return n.id=r.id,r.fromObject(n),t&&(r.name=t),r.locked=!1,r}},{key:"addStage",value:function(e){this.stages.push(e),this.protocolWasModified()}},{key:"addProtocolMatchingRule",value:function(e){this.protocolMatchingRules.push(e),this.protocolWasModified()}},{key:"removeProtocolMatchingRule",value:function(e){G(this.protocolMatchingRules,e)&&this.protocolWasModified()}}])&&te(t.prototype,n),r&&te(t,r),e}();function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=b.a.StudyMetadata,ce=b.a.InstanceMetadata,ue=function(){function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(ae(this,e),ie(this,"matchedProtocols",new Map),ie(this,"matchedProtocolScores",{}),!(a instanceof S.a))throw new y.a("ProtocolEngine::constructor studyMetadataSource is not an instance of StudyMetadataSource");if(!(n instanceof Array||n.every((function(e){return e instanceof se}))))throw new y.a("ProtocolEngine::constructor studies is not an array or it's items are not instances of StudyMetadata");this.protocolStore=t,this.studies=n,this.priorStudies=r instanceof Map?r:new Map,this.studyMetadataSource=a,this.options=o,this.reset(),this.newStageIds=[]}var t,n,r;return t=e,(n=[{key:"reset",value:function(){var e=this.getBestProtocolMatch();this.setHangingProtocol(e)}},{key:"getCurrentStageModel",value:function(){return this.protocol.stages[this.stage]}},{key:"findMatchByStudy",value:function(e){T.a.trace("ProtocolEngine::findMatchByStudy");var t=[],n=e.getFirstInstance(),r=this.getNumberOfAvailablePriors(e.getObjectID());return this.protocolStore.getProtocol().forEach((function(e){var a=e.protocolMatchingRules.slice();if(a&&!(e.getNumberOfPriorsReferenced()>r)){var o=C(n,a).score;o>0&&t.push({score:o,protocol:e})}})),t.length?(t.sort((function(e,t){return t.score-e.score})),T.a.trace("ProtocolEngine::findMatchByStudy matched",t),t):[{score:1,protocol:this.protocolStore.getProtocol("defaultProtocol")}]}},{key:"_clearMatchedProtocols",value:function(){this.matchedProtocols.clear(),this.matchedProtocolScores={}}},{key:"updateProtocolMatches",value:function(){var e=this;T.a.trace("ProtocolEngine::updateProtocolMatches"),this._clearMatchedProtocols(),this.studies.forEach((function(t){e.findMatchByStudy(t).forEach((function(t){var n=t.protocol;n&&(e.matchedProtocols.has(n.id)||(T.a.trace("ProtocolEngine::updateProtocolMatches inserting protocol match",t),e.matchedProtocols.set(n.id,n),e.matchedProtocolScores[n.id]=t.score))}))}))}},{key:"_largestKeyByValue",value:function(e){return Object.keys(e).reduce((function(t,n){return e[t]>e[n]?t:n}))}},{key:"_getHighestScoringProtocol",value:function(){if(!Object.keys(this.matchedProtocolScores).length)return this.protocolStore.getProtocol("defaultProtocol");var e=this._largestKeyByValue(this.matchedProtocolScores);return this.matchedProtocols.get(e)}},{key:"getBestProtocolMatch",value:function(){this.updateProtocolMatches();var e=this._getHighestScoringProtocol();return T.a.trace("ProtocolEngine::getBestProtocolMatch bestMatch",e),e}},{key:"getNumberOfAvailablePriors",value:function(e){return this.getAvailableStudyPriors(e).length}},{key:"getAvailableStudyPriors",value:function(e){var t=this.priorStudies.get(e);return t instanceof Array?t:[]}},{key:"matchImages",value:function(e,t){var n=this;T.a.trace("ProtocolEngine::matchImages");var r,a=e.studyMatchingRules,o=e.seriesMatchingRules,i=e.imageMatchingRules,s=[],c=this.studies[0],u=c.getFirstInstance(),l=0,f=0;c.setCustomAttribute("abstractPriorValue",0),u instanceof ce&&u.setCustomAttribute("abstractPriorValue",0),a.forEach((function(e){if("abstractPriorValue"===e.attribute){var a,o=Object.keys(e.constraint)[0],i=Object.keys(e.constraint[o])[0],s=e.constraint[o][i];if(s=parseInt(s,10),r||(r=n.getAvailableStudyPriors(c.getObjectID())),-1===s)a=r[r.length-1];else{var u=Math.max(s-1,0);a=r[u]}if(!a instanceof se)return;var l=a.getObjectID();if(n.studies.find((function(e){return e.getObjectID()===l})))return;n.studyMetadataSource.loadStudy(a).then((function(e){e.setCustomAttribute("abstractPriorValue",s);var r=e.getFirstInstance();r instanceof ce&&r.setCustomAttribute("abstractPriorValue",s),n.studies.push(e),n.updateViewports(t)}),(function(e){throw T.a.warn(e),new y.a("ProtocolEngine::matchImages could not get study metadata for the Study with the following ObjectID: ".concat(l))}))}})),this.studies.forEach((function(e){var t=C(e.getFirstInstance(),a);!0===t.requiredFailed||t.score<l||(l=t.score,e.forEachSeries((function(n){var r=C(n.getFirstInstance(),o);!0===r.requiredFailed||r.score<f||(f=r.score,n.forEachInstance((function(a,o){if(Object(w.a)(a.getTagValue("SOPClassUID"))||a.getTagValue("Rows")){var c=C(a,i);if(!0!==c.requiredFailed){var u={passed:[],failed:[]};u.passed=u.passed.concat(c.details.passed),u.passed=u.passed.concat(r.details.passed),u.passed=u.passed.concat(t.details.passed),u.failed=u.failed.concat(c.details.failed),u.failed=u.failed.concat(r.details.failed),u.failed=u.failed.concat(t.details.failed);var l=c.score+r.score+t.score,f=a.getSOPInstanceUID(),p={StudyInstanceUID:e.getStudyInstanceUID(),SeriesInstanceUID:n.getSeriesInstanceUID(),SOPInstanceUID:f,currentImageIdIndex:o,matchingScore:l,matchDetails:u,sortingInfo:{score:l,study:a.getTagValue("StudyDate")+a.getTagValue("StudyTime"),series:parseInt(a.getTagValue("SeriesNumber")),instance:parseInt(a.getTagValue("InstanceNumber"))}},m=e.findDisplaySet((function(e){return e.images.find((function(e){return e.getSOPInstanceUID()===f}))}));m&&(p.displaySetInstanceUID=m.getUID(),p.imageId=a.getImageId()),s.push(p)}}})))})))}));var p=Object(x.a)({name:"score",reverse:!0},{name:"study",reverse:!0},{name:"instance"},{name:"series"});s.sort((function(e,t){return p(e.sortingInfo,t.sortingInfo)}));var m=s[0];return T.a.trace("ProtocolEngine::matchImages bestMatch",m),{bestMatch:m,matchingScores:s}}},{key:"setLayout",value:function(e,t){if(e<1&&t<1)T.a.error("Invalid layout ".concat(e," x ").concat(t));else if("function"==typeof this.options.setLayout){for(var n=[],r=e*t,a=0;a<r;a++)n.push({});this.options.setLayout({numRows:e,numColumns:t,viewports:n})}else T.a.error("Hanging Protocol Engine setLayout callback is not defined")}},{key:"updateViewports",value:function(e){var t=this;if(T.a.trace("ProtocolEngine::updateViewports viewportIndex: ".concat(e)),this.getNumProtocolStages()){var n=this.getCurrentStageModel();if(n&&n.viewportStructure&&n.viewports&&n.viewports.length&&n.viewportStructure.getLayoutTemplateName()){var r=n.viewportStructure.properties;if(r){var a=[];this.matchDetails=[],n.viewports.forEach((function(e,n){var o=t.matchImages(e,n);t.matchDetails[n]=o;var i={},s=Object.keys(e.viewportSettings);s.forEach((function(t){var n=e.viewportSettings[t];"YES"===n?n=!0:"NO"===n&&(n=!1),i[t]=n}));var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewportIndex:n,viewport:i},r),u=[];s.forEach((function(t){k[t]&&u.push({id:t,value:e.viewportSettings[t]})})),c.renderedCallback=function(e){u.forEach((function(t){T.a.trace("ProtocolEngine::currentViewportData.renderedCallback Applying custom setting: ".concat(t.id)),T.a.trace("ProtocolEngine::currentViewportData.renderedCallback with value: ".concat(t.value)),k[t.id].callback(e,t.value)}))};for(var l=o.bestMatch,f=1,p=o.matchingScores.length;f<p&&a.find((function(e){return e.imageId===l.imageId}));)l=o.matchingScores[f],f++;l&&l.imageId&&(c.StudyInstanceUID=l.StudyInstanceUID,c.SeriesInstanceUID=l.SeriesInstanceUID,c.SOPInstanceUID=l.SOPInstanceUID,c.currentImageIdIndex=l.currentImageIdIndex,c.displaySetInstanceUID=l.displaySetInstanceUID,c.imageId=l.imageId),a.push(c)})),this.setLayout(r.Rows,r.Columns),"function"==typeof this.options.setViewportSpecificData?void 0!==e&&a[e]?this.options.setViewportSpecificData(e,a[e]):a.forEach((function(e){t.options.setViewportSpecificData(e.viewportIndex,e)})):T.a.error("Hanging Protocol Engine setViewportSpecificData callback is not defined")}}}}},{key:"setHangingProtocol",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];T.a.trace("ProtocolEngine::setHangingProtocol newProtocol",e),T.a.trace("ProtocolEngine::setHangingProtocol updateViewports = ".concat(t)),this.newStageIds=[],ne.prototype.isPrototypeOf(e)?this.protocol=e:(this.protocol=new ne,this.protocol.fromObject(e)),this.stage=0,t&&this.updateViewports()}},{key:"isNextStageAvailable",value:function(){var e=this.getNumProtocolStages();return this.stage+1<e}},{key:"isPreviousStageAvailable",value:function(){return this.stage-1>=0}},{key:"setCurrentProtocolStage",value:function(e){return!(-1===e&&!this.isPreviousStageAvailable()||1===e&&!this.isNextStageAvailable()||(this.stage+=e,T.a.trace("ProtocolEngine::setCurrentProtocolStage stage = ".concat(this.stage)),this.updateViewports(),0))}},{key:"getNumProtocolStages",value:function(){if(this.protocol&&this.protocol.stages&&this.protocol.stages.length)return this.protocol.stages.length}},{key:"nextProtocolStage",value:function(){T.a.trace("ProtocolEngine::nextProtocolStage"),this.setCurrentProtocolStage(1)||T.a.trace("ProtocolEngine::nextProtocolStage failed")}},{key:"previousProtocolStage",value:function(){T.a.trace("ProtocolEngine::previousProtocolStage"),this.setCurrentProtocolStage(-1)||T.a.trace("ProtocolEngine::previousProtocolStage failed")}}])&&oe(t.prototype,n),r&&oe(t,r),e}();function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t}var t,n,r;return t=e,r=[{key:"getProtocolInstance",value:function(e){var t=e;if(t instanceof Array)t.forEach((function(e,n){if(!(e instanceof ne)){var r=new ne;r.fromObject(e),t[n]=r}}));else if(void 0!==t&&!(t instanceof ne)){var n=new ne;n.fromObject(t),t=n}return t}}],(n=[{key:"onReady",value:function(e){this.strategy.onReady(e)}},{key:"getProtocol",value:function(t){var n=this.strategy.getProtocol(t);return e.getProtocolInstance(n)}},{key:"addProtocol",value:function(e){this.strategy.addProtocol(e)}},{key:"updateProtocol",value:function(e,t){this.strategy.updateProtocol(e,t)}},{key:"removeProtocol",value:function(e){this.strategy.removeProtocol(e)}}])&&le(t.prototype,n),r&&le(t,r),e}();var pe=function(){var e=new ne("Default");e.id="defaultProtocol",e.locked=!0;var t=new Y("grid",{Rows:1,Columns:1}),n=new K,r=new Q(t,"oneByOne");return r.viewports.push(n),e.stages.push(r),e}();function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var de={ProtocolEngine:ue,ProtocolStore:fe,ProtocolStrategy:function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hangingProtocols=new Map,this.defaultsAdded=!1}var t,n,r;return t=e,(n=[{key:"onReady",value:function(e){this.defaultsAdded||(T.a.info("Inserting the default hanging protocol..."),this.addProtocol(pe),this.defaultsAdded=!0),e()}},{key:"getProtocol",value:function(e){return e?this.hangingProtocols.get(e):Array.from(this.hangingProtocols.values())}},{key:"addProtocol",value:function(e){this.hangingProtocols.set(e.id,e)}},{key:"updateProtocol",value:function(e,t){this.hangingProtocols.has(e)&&this.hangingProtocols.set(e,t)}},{key:"removeProtocol",value:function(e){this.hangingProtocols.has(e)&&this.hangingProtocols.delete(e)}}])&&me(t.prototype,n),r&&me(t,r),e}(),addCustomAttribute:function(e,t,n){E[e]={name:t,callback:n}},addCustomViewportSetting:function(e,t,n,r){k[e]={id:e,text:t,options:n,callback:r}}},he={},ve=n(178);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ye={getNestedObject:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))for(var r=e[n],a=n.split("."),o=t;a.length;){var i=a.shift();a.length?(o[i]||(o[i]={}),o=o[i]):o[i]=r}return t},getShallowObject:function(e){var t={};return function e(t,n,r){for(var a in n)if(n.hasOwnProperty(a)){var o=t?"".concat(t,".").concat(a):a,i=n[a];"object"===ge(i)?(i instanceof Array&&(o+="[]"),e(o,i,r)):r[o]=i}}("",e,t),t}},be=n(261);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e){return e instanceof Object||"object"===Se(e)&&null!==e}function Oe(e){return"string"==typeof e}var Ie={search:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=new RegExp(n.trim(),"i");return Object.keys(t).forEach((function(i){var s=t[i];if(s){var c=Oe(r)?s[r]:s;Oe(c)&&o.test(c)&&a.push(s),we(s)&&e(s,n,r,a)}})),a},encodeId:function(e){var t=e&&e.toString?e.toString():e;return""===t||"string"!=typeof t?"_":t.replace(/[^a-zA-Z0-9-]/g,(function(e){return"_"+e[0].charCodeAt(0).toString(16)+"_"}))}},Ee=n(179);var Pe={getScrollbarSize:function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="100px",t.style.height="100px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t);var n=e.offsetWidth,r=e.offsetHeight;t.style.overflow="scroll";var a=e.offsetWidth,o=e.offsetHeight;return n===a&&(a=t.clientWidth),r===o&&(o=t.clientHeight),document.body.removeChild(t),[n-a,r-o]},getOffset:function(e){var t=0,n=0;if(e.offsetParent)do{n+=e.offsetLeft,t+=e.offsetTop}while(e=e.offsetParent);return{left:n,top:t}},isCharacterKeyPress:function(e){return void 0===e.which||"number"==typeof e.which&&e.which>0&&(!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!==e.which)},handleError:function(e){var t=e.title,n=e.message;t||e instanceof Error&&(t=e.name),n||e instanceof Error&&(n=e.message),Object.assign({title:t,message:n,class:"themed",hideConfirm:!0,cancelLabel:"Dismiss",cancelClass:"btn-secondary"},e||{}),T.a.error(e)}},De=n(40),Ce=n(147),Te=n(90),xe=n(1059),ke=n(1060),je=n(1061),Re=n(1064),Ne=n(1062),Me={MODULE_TYPES:r.a,CommandsManager:i.a,ExtensionManager:a.a,HotkeysManager:s.a,ServicesManager:o.a,utils:Ce.a,hotkeys:Te.a,studies:Ee.a,redux:be.a,classes:c.a,metadata:b.a,header:he,cornerstone:g,string:Ie,ui:Pe,user:ee.a,errorHandler:De.a,object:ye,log:T.a,DICOMWeb:u.a,DICOMSR:l.a,viewer:{},measurements:ve.a,hangingProtocols:de,UINotificationService:xe.a,UIModalService:ke.a,UIDialogService:je.a,MeasurementService:Re.a,LoggerService:Ne.a};t.a=Me},function(e,t,n){"use strict";var r=n(45);var a={getAttribute:function(e,t){return e&&e.Value&&e.Value.length?function(e){function t(e){var t=e.length;return 0==t?"0000":1==t?"000"+e:2==t?"00"+e:3==t?"0"+e:e}for(var n="",r=0;r<e.length;r++)for(var a=0;a<e[r].length;a++)n+=t(e[r].charCodeAt(a).toString(16));return parseInt(n,16)}(e.Value):t},getAuthorizationHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.requestOptions,n={},a=r.a&&r.a.getAccessToken&&r.a.getAccessToken();return t&&t.auth?"function"==typeof t.auth?n.Authorization=t.auth(t):n.Authorization="Basic ".concat(btoa(t.auth)):a&&(n.Authorization="Bearer ".concat(a)),n},getModalities:function(e,t){if(!e&&!t)return{};var n=e||{vr:"CS",Value:[]};if(t){if(!n.vr||n.vr!==t.vr)return t;for(var r=0;r<t.Value.length;r++){var a=t.Value[r];null==n.Value&&(n.Value=[]),-1===n.Value.indexOf(a)&&n.Value.push(a)}}return n},getName:function(e,t){return e&&e.Value&&e.Value.length?e.Value[0].Alphabetic?e.Value[0].Alphabetic:e.Value[0]:t},getNumber:function(e,t){return e&&e.Value&&e.Value.length?parseFloat(e.Value[0]):t},getString:function(e,t){return e&&e.Value&&e.Value.length?e.Value.join("\\"):t}};t.a=a},,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Adjust"),a.a.createElement("path",{d:"M12 22.5v-17c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5zM24 14c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"}))};o.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var i=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Double Down"),a.a.createElement("path",{d:"M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"}))};i.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 350 512",width:"1em",height:"1em",fill:"currentColor"};var s=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Double Up"),a.a.createElement("path",{d:"M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"}))};s.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 350 512",width:"1em",height:"1em",fill:"currentColor"};var c=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Angle Left"),a.a.createElement("path",{d:"M31.7 239l136-136c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9L127.9 256l96.4 96.4c9.4 9.4 9.4 24.6 0 33.9L201.7 409c-9.4 9.4-24.6 9.4-33.9 0l-136-136c-9.5-9.4-9.5-24.6-.1-34z"}))};c.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",width:"1em",height:"1em",fill:"currentColor"};var u=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows"),a.a.createElement("path",{d:"M9 1v16M1 9h16M7 3l2-2 2 2M15 11l2-2-2-2M11 15l-2 2-2-2M3 7L1 9l2 2"}))};u.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",stroke:"currentColor",width:"1em",height:"1em",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"};var l=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows Alt H"),a.a.createElement("path",{d:"M377.941 169.941V216H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.568 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296h243.882v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.568 0-33.941l-86.059-86.059c-15.119-15.12-40.971-4.412-40.971 16.97z"}))};l.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var f=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Arrows Alt V"),a.a.createElement("path",{d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))};f.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512",width:"1em",height:"1em",fill:"currentColor"};var p=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Bars"),a.a.createElement("path",{d:"M1664 1344v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V832q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V320q0-26 19-45t45-19h1408q26 0 45 19t19 45z"}))};p.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1792 1792",width:"1em",height:"1em",fill:"currentColor"};var m=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Brain"),a.a.createElement("path",{d:"M9.477 17.251A3.251 3.251 0 0 0 6.227 14c-.053 0-.1.013-.153.016"}),a.a.createElement("path",{d:"M9.139 4.388A2 2 0 1 0 6.5 2.5a2 2 0 0 0 .081.534C6.47 3.025 6.363 3 6.25 3a3.732 3.732 0 0 0-2.965 6.023 2.985 2.985 0 0 0 0 5.957A3.731 3.731 0 0 0 6.25 21c.113 0 .22-.023.331-.033a2 2 0 1 0 2.558-1.353"}),a.a.createElement("path",{d:"M6.074 9.986c.052 0 .1.015.153.015a3.251 3.251 0 0 0 3.25-3.25M14.523 17.251A3.251 3.251 0 0 1 17.773 14c.053 0 .1.013.153.016"}),a.a.createElement("path",{d:"M14.861 4.388A2 2 0 1 1 17.5 2.5a2 2 0 0 1-.081.534c.111-.01.218-.034.331-.034a3.732 3.732 0 0 1 2.965 6.022 2.985 2.985 0 0 1 0 5.957A3.731 3.731 0 0 1 17.75 21c-.113 0-.22-.023-.331-.033a2 2 0 1 1-2.558-1.353"}),a.a.createElement("path",{d:"M17.926 9.986c-.052 0-.1.015-.153.015a3.251 3.251 0 0 1-3.25-3.25M10.5 2.4a3 3 0 0 1 3 0M10.409 22.1c.993.536 2.19.536 3.183 0M12 7.001v10.5"}))};m.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.25",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"};var d=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Brush"),a.a.createElement("path",{d:"M167.02 309.34c-40.12 2.58-76.53 17.86-97.19 72.3-2.35 6.21-8 9.98-14.59 9.98-11.11 0-45.46-27.67-55.25-34.35C0 439.62 37.93 512 128 512c75.86 0 128-43.77 128-120.19 0-3.11-.65-6.08-.97-9.13l-88.01-73.34zM457.89 0c-15.16 0-29.37 6.71-40.21 16.45C213.27 199.05 192 203.34 192 257.09c0 13.7 3.25 26.76 8.73 38.7l63.82 53.18c7.21 1.8 14.64 3.03 22.39 3.03 62.11 0 98.11-45.47 211.16-256.46 7.38-14.35 13.9-29.85 13.9-45.99C512 20.64 486 0 457.89 0z"}))};d.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var h=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Caret Down"),a.a.createElement("path",{d:"M286.935 69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952 0-9.233 1.807-12.85 5.424C1.807 72.998 0 77.279 0 82.228c0 4.948 1.807 9.229 5.424 12.847l127.907 127.907c3.621 3.617 7.902 5.428 12.85 5.428s9.233-1.811 12.847-5.428L286.935 95.074c3.613-3.617 5.427-7.898 5.427-12.847 0-4.948-1.814-9.229-5.427-12.85z"}))};h.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 292.362 292.362",width:"1em",height:"1em",fill:"currentColor"};var v=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Caret Up"),a.a.createElement("path",{d:"M44.68 29.383L26.728 11.52a5.377 5.377 0 0 0-7.585 0L1.19 29.383C.03 30.538-.319 32.09.306 33.605c.624 1.512 2.099 2.311 3.735 2.311h37.786c1.638 0 3.112-.799 3.736-2.312.626-1.514.277-3.065-.883-4.221z"}))};v.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 45.871 45.871",width:"1em",height:"1em",fill:"currentColor"};var g=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check"),a.a.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}))};g.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var y=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check Circle"),a.a.createElement("path",{d:"M13.5 0a13.5 13.5 0 0 1 0 27 13.5 13.5 0 0 1 0-27M23 8l-2-2-10 10-5-5-2 2 7 7z"}))};y.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 27",width:"1em",height:"1em",fill:"currentColor"};var b=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Check Circle"),a.a.createElement("path",{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"}))};b.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var S=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Chevron Down"),a.a.createElement("path",{d:"M12 1.4L10.6 0 6 4.6 1.4 0 0 1.4l6 6z"}))};S.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 9",width:"1em",height:"1em",fill:"currentColor"};var w=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle"),a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"}))};w.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var O=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle Notch"),a.a.createElement("path",{d:"M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"}))};O.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var I=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Circle Outline"),a.a.createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}))};I.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var E=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Clipboard"),a.a.createElement("path",{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm144 418c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V118c0-3.3 2.7-6 6-6h42v36c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-36h42c3.3 0 6 2.7 6 6z"}))};E.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",width:"1em",height:"1em",fill:"currentColor"};var P=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Cog"),a.a.createElement("path",{d:"M12.85 8.25c0-.22.08-.45.08-.75s0-.52-.08-.75l1.58-1.27c.15-.15.15-.3.07-.45L13 2.4c-.07-.07-.22-.15-.45-.07l-1.87.75c-.38-.3-.83-.53-1.28-.75L9.1.38C9.18.15 8.95 0 8.8 0h-3c-.15 0-.37.15-.37.3l-.3 2.03c-.45.15-.83.45-1.28.75l-1.8-.75c-.22-.08-.37 0-.52.15L.03 5.1c-.08.08 0 .3.15.45l1.57 1.2c0 .23-.07.45-.07.75s0 .53.07.75L.18 9.53c-.15.15-.15.29-.08.45l1.5 2.62c.08.08.23.15.45.08l1.88-.75c.37.3.82.52 1.27.75l.3 1.95c0 .15.15.3.38.3h3c.15 0 .37-.15.37-.3l.3-1.95c.45-.23.9-.45 1.28-.75l1.87.75c.15.07.38 0 .45-.15l1.5-2.63c.08-.15.08-.37-.07-.45l-1.73-1.2zM7.3 10.13c-1.42 0-2.62-1.2-2.62-2.63 0-1.42 1.2-2.62 2.62-2.62 1.43 0 2.63 1.2 2.63 2.62 0 1.43-1.2 2.63-2.63 2.63z"}))};P.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15",width:"1em",height:"1em",fill:"currentColor"};var D=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Create Comment"),a.a.createElement("path",{d:"M22.32 14H35c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H21l-4 4V20.39c2.45-1.42 4.36-3.68 5.32-6.39zM10 0C4.5 0 0 4.5 0 10s4.5 10 10 10 10-4.5 10-10S15.5 0 10 0zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2z"}))};D.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37 34",width:"1em",height:"1em",fill:"currentColor"};var C=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Create Screen Capture"),a.a.createElement("path",{d:"M27 30c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"}),a.a.createElement("path",{d:"M24 17l-1.8 2H19c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V21c0-1.1-.9-2-2-2h-3.2L30 17h-6zm3 15c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zM10 0C4.5 0 0 4.5 0 10s4.5 10 10 10 10-4.5 10-10S15.5 0 10 0zm5 11h-4v4H9v-4H5V9h4V5h2v4h4v2z"}))};C.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 37 35",width:"1em",height:"1em",fill:"currentColor"};var T=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Crosshairs"),a.a.createElement("path",{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"}))};T.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var x=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Cube"),a.a.createElement("path",{d:"M-115.1 280.3c0-.1.1-.1.1-.2v-.1-.3l.1-45c0-.5-.3-.9-.7-1.2L-154 211c-.1 0-.1 0-.2-.1-.4-.2-.8-.1-1.2.1l-38.8 22.1c-.4.2-.7.7-.7 1.2l-.3 44.6c0 .5.3.9.7 1.2l38.7 22.9c.2.1.5.2.7.2.2 0 .5-.1.7-.2l38.8-22.1c.1 0 .1-.1.2-.1s.1-.1.1-.1c0-.1.1-.1.1-.2.1-.1.1-.1.1-.2zm-45.6 16.6c1.5-1.5 3-3 4.5-4.6v2.4l-3 3-1.5-.8zm-3.2-1.9c2.5-2.6 5.1-5.1 7.6-7.7v2.4c-2 2.1-4.1 4.1-6.1 6.2l-1.5-.9zm-3.1-1.8c3.6-3.6 7.1-7.2 10.7-10.8v2.4c-2.6 2.6-5.2 5.2-7.7 7.8l-1.5 1.5-1.5-.9zm-3.1-1.9c4.6-4.7 9.2-9.3 13.8-14v2.4c-4.1 4.2-8.2 8.3-12.3 12.5l-1.5-.9zm-3.2-1.8c.1-.1.1-.1 0 0 5.7-5.7 11.3-11.4 17-17.1v2.4c-5.1 5.2-10.3 10.4-15.4 15.6l-1.6-.9zm-3.1-1.9c6.7-6.8 13.4-13.6 20.1-20.3v2.4c-6.1 6.2-12.3 12.4-18.4 18.6-.1.1-.1.1-.1.2l-1.6-.9zm-3.1-1.9c7.7-7.8 15.5-15.6 23.2-23.4v2.4c-7.2 7.3-14.4 14.5-21.5 21.8l-.1.1-1.6-.9zm-3.2-1.8c.1 0 .1-.1 0 0 8.7-8.9 17.4-17.6 26.1-26.4l.2.1v2.1l-24.7 25-.1.1-1.5-.9zm-3.1-1.8c.1-.1.1-.2.2-.2L-160 256l.3-.3 1.5.9-25.9 26.2s-.1.1-.1.2l-1.6-.9zm-3.1-1.9c0-.1.1-.1.1-.2l25.9-26.2 1.5.9-25.9 26.2-.2.2-1.4-.9zm-3.2-1.9l.2-.2c8.6-8.7 17.2-17.4 25.8-26.2l1.5.9-25.7 26-.4.4-1.4-.9zm37.4-64.5l35.8 20.9-36 20.5-35.8-20.9 36-20.5zm-36.5 23.4l1.5.9-2.5 2.5v-2.4c.4-.3.7-.6 1-1zm-1.1 16.2c3.5-3.5 7-7.1 10.5-10.6l1.5.9c-4 4.1-8 8.1-12.1 12.2l.1-2.5zm.1-2.6v-2.4c.9-.9 1.8-1.9 2.8-2.8 1.5-1.6 3.1-3.1 4.6-4.7l1.5.9c-3 3-6 6-8.9 9zm0-5.1v-2.4l4.2-4.2 1.5.9-5.7 5.7zm13.6-1.1l1.5.9c-5.1 5.1-10.1 10.3-15.2 15.4v-2.4c4.6-4.7 9.1-9.3 13.7-13.9zm-13.7 18.9c5.6-5.7 11.2-11.4 16.9-17.1l1.5.9c-6.1 6.2-12.3 12.4-18.4 18.6v-2.4zm-.1 5.1c6.7-6.8 13.4-13.5 20.1-20.3l1.5.9c-7.2 7.3-14.4 14.6-21.6 21.8v-2.4zm0 5l23.2-23.5 1.5.9-24.8 25.1.1-2.5zm36.2 23.7v2.3l-1.4-.8c.5-.6.9-1.1 1.4-1.5zm2.6-39.7l36-20.5-.1 41.8-35.8 20.4-.1-41.7z"}),a.a.createElement("path",{d:"M-154.9 232.7c.1 0 .1 0 0 0 .8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4.1.8.7 1.4 1.4 1.4zM-154.9 239.1c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .7.6 1.4 1.4 1.4zM-155 249.1c-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4.7 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4zM-154.9 245.4c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4zM-154.8 219.9c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.7 1.4 1.4 1.4zM-154.8 226.3c.8 0 1.4-.6 1.4-1.4 0-.8-.6-1.4-1.4-1.4-.8 0-1.4.6-1.4 1.4 0 .8.6 1.4 1.4 1.4zM-148.8 258.9c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.2-1.5-.5-1.9zM-121.1 275.3c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.1-1.5-.5-1.9zM-126.6 272c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.3-.7.1-1.5-.5-1.9zM-143.2 262.2c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.3-.7.1-1.5-.5-1.9zM-132.2 268.7c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.6.2-1.5-.5-1.9zM-137.7 265.5c-.7-.4-1.5-.2-1.9.5-.4.7-.2 1.5.5 1.9.2.1.5.2.7.2.5 0 .9-.2 1.2-.7.4-.7.1-1.6-.5-1.9z"}))};x.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"-205 207 100 100",width:"1em",height:"1em",fill:"currentColor"};var k=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"3D Rotate"),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.856 11.409l-.013-.335-.01-.195a6.21 6.21 0 0 1-.008-.14l-.004-.06-1.214.08v.004l.013.209.025.731.001.025-.001-.01.001.029v.021-.01.03-.009.03-.01l.001.035-.001-.01.001.04v-.01.045-.01.06-.009.06c0 .925-.066 1.891-.214 2.85.443-.125.877-.272 1.288-.444.097-.8.143-1.604.143-2.405l-.004-.381-.004-.211zm-12.47 5.265L2 15.691l.658-.711C1.817 14.19 1.2 13.182 1.2 12c.006-.916.35-1.691.912-2.399.83-1.011 2.014-1.758 3.339-2.293-.116.484-.212.973-.289 1.466a7.583 7.583 0 0 0-1.57 1.038c-.563.5-1.035 1.118-1.149 1.862-.076.5.027.975.259 1.417.197.374.478.711.782.995l.657-.711 1.245 3.299zM9.6 6.283c.84-.103 1.656-.148 2.4-.148 1.765 0 3.552.222 5.246.722 2.32.685 5.537 2.332 5.554 5.143-.006.915-.349 1.69-.911 2.398-2.151 2.622-6.685 3.467-9.889 3.467-.89 0-1.822-.054-2.697-.182l.165-1.205c.82.12 1.699.17 2.533.17 2.71 0 6.298-.621 8.408-2.46.644-.572 1.167-1.297 1.175-2.188-.013-1.455-1.41-2.516-2.574-3.134-2.086-1.093-4.677-1.515-7.01-1.515-.884 0-1.862.066-2.852.219.127-.442.277-.873.452-1.287zm5.624 12.551c.486-.076.975-.169 1.459-.283-.85 2.063-2.374 4.235-4.683 4.249-.916-.006-1.691-.349-2.399-.911C6.979 19.737 6.135 15.204 6.135 12c0-1.764.222-3.552.722-5.246C7.542 4.434 9.189 1.217 12 1.2c1.454 0 2.627.926 3.466 2.038l.778-.577.61 3.471-3.144-1.593.778-.577c-.581-.787-1.465-1.545-2.488-1.545-1.455.013-2.516 1.411-3.134 2.575C7.773 7.076 7.351 9.667 7.351 12c0 2.71.621 6.298 2.461 8.408.572.644 1.296 1.167 2.188 1.175 1.455-.013 2.516-1.41 3.134-2.574l.09-.175z"}))};k.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 30",width:"1em",height:"1em",fill:"currentColor"};var j=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Database"),a.a.createElement("path",{d:"M12 12c4.703 0 9.422-.844 12-2.656V12c0 2.203-5.375 4-12 4S0 14.203 0 12V9.344C2.578 11.157 7.297 12 12 12zm0 12c4.703 0 9.422-.844 12-2.656V24c0 2.203-5.375 4-12 4S0 26.203 0 24v-2.656C2.578 23.157 7.297 24 12 24zm0-6c4.703 0 9.422-.844 12-2.656V18c0 2.203-5.375 4-12 4S0 20.203 0 18v-2.656C2.578 17.157 7.297 18 12 18zm0-18c6.625 0 12 1.797 12 4v2c0 2.203-5.375 4-12 4S0 8.203 0 6V4c0-2.203 5.375-4 12-4z"}))};j.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var R=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Dot Circle"),a.a.createElement("path",{d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z"}))};R.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var N=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Edit"),a.a.createElement("path",{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}))};N.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"1em",height:"1em",fill:"currentColor"};var M=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Circle"),a.a.createElement("path",{d:"M9 0a9 9 0 0 1 0 18A9 9 0 0 1 9 0M4.5 8a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3M9 8a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3m4.5 0a1.5 1.5 0 0 0 0 3 1.5 1.5 0 0 0 0-3"}))};M.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor"};var _=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Horizontal"),a.a.createElement("path",{d:"M6 11.5v3A1.5 1.5 0 0 1 4.5 16h-3A1.5 1.5 0 0 1 0 14.5v-3A1.5 1.5 0 0 1 1.5 10h3A1.5 1.5 0 0 1 6 11.5zm8 0v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 8 14.5v-3A1.5 1.5 0 0 1 9.5 10h3a1.5 1.5 0 0 1 1.5 1.5zm8 0v3a1.5 1.5 0 0 1-1.5 1.5h-3a1.5 1.5 0 0 1-1.5-1.5v-3a1.5 1.5 0 0 1 1.5-1.5h3a1.5 1.5 0 0 1 1.5 1.5z"}))};_.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 28",width:"1em",height:"1em",fill:"currentColor"};var A=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Ellipse Vertical"),a.a.createElement("path",{d:"M6 19.5v3A1.5 1.5 0 0 1 4.5 24h-3A1.5 1.5 0 0 1 0 22.5v-3A1.5 1.5 0 0 1 1.5 18h3A1.5 1.5 0 0 1 6 19.5zm0-8v3A1.5 1.5 0 0 1 4.5 16h-3A1.5 1.5 0 0 1 0 14.5v-3A1.5 1.5 0 0 1 1.5 10h3A1.5 1.5 0 0 1 6 11.5zm0-8v3A1.5 1.5 0 0 1 4.5 8h-3A1.5 1.5 0 0 1 0 6.5v-3A1.5 1.5 0 0 1 1.5 2h3A1.5 1.5 0 0 1 6 3.5z"}))};A.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 28",width:"1em",height:"1em",fill:"currentColor"};var L=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Exclamation Circle"),a.a.createElement("path",{d:"M10 1a9 9 0 0 1 0 18 9 9 0 0 1 0-18m0 4v2m0 2v6"}))};L.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeWidth:"2"};var U=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Exclamation Triangle"),a.a.createElement("path",{d:"M11 0l11 20H0zm1 7h-2v6h2zm0 8h-2v2h2z"}))};U.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 20",width:"1em",height:"1em",fill:"currentColor"};var V=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M0 436V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v151.9L235.5 71.4C256.1 54.3 288 68.6 288 96v131.9L459.5 71.4C480.1 54.3 512 68.6 512 96v320c0 27.4-31.9 41.7-52.5 24.6L288 285.3V416c0 27.4-31.9 41.7-52.5 24.6L64 285.3V436c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12z"}))};V.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var F=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M512 76v360c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12V284.1L276.5 440.6c-20.6 17.2-52.5 2.8-52.5-24.6V284.1L52.5 440.6C31.9 457.8 0 443.4 0 416V96c0-27.4 31.9-41.7 52.5-24.6L224 226.8V96c0-27.4 31.9-41.7 52.5-24.6L448 226.8V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12z"}))};F.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var B=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Stop"),a.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"}))};B.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var q=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Info"),a.a.createElement("path",{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}))};q.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192 512",width:"1em",height:"1em",fill:"currentColor"};var z=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Inline Edit"),a.a.createElement("path",{d:"M11 2L12.85.15a1 1 0 0 1 1 0l2 2a1 1 0 0 1 0 1L14 5zm-1 1L0 13v3h3L13 6zm6 13v-2H7l-2 2z"}))};z.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"1em",height:"1em",fill:"currentColor"};var H=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Level"),a.a.createElement("path",{d:"M14.5 3.5a1 1 0 0 1-11 11z",opacity:".8",stroke:"none"}),a.a.createElement("circle",{cx:"9",cy:"9",r:"8",fill:"none",strokeWidth:"2"}))};H.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor"};var W=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Link"),a.a.createElement("path",{d:"M5.364 28.917a5.357 5.357 0 0 0 3.797 1.57 5.347 5.347 0 0 0 3.798-1.572l7.552-7.554a5.325 5.325 0 0 0 1.574-3.797 5.336 5.336 0 0 0-1.574-3.796l-2.297-2.298-2.009 2.009 2.297 2.298c.478.478.741 1.113.741 1.788 0 .674-.264 1.309-.741 1.786l-7.553 7.555a2.533 2.533 0 0 1-3.576 0l-2.297-2.298a2.53 2.53 0 0 1 0-3.576l3.775-3.776-2.009-2.009-3.776 3.776a5.378 5.378 0 0 0 0 7.595l2.299 2.3zM26.695 2.992"}),a.a.createElement("path",{d:"M26.695 2.992a5.328 5.328 0 0 0-3.797-1.575h-.002a5.34 5.34 0 0 0-3.798 1.573l-7.551 7.553a5.331 5.331 0 0 0-1.576 3.799c0 1.434.558 2.784 1.574 3.797l2.297 2.297 2.01-2.009-2.298-2.297a2.515 2.515 0 0 1-.741-1.788c0-.676.265-1.311.742-1.788l7.553-7.555a2.51 2.51 0 0 1 1.789-.74h.001c.674 0 1.309.264 1.786.74l2.297 2.299a2.51 2.51 0 0 1 .74 1.788 2.52 2.52 0 0 1-.74 1.788l-3.776 3.777 2.009 2.009 3.776-3.777a5.34 5.34 0 0 0 1.574-3.797c0-1.435-.56-2.784-1.574-3.797l-2.295-2.296z"}))};W.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",width:"1em",height:"1em",fill:"currentColor"};var G=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Link Circles"),a.a.createElement("g",{transform:"translate(1 1)"},a.a.createElement("circle",{opacity:".8",cx:"7.5",cy:"7.5",r:"7.5"}),a.a.createElement("circle",{opacity:".6",cx:"15.5",cy:"7.5",r:"7.5"})))};G.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 15",stroke:"currentColor",width:"1em",height:"1em",fill:"none"};var $=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"List"),a.a.createElement("path",{d:"M0 0h2v2H0zm4 0h14v2H4zM0 4h2v2H0zm4 0h14v2H4zM0 8h2v2H0zm4 0h14v2H4z"}))};$.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 10",width:"1em",height:"1em",fill:"currentColor"};var J=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Liver"),a.a.createElement("path",{d:"M15.188 1.427c.82-.385 1.764-.428 2.675-.427 2.433.003 4.933.267 7.366.268.403 0 .63.13.733.414.099.274.009.497-.306.739-1.45 1.113-2.074 2.596-2.097 4.343a5.524 5.524 0 0 1-3.862 5.188c-1.45.453-2.87.372-4.257-.24l-.094-.04c-.334.472-.626.956-.989 1.382-1.555 1.83-3.59 2.695-6.034 2.715-1.405.011-2.727.338-3.946 1.017-.86.478-1.612 1.078-2.207 1.852-.195.254-.45.331-.74.237-.284-.093-.417-.274-.417-.603-.001-3.31-.034-6.622.01-9.932.047-3.461 2.913-6.49 6.453-6.913 1.713-.205 4.21.303 5.65 1.545.24.206.643.617.943 1.073.242.368.567.852.683 1.057.116.205-1.692-2.182-1.625-2.13.53-.566 1.365-1.218 2.061-1.545z"}))};J.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 20",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.65",fill:"none",fillRule:"evenodd"};var Y=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lock"),a.a.createElement("path",{d:"M5 12h8V9c0-2.203-1.797-4-4-4S5 6.797 5 9v3zm13 1.5v9a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 0 22.5v-9A1.5 1.5 0 0 1 1.5 12H2V9c0-3.844 3.156-7 7-7s7 3.156 7 7v3h.5a1.5 1.5 0 0 1 1.5 1.5z"}))};Y.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 28",width:"1em",height:"1em",fill:"currentColor"};var X=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lock"),a.a.createElement("path",{d:"M14 7h-1V5c0-2.8-2.2-5-5-5S3 2.2 3 5v2H2C.9 7 0 7.9 0 9v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-2.9 0H4.9V5c0-1.7 1.4-3.1 3.1-3.1 1.7 0 3.1 1.4 3.1 3.1v2z"}))};X.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 21",width:"1em",height:"1em",fill:"currentColor"};var K=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Lung"),a.a.createElement("path",{d:"M5.55 23.068h.668a4.55 4.55 0 0 0 4.55-4.55v-2.85c0-1.104-.353-2.18-1.007-3.07A5.185 5.185 0 0 1 8.755 9.53V6.944a1.54 1.54 0 0 0-.939-1.418c-1.558-.355-2.235.185-2.97 1.222-.65.916-1.726 2.902-3.23 5.957A6 6 0 0 0 1 15.354v3.164a4.55 4.55 0 0 0 4.55 4.55z"}),a.a.createElement("path",{d:"M11.465 0v7.633a2 2 0 0 1-.75 1.561L8.582 10.9M15.083 0v7.633a2 2 0 0 0 .75 1.561l2.132 1.705"}),a.a.createElement("path",{d:"M21.384 23.068h-.667a4.55 4.55 0 0 1-4.55-4.55v-2.85c0-1.104.352-2.18 1.006-3.07a5.185 5.185 0 0 0 1.006-3.069V6.944c0-.618.37-1.177.939-1.418 1.558-.355 2.235.185 2.97 1.222.65.916 1.726 2.902 3.23 5.957a6 6 0 0 1 .616 2.649v3.164a4.55 4.55 0 0 1-4.55 4.55z"}))};K.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 24",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",fill:"none"};var Z=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Non-Target"),a.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),a.a.createElement("path",{d:"M6.5 3v7M3 6.5h7"}),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};Z.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var Q=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target"),a.a.createElement("path",{d:"M9.5 26l2-2-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 1.5-1.5-2.5-2.5.5-.5 2.5 2.5 1.5-1.5-1.5-1.5.5-.5 1.5 1.5 2-2-4-4a2 2 0 0 0-2.5 0l-14 14a2 2 0 0 0 0 2.5l4 4zM6 0a6 6 0 0 1 0 12A6 6 0 0 1 6 0m.5 3a.5.5 0 0 0-1 0v2.5H3a.5.5 0 0 0 0 1h2.5V9a.5.5 0 0 0 1 0V6.5H9a.5.5 0 0 0 0-1H6.5z"}))};Q.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 26 26",width:"1em",height:"1em",fill:"currentColor",strokeWidth:"0"};var ee=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target CR"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10"},"CR"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};ee.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var te=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target NE"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10",fontFamily:"sans-serif"},"NE"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};te.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var ne=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Target UN"),a.a.createElement("text",{fill:"#000",y:"8",fontSize:"10"},"UN"),a.a.createElement("path",{d:"M23 7L8 22m-1-5v6h6",strokeWidth:"2"}))};ne.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"};var re=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Measure Temp"),a.a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("circle",{cx:"6.5",cy:"6.5",r:"6"}),a.a.createElement("path",{d:"M6.5 3v7M3 6.5h7"}),a.a.createElement("path",{d:"M22.5 6L6 22.5",strokeWidth:"3",strokeDasharray:"0.6666,5"})))};re.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",fill:"none"};var ae=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Object Group"),a.a.createElement("path",{d:"M14.5 2.75h2a2.5 2.5 0 0 1 2.5 2.5V18.5a2.5 2.5 0 0 1-2.5 2.5H5a2.5 2.5 0 0 1-2.5-2.5v-1"}),a.a.createElement("path",{d:"M.5 2v14A1.5 1.5 0 0 0 2 17.5h12a1.5 1.5 0 0 0 1.5-1.5V2M2 2h12M4.4 7.5h7.2m0 3H4.4m0 3h7.2"}))};ae.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 22",width:"1em",height:"1em",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"};var oe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"OHIF Logo"),a.a.createElement("rect",{x:"1.25",y:"1.25",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"26",y:"1.25",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"1.25",y:"26",width:"18.8",height:"18.8",rx:"1",ry:"1"}),a.a.createElement("rect",{x:"26",y:"26",width:"18.8",height:"18.8",rx:"1",ry:"1"}))};oe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47 47",width:"1em",height:"1em",stroke:"currentColor",fill:"none",strokeWidth:"2.5"};var ie=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M10.416 5.932c0 1.53-.462 2.777-1.386 3.738-.915.952-2.072 1.428-3.472 1.428-1.39 0-2.553-.48-3.486-1.442-.933-.97-1.4-2.217-1.4-3.738 0-1.53.48-2.753 1.442-3.668.961-.924 2.11-1.386 3.444-1.386 1.335 0 2.478.462 3.43 1.386.952.915 1.428 2.142 1.428 3.682zM3.052 8.9c.719.71 1.554 1.064 2.506 1.064.952 0 1.783-.355 2.492-1.064.71-.719 1.064-1.699 1.064-2.94 0-1.25-.364-2.226-1.092-2.926-.719-.71-1.54-1.064-2.464-1.064-.924 0-1.75.355-2.478 1.064-.728.7-1.092 1.675-1.092 2.926 0 1.241.355 2.221 1.064 2.94zm11.578 5.25h-2.814c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.784V5.05h-.756c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.12 0 .182.056.182.168l-.014 1.106h.014a2.34 2.34 0 0 1 .854-.966c.4-.27.89-.406 1.47-.406.942 0 1.703.322 2.282.966.578.635.868 1.484.868 2.548 0 1.055-.285 1.913-.854 2.576-.57.663-1.33.994-2.282.994-.58 0-1.064-.13-1.456-.392a2.359 2.359 0 0 1-.826-.98h-.042c.028.299.042.513.042.644v2.842h.91c.12 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm-.938-6.566c0 .812.21 1.437.63 1.876.429.439.942.658 1.54.658.606 0 1.11-.233 1.512-.7.41-.476.616-1.097.616-1.862 0-.775-.206-1.395-.616-1.862a1.911 1.911 0 0 0-1.512-.7c-.607 0-1.12.229-1.54.686-.42.457-.63 1.092-.63 1.904zm12.69.112h-5.04c.037.775.28 1.372.727 1.792.457.42.97.63 1.54.63.57 0 1.055-.121 1.456-.364.41-.243.686-.48.826-.714.075-.093.159-.107.252-.042l.378.378c.056.056.084.107.084.154 0 .037-.023.089-.07.154a2.014 2.014 0 0 1-.252.308c-.13.14-.317.299-.56.476-.233.177-.541.327-.924.448a3.874 3.874 0 0 1-1.204.182c-.98 0-1.801-.322-2.464-.966-.653-.644-.98-1.507-.98-2.59 0-1.092.327-1.95.98-2.576.654-.635 1.451-.952 2.394-.952.952 0 1.699.308 2.24.924.541.607.812 1.428.812 2.464v.112c0 .121-.065.182-.196.182zm-.967-.854c-.028-.579-.21-1.04-.546-1.386-.336-.345-.784-.518-1.344-.518s-1.04.159-1.442.476c-.401.317-.64.793-.714 1.428h4.046zM35.132 11h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.718 0-1.278.294-1.68.882a1.765 1.765 0 0 0-.182.308v3.85h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.638c.122 0 .182.056.182.168l-.028.952h.042c.486-.812 1.237-1.218 2.254-1.218.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm15.744 0h-3.374c-.112 0-.168-.056-.168-.168v-.714c0-.112.056-.168.168-.168h1.078V6.52h-5.208v3.43h1.078c.122 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-3.36c-.121 0-.182-.056-.182-.168v-.714c0-.112.061-.168.182-.168h1.064V1.998H41.09c-.121 0-.182-.056-.182-.168v-.714c0-.112.061-.168.182-.168h3.36c.122 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-1.078v3.5h5.208v-3.5h-1.078c-.112 0-.168-.056-.168-.168v-.714c0-.112.056-.168.168-.168h3.374c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168h-1.078V9.95h1.078c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168zm7.17-3.304h-5.04c.036.775.28 1.372.727 1.792.458.42.97.63 1.54.63.57 0 1.055-.121 1.456-.364.41-.243.686-.48.826-.714.075-.093.159-.107.252-.042l.378.378c.056.056.084.107.084.154 0 .037-.023.089-.07.154a2.014 2.014 0 0 1-.252.308c-.13.14-.317.299-.56.476-.233.177-.541.327-.924.448a3.874 3.874 0 0 1-1.204.182c-.98 0-1.801-.322-2.464-.966-.653-.644-.98-1.507-.98-2.59 0-1.092.327-1.95.98-2.576.654-.635 1.451-.952 2.394-.952.952 0 1.699.308 2.24.924.541.607.812 1.428.812 2.464v.112c0 .121-.065.182-.196.182zm-.967-.854c-.028-.579-.21-1.04-.546-1.386-.336-.345-.784-.518-1.344-.518s-1.04.159-1.442.476c-.401.317-.64.793-.714 1.428h4.046zM66.21 11H64.99c-.402 0-.602-.196-.602-.588v-.714h-.028c-.682.943-1.592 1.414-2.73 1.414-.672 0-1.223-.173-1.652-.518-.43-.355-.644-.83-.644-1.428 0-.765.331-1.325.994-1.68.672-.364 1.591-.546 2.758-.546h1.176v-.168c0-1.167-.607-1.75-1.82-1.75-.57 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252c-.103.065-.182.117-.238.154-.14.112-.243.121-.308.028l-.392-.49c-.066-.075-.056-.15.028-.224.158-.205.485-.406.98-.602.494-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-1.946-3.22h-1.106c-.542 0-.99.028-1.344.084a2.036 2.036 0 0 0-.91.364c-.243.187-.364.443-.364.77s.13.597.392.812c.27.205.62.308 1.05.308.905 0 1.666-.401 2.282-1.204V7.78zM70.23 11h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V1.886h-.77c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.554c.252 0 .378.117.378.35v8.764h.742c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm5.853-.714c.037.037.056.08.056.126 0 .037-.028.084-.084.14-.41.364-.929.546-1.554.546-.616 0-1.125-.2-1.526-.602-.392-.41-.588-1.003-.588-1.778V5.05h-.784c-.13 0-.196-.06-.196-.182v-.574c0-.121.065-.182.196-.182h.784V2.698c0-.13.065-.196.196-.196h.784c.121 0 .182.065.182.196v1.414h1.778c.13 0 .196.06.196.182v.574c0 .121-.065.182-.196.182h-1.778v3.64c0 .467.103.821.308 1.064.215.233.495.35.84.35.355 0 .62-.089.798-.266.093-.084.177-.08.252.014l.336.434zm8.268.714h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.383 0-.677.06-.882.182a2.598 2.598 0 0 0-.448.308 1.6 1.6 0 0 0-.252.252c-.112.15-.205.303-.28.462v3.836h.742c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V1.886h-.77c-.121 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.764c.112 0 .168.056.168.168v3.122c0 .308-.019.593-.056.854h.028c.457-.719 1.185-1.078 2.184-1.078.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm9.318 0h-3.36c-.121 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h1.064V1.998H90.31c-.121 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h3.36c.121 0 .182.056.182.168v.714c0 .112-.06.168-.182.168h-1.078V9.95h1.078c.121 0 .182.056.182.168v.714c0 .112-.06.168-.182.168zm13.124 0h-1.33c-.215 0-.374-.042-.476-.126-.094-.093-.14-.247-.14-.462V6.73c0-.541-.131-.961-.392-1.26-.252-.299-.63-.448-1.134-.448-.738 0-1.316.322-1.736.966.056.168.084.355.084.56v3.514h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.742V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.383 0-.677.06-.882.182a2.594 2.594 0 0 0-.448.308 1.6 1.6 0 0 0-.252.252c-.112.15-.206.303-.28.462v3.836h.686c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-2.618c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.372c.158 0 .27.033.336.098.074.056.112.163.112.322l-.028.7h.042c.485-.812 1.236-1.218 2.254-1.218 1.026 0 1.726.387 2.1 1.162.532-.775 1.283-1.162 2.254-1.162.746 0 1.325.22 1.736.658.42.439.63 1.031.63 1.778l.014 3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm7.978 0h-1.218c-.401 0-.602-.196-.602-.588v-.714h-.028c-.681.943-1.591 1.414-2.73 1.414-.672 0-1.222-.173-1.652-.518-.429-.355-.644-.83-.644-1.428 0-.765.332-1.325.994-1.68.672-.364 1.592-.546 2.758-.546h1.176v-.168c0-1.167-.606-1.75-1.82-1.75-.569 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252l-.238.154c-.14.112-.242.121-.308.028l-.392-.49c-.065-.075-.056-.15.028-.224.159-.205.486-.406.98-.602.495-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-1.946-3.22h-1.106c-.541 0-.989.028-1.344.084a2.039 2.039 0 0 0-.91.364c-.242.187-.364.443-.364.77s.131.597.392.812c.271.205.621.308 1.05.308.906 0 1.666-.401 2.282-1.204V7.78zm6.236 6.496c-.467 0-.822-.033-1.064-.098a7.108 7.108 0 0 1-.574-.182 2.224 2.224 0 0 1-.364-.154 2.853 2.853 0 0 1-.294-.154c-.411-.27-.565-.467-.462-.588l.364-.518c.056-.084.135-.089.238-.014.009 0 .037.019.084.056.056.047.107.089.154.126.056.037.126.08.21.126.093.056.196.103.308.14.112.047.233.089.364.126.308.084.648.126 1.022.126.672 0 1.208-.163 1.61-.49.41-.317.616-.821.616-1.512V9.67c-.168.392-.448.728-.84 1.008-.383.28-.864.42-1.442.42-.952 0-1.718-.331-2.296-.994-.57-.663-.854-1.521-.854-2.576 0-1.055.289-1.904.868-2.548.588-.644 1.348-.966 2.282-.966.578 0 1.064.135 1.456.406.401.261.69.583.868.966h.028l-.014-1.106c0-.112.056-.168.168-.168h1.652c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-.756v6.216c0 .999-.308 1.75-.924 2.254-.607.504-1.41.756-2.408.756zm-2.072-6.72c0 .765.205 1.386.616 1.862.41.467.924.7 1.54.7s1.124-.233 1.526-.7c.41-.467.616-1.092.616-1.876 0-.784-.206-1.405-.616-1.862a1.943 1.943 0 0 0-1.526-.686c-.616 0-1.13.233-1.54.7-.411.467-.616 1.087-.616 1.862zM127.255 11h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.764c.112 0 .168.056.168.168v5.782h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm-.798-8.96a.765.765 0 0 1 .238.56.72.72 0 0 1-.238.546.742.742 0 0 1-.546.224.792.792 0 0 1-.56-.224.744.744 0 0 1-.224-.546.792.792 0 0 1 .784-.798.72.72 0 0 1 .546.238zm9.492 8.96h-1.33c-.402 0-.602-.196-.602-.588V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.719 0-1.279.294-1.68.882a1.697 1.697 0 0 0-.182.308v3.85h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.121 0 .182.056.182.168l-.028.952h.042c.485-.812 1.236-1.218 2.254-1.218.746 0 1.33.22 1.75.658.42.439.634 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm4.207 3.276c-.466 0-.821-.033-1.064-.098a7.377 7.377 0 0 1-.574-.182 2.263 2.263 0 0 1-.364-.154 3.075 3.075 0 0 1-.294-.154c-.41-.27-.564-.467-.462-.588l.364-.518c.056-.084.136-.089.238-.014.01 0 .038.019.084.056l.154.126c.056.037.126.08.21.126.094.056.196.103.308.14.112.047.234.089.364.126.308.084.649.126 1.022.126.672 0 1.209-.163 1.61-.49.411-.317.616-.821.616-1.512V9.67c-.168.392-.448.728-.84 1.008-.382.28-.863.42-1.442.42-.952 0-1.717-.331-2.296-.994-.569-.663-.854-1.521-.854-2.576 0-1.055.29-1.904.868-2.548.588-.644 1.349-.966 2.282-.966.579 0 1.064.135 1.456.406.402.261.691.583.868.966h.028l-.014-1.106c0-.112.056-.168.168-.168h1.652c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168h-.756v6.216c0 .999-.308 1.75-.924 2.254-.606.504-1.409.756-2.408.756zm-2.072-6.72c0 .765.206 1.386.616 1.862.411.467.924.7 1.54.7s1.125-.233 1.526-.7c.411-.467.616-1.092.616-1.876 0-.784-.205-1.405-.616-1.862a1.941 1.941 0 0 0-1.526-.686c-.616 0-1.129.233-1.54.7-.41.467-.616 1.087-.616 1.862zM154.07 11h-3.864c-.122 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h1.064V1.998h-1.064c-.122 0-.182-.056-.182-.168v-.714c0-.112.06-.168.182-.168h7.182c.121 0 .182.056.182.168V3.37c0 .121-.061.182-.182.182h-.756c-.112 0-.168-.06-.168-.182V1.998h-3.976V5.47h3.29c.121 0 .182.056.182.168v.714c0 .112-.061.168-.182.168h-3.29v3.43h1.582c.112 0 .168.056.168.168v.714c0 .112-.056.168-.168.168zm9.612-.882c-.653.653-1.488.98-2.506.98-1.017 0-1.852-.322-2.506-.966-.653-.653-.98-1.517-.98-2.59 0-1.083.332-1.941.994-2.576.663-.635 1.494-.952 2.492-.952 1.008 0 1.839.322 2.492.966.663.635.994 1.489.994 2.562 0 1.064-.326 1.923-.98 2.576zm-4.816-2.576c0 .765.224 1.386.672 1.862.448.476.994.714 1.638.714.654 0 1.204-.238 1.652-.714.448-.476.672-1.097.672-1.862 0-.765-.228-1.381-.686-1.848a2.168 2.168 0 0 0-1.624-.7c-.634 0-1.18.233-1.638.7-.457.467-.686 1.083-.686 1.848zM172.763 11h-1.218c-.401 0-.602-.196-.602-.588v-.518h-.042c-.383.803-1.111 1.204-2.184 1.204-.747 0-1.339-.22-1.778-.658-.429-.448-.649-1.04-.658-1.778V5.05h-.798c-.112 0-.168-.056-.168-.168V4.28c0-.112.056-.168.168-.168h1.344c.401 0 .602.196.602.588v3.682c0 .541.131.961.392 1.26.261.299.644.448 1.148.448.681 0 1.218-.252 1.61-.756.168-.215.252-.36.252-.434V5.05h-.756c-.112 0-.168-.056-.168-.168V4.28c0-.112.056-.168.168-.168h1.736c.112 0 .168.056.168.168v5.782h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm8.658 0h-1.33c-.401 0-.602-.196-.602-.588V6.73c0-.541-.13-.961-.392-1.26-.261-.299-.644-.448-1.148-.448-.718 0-1.278.294-1.68.882a1.824 1.824 0 0 0-.182.308v3.85h.742c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168h-2.674c-.121 0-.182-.056-.182-.168v-.602c0-.112.061-.168.182-.168h.77V5.05h-.77c-.121 0-.182-.056-.182-.168V4.28c0-.112.061-.168.182-.168h1.638c.122 0 .182.056.182.168l-.028.952h.042c.486-.812 1.237-1.218 2.254-1.218.747 0 1.33.22 1.75.658.42.439.635 1.031.644 1.778v3.612h.784c.122 0 .182.056.182.168v.602c0 .112-.06.168-.182.168zm8.215 0h-1.218c-.215 0-.374-.042-.476-.126-.094-.093-.14-.247-.14-.462v-.784h-.014c-.15.392-.43.737-.84 1.036-.411.29-.91.434-1.498.434-.934 0-1.694-.327-2.282-.98-.579-.653-.868-1.507-.868-2.562 0-1.064.289-1.918.868-2.562.588-.653 1.353-.98 2.296-.98.578 0 1.059.135 1.442.406.382.261.658.583.826.966h.014a8.784 8.784 0 0 1-.014-.462V1.886h-.784c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h1.736c.112 0 .168.056.168.168v8.946h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zm-6.188-3.472c0 .775.2 1.4.602 1.876.41.476.928.714 1.554.714.625 0 1.138-.233 1.54-.7.401-.476.602-1.106.602-1.89 0-.784-.206-1.4-.616-1.848a1.97 1.97 0 0 0-1.526-.686c-.607 0-1.12.229-1.54.686-.411.457-.616 1.073-.616 1.848zM197.746 11h-1.218c-.401 0-.602-.196-.602-.588v-.714h-.028c-.681.943-1.591 1.414-2.73 1.414-.672 0-1.223-.173-1.652-.518-.429-.355-.644-.83-.644-1.428 0-.765.331-1.325.994-1.68.672-.364 1.591-.546 2.758-.546h1.176v-.168c0-1.167-.607-1.75-1.82-1.75-.569 0-.98.056-1.232.168a4.718 4.718 0 0 0-.546.252c-.103.065-.182.117-.238.154-.14.112-.243.121-.308.028l-.392-.49c-.065-.075-.056-.15.028-.224.159-.205.485-.406.98-.602.495-.196 1.078-.294 1.75-.294 1.96 0 2.94.933 2.94 2.8v3.248h.784c.112 0 .168.056.168.168v.602c0 .112-.056.168-.168.168zM195.8 7.78h-1.106c-.541 0-.989.028-1.344.084a2.034 2.034 0 0 0-.91.364c-.243.187-.364.443-.364.77s.131.597.392.812c.271.205.621.308 1.05.308.905 0 1.666-.401 2.282-1.204V7.78zm7.459 2.506c.037.037.056.08.056.126 0 .037-.028.084-.084.14-.411.364-.929.546-1.554.546-.616 0-1.125-.2-1.526-.602-.392-.41-.588-1.003-.588-1.778V5.05h-.784c-.131 0-.196-.06-.196-.182v-.574c0-.121.065-.182.196-.182h.784V2.698c0-.13.065-.196.196-.196h.784c.121 0 .182.065.182.196v1.414h1.778c.13 0 .196.06.196.182v.574c0 .121-.066.182-.196.182h-1.778v3.64c0 .467.102.821.308 1.064.214.233.494.35.84.35.354 0 .62-.089.798-.266.093-.084.177-.08.252.014l.336.434zm3.69.714h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.764c.112 0 .168.056.168.168v5.782h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168zm-.798-8.96a.769.769 0 0 1 .238.56c0 .215-.08.397-.238.546a.745.745 0 0 1-.546.224.789.789 0 0 1-.56-.224.74.74 0 0 1-.224-.546.788.788 0 0 1 .784-.798c.214 0 .396.08.546.238zm7.871 8.078c-.653.653-1.489.98-2.506.98-1.017 0-1.853-.322-2.506-.966-.653-.653-.98-1.517-.98-2.59 0-1.083.331-1.941.994-2.576s1.493-.952 2.492-.952c1.008 0 1.839.322 2.492.966.663.635.994 1.489.994 2.562 0 1.064-.327 1.923-.98 2.576zm-4.816-2.576c0 .765.224 1.386.672 1.862.448.476.994.714 1.638.714a2.18 2.18 0 0 0 1.652-.714c.448-.476.672-1.097.672-1.862 0-.765-.229-1.381-.686-1.848a2.168 2.168 0 0 0-1.624-.7c-.635 0-1.181.233-1.638.7-.457.467-.686 1.083-.686 1.848zM223.49 11h-1.33c-.402 0-.602-.196-.602-.588V6.73c0-.541-.131-.961-.392-1.26-.262-.299-.644-.448-1.148-.448-.719 0-1.279.294-1.68.882a1.697 1.697 0 0 0-.182.308v3.85h.742c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168h-2.674c-.122 0-.182-.056-.182-.168v-.602c0-.112.06-.168.182-.168h.77V5.05h-.77c-.122 0-.182-.056-.182-.168V4.28c0-.112.06-.168.182-.168h1.638c.121 0 .182.056.182.168l-.028.952h.042c.485-.812 1.236-1.218 2.254-1.218.746 0 1.33.22 1.75.658.42.439.634 1.031.644 1.778v3.612h.784c.121 0 .182.056.182.168v.602c0 .112-.061.168-.182.168z",fill:"#fff"}))};ie.defaultProps={viewBox:"0 0 224 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var se=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Oval"),a.a.createElement("path",{d:"M12 5.5c-4.688 0-8.5 3.813-8.5 8.5s3.813 8.5 8.5 8.5 8.5-3.813 8.5-8.5-3.813-8.5-8.5-8.5zM24 14c0 6.625-5.375 12-12 12S0 20.625 0 14 5.375 2 12 2s12 5.375 12 12z"}))};se.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var ce=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Pallete"),a.a.createElement("path",{d:"M17.484 12c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-3-3.984c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-4.968 0c.844 0 1.5-.656 1.5-1.5s-.656-1.5-1.5-1.5-1.5.656-1.5 1.5.656 1.5 1.5 1.5zm-3 3.984c.844 0 1.5-.656 1.5-1.5S7.36 9 6.516 9s-1.5.656-1.5 1.5.656 1.5 1.5 1.5zM12 3c4.969 0 9 3.609 9 8.016 0 2.766-2.25 4.969-5.016 4.969H14.25c-.844 0-1.5.656-1.5 1.5 0 .375.141.703.375.984s.375.656.375 1.031c0 .844-.656 1.5-1.5 1.5-4.969 0-9-4.031-9-9s4.031-9 9-9z"}))};ce.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var ue=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}))};ue.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var le=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Add"),a.a.createElement("path",{d:"M6.5 7v5c0 .28-.22.5-.5.5s-.5-.22-.5-.5V7h-5C.22 7 0 6.78 0 6.5S.22 6 .5 6h5V1c0-.28.22-.5.5-.5s.5.22.5.5v5h5c.28 0 .5.22.5.5s-.22.5-.5.5h-5z"}))};le.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"};var fe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Power Off"),a.a.createElement("path",{d:"M24 14c0 6.609-5.391 12-12 12S0 20.609 0 14c0-3.797 1.75-7.297 4.797-9.578a1.979 1.979 0 0 1 2.797.391 1.995 1.995 0 0 1-.391 2.797C5.172 9.141 4 11.469 4 14.001c0 4.406 3.594 8 8 8s8-3.594 8-8c0-2.531-1.172-4.859-3.203-6.391a1.995 1.995 0 0 1-.391-2.797 1.981 1.981 0 0 1 2.797-.391A11.877 11.877 0 0 1 24 14zM14 2v10c0 1.094-.906 2-2 2s-2-.906-2-2V2c0-1.094.906-2 2-2s2 .906 2 2z"}))};fe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var pe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Reset"),a.a.createElement("path",{d:"M24 14c0 6.609-5.391 12-12 12a11.972 11.972 0 0 1-9.234-4.328.52.52 0 0 1 .031-.672l2.141-2.156a.599.599 0 0 1 .391-.141.51.51 0 0 1 .359.187A7.91 7.91 0 0 0 12 21.999c4.406 0 8-3.594 8-8s-3.594-8-8-8A7.952 7.952 0 0 0 6.563 8.14l2.141 2.156a.964.964 0 0 1 .219 1.078 1.002 1.002 0 0 1-.922.625h-7c-.547 0-1-.453-1-1v-7c0-.406.25-.766.625-.922a.964.964 0 0 1 1.078.219l2.031 2.016c2.203-2.078 5.187-3.313 8.266-3.313 6.609 0 12 5.391 12 12z"}))};pe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var me=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Rotate"),a.a.createElement("path",{d:"M24 4v7c0 .547-.453 1-1 1h-7c-.406 0-.766-.25-.922-.625a.964.964 0 0 1 .219-1.078l2.156-2.156A8.026 8.026 0 0 0 12 6c-4.406 0-8 3.594-8 8s3.594 8 8 8a7.91 7.91 0 0 0 6.312-3.109.508.508 0 0 1 .359-.187.6.6 0 0 1 .391.141l2.141 2.156c.187.172.187.469.031.672A11.972 11.972 0 0 1 12 26.001c-6.609 0-12-5.391-12-12s5.391-12 12-12c3.078 0 6.062 1.234 8.266 3.313l2.031-2.016a.984.984 0 0 1 1.094-.219c.359.156.609.516.609.922z"}))};me.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 28",width:"1em",height:"1em",fill:"currentColor"};var de=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Rotate Right"),a.a.createElement("path",{d:"M16.875 15.469a5.509 5.509 0 0 0 1.031-2.484h2.016a8.11 8.11 0 0 1-1.594 3.891zm-3.891 2.437a5.527 5.527 0 0 0 2.484-1.031l1.453 1.453c-1.172.891-2.531 1.406-3.938 1.594v-2.016zm6.938-6.89h-2.016a5.527 5.527 0 0 0-1.031-2.484l1.453-1.406a8.107 8.107 0 0 1 1.594 3.891zm-4.359-5.485l-4.547 4.453V6.093C8.157 6.562 6 9.046 6 11.999s2.156 5.438 5.016 5.906v2.016c-3.938-.469-7.031-3.844-7.031-7.922s3.094-7.453 7.031-7.922V.983z"}))};de.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var he=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM272 80v80H144V80h128zm122 352H54a6 6 0 0 1-6-6V86a6 6 0 0 1 6-6h42v104c0 13.255 10.745 24 24 24h176c13.255 0 24-10.745 24-24V83.882l78.243 78.243a6 6 0 0 1 1.757 4.243V426a6 6 0 0 1-6 6zM224 232c-48.523 0-88 39.477-88 88s39.477 88 88 88 88-39.477 88-88-39.477-88-88-88zm0 128c-22.056 0-40-17.944-40-40s17.944-40 40-40 40 17.944 40 40-17.944 40-40 40z"}))};he.defaultProps={"data-icon":"save",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};var ve=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Scissors"),a.a.createElement("path",{d:"M278.06 256L444.48 89.57c4.69-4.69 4.69-12.29 0-16.97-32.8-32.8-85.99-32.8-118.79 0L210.18 188.12l-24.86-24.86c4.31-10.92 6.68-22.81 6.68-35.26 0-53.02-42.98-96-96-96S0 74.98 0 128s42.98 96 96 96c4.54 0 8.99-.32 13.36-.93L142.29 256l-32.93 32.93c-4.37-.61-8.83-.93-13.36-.93-53.02 0-96 42.98-96 96s42.98 96 96 96 96-42.98 96-96c0-12.45-2.37-24.34-6.68-35.26l24.86-24.86L325.69 439.4c32.8 32.8 85.99 32.8 118.79 0 4.69-4.68 4.69-12.28 0-16.97L278.06 256zM96 160c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32zm0 256c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"}))};ve.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var ge=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Search"),a.a.createElement("path",{d:"M9.516 14.016c2.484 0 4.5-2.016 4.5-4.5s-2.016-4.5-4.5-4.5-4.5 2.016-4.5 4.5 2.016 4.5 4.5 4.5zm6 0l4.969 4.969-1.5 1.5-4.969-4.969v-.797l-.281-.281c-1.125.984-2.625 1.547-4.219 1.547C5.907 15.985 3 13.126 3 9.516S5.906 3 9.516 3s6.469 2.906 6.469 6.516c0 1.594-.563 3.094-1.547 4.219l.281.281h.797z"}))};ge.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var ye=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Search Plus"),a.a.createElement("g",{fill:"none",strokeWidth:"2",strokeLinecap:"round"},a.a.createElement("path",{d:"M11.5 11.5L16 16"}),a.a.createElement("circle",{cx:"7",cy:"7",r:"6"})))};ye.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"1em",height:"1em",stroke:"currentColor"};var be=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Soft Tissue"),a.a.createElement("path",{d:"M14.968 4.345c.287.06.474.11.524.13l3.5 1.4a3 3 0 0 1 1.824 2.16l2.108 4.816a.5.5 0 0 1-.489.605H19.83a.5.5 0 0 1-.487-.386c-.922-1.726-1.395-2.634-1.417-2.725-.033-.137-1.326-.08-1.466-.064a.279.279 0 0 0-.247.275l.788 9.812a.504.504 0 0 1-.005.073l.343 3.766a.51.51 0 0 1-.51.533h-2.873a.51.51 0 0 1-.51-.465l-.599-3.407h-2.702L9.49 24.28a.51.51 0 0 1-.51.464H6.11a.51.51 0 0 1-.51-.532l.549-8.384.17-5.208a.279.279 0 0 0-.246-.275c-.14-.016-1.218-.049-1.252.088L3.8 13.071a.5.5 0 0 1-.49.385H.71a.5.5 0 0 1-.49-.605l1.966-4.813c.21-.98.895-1.79 1.827-2.16l3.5-1.4c.051-.02.235-.068.52-.126L8.618.988c.941.408 1.845.612 2.711.612.867 0 1.694-.204 2.48-.612l1.159 3.357z"}))};be.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 26",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"};var Se=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort"),a.a.createElement("path",{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}))};Se.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var we=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort Down"),a.a.createElement("path",{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"}))};we.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var Oe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sort Up"),a.a.createElement("path",{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"}))};Oe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",width:"1em",height:"1em",fill:"currentColor"};var Ie=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sphere"),a.a.createElement("path",{d:"M256 0C114.837 0 0 114.837 0 256s114.837 256 256 256 256-114.837 256-256S397.163 0 256 0zm0 21.333c129.387 0 234.667 105.28 234.667 234.667 0 40.363-96.384 85.333-234.667 85.333-28.629 0-55.339-2.005-79.893-5.44-3.435-24.555-5.44-51.264-5.44-79.893 0-138.283 44.97-234.667 85.333-234.667zm-47.488 4.843C173.184 67.435 149.333 153.707 149.333 256c0 26.688 1.621 52.309 4.651 76.309C72.683 317.205 21.333 285.419 21.333 256c0-113.131 80.491-207.808 187.179-229.824zM26.176 303.488c27.072 23.168 73.429 41.429 131.136 51.2 9.792 57.707 28.032 104.064 51.2 131.136-91.349-18.859-163.477-90.987-182.336-182.336zM256 490.667c-29.419 0-61.205-51.349-76.309-132.651 24 3.029 49.621 4.651 76.309 4.651 102.293 0 188.565-23.851 229.824-59.179C463.808 410.176 369.131 490.667 256 490.667z"}))};Ie.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var Ee=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Square Outline"),a.a.createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V86c0-3.3 2.7-6 6-6h340c3.3 0 6 2.7 6 6v340c0 3.3-2.7 6-6 6z"}))};Ee.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Pe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Star"),a.a.createElement("path",{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}))};Pe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",width:"1em",height:"1em",fill:"currentColor"};var De=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"}))};De.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Ce=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"}))};Ce.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Te=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Sun"),a.a.createElement("path",{d:"M494.2 221.9l-59.8-40.5 13.7-71c2.6-13.2-1.6-26.8-11.1-36.4-9.6-9.5-23.2-13.7-36.2-11.1l-70.9 13.7-40.4-59.9c-15.1-22.3-51.9-22.3-67 0l-40.4 59.9-70.8-13.7C98 60.4 84.5 64.5 75 74.1c-9.5 9.6-13.7 23.1-11.1 36.3l13.7 71-59.8 40.5C6.6 229.5 0 242 0 255.5s6.7 26 17.8 33.5l59.8 40.5-13.7 71c-2.6 13.2 1.6 26.8 11.1 36.3 9.5 9.5 22.9 13.7 36.3 11.1l70.8-13.7 40.4 59.9C230 505.3 242.6 512 256 512s26-6.7 33.5-17.8l40.4-59.9 70.9 13.7c13.4 2.7 26.8-1.6 36.3-11.1 9.5-9.5 13.6-23.1 11.1-36.3l-13.7-71 59.8-40.5c11.1-7.5 17.8-20.1 17.8-33.5-.1-13.6-6.7-26.1-17.9-33.7zm-112.9 85.6l17.6 91.2-91-17.6L256 458l-51.9-77-90.9 17.6 17.6-91.2-76.8-52 76.8-52-17.6-91.2 91 17.6L256 53l51.9 76.9 91-17.6-17.6 91.1 76.8 52-76.8 52.1zM256 152c-57.3 0-104 46.7-104 104s46.7 104 104 104 104-46.7 104-104-46.7-104-104-104zm0 160c-30.9 0-56-25.1-56-56s25.1-56 56-56 56 25.1 56 56-25.1 56-56 56z"}))};Te.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var xe=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH"),a.a.createElement("path",{d:"M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"}))};xe.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var ke=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH Large"),a.a.createElement("path",{d:"M0 0h7v6H0zm8 0h7v6H8zM0 7h7v6H0zm8 0h7v6H8z"}))};ke.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 13",width:"1em",height:"1em",fill:"currentColor"};var je=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"TH List"),a.a.createElement("path",{d:"M9 5.016h12V9H9V5.016zm0 13.968V15h12v3.984H9zm0-4.968V9.985h12v4.031H9zM3.984 9V5.016h4.031V9H3.984zm0 9.984V15h4.031v3.984H3.984zm0-4.968V9.985h4.031v4.031H3.984z"}))};je.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor"};var Re=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Times"),a.a.createElement("path",{d:"M1 1l12 12M1 13L13 1"}))};Re.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.75"};var Ne=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Trash"),a.a.createElement("path",{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"}))};Ne.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Me=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"Unlink"),a.a.createElement("path",{d:"M304.083 388.936c4.686 4.686 4.686 12.284 0 16.971l-65.057 65.056c-54.709 54.711-143.27 54.721-197.989 0-54.713-54.713-54.719-143.27 0-197.989l65.056-65.057c4.686-4.686 12.284-4.686 16.971 0l22.627 22.627c4.686 4.686 4.686 12.284 0 16.971L81.386 311.82c-34.341 34.341-33.451 88.269.597 120.866 32.577 31.187 84.788 31.337 117.445-1.32l65.057-65.056c4.686-4.686 12.284-4.686 16.971 0l22.627 22.626zm-56.568-243.245l64.304-64.304c34.346-34.346 88.286-33.453 120.882.612 31.18 32.586 31.309 84.785-1.335 117.43l-65.056 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.686 4.686 12.284 4.686 16.971 0l65.056-65.057c54.711-54.709 54.721-143.271 0-197.99-54.71-54.711-143.27-54.72-197.989 0l-65.057 65.057c-4.686 4.686-4.686 12.284 0 16.971l22.627 22.627c4.685 4.685 12.283 4.685 16.97-.001zm238.343 362.794l22.627-22.627c4.686-4.686 4.686-12.284 0-16.971L43.112 3.515c-4.686-4.686-12.284-4.686-16.971 0L3.515 26.142c-4.686 4.686-4.686 12.284 0 16.971l465.373 465.373c4.686 4.686 12.284 4.686 16.97-.001z"}))};Me.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"1em",height:"1em",fill:"currentColor"};var _e=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"User"),a.a.createElement("path",{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}))};_e.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Ae=function(e){return a.a.createElement("svg",e,a.a.createElement("title",null,"YouTube Logo"),a.a.createElement("path",{d:"M11.109 17.625l7.562-3.906-7.562-3.953v7.859zM14 4.156c5.891 0 9.797.281 9.797.281.547.063 1.75.063 2.812 1.188 0 0 .859.844 1.109 2.781.297 2.266.281 4.531.281 4.531v2.125s.016 2.266-.281 4.531c-.25 1.922-1.109 2.781-1.109 2.781-1.062 1.109-2.266 1.109-2.812 1.172 0 0-3.906.297-9.797.297-7.281-.063-9.516-.281-9.516-.281-.625-.109-2.031-.078-3.094-1.188 0 0-.859-.859-1.109-2.781C-.016 17.327 0 15.062 0 15.062v-2.125s-.016-2.266.281-4.531C.531 6.469 1.39 5.625 1.39 5.625 2.452 4.5 3.656 4.5 4.202 4.437c0 0 3.906-.281 9.797-.281z"}))};Ae.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"1em",height:"1em",fill:"currentColor"};var Le=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}))};Le.defaultProps={"data-prefix":"fas","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"};var Ue=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{fill:"currentColor",d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}))};Ue.defaultProps={"data-prefix":"fas","data-icon":"eye-slash",className:"svg-inline--fa fa-eye-slash fa-w-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"};var Ve=function(e){return a.a.createElement("svg",e,a.a.createElement("path",{d:"M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM178.117 262.104C87.429 196.287 88.353 196.121 64 177.167V152c0-13.255 10.745-24 24-24h272c13.255 0 24 10.745 24 24v25.167c-24.371 18.969-23.434 19.124-114.117 84.938-10.5 7.655-31.392 26.12-45.883 25.894-14.503.218-35.367-18.227-45.883-25.895zM384 217.775V360c0 13.255-10.745 24-24 24H88c-13.255 0-24-10.745-24-24V217.775c13.958 10.794 33.329 25.236 95.303 70.214 14.162 10.341 37.975 32.145 64.694 32.01 26.887.134 51.037-22.041 64.72-32.025 61.958-44.965 81.325-59.406 95.283-70.199z"}))};Ve.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",width:"1em",height:"1em",fill:"currentColor"};var Fe={eye:Le,"eye-closed":Ue,brush:d,scissors:ve,user:_e,sort:Se,th:xe,star:Pe,"sort-up":Oe,sphere:Ie,"sort-down":we,info:q,cube:x,crosshairs:T,"dot-circle":R,"angle-left":c,"3d-rotate":k,plus:le,"chevron-down":S,"angle-double-down":i,"angle-double-up":s,"arrows-alt-h":l,"arrows-alt-v":f,bars:p,"caret-down":h,"caret-up":v,"check-circle-o":b,check:g,circle:w,"circle-o":I,times:Re,"create-comment":D,"create-screen-capture":C,edit:N,"fast-backward":V,"fast-forward":F,"object-group":ae,search:ge,"power-off":fe,"inline-edit":z,list:$,"ohif-logo":oe,"ohif-text-logo":ie,lock:Y,play:ue,database:j,cog:P,"circle-notch":O,"square-o":Ee,"check-circle":y,"lock-alt":X,"step-backward":De,"step-forward":Ce,clipboard:E,stop:B,"th-large":ke,"th-list":je,sun:Te,palette:ce,youtube:Ae,oval:se,"ellipse-h":_,"ellipse-v":A,adjust:o,level:H,"link-circles":G,"search-plus":ye,"measure-non-target":Z,"measure-target":Q,"measure-target-cr":ee,"measure-target-un":ne,"measure-target-ne":te,"measure-temp":re,"ellipse-circle":M,arrows:u,reset:pe,rotate:me,"rotate-right":de,trash:Ne,unlink:Me,"exclamation-circle":L,link:W,"exclamation-triangle":U,brain:m,"soft-tissue":be,lung:K,liver:J,save:he,"envelope-square":Ve};n(707);var Be=n(1),qe=function(e){return function(e,t){return e&&Fe[e]?a.a.createElement(Fe[e],t):a.a.createElement("div",null,"Missing Icon")}(e.name,e)};qe.propTypes={name:n.n(Be).a.string.isRequired};var ze=qe;n.d(t,"a",(function(){return ze}))},,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(19),c=n.n(s);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var m=Object(r.createContext)(null),d=m.Provider,h=function(e){var t=e.children,n=e.modal,o=e.service,i={content:null,contentProps:null,shouldCloseOnEsc:!1,isOpen:!0,onClose:null,closeButton:!0,showScrollbar:!1,title:null,customClassName:"",fullscreen:!1},s=p(Object(r.useState)(i),2),m=s[0],h=s[1],v=Object(r.useCallback)((function(e){return h(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m,{},e))}),[m]),g=Object(r.useCallback)((function(){return h(i)}),[i]);Object(r.useEffect)((function(){o&&o.setServiceImplementation({hide:g,show:v})}),[g,o,v]);var y=m.content,b=m.contentProps,S=m.isOpen,w=m.onClose,O=m.title,I=m.customClassName,E=m.shouldCloseOnEsc,P=m.fullscreen,D=m.closeButton,C=m.showScrollbar,T=m.noScroll;return a.a.createElement(d,{value:{show:v,hide:g}},y&&a.a.createElement(n,{className:c()(I,y.className,{visibleScrollbar:C},{noScroll:T}),shouldCloseOnEsc:E,isOpen:S,title:O,fullscreen:P,closeButton:D,onClose:function(){w&&w(),g()}},a.a.createElement(y,u({},b,{show:v,hide:g}))),t)},v=function(e){return function(t){var n=Object(r.useContext)(m),o=n.show,i=n.hide;return a.a.createElement(e,u({},t,{modal:{show:o,hide:i}}))}};h.defaultProps={service:null},h.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]).isRequired,modal:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var g=h,y=(m.Consumer,n(148));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){var t=e.options,n=e.onClose,o=function(){n(t.id)};return Object(r.useEffect)((function(){t.autoClose&&setTimeout((function(){o()}),t.duration)}),[]),a.a.createElement("div",{className:"".concat(t.visible?"":"sb-hidden"," sb-").concat(t.type," sb-item")},a.a.createElement("span",{className:"sb-closeBtn",onClick:o},a.a.createElement("span",{className:"sb-closeIcon"},"x")),t.title&&a.a.createElement("div",{className:"sb-title"},t.title),t.message&&a.a.createElement("div",{className:"sb-message"},t.message),t.action&&a.a.createElement("button",{className:"sb-action",onClick:function(){t.action.onClick(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{close:o}))}},t.action.label))},O=(n(736),function(){var e=j(),t=e.snackbarItems,n=e.hide;if(!t)return null;var r;return a.a.createElement(a.a.Fragment,null,(r={topLeft:[],topCenter:[],topRight:[],bottomLeft:[],bottomCenter:[],bottomRight:[]},t.map((function(e){r[e.position].push(e)})),a.a.createElement("div",null,Object.keys(r).map((function(e){return r[e].length?a.a.createElement("div",{key:e,className:"sb-container sb-".concat(e)},r[e].map((function(e,t){return a.a.createElement("div",{key:e.id+t},function(e){return a.a.createElement(w,{key:e.itemId,options:e,onClose:n})}(e))}))):null})))))}),I="info";function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var x=y.a.LogManager,k=Object(r.createContext)(null),j=function(){return Object(r.useContext)(k)},R=function(e){var t=e.children,n=e.service,o={title:"",message:"",duration:5e3,autoClose:!0,position:"bottomRight",type:I,action:null},i=T(Object(r.useState)(1),2),s=i[0],c=i[1],u=T(Object(r.useState)([]),2),l=u[0],f=u[1];Object(r.useEffect)((function(){var e=function(e){var t=e.type,n=e.notify,r=e.title,a=e.message;n&&p({type:t,title:r,message:a})};return x.subscribe(x.EVENTS.OnLog,e),function(){x.unsubscribe(x.EVENTS.OnLog,e)}}),[p]);var p=Object(r.useCallback)((function(e){if(!e||!e.title&&!e.message)return console.warn("Snackbar cannot be rendered without required parameters: title | message"),null;"error"===e.type&&console.error(e.error);var t=D({},o,{},e,{id:s,visible:!0});f((function(e){return[].concat(E(e),[t])})),c(s+1)}),[s,o]),m=Object(r.useCallback)((function(e){f((function(t){return t.map((function(t){return t.id===e&&(t.visible=!1),t}))})),setTimeout((function(){f((function(t){return E(t.filter((function(t){return t.id!==e})))}))}),1e3)}),[f]),d=function(){c(1),f((function(){return[]}))};return Object(r.useEffect)((function(){n&&n.setServiceImplementation({hide:m,show:p})}),[n,m,p]),window.snackbar={show:p,hide:m,hideAll:d},a.a.createElement(k.Provider,{value:{show:p,hide:m,hideAll:d,snackbarItems:l}},!!l&&a.a.createElement(O,null),t)};R.defaultProps={service:null},R.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var N=R,M=n(38),_=n(120),A=function(e){return function(t){return function(e){return function(t){return a.a.createElement(M.a,{i18n:_.a},a.a.createElement(e,t))}}(Object(M.d)(e)((function(e){return a.a.createElement(t,e)})))}},L=n(638),U=n.n(L),V=n(147);n(746);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var G=Object(r.createContext)(null),$=function(e){var t=e.children,n=e.service,o=W(Object(r.useState)(!1),2),i=o[0],s=o[1],u=W(Object(r.useState)([]),2),l=u[0],f=u[1],p=W(Object(r.useState)(null),2),m=p[0],d=p[1],h=W(Object(r.useState)(null),2),v=h[0],g=h[1],y=W(Object(r.useState)([]),2),b=y[0],S=y[1];Object(r.useEffect)((function(){S(l.map((function(e){return z({id:e.id},w(e.id))})))}),[l]);var w=function(e){var t=document.querySelector("#root"),n=t.offsetLeft+t.offsetWidth/2,r=t.offsetTop+t.offsetHeight/2,a=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();return{x:n-a.width/2,y:r-a.height/2}},O=Object(r.useCallback)((function(e){var t=e.id;return t||(t=V.a.guid()),f((function(n){return[].concat(B(n),[z({},e,{id:t})])})),d(t),t}),[]),I=Object(r.useCallback)((function(e){var t=e.id;return f((function(e){return e.filter((function(e){return e.id!==t}))}))}),[]);Object(r.useEffect)((function(){n&&n.setServiceImplementation({create:O,dismiss:I,dismissAll:P})}),[O,I,n]);var E=Object(r.useCallback)((function(e){f((function(t){var n=t.find((function(t){return t.id===e}));return n?[].concat(B(t.filter((function(t){return t.id!==e}))),[n]):t}))}),[]);Object(r.useEffect)((function(){return E(m)}),[E,m]);var P=function(){f([])},D=function(){return l&&l.length<1},C=function(e){var t=document.querySelector("#draggableItem-".concat(e)).getBoundingClientRect();g({x:t.x,y:t.y})},T=function(e){return e&&"function"==typeof e};return a.a.createElement(G.Provider,{value:{create:O,dismiss:I,dismissAll:P,isEmpty:D}},!D()&&a.a.createElement("div",{className:"DraggableArea"},l.map((function(e){var t=e.id,n=e.content,r=e.contentProps,o=e.defaultPosition,u=e.centralize,l=void 0!==u&&u,f=e.preservePosition,p=void 0===f||f,m=e.isDraggable,d=void 0===m||m,h=e.onStart,g=e.onStop,y=e.onDrag,S=e.showOverlay,w=p&&v||o;l&&(w=b.find((function(e){return e.id===t})));var O=function(){return a.a.createElement(U.a,{key:t,disabled:!d,position:w,defaultPosition:w,bounds:"parent",onStart:function(e){var t=e||window.event,n=t.target||t.srcElement;return!["SVG","BUTTON","PATH","INPUT","SPAN","LABEL"].includes(n.tagName.toUpperCase())&&(T(h)?h(e):void 0)},onStop:function(e){if(s(!1),T(g))return g(e)},onDrag:function(e){if(s(!0),E(t),C(t),T(y))return y(e)}},a.a.createElement("div",{id:"draggableItem-".concat(t),className:c()("DraggableItem",i&&"dragging",d&&"draggable"),style:{zIndex:"999",position:"absolute"},onClick:function(){return E(t)}},a.a.createElement(n,F({},e,r))))};return S?a.a.createElement("div",{className:"Overlay",key:t},O()):O()}))),t)},J=function(e){return function(t){var n=Object(r.useContext)(G),o=n.create,i=n.dismiss,s=n.dismissAll,c=n.isEmpty;return a.a.createElement(e,F({},t,{dialog:{create:o,dismiss:i,dismissAll:s,isEmpty:c}}))}};$.defaultProps={service:null},$.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node,i.a.func]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var Y=$;function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=Object(r.createContext)(null),ne=te.Provider,re=function(){return Object(r.useContext)(te)},ae=function(e){var t=e.children,n=e.service,o=ee(Object(r.useState)({errors:[],infos:[]}),2),i=o[0],s=o[1];Object(r.useEffect)((function(){var e=function(e){var t=e.error,n=e.message;c({error:t,message:n})};return window.addEventListener("error",e),function(){window.removeEventListener("error",e)}}),[]);var c=function(e){var t=e.error,n=void 0===t?{}:t,r=e.stack,a=void 0===r?"":r,o=e.message,i=void 0===o?"":o,c=e.displayOnConsole,u=void 0===c||c,l={error:n,stack:a,message:i,displayOnConsole:u};s((function(e){return Z({},e,{errors:[].concat(X(e.errors),[l])})})),u&&console.error(n)},u=function(e){var t=e.message,n=void 0===t?"":t,r=e.displayOnConsole,a=void 0===r||r;s((function(e){return Z({},e,{infos:e.infos.push({message:n,displayOnConsole:a})})})),a&&console.info(n)};return Object(r.useEffect)((function(){n&&n.setServiceImplementation({error:c,info:u})}),[c,n,u]),a.a.createElement(ne,{value:{info:u,error:c,state:i}},t)};ae.defaultProps={service:null},ae.propTypes={children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]).isRequired,service:i.a.shape({setServiceImplementation:i.a.func})};var oe=ae;te.Consumer;n.d(t,"c",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return N})),n.d(t,"f",(function(){return j})),n.d(t,"i",(function(){return A})),n.d(t,"a",(function(){return Y})),n.d(t,"g",(function(){return J})),n.d(t,"b",(function(){return oe})),n.d(t,"e",(function(){return re}))},,,,,function(e,t,n){"use strict";t.a=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},,,,,,function(e,t,n){"use strict";t.a={getHTTPErrorHandler:function(){return null}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&c(a,n.prototype),a}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=a(this,u(t).call(this))).message=e,n.stack=(new Error).stack,n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),t}(o(Error));t.a=l},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var r=n(533),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c={retries:5,factor:3,minTimeout:1e3,maxTimeout:6e4,randomize:!0,retryableStatusCodes:[429,500]},u=i({},c),l=function(e,t){var n=t.url,r=t.method;var o=e.send;return e.send=function(){var t=a.a.operation(u);t.attempt((function(a){var o=e.onreadystatechange;e.onreadystatechange=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];if(o.apply(e,a),u.retryableStatusCodes.includes(e.status)){var s="Attempt to request ".concat(n," failed."),c=new Error(s);t.retry(c)}},a>1&&(console.warn("Requesting ".concat(n,"... (attempt: ").concat(a,")")),e.open(r,n,!0))}));for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];o.apply(e,s)},e},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u=i({},c),"retries"in e&&(u.retries=e.retries),"factor"in e&&(u.factor=e.factor),"minTimeout"in e&&(u.minTimeout=e.minTimeout),"maxTimeout"in e&&(u.maxTimeout=e.maxTimeout),"randomize"in e&&(u.randomize=e.randomize),"retryableStatusCodes"in e&&(u.retryableStatusCodes=e.retryableStatusCodes),l};t.a=f},function(e,t,n){"use strict";var r={userLoggedIn:function(){return!1},getUserId:function(){return null},getName:function(){return null},getAccessToken:function(){return null},login:function(){return new Promise((function(e,t){return t()}))},logout:function(){return new Promise((function(e,t){return t()}))},getData:function(e){return null},setData:function(e,t){return null}};t.a=r},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return o}));var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"_data",{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(this,"_uid",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(this,"_custom",{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)})}var t,n,o;return t=e,o=[{key:"isValidUID",value:function(e){return"string"===r(e)&&e.length>0}},{key:"isValidIndex",value:function(e){return"number"===r(e)&&e>=0&&(0|e)===e}},{key:"isValidCallback",value:function(e){return"function"===r(e)}}],(n=[{key:"getData",value:function(){return this._data}},{key:"getDataProperty",value:function(e){var t,n=this._data;return(n instanceof Object||"object"===r(n)&&null!==n)&&(t=n[e]),t}},{key:"getObjectID",value:function(){return this._uid}},{key:"setCustomAttribute",value:function(e,t){this._custom[e]=t}},{key:"getCustomAttribute",value:function(e){return this._custom[e]}},{key:"customAttributeExists",value:function(e){return e in this._custom}},{key:"setCustomAttributes",value:function(e){var t=Object.prototype.hasOwnProperty,n=this._custom;for(var r in e)t.call(e,r)&&(n[r]=e[r])}}])&&a(t.prototype,n),o&&a(t,o),e}()},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r={enabledElements:{}},a=function(e,t){return r.enabledElements[e]=t},o=function(e){return r.enabledElements[e]}},,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(46),a=n(41);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(i=s(t).call(this,e,n))||"object"!==o(i)&&"function"!=typeof i?c(a):i,Object.defineProperties(c(r),{_imageId:{configurable:!0,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,l,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,f=[{key:"getIndexedValue",value:function(e,t,n){var a=n;if("string"===o(e)){var i=-1!==e.indexOf("\\");if(a=e,i){var s=e.split("\\");if(r.a.isValidIndex(t)){var c=s[t];a="string"!==o(c)?n:c}else a=s}}return a}}],(l=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"SOPInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSOPInstanceUID()}})}},{key:"getStudyInstanceUID",value:function(){return this.getTagValue("StudyInstanceUID",null)}},{key:"getSeriesInstanceUID",value:function(){return this.getTagValue("SeriesInstanceUID",null)}},{key:"getSOPInstanceUID",value:function(){return this.getTagValue("SOPInstanceUID",null)}},{key:"getStringValue",value:function(e,n,r){var a=this.getTagValue(e,r);return"string"!==o(a)&&"undefined"!==o(a)&&(a=a.toString()),t.getIndexedValue(a,n,r)}},{key:"getFloatValue",value:function(e,n,r){var a=this.getTagValue(e,r);return(a=t.getIndexedValue(a,n,r))instanceof Array?(a.forEach((function(e,t){a[t]=parseFloat(e)})),a):"string"===o(a)?parseFloat(a):a}},{key:"getIntValue",value:function(e,n,r){var a=this.getTagValue(e,r);return(a=t.getIndexedValue(a,n,r))instanceof Array?(a.forEach((function(e,t){a[t]=parseFloat(e)})),a):"string"===o(a)?parseInt(a):a}},{key:"getTagValue",value:function(e,t){throw new a.a("InstanceMetadata::getTagValue is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getSOPInstanceUID()===this.getSOPInstanceUID()}},{key:"tagExists",value:function(e){throw new a.a("InstanceMetadata::tagExists is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}},{key:"getImageId",value:function(e){throw new a.a("InstanceMetadata::getImageId is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}}])&&i(n.prototype,l),f&&i(n,f),t}(r.a)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(46),a=n(70);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(e,n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(i=s(t).call(this,e,n))||"object"!==o(i)&&"function"!=typeof i?c(a):i,Object.defineProperties(c(r),{_seriesInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_instances:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,l,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(l=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"seriesInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSeriesInstanceUID()}})}},{key:"getSeriesInstanceUID",value:function(){return this._seriesInstanceUID}},{key:"addInstance",value:function(e){var t=!1;return e instanceof a.a&&void 0===this.getInstanceByUID(e.getSOPInstanceUID())&&(this._instances.push(e),t=!0),t}},{key:"getFirstInstance",value:function(){var e=this._firstInstance;if(!(e instanceof a.a)){e=null;var t=this.getInstanceByIndex(0);t instanceof a.a&&(this._firstInstance=t,e=t)}return e}},{key:"getInstanceByIndex",value:function(e){var t;return r.a.isValidIndex(e)&&(t=this._instances[e]),t}},{key:"getInstanceByUID",value:function(e){var t;return r.a.isValidUID(e)&&(t=this._instances.find((function(t){return t.getSOPInstanceUID()===e}))),t}},{key:"getInstanceCount",value:function(){return this._instances.length}},{key:"forEachInstance",value:function(e){r.a.isValidCallback(e)&&this._instances.forEach((function(t,n){e.call(null,t,n)}))}},{key:"indexOfInstance",value:function(e){return this._instances.indexOf(e)}},{key:"findInstance",value:function(e){if(r.a.isValidCallback(e))return this._instances.find((function(t,n){return e.call(null,t,n)}))}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getSeriesInstanceUID()===this.getSeriesInstanceUID()}}])&&i(n.prototype,l),f&&i(n,f),t}(r.a)},,,,,,,function(e,t,n){"use strict";var r,a=n(19),o=n.n(a),i=n(0),s=n.n(i),c=n(1),u=n.n(c),l=n(534),f=n(208),p=n.n(f),m=n(29),d=n(150),h=n.n(d);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P={in:u.a.bool,mountOnEnter:u.a.bool,unmountOnExit:u.a.bool,appear:u.a.bool,timeout:u.a.number,onEnter:u.a.func,onEntering:u.a.func,onEntered:u.a.func,onExit:u.a.func,onExiting:u.a.func,onExited:u.a.func},D=(E(r={},d.ENTERING,"in"),E(r,d.ENTERED,"in"),r),C=function(e){function t(){return b(this,t),w(this,O(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=y(e,["className","children"]);return s.a.createElement(h.a,r,(function(e,r){return s.a.cloneElement(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{className:o()("fade",t,n.props.className,D[e])}))}))}}])&&S(n.prototype,r),a&&S(n,a),t}(s.a.Component);C.propTypes=P,C.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1};var T=C;function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L={show:u.a.bool,rootClose:u.a.bool,onHide:u.a.func,animation:u.a.oneOfType([u.a.bool,p.a]),onEnter:u.a.func,onEntering:u.a.func,onEntered:u.a.func,onExit:u.a.func,onExiting:u.a.func,onExited:u.a.func,placement:u.a.oneOf(["top","right","bottom","left"])},U={animation:T,rootClose:!1,show:!1,placement:"right"},V=function(e){function t(){return R(this,t),M(this,_(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t=this.props,n=t.animation,r=t.children,a=j(t,["animation","children"]),c=!0===n?T:n||null;return e=c?r:Object(i.cloneElement)(r,{className:o()(r.props.className,"in")}),s.a.createElement(l.Overlay,k({},a,{transition:c}),e)}}])&&N(n.prototype,r),a&&N(n,a),t}(s.a.Component);V.propTypes=L,V.defaultProps=U;var F=Object(m.i)()(V),B=n(173),q=n.n(B),z=n(26),H=n.n(z),W=n(174),G=n.n(W);var $=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}var ne=u.a.oneOf(["click","hover","focus"]),re={trigger:u.a.oneOfType([ne,u.a.arrayOf(ne)]),delay:u.a.number,delayShow:u.a.number,delayHide:u.a.number,defaultOverlayShown:u.a.bool,overlay:u.a.node.isRequired,handleHide:u.a.func,onBlur:u.a.func,onClick:u.a.func,onFocus:u.a.func,onMouseOut:u.a.func,onMouseOver:u.a.func,target:u.a.oneOf([null]),onHide:u.a.oneOf([null]),show:u.a.oneOf([null])},ae=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=Z(t).call(this,e,n),(r=!o||"object"!==J(o)&&"function"!=typeof o?Q(a):o).handleToggle=r.handleToggle.bind(Q(r)),r.handleDelayedShow=r.handleDelayedShow.bind(Q(r)),r.handleDelayedHide=r.handleDelayedHide.bind(Q(r)),r.handleHide=$(r.handleHide.bind(Q(r)),e.handleHide),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e,"fromElement")},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e,"toElement")},r._mountNode=null,r.state={show:e.defaultOverlayShown},r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._mountNode=document.createElement("div"),this.renderOverlay()}},{key:"componentDidUpdate",value:function(){this.renderOverlay()}},{key:"componentWillUnmount",value:function(){H.a.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)}},{key:"handleDelayedHide",value:function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;t?this._hoverHideDelay=setTimeout((function(){e._hoverHideDelay=null,e.hide()}),t):this.hide()}}},{key:"handleDelayedShow",value:function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;t?this._hoverShowDelay=setTimeout((function(){e._hoverShowDelay=null,e.show()}),t):this.show()}}},{key:"handleHide",value:function(){this.hide()}},{key:"handleMouseOverOut",value:function(e,t,n){var r=t.currentTarget,a=t.relatedTarget||t.nativeEvent[n];a&&a===r||q()(r,a)||e(t)}},{key:"handleToggle",value:function(){this.state.show?this.hide():this.show()}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"makeOverlay",value:function(e,t){return s.a.createElement(F,X({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)}},{key:"show",value:function(){this.setState({show:!0})}},{key:"renderOverlay",value:function(){H.a.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)}},{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.overlay,r=e.children,a=e.onBlur,o=e.onClick,c=e.onFocus,u=e.onMouseOut,l=e.onMouseOver,f=Y(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete f.delay,delete f.delayShow,delete f.delayHide,delete f.defaultOverlayShown;var p=s.a.Children.only(r),m=p.props,d={};return this.state.show&&(d["aria-describedby"]=n.props.id),d.onClick=$(m.onClick,o),te("click",t)&&(d.onClick=$(d.onClick,this.handleToggle)),te("hover",t)&&(G()(!("hover"===t),'[react-bootstrap] Specifying only the `"hover"` trigger limits the visibility of the overlay to just mouse users. Consider also including the `"focus"` trigger so that touch and keyboard only users can see the overlay as well.'),d.onMouseOver=$(m.onMouseOver,l,this.handleMouseOver),d.onMouseOut=$(m.onMouseOut,u,this.handleMouseOut)),te("focus",t)&&(d.onFocus=$(m.onFocus,c,this.handleDelayedShow),d.onBlur=$(m.onBlur,a,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,f),Object(i.cloneElement)(p,d)}}])&&K(n.prototype,r),a&&K(n,a),t}(s.a.Component);ae.propTypes=re,ae.defaultProps={defaultOverlayShown:!1,trigger:["hover","focus"]},n.d(t,"a",(function(){return ae}))},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p}));var r=n(0),a=n.n(r),o=n(63),i=n(214);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=a.a.createContext({}),u={CORNERSTONE:"ACTIVE_VIEWPORT::CORNERSTONE",VTK:"ACTIVE_VIEWPORT::VTK"},l=function(){return Object(r.useContext)(c)},f=function(e){var t=e.children,n=e.config,r=Object(o.d)((function(e){return Object(i.a)(e)}));return a.a.createElement(c.Provider,{value:{appConfig:n,activeContexts:r}},t)},p=function(e){return function(t){var n=l(),r=n.appConfig,o=n.activeContexts;return a.a.createElement(e,s({},t,{appConfig:r,activeContexts:o}))}};t.c=c},,,function(e,t,n){"use strict";n(708);var r=n(19),a=n.n(r),o=n(0),i=n.n(o),s=n(1),c=n.n(s);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g={placement:c.a.oneOf(["top","right","bottom","left"]),positionTop:c.a.oneOfType([c.a.number,c.a.string]),positionLeft:c.a.oneOfType([c.a.number,c.a.string]),arrowOffsetTop:c.a.oneOfType([c.a.number,c.a.string]),arrowOffsetLeft:c.a.oneOfType([c.a.number,c.a.string])},y=function(e){function t(){return p(this,t),d(this,h(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.placement,n=e.positionTop,r=e.positionLeft,o=e.arrowOffsetTop,s=e.arrowOffsetLeft,c=e.className,u=e.style,p=e.children,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({top:n,left:r},u),d={top:o,left:s};return i.a.createElement("div",{role:"tooltip",className:a()(c,"tooltip",t),style:m},i.a.createElement("div",{className:"tooltip-arrow",style:d}),i.a.createElement("div",{className:"tooltip-inner"},p))}}])&&m(n.prototype,r),o&&m(n,o),t}(i.a.Component);y.propTypes=g,y.defaultProps={placement:"right"},n.d(t,"a",(function(){return y}))},function(e,t,n){"use strict";var r=n(33),a=n(211),o=n.n(a),i=n(145),s=n.n(i),c=n(9);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=n(47),f=n(17),p=n(146),m=n(40),d=n(44);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}function y(e,t){return b.apply(this,arguments)}function b(){return(b=g(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.PaletteColorLookupTableUID,a=t.RedPaletteColorLookupTableDescriptor,o=t.GreenPaletteColorLookupTableDescriptor,i=t.BluePaletteColorLookupTableDescriptor,s=t.RedPaletteColorLookupTableData,c=t.GreenPaletteColorLookupTableData,u=t.BluePaletteColorLookupTableData,e.abrupt("return",new Promise((function(e,l){var f;if(S.isValidUID(r)&&(f=S.get(r)))return e(f);var p=[w(n,s,a),w(n,c,o),w(n,u,i)];Promise.all(p).then((function(n){var a=h(n,3),o=a[0],i=a[1],s=a[2];S.add({RedPaletteColorLookupTableData:o,GreenPaletteColorLookupTableData:i,BluePaletteColorLookupTableData:s,PaletteColorLookupTableUID:r}),t.RedPaletteColorLookupTableData=o,t.GreenPaletteColorLookupTableData=i,t.BluePaletteColorLookupTableData=s,e()}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={count:0,maxAge:864e5,entries:{},isValidUID:function(e){return"string"==typeof e&&e.length>0},get:function(e){var t=null;return this.entries.hasOwnProperty(e)&&(t=this.entries[e],Date.now()-t.time>this.maxAge&&(delete this.entries[e],this.count--,t=null)),t},add:function(e){if(this.isValidUID(e.uid)){var t=e.uid;!0!==this.entries.hasOwnProperty(t)&&this.count++,e.time=Date.now(),this.entries[t]=e}}};function w(e,t,n){var r=n[0]?n[0]:65536,a=n[2],o=function(e){for(var t=16===a?new Uint16Array(e):new Uint8Array(e),n=[],o=0;o<r;o++)n[o]=t[o];return n};if(t.BulkDataURI){var i=t.BulkDataURI;0!==e.wadoRoot.indexOf("https")||i.includes("https")||(i=i.replace("http","https"));var s={url:e.wadoRoot,headers:f.a.getAuthorizationHeader(e),errorInterceptor:m.a.getHTTPErrorHandler(),requestHooks:[Object(d.a)()]},c={BulkDataURI:i};return new l.a.DICOMwebClient(s).retrieveBulkData(c).then((function(e){return e[0]})).then(o)}if(t.InlineBinary){var u=atob(t.InlineBinary),h=Object(p.a)(u);return new Promise((function(e){e(o(h))}))}return Promise.resolve(o(t))}function O(e){for(var t=new Uint8Array(e),n=new Uint8Array(8*t.length),r=0;r<n.length;r++){var a=r%8,o=Math.floor(r/8);n[r]=1*((t[o]&1<<a)>>a)}return n}function I(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){I(o,r,a,i,s,"next",e)}function s(e){I(o,r,a,i,s,"throw",e)}i(void 0)}))}}function P(e,t){return D.apply(this,arguments)}function D(){return(D=E(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a=[],e.abrupt("return",new Promise((function(e,o){for(var i=0;i<=30;i+=2){var s="60".concat(i.toString(16));3===s.length&&(s="600".concat(i.toString(16)));var c="".concat(s,"3000");if(t[c]&&t[c].InlineBinary){var u=atob(t[c].InlineBinary),l=Object(p.a)(u);t[c]=O(l)}else t[c]&&t[c].BulkDataURI?(r.push(C(t[c],n)),a.push(c)):t[c]&&t[c]instanceof ArrayBuffer&&(t[c]=O(t[c]))}r.length?Promise.all(r).then((function(n){for(var r=0;r<n.length;r++)t[a[r]]=n[r];e()})):e()})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return T.apply(this,arguments)}function T(){return(T=E(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.BulkDataURI,a=r,0!==n.wadoRoot.indexOf("https")||a.includes("https")||(a=a.replace("http","https")),o={url:n.wadoRoot,headers:f.a.getAuthorizationHeader(n),errorInterceptor:m.a.getHTTPErrorHandler(),requestHooks:[Object(d.a)()]},i=new l.a.DICOMwebClient(o),s={BulkDataURI:a},e.abrupt("return",i.retrieveBulkData(s).then((function(e){return e[0]})).then(O));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){return Array.isArray(e)?e.map((function(e){return void 0!==e?Number(e):e})):void 0!==e?Number(e):e};function k(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){k(o,r,a,i,s,"next",e)}function s(e){k(o,r,a,i,s,"throw",e)}i(void 0)}))}}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"studies",{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(this,"imageIdToUIDs",{configurable:!1,enumerable:!1,writable:!1,value:new Map}),this.datasets={}}var t,n,a,i,l;return t=e,(n=[{key:"addInstance",value:(l=j(regeneratorRuntime.mark((function e(t){var n,a,o,i,s,c,u,l,f,p,m,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:{},t instanceof ArrayBuffer?(o=DicomMessage.readFile(t),a=o.dict):a=t,i=void 0===a.SeriesInstanceUID?r.b.data.DicomMetaDictionary.naturalizeDataset(a):a,c=(s=i).StudyInstanceUID,u=s.SeriesInstanceUID,l=s.SOPInstanceUID,this._getAndCacheStudyDataset(c,a),f=this._getAndCacheStudy(c),p=this._getAndCacheSeriesFromStudy(f,u),m=this._getAndCacheInstanceFromStudy(p,l),Object.assign(m,i),e.next=11,this._checkBulkDataAndInlineBinaries(m,n.server);case 11:return e.abrupt("return",m);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"addImageIdToUIDs",value:function(e,t){this.imageIdToUIDs.set(e,t)}},{key:"_getAndCacheStudyDataset",value:function(e,t){this.datasets[e]||(this.datasets[e]=t)}},{key:"getStudyDataset",value:function(e){return this.datasets[e]}},{key:"_getAndCacheStudy",value:function(e){var t=this.studies,n=t.get(e);return n||(n={series:new Map},t.set(e,n)),n}},{key:"_getAndCacheSeriesFromStudy",value:function(e,t){var n=e.series.get(t);return n||(n={instances:new Map},e.series.set(t,n)),n}},{key:"_getAndCacheInstanceFromStudy",value:function(e,t){var n=e.instances.get(t);return n||(n={},e.instances.set(t,n)),n}},{key:"_checkBulkDataAndInlineBinaries",value:(i=j(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,n);case 2:if("PALETTE COLOR"!==t.PhotometricInterpretation){e.next=5;break}return e.next=5,y(t,n);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"_getInstance",value:function(e){var t=this._getUIDsFromImageID(e);if(t){var n=t.StudyInstanceUID,r=t.SeriesInstanceUID,a=t.SOPInstanceUID;return this._getInstanceData(n,r,a)}}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fallback:!1},r=this._getInstance(t);return e===_?r:this.getTagFromInstance(e,r,n)}},{key:"getTag",value:function(e,t,n){return this.get(e,t,n)}},{key:"getInstance",value:function(e){return this.get(_,e)}},{key:"getTagFromInstance",value:function(e,t){if(t)return t[e]?t[e]:this._getCornerstoneWADOImageLoaderTag(e,t)}},{key:"_getCornerstoneWADOImageLoaderTag",value:function(e,t){var n;switch(e){case M.GENERAL_SERIES_MODULE:var r,a,o=t.SeriesDate,i=t.SeriesTime;o&&(r=s.a.parseDA(o)),i&&(a=s.a.parseTM(i)),n={modality:t.Modality,seriesInstanceUID:t.SeriesInstanceUID,seriesNumber:t.SeriesNumber,studyInstanceUID:t.StudyInstanceUID,seriesDate:r,seriesTime:a};break;case M.PATIENT_STUDY_MODULE:n={patientAge:t.PatientAge,patientSize:t.PatientSize,patientWeight:t.PatientWeight};break;case M.IMAGE_PLANE_MODULE:var l,f,p,m,d=t.ImageOrientationPatient,h=function(e){var t=e.PixelSpacing,n=e.ImagerPixelSpacing,r=e.SOPClassUID,a=e.PixelSpacingCalibrationType,o=e.PixelSpacingCalibrationDescription,i=e.EstimatedRadiographicMagnificationFactor,s=e.SequenceOfUltrasoundRegions,l=["1.2.840.10008.5.1.4.1.1.1","1.2.840.10008.5.1.4.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.1.1","1.2.840.10008.5.1.4.1.1.1.2","1.2.840.10008.5.1.4.1.1.1.2.1","1.2.840.10008.5.1.4.1.1.1.3","1.2.840.10008.5.1.4.1.1.1.3.1","1.2.840.10008.5.1.4.1.1.12.1","1.2.840.10008.5.1.4.1.1.12.1.1","1.2.840.10008.5.1.4.1.1.12.2","1.2.840.10008.5.1.4.1.1.12.2.1","1.2.840.10008.5.1.4.1.1.12.3"].includes(r),f="NOT_APPLICABLE";if(l&&!n)return{PixelSpacing:t,type:"UNKNOWN",isProjection:l};if(t&&n&&t===n)return{PixelSpacing:t,type:"DETECTOR",isProjection:l};if(t&&n&&t!==n)return{PixelSpacing:t,type:"CALIBRATED",isProjection:l,PixelSpacingCalibrationType:a,PixelSpacingCalibrationDescription:o};if(!t&&n){var p=n;return i?p=n.map((function(e){return e/i})):c.a.info("EstimatedRadiographicMagnificationFactor was not present. Unable to correct ImagerPixelSpacing."),{PixelSpacing:p,isProjection:l}}if(s&&"object"===u(s))return{PixelSpacing:[10*s.PhysicalDeltaX,10*s.PhysicalDeltaY]};if(s&&Array.isArray(s)&&s.length>1)c.a.warn("Sequence of Ultrasound Regions > one entry. This is not yet implemented, all measurements will be shown in pixels.");else if(!1===l&&!n)return{PixelSpacing:t,type:f,isProjection:l};c.a.info("Unknown combination of PixelSpacing and ImagerPixelSpacing identified. Unable to determine spacing.")}(t).PixelSpacing;h&&(l=x(h[0]),f=x(h[1])),d&&(p=x(d.slice(0,3)),m=x(d.slice(3,6))),n={frameOfReferenceUID:t.FrameOfReferenceUID,rows:t.Rows,columns:t.Columns,imageOrientationPatient:x(d),rowCosines:p,columnCosines:m,imagePositionPatient:x(t.ImagePositionPatient),sliceThickness:x(t.SliceThickness),sliceLocation:x(t.SliceLocation),pixelSpacing:x(h),rowPixelSpacing:l,columnPixelSpacing:f};break;case M.IMAGE_PIXEL_MODULE:n={samplesPerPixel:t.SamplesPerPixel,photometricInterpretation:t.PhotometricInterpretation,rows:t.Rows,columns:t.Columns,bitsAllocated:t.BitsAllocated,bitsStored:t.BitsStored,highBit:t.HighBit,pixelRepresentation:t.PixelRepresentation,planarConfiguration:t.PlanarConfiguration,pixelAspectRatio:t.PixelAspectRatio,smallestPixelValue:t.SmallestPixelValue,largestPixelValue:t.LargestPixelValue,redPaletteColorLookupTableDescriptor:t.RedPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.GreenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.BluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.RedPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.GreenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.BluePaletteColorLookupTableData};break;case M.VOI_LUT_MODULE:var v=t.WindowCenter,g=t.WindowWidth,y=Array.isArray(v)?v:[v],b=Array.isArray(g)?g:[g];n={windowCenter:x(y),windowWidth:x(b)};break;case M.MODALITY_LUT_MODULE:var S=x(t.RescaleSlope);n={rescaleIntercept:x(t.RescaleIntercept),rescaleSlope:S,rescaleType:t.RescaleType};break;case M.SOP_COMMON_MODULE:n={sopClassUID:t.SOPClassUID,sopInstanceUID:t.SOPInstanceUID};break;case M.PET_ISOTOPE_MODULE:var w=t.RadiopharmaceuticalInformationSequence;if(w){var O=Array.isArray(w)?w[0]:w,I=O.RadiopharmaceuticalStartTime,E=O.RadionuclideTotalDose,P=O.RadionuclideHalfLife;n={radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:s.a.parseTM(I),radionuclideTotalDose:E,radionuclideHalfLife:P}}}break;case M.OVERLAY_PLANE_MODULE:for(var D=[],C=0;C<=30;C+=2){var T="60".concat(C.toString(16));3===T.length&&(T="600".concat(C.toString(16)));var k=t["".concat(T,"3000")];if(k){var j="".concat(T,"0010"),R="".concat(T,"0011"),N="".concat(T,"0040"),_="".concat(T,"0050"),A="".concat(T,"0022"),L="".concat(T,"1500"),U="".concat(T,"1301"),V="".concat(T,"1302"),F="".concat(T,"1303"),B=t[_],q={rows:t[j],columns:t[R],type:t[N],x:B[0],y:B[1],pixelData:k,description:t[A],label:t[L],roiArea:t[U],roiMean:t[V],roiStandardDeviation:t[F]};D.push(q)}}n={overlays:D};break;case M.PATIENT_MODULE:var z,H=t.PatientName;H&&(z=H.Alphabetic),n={patientName:z,patientId:t.PatientID};break;case M.GENERAL_IMAGE_MODULE:n={sopInstanceUid:t.SOPInstanceUID,instanceNumber:t.InstanceNumber,lossyImageCompression:t.LossyImageCompression,lossyImageCompressionRatio:t.LossyImageCompressionRatio,lossyImageCompressionMethod:t.LossyImageCompressionMethod};break;case M.GENERAL_STUDY_MODULE:n={studyDescription:t.StudyDescription,studyDate:t.StudyDate,studyTime:t.StudyTime,accessionNumber:t.AccessionNumber};break;case M.CINE_MODULE:n={frameTime:t.FrameTime}}return n}},{key:"_getInstanceData",value:function(e,t,n){var r=this.studies.get(e);if(r){var a=r.series.get(t);if(a)return a.instances.get(n)}}},{key:"_getUIDsFromImageID",value:function(e){if(e.includes("wadors:")){var t=e.split("studies/")[1].split("/");return{StudyInstanceUID:t[0],SeriesInstanceUID:t[2],SOPInstanceUID:t[4]}}if(e.includes("wado?requestType=WADO")){var n=o.a.parse(e);return{StudyInstanceUID:n.studyUID,SeriesInstanceUID:n.seriesUID,SOPInstanceUID:n.objectUID}}return this.imageIdToUIDs.get(e)}}])&&R(t.prototype,n),a&&R(t,a),e}()),M=(t.a=N,{GENERAL_SERIES_MODULE:"generalSeriesModule",PATIENT_STUDY_MODULE:"patientStudyModule",IMAGE_PLANE_MODULE:"imagePlaneModule",IMAGE_PIXEL_MODULE:"imagePixelModule",VOI_LUT_MODULE:"voiLutModule",MODALITY_LUT_MODULE:"modalityLutModule",SOP_COMMON_MODULE:"sopCommonModule",PET_ISOTOPE_MODULE:"petIsotopeModule",OVERLAY_PLANE_MODULE:"overlayPlaneModule",PATIENT_MODULE:"patientModule",GENERAL_IMAGE_MODULE:"generalImageModule",GENERAL_STUDY_MODULE:"generalStudyModule",CINE_MODULE:"cineModule"}),_="instance"},,,function(e,t,n){"use strict";var r,a,o=n(225),i=n.n(o);!function(e){var t=[],n=null,r=[],a=!1,o=e.prototype.handleKey;function i(e,t,n){var i=this;if(i.recording)if("keydown"==n.type){1===e.length&&a&&c();for(var u=0;u<t.length;++u)s(t[u]);s(e)}else"keyup"==n.type&&r.length>0&&c();else o.apply(i,arguments)}function s(e){for(var t=0;t<r.length;++t)if(r[t]===e)return;r.push(e),1===e.length&&(a=!0)}function c(){t.push(r),r=[],a=!1,u()}function u(){n&&(!function(e){for(var t=0;t<e.length;++t)e[t].sort((function(e,t){return e.length>1&&1===t.length?-1:1===e.length&&t.length>1||e>t?1:-1})),e[t]=e[t].join("+")}(t),n(t)),t=[],n=null,r=[]}e.prototype.record=function(e){var t=this;t.recording=!0,n=function(){t.recording=!1,e.apply(t,arguments)}},e.prototype.stopRecord=function(){this.recording=!1},e.prototype.startRecording=function(){this.recording=!0},e.prototype.handleKey=function(){var e=this;i.apply(e,arguments)},e.init()}(i.a),r=i.a,a=r.prototype.stopCallback,r.prototype.stopCallback=function(e,t,n){return!!this.paused||a.call(this,e,t,n)},r.prototype.pause=function(){this.paused=!0},r.prototype.unpause=function(){this.paused=!1},r.init();t.a=i.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={DATASET_4D:"datasetis4D",VARYING_IMAGESDIMENSIONS:"imagesdimensionsvarying",VARYING_IMAGESCOMPONENTS:"imagescomponentsvarying",VARYING_IMAGESORIENTATION:"imagesorientationvarying",MISSING_FRAMES:"missingframes",IRREGULAR_SPACING:"irregularspacing",MULTIFFRAMES:"multiframe"}},,,function(e,t,n){"use strict";var r=new(n(177).a);t.a={add:function(e){r.insert(e)},get:function(e){return r.findBy({studyInstanceUID:e})},all:function(e){return r.all(e)},remove:function(e){r.remove({studyInstanceUID:e})},purge:function(){r.removeAll()}}},function(e,t,n){"use strict";var r=n(70),a=n(46),o=n(112);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e,n,r,a){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=c(this,u(t).call(this,e,a))).init(n,r),o}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e,t){var n=this.getData();Object.defineProperties(this,{_sopInstanceUID:{configurable:!1,enumerable:!1,writable:!1,value:n.SOPInstanceUID},_study:{configurable:!1,enumerable:!1,writable:!1,value:t},_series:{configurable:!1,enumerable:!1,writable:!1,value:e},_instance:{configurable:!1,enumerable:!1,writable:!1,value:n},_cache:{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}})}},{key:"getTagValue",value:function(e,t,n){if(e in this._cache&&!0!==n)return this._cache[e];var r,a=this._instance.metadata;return e in a?r=a[e]:e in this._series?r=this._series[e]:e in this._study&&(r=this._study[e]),void 0!==r?(this._cache[e]=r,r):t}},{key:"tagExists",value:function(e){return e in this._instance.metadata||e in this._series||e in this._study}},{key:"getImageId",value:function(e,t){return null===this._imageId&&(this._imageId=Object(o.a)(this.getData(),e,t)),this._imageId}}])&&s(n.prototype,r),a&&s(n,a),t}(r.a),p=n(72);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(e,n,r){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=h(this,v(t).call(this,e,r))).init(n),a}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"init",value:function(e){var t=this,n=this.getData();Object.defineProperty(this,"_seriesInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:n.SeriesInstanceUID}),n.instances.forEach((function(r){t.addInstance(new f(r,n,e))}))}}])&&d(n.prototype,r),a&&d(n,a),t}(p.a),b=n(96);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=O(this,I(t).call(this,e,n))).init(),r}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){var e=this,t=this.getData();Object.defineProperty(this,"_studyInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:t.StudyInstanceUID}),t.series.forEach((function(n){e.addSeries(new y(n,t))}))}}])&&w(n.prototype,r),a&&w(n,a),t}(b.a),D={Metadata:a.a,StudyMetadata:b.a,SeriesMetadata:p.a,InstanceMetadata:r.a,OHIFStudyMetadata:P,OHIFSeriesMetadata:y,OHIFInstanceMetadata:f};t.a=D},function(e,t,n){"use strict";var r=n(17),a=n(98),o=n(70),i=n(46),s=n(72),c=n(47),u=n(149),l=n(10),f=n(91);function p(e){if(!e.length)return{value:!1};var t=e[0].getData().metadata,n=t.Modality,r=t.NumberOfFrames>1;return g.includes(n)&&(r||1!==e.length)?r?{value:!1,reconstructionIssues:[f.a.MULTIFRAMES]}:function(e){for(var t=e.length,n=e[0].getData().metadata,r=n.Rows,a=n.Columns,o=n.SamplesPerPixel,i=n.ImageOrientationPatient,s=[],c=1;c<t;++c){var u=e[c].getData().metadata,l=u.Rows,p=u.Columns,d=u.SamplesPerPixel,h=u.ImageOrientationPatient;if(l!==r||p!==a?s.push(f.a.VARYING_IMAGESDIMENSIONS):d!==o?s.push(f.a.VARYING_IMAGESCOMPONENTS):m(h,i)||s.push(f.a.VARYING_IMAGESORIENTATION),0!==s.length)break}(function(e){for(var t=e.length,n=0;n<t;++n){var r=e[n].getData().metadata;if(r&&void 0!==r&&r.ImagePositionPatient&&void 0!==r.ImagePositionPatient)for(var a=n+1;a<t;++a){var o=e[a].getData().metadata;if(o&&void 0!==o&&o.ImagePositionPatient&&void 0!==o.ImagePositionPatient&&m(r.ImagePositionPatient,o.ImagePositionPatient))return!0}}return!1})(e)&&s.push(f.a.DATASET_4D);return{value:0===s.length,reconstructionIssues:s}}(e):{value:!1}}function m(e,t){if(void 0!==e&&void 0!==!t)return Math.abs(e[0]-t[0])<d&&Math.abs(e[1]-t[1])<d&&Math.abs(e[2]-t[2])<d}var d=.01;function h(e,t){if(!(Math.abs(e-t)<.1*t)){var n=e/t,r=Math.round(n);return Math.abs(e-r*t)/r<.1*t?{issue:f.a.MISSING_FRAMES,missingFrames:r-1}:{issue:f.a.IRREGULAR_SPACING}}}function v(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}var g=["MR","CT","PT","NM"],y=n(40),b=n(159),S=n(44);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return D}));var D=function(e){function t(e,n){var r,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=!(o=I(t).call(this,e,n))||"object"!==w(o)&&"function"!=typeof o?E(a):o,Object.defineProperties(E(r),{_studyInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_series:{configurable:!1,enumerable:!1,writable:!1,value:[]},_displaySets:{configurable:!1,enumerable:!1,writable:!1,value:[]},_derivedDisplaySets:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstSeries:{configurable:!1,enumerable:!1,writable:!0,value:null},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}var n,c,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,f=[{key:"getReferencedDisplaySet",value:function(e,t){var n=[];t.forEach((function(e){n=n.concat(e.displaySets)}));var r=n.filter((function(t){return t&&e&&t.displaySetInstanceUID!==e.displaySetInstanceUID})),a=e.metadata,o=function(e,t){var n;if(e.SourceImageSequence)n=e.SourceImageSequence;else{var r=R(e.PerFrameFunctionalGroupsSequence)[0];if(r){var a=r.DerivationImageSequence;n=a}}if(n){for(var o,i=R(n),s=0;s<i.length;s++){var c=i[s].ReferencedSOPInstanceUID;if((o=j(t,c))&&0!==o.length)break}return o}}(a,r),i=!o||0===o.length;if(i&&(o=function(e){if(e.ReferencedSeriesSequence){var t=R(e.ReferencedSeriesSequence);return t.map((function(e){return e.SeriesInstanceUID}))}}(a)),(i=!o||0===o.length)&&(o=function(e,t){if(e.ReferencedImageSequence){for(var n,r=R(e.ReferencedImageSequence),a=0;a<r.length;a++){var o=r[a].ReferencedSOPInstanceUID;if(o&&(n=j(t,o))&&0!==n.length)break}return n}}(a,r)),o&&0!==o.length)return r.find((function(e){return o.includes(e.SeriesInstanceUID)}))}}],(c=[{key:"_definePublicProperties",value:function(){Object.defineProperty(this,"studyInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getStudyInstanceUID()}})}},{key:"getDisplaySets",value:function(){return this._displaySets.slice()}},{key:"_createDisplaySetsForSeries",value:function(e,t){var n=this,o=[];if(!(t.getInstanceCount()>0)){var i=new a.a([]),s=t.getData();return i.setAttributes({displaySetInstanceUID:i.uid,SeriesInstanceUID:s.SeriesInstanceUID,SeriesDescription:s.SeriesDescription,SeriesNumber:s.SeriesNumber,Modality:s.Modality}),o.push(i),o}var c=function(e){var t=new Set;return e.forEachInstance((function(e){var n=e.getTagValue("SOPClassUID");t.add(n)})),Array.from(t)}(t);if(e&&e.length>0){var f=function(e,t,n,a){if(1===a.length){var o=a[0],i=e.map((function(e){return e.module})).filter((function(e){return e.sopClassUIDs.includes(o)}));if(i&&i.length){var s=i[0],c=r.a.getAuthorizationHeader(),u=y.a.getHTTPErrorHandler(),l=new C({url:n.getData().wadoRoot,headers:c,errorInterceptor:u,requestHooks:[Object(S.a)()]}),f=s.getDisplaySetFromSeries(t,n,l,c);if(f&&!f.Modality){var p=t.getFirstInstance();f.Modality=p.getTagValue("Modality")}return f}}else console.warn("getDisplaySetFromSopClassPlugin: More than one SOPClassUID in the same series is not yet supported.")}(e,t,n,c);if(f)return f.sopClassModule=!0,f.isDerived&&this._addDerivedDisplaySet(f),o.push(f),o}var p=[];if(t.forEachInstance((function(e){var r,i,s;if(Object(u.a)(e.getTagValue("SOPClassUID"))||e.getTagValue("Rows"))T(e)?((r=x(t,[e])).setAttributes({sopClassUIDs:c,isClip:!0,SeriesInstanceUID:t.getSeriesInstanceUID(),StudyInstanceUID:n.getStudyInstanceUID(),numImageFrames:e.getTagValue("NumberOfFrames"),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime")}),o.push(r)):k(e.Modality)?((r=x(t,[e])).setAttributes({sopClassUIDs:c,StudyInstanceUID:n.getStudyInstanceUID(),SeriesInstanceUID:t.getSeriesInstanceUID(),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime")}),o.push(r)):p.push(e);else{var f=new a.a([]),m=t.getData();f.setAttributes({displaySetInstanceUID:f.uid,SeriesDate:m.SeriesDate,SeriesTime:m.SeriesTime,SeriesInstanceUID:t.getSeriesInstanceUID(),SeriesNumber:e.getTagValue("SeriesNumber"),SeriesDescription:e.getTagValue("SeriesDescription"),numImageFrames:e.getTagValue("NumberOfFrames"),frameRate:e.getTagValue("FrameTime"),Modality:e.getTagValue("Modality"),isMultiFrame:!1,StudyInstanceUID:n.getStudyInstanceUID(),InstanceNumber:e.getTagValue("InstanceNumber"),AcquisitionDatetime:e.getTagValue("AcquisitionDateTime"),isReconstructable:!1,isSOPClassUIDSupported:!1,SOPClassUIDNaturalized:(i=e.getTagValue("SOPClassUID"),s="",i&&u.a?(l.a.MRSpectroscopyStorage===i?s="MRSpectroscopy":l.a.EnhancedUSVolumeStorage===i?s="EnhancedUSVolume":l.a.Sop12LeadECGWaveformStorage===i?s="Sop12LeadECGWaveform":l.a.GeneralECGWaveformStorage===i?s="GeneralECGWaveform":l.a.AmbulatoryECGWaveformStorage===i?s="AECAmbulatoryECGWaveformGW":l.a.HemodynamicWaveformStorage===i?s="HemodynamicWaveform":l.a.CardiacElectrophysiologyWaveformStorage===i?s="CardiacElectrophysiologyWaveform":l.a.BasicVoiceAudioWaveformStorage===i?s="BasicVoiceAudioWaveform":l.a.GeneralAudioWaveformStorage===i?s="GGeneralAudioWaveformAW":l.a.ArterialPulseWaveformStorage===i?s="APArterialPulseWaveformW":l.a.RespiratoryWaveformStorage===i?s="RespiratoryWaveform":l.a.GrayscaleSoftcopyPresentationStateStorage===i?s="GrayscaleSoftcopyPresentationState":l.a.ColorSoftcopyPresentationStateStorage===i?s="ColorSoftcopyPresentationState":l.a.PseudoColorSoftcopyPresentationStateStorage===i?s="PseudoColorSoftcopyPresentationState":l.a.BlendingSoftcopyPresentationStateStorage===i?s="BlendingSoftcopyPresentationState":l.a.XAXRFGrayscaleSoftcopyPresentationStateStorage===i?s="XAXRFGrayscaleSoftcopyPresentationState":l.a.RawDataStorage===i?s="RawData":l.a.SpatialRegistrationStorage===i?s="SpatialRegistration":l.a.SpatialFiducialsStorage===i?s="SpatialFiducials":l.a.DeformableSpatialRegistrationStorage===i?s="DeformableSpatialRegistration":l.a.SegmentationStorage===i?s="SEG":l.a.SurfaceSegmentationStorage===i?s="SurfaceSEG":l.a.RealWorldValueMappingStorage===i?s="RealWorldValueMapping":l.a.SurfaceScanMeshStorage===i?s="SurfaceScanMesh":l.a.SurfaceScanPointCloudStorage===i?s="SurfaceScanPointCloud":l.a.StereometricRelationshipStorage===i?s="StereometricRelationship":l.a.LensometryMeasurementsStorage===i?s="LensometryMeasurements":l.a.AutorefractionMeasurementsStorage===i?s="AutorefractionMeasurements":l.a.KeratometryMeasurementsStorage===i?s="KeratometryMeasurements":l.a.SubjectiveRefractionMeasurementsStorage===i?s="SubjectiveRefractionMeasurements":l.a.VisualAcuityMeasurementsStorage===i?s="VisualAcuityMeasurements":l.a.SpectaclePrescriptionReportStorage===i?s="SpectaclePrescriptionReport":l.a.OphthalmicAxialMeasurementsStorage===i?s="OphthalmicAxialMeasurements":l.a.IntraocularLensCalculationsStorage===i?s="IntraocularLensCalculations":l.a.MacularGridThicknessandVolumeReport===i?s="MacularGridThicknessandVolume":l.a.OphthalmicVisualFieldStaticPerimetryMeasurementsStorage===i?s="OphthalmicVisualFieldStaticPerimetryMeasurements":l.a.OphthalmicThicknessMapStorage===i?s="OphthalmicThicknessMap":l.a.CornealTopographyMapStorage===i?s="CornealTopographyMap":l.a.BasicTextSR===i?s="BasicTextSR":l.a.EnhancedSR===i?s="EnhancedSR":l.a.ComprehensiveSR===i?s="ComprehensiveSR":l.a.Comprehensive3DSR===i?s="Comprehensive3DSR":l.a.ProcedureLog===i?s="ProcedureLog":l.a.MammographyCADSR===i?s="MammographyCADSR":l.a.KeyObjectSelection===i?s="KeyObject":l.a.ChestCADSR===i?s="ChestCADSR":l.a.XRayRadiationDoseSR===i?s="XRayRadiationDoseSR":l.a.RadiopharmaceuticalRadiationDoseSR===i?s="RadiopharmaceuticalRadiationDoseSR":l.a.ColonCADSR===i?s="ColonCADSR":l.a.ImplantationPlanSRDocumentStorage===i?s="ImplantationPlanSRDocument":l.a.EncapsulatedPDFStorage===i?s="EncapsulatedPDF":l.a.EncapsulatedCDAStorage===i?s="EncapsulatedCDA":l.a.BasicStructuredDisplayStorage===i?s="BasicStructuredDisplay":l.a.RTDoseStorage===i?s="RTDose":l.a.RTStructureSetStorage===i?s="RTStructureSet":l.a.RTBeamsTreatmentRecordStorage===i?s="RTBeamsTreatmentRecord":l.a.RTPlanStorage===i?s="RTPlan":l.a.RTBrachyTreatmentRecordStorage===i?s="RTBrachyTreatmentRecord":l.a.RTTreatmentSummaryRecordStorage===i?s="RTTreatmentSummaryRecord":l.a.RTIonPlanStorage===i?s="RTIonPlan":l.a.RTIonBeamsTreatmentRecordStorage===i?s="RTIonBeamsTreatmentRecord":l.a.RTBeamsDeliveryInstructionStorage===i?s="RTBeamsDeliveryInstruction":l.a.GenericImplantTemplateStorage===i?s="GenericImplantTemplate":l.a.ImplantAssemblyTemplateStorage===i?s="ImplantAssemblyTemplate":l.a.ImplantTemplateGroupStorage===i&&(s="ImplantTemplateGroup"),s):s),metadata:e.getData().metadata}),o.push(f)}})),p.length){var m=x(t,p);m.setAttribute("StudyInstanceUID",n.getStudyInstanceUID()),m.setAttributes({sopClassUIDs:c}),o.push(m)}return o}},{key:"_addDerivedDisplaySet",value:function(e){this._derivedDisplaySets.push(e)}},{key:"_addDerivedDisplaySets",value:function(e){var t=this;e.map((function(e){return t._derivedDisplaySets.push(e)}))}},{key:"getDerivedDatasets",value:function(e){var n=this,r=e.Modality,a=e.referencedSeriesInstanceUID,o=e.referencedFrameOfReferenceUID,i=this._derivedDisplaySets;return r&&(i=i.filter((function(e){return e.Modality===r}))),a&&(i=i.filter((function(e){var r=t.getReferencedDisplaySet(e,[n]);if(r)return r.SeriesInstanceUID===a;if(!e.referencedDisplaySets||0===e.referencedDisplaySets.length)return!1;var o=e.referencedDisplaySets.filter((function(e){return e.SeriesInstanceUID===a}));return!(!o||0===o.length)}))),o&&(i=i.filter((function(e){return e.FrameOfReferenceUID===o}))),i}},{key:"createDisplaySets",value:function(e){var t=this;return this.getSeriesCount()?(this.forEachSeries((function(n){t._createDisplaySetsForSeries(e,n).forEach((function(e){return t._insertDisplaySet(e)}))})),this._displaySets):[]}},{key:"createAndAddDisplaySetsForSeries",value:function(e,t){var n=this;if(!this.containsSeries(t))return!1;for(var r=this._createDisplaySetsForSeries(e,t),a=this._displaySets.length-1;a>=0;a--)this._displaySets[a].SeriesInstanceUID===t.getSeriesInstanceUID()&&this._displaySets.splice(a,1);return r.forEach((function(e){n.addDisplaySet(e)})),!0}},{key:"addDisplaySet",value:function(e){return!!(e instanceof a.a||e.sopClassModule)&&(this._insertDisplaySet(e),!0)}},{key:"forEachDisplaySet",value:function(e){i.a.isValidCallback(e)&&this._displaySets.forEach((function(t,n){e.call(null,t,n)}))}},{key:"_insertDisplaySet",value:function(e){var t,n=e.SeriesNumber,r=this._displaySets,a=r.length;if(Object(b.a)(e.Modality)){for(var o,i=0;i<r.length;i++)if(Object(b.a)(r[i].Modality)){o=i;break}o||(o=r.length);for(var s=o;s<r.length;s++)if(r[s].SeriesNumber!==n||t||(t=s),r[s].SeriesNumber>n){a=s;break}}else for(var c=0;c<r.length;c++)if(r[c].SeriesNumber!==n||t||(t=c),r[c].SeriesNumber>n||Object(b.a)(r[c].Modality)){a=c;break}if(void 0!==t&&e.SeriesDate)for(var u="".concat(e.SeriesDate).concat(e.SeriesTime),l=t;l<a;l++){var f=r[l];if(f.SeriesDate&&"".concat(f.SeriesDate).concat(f.SeriesTime)<u){a=l;break}}this._displaySets.some((function(t){return t.displaySetInstanceUID===e.displaySetInstanceUID}))||(this._displaySets.splice(a,0,e),this.displaySets=this._displaySets)}},{key:"findDisplaySet",value:function(e){if(i.a.isValidCallback(e))return this._displaySets.find((function(t,n){return e.call(null,t,n)}))}},{key:"getDisplaySetCount",value:function(){return this._displaySets.length}},{key:"getStudyInstanceUID",value:function(){return this._studyInstanceUID}},{key:"getSeries",value:function(){return this._series.slice()}},{key:"addSeries",value:function(e){var t=!1;return e instanceof s.a&&void 0===this.getSeriesByUID(e.getSeriesInstanceUID())&&(this._series.push(e),t=!0),t}},{key:"updateSeries",value:function(e,t){var n=this._series.findIndex((function(t){return t.getSeriesInstanceUID()===e}));if(n<0)return!1;if(!(t instanceof s.a))throw new Error("Series must be an instance of SeriesMetadata");return this._series[n]=t,!0}},{key:"getSeriesByIndex",value:function(e){var t;return i.a.isValidIndex(e)&&(t=this._series[e]),t}},{key:"getSeriesByUID",value:function(e){var t;return i.a.isValidUID(e)&&(t=this._series.find((function(t){return t.getSeriesInstanceUID()===e}))),t}},{key:"containsSeries",value:function(e){return e instanceof s.a&&this._series.indexOf(e)>=0}},{key:"getSeriesCount",value:function(){return this._series.length}},{key:"getInstanceCount",value:function(){return this._series.reduce((function(e,t){return e+t.getInstanceCount()}),0)}},{key:"forEachSeries",value:function(e){i.a.isValidCallback(e)&&this._series.forEach((function(t,n){e.call(null,t,n)}))}},{key:"indexOfSeries",value:function(e){return this._series.indexOf(e)}},{key:"equals",value:function(e){return e===this||e instanceof t&&e.getStudyInstanceUID()===this.getStudyInstanceUID()}},{key:"getFirstSeries",value:function(){var e=this._firstSeries;if(!(e instanceof s.a)){e=null;var t=this.getSeriesByIndex(0);t instanceof s.a&&(this._firstSeries=t,e=t)}return e}},{key:"getFirstImageId",value:function(e){try{return this.findDisplaySet((function(t){return t.displaySetInstanceUID===e})).images[0].getImageId()}catch(e){return console.error("Failed to retrieve image metadata"),null}}},{key:"getFirstInstance",value:function(){var e=this._firstInstance;if(!(e instanceof o.a)){e=null;var t=this.getFirstSeries();if(t instanceof s.a){var n=t.getFirstInstance();n instanceof o.a&&(this._firstInstance=n,e=n)}}return e}},{key:"findSeriesAndInstanceByInstance",value:function(e){var t;if(i.a.isValidCallback(e)){var n,r=this._series.find((function(t){return(n=t.findInstance(e))instanceof o.a}));r instanceof s.a&&(t={series:r,instance:n})}return t||{}}},{key:"findSeriesByInstance",value:function(e){return this.findSeriesAndInstanceByInstance(e).series}},{key:"findInstance",value:function(e){return this.findSeriesAndInstanceByInstance(e).instance}}])&&O(n.prototype,c),f&&O(n,f),t}(i.a),C=c.a.DICOMwebClient,T=function(e){return e.getTagValue("NumberOfFrames")>1},x=function(e,t){var n=t[0],r=new a.a(t),o=e.getData();r.setAttributes({displaySetInstanceUID:r.uid,SeriesDate:o.SeriesDate,SeriesTime:o.SeriesTime,SeriesInstanceUID:e.getSeriesInstanceUID(),SeriesNumber:n.getTagValue("SeriesNumber"),SeriesDescription:n.getTagValue("SeriesDescription"),numImageFrames:t.length,frameRate:n.getTagValue("FrameTime"),Modality:n.getTagValue("Modality"),isMultiFrame:T(n)});r.sortBy((function(e,t){return(parseInt(e.getTagValue("InstanceNumber",0))||0)-(parseInt(t.getTagValue("InstanceNumber",0))||0)})),r.setAttribute("InstanceNumber",r.getImage(0).getTagValue("InstanceNumber"));var i=p(t);r.isReconstructable=i.value;var s=void 0;if(r.isReconstructable){r.sortByImagePositionPatient();var c=i.reconstructionIssues.find((function(e){return e===ReconstructionIssues.DATASET_4D}));s=function(e,t){var n=e.length,r=e[0].getData().metadata.ImagePositionPatient,a=[],o=0;if(n>2){var i=e[n-1].getData().metadata.ImagePositionPatient;if(r&&i)for(var s=v(r,i)/(n-1),c=r,u=1;u<n;++u){var l=e[u].getData().metadata.ImagePositionPatient,p=v(l,c);if(!(t&&p<.001)){var m=h(p,s);if(m){var d=m.issue;if(d===f.a.MISSING_FRAMES)o+=m.missingFrames;else if(d===f.a.IRREGULAR_SPACING){a.push(d);break}}c=l}}}return{isUniform:0===a.length,missingFrames:o,reconstructionIssues:a}}(r.images,c),r.isReconstructable=s.isUniform,s.missingFrames&&(r.missingFrames=s.missingFrames)}return r.displayReconstructableInfo||(r.reconstructionIssues=s?i.reconstructionIssues.concat(s.reconstructionIssues):i.reconstructionIssues),r.isSOPClassUIDSupported=!0,r},k=function(e){return"CR"===e||"MG"===e||"DX"===e};function j(e,t){for(var n=e.filter((function(e){return e instanceof a.a})),r=0;r<n.length;r++){var o=n[r].images;if(o)for(var i=0;i<o.length;i++){var s=o[i];if(s&&s.SOPInstanceUID===t)return[s.getData().metadata.SeriesInstanceUID]}}}function R(e){return Array.isArray(e)?e:[e]}},,function(e,t,n){"use strict";var r=n(34),a=n(41),o=n(89);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=i()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&c(a,n.prototype),a}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!0!==Array.isArray(t))throw new a.a("ImageSet expects an array of images");Object.defineProperty(this,"images",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"uid",{enumerable:!1,configurable:!1,writable:!1,value:Object(r.a)()})}var t,n,i;return t=e,(n=[{key:"getUID",value:function(){return this.uid}},{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"setAttributes",value:function(e){if("object"===l(e)&&null!==e){var t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&(this[n]=e[n])}}},{key:"getImage",value:function(e){return this.images[e]}},{key:"sortBy",value:function(e){return this.images.sort(e)}},{key:"sortByImagePositionPatient",value:function(){var e=this.images,t=m(e[0]),n=new o.Vector3(t[0],t[1],t[2]),r=e[0].getData().metadata.ImageOrientationPatient,a=new o.Vector3(r[0],r[1],r[2]).cross(new o.Vector3(r[3],r[4],r[5])),i=e.map((function(e){var t=s(o.Vector3,u(m(e)));return{distance:n.clone().sub(t).dot(a),image:e}}));i.sort((function(e,t){return t.distance-e.distance}));var c=i.map((function(e){return e.image}));e.sort((function(e,t){return c.indexOf(e)-c.indexOf(t)}))}}])&&f(t.prototype,n),i&&f(t,i),e}();function m(e){return e.getData().metadata.ImagePositionPatient}t.a=p},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(181);function a(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+a+t+"="+n}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if("function"==typeof e.getImageId)return e.getImageId();if(e.url)return void 0!==t&&(e.url=a(e.url,"frame",t)),e.url;var o=n?"thumbnailRendering":"imageRendering";if(e[o]&&"wadouri"!==e[o]&&e.wadorsuri)return Object(r.a)(e,t,n);var i="dicomweb:"+e.wadouri;return void 0!==t&&(i+="&frame="+t),i}}},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(41);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"getByInstanceUID",value:function(e){throw new r.a("StudyMetadataSource::getByInstanceUID is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}},{key:"loadStudy",value:function(e){throw new r.a("StudyMetadataSource::loadStudy is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}}])&&a(t.prototype,n),o&&a(t,o),e}()},,function(e,t,n){"use strict";var r=n(76),a=n(535),o=n(672),i=n(536),s=n(267),c=n.n(s),u=n(38),l={order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupFromPathIndex:0,lookupFromSubdomainIndex:0,caches:["localStorage","cookie"],excludeCacheFor:["cimode"],htmlTag:document.documentElement},f=n(537);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{de:{AboutModal:n(538),Buttons:n(539),CineDialog:n(540),Common:n(541),DatePicker:n(542),Header:n(543),MeasurementTable:n(544),StudyList:n(545),UserPreferencesModal:n(546),ViewportDownloadForm:n(547)}},{},{"en-US":{AboutModal:n(548),Buttons:n(549),CineDialog:n(550),Common:n(551),DatePicker:n(552),Header:n(553),MeasurementTable:n(554),StudyList:n(555),UserPreferencesModal:n(556),ViewportDownloadForm:n(557)}},{},{es:{AboutModal:n(558),Buttons:n(559),CineDialog:n(560),Common:n(561),DatePicker:n(562),Header:n(563),MeasurementTable:n(564),StudyList:n(565),UserPreferencesModal:n(566),ViewportDownloadForm:n(567)}},{},{fr:{AboutModal:n(568),Buttons:n(569),CineDialog:n(570),Common:n(571),DatePicker:n(572),Header:n(573),MeasurementTable:n(574),StudyList:n(575),UserPreferencesModal:n(576),ViewportDownloadForm:n(577)}},{},{"ja-JP":{AboutModal:n(578),Buttons:n(579),CineDialog:n(580),Common:n(581),DatePicker:n(582),Header:n(583),MeasurementTable:n(584),StudyList:n(585),UserPreferencesModal:n(586),ViewportDownloadForm:n(587)}},{},{nl:{AboutModal:n(588),Buttons:n(589),CineDialog:n(590),Common:n(591),DatePicker:n(592),Header:n(593),MeasurementTable:n(594),StudyList:n(595),UserPreferencesModal:n(596),ViewportDownloadForm:n(597)}},{},{"pt-BR":{AboutModal:n(598),Buttons:n(599),CineDialog:n(600),Common:n(601),DatePicker:n(602),Header:n(603),MeasurementTable:n(604),StudyList:n(605),UserPreferencesModal:n(606),ViewportDownloadForm:n(607)}},{},{ru:{AboutModal:n(608),Buttons:n(609),CineDialog:n(610),Common:n(611),DatePicker:n(612),Header:n(613),MeasurementTable:n(614),StudyList:n(615),UserPreferencesModal:n(616),ViewportDownloadForm:n(617)}},{},{vi:{AboutModal:n(618),Buttons:n(619),CineDialog:n(620),Common:n(621),DatePicker:n(622),Header:n(623),MeasurementTable:n(624),StudyList:n(625),UserPreferencesModal:n(626),ViewportDownloadForm:n(627)}},{},{zh:{AboutModal:n(628),Buttons:n(629),CineDialog:n(630),Common:n(631),DatePicker:n(632),Header:n(633),MeasurementTable:n(634),StudyList:n(635),UserPreferencesModal:n(636),ViewportDownloadForm:n(637)}}),h={ar:"Arabic",am:"Amharic",bg:"Bulgarian",bn:"Bengali",ca:"Catalan",cs:"Czech",da:"Danish",de:"German",el:"Greek",en:"English","en-GB":"English (Great Britain)","en-US":"English (USA)",es:"Spanish",et:"Estonian",fa:"Persian",fi:"Finnish",fil:"Filipino",fr:"French",gu:"Gujarati",he:"Hebrew",hi:"Hindi",hr:"Croatian",hu:"Hungarian",id:"Indonesian",it:"Italian",ja:"Japanese","ja-JP":"Japanese (Japan)",kn:"Kannada",ko:"Korean",lt:"Lithuanian",lv:"Latvian",ml:"Malayalam",mr:"Marathi",ms:"Malay",nl:"Dutch",no:"Norwegian",pl:"Polish","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)",ro:"Romanian",ru:"Russian",sk:"Slovak",sl:"Slovenian",sr:"Serbian",sv:"Swedish",sw:"Swahili",ta:"Tamil",te:"Telugu",th:"Thai",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",zh:"Chinese","zh-CN":"Chinese (China)","zh-TW":"Chinese (Taiwan)"};function v(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,"next",e)}function s(e){v(o,r,a,i,s,"throw",e)}i(void 0)}))}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={projectId:"",apiKey:"",referenceLng:"en-US",fallbacklng:"en-US"};function O(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(n?r.a.use(a.a).use(o.a).use(i.a).use(c.a).use(u.b).init({fallbackLng:"en-US",saveMissing:s,debug:!1,keySeparator:!1,interpolation:{escapeValue:!1},detection:t,backend:w,locizeLastUsed:w,editor:b({},w,{onEditorSaved:(e=g(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.reloadResources(t,n);case 2:r.a.emit("editorSaved");case 3:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})}),react:{useSuspense:!1,wait:!0,bindI18n:"languageChanged editorSaved"}}):r.a.use(c.a).use(u.b).init({fallbackLng:"en-US",resources:d,debug:!1,keySeparator:!1,interpolation:{escapeValue:!1},detection:t,react:{wait:!0}})).then((function(e){r.a.T=e}))}"version ".concat(f.version," loaded."),r.a.initializing=O(),r.a.initI18n=O,r.a.addLocales=function(e){"Adding locales ".concat(e);var t=[];Object.keys(e).map((function(n){Object.keys(e[n]).map((function(a){var o=e[n][a];t.push({key:n,namespace:a,locale:o}),r.a.addResourceBundle(n,a,o,!0,!0)}))}))},r.a.defaultLanguage="en-US",r.a.availableLanguages=function(e){var t=[];return Object.keys(e).forEach((function(e){t.push({value:e,label:h[e]||e})})),t}(d);t.a=r.a},,,function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(189);function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o="RetrieveStudyMetadata",i=new Map;function s(e,t,n){var a,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)throw new Error("".concat(o,": Required 'server' parameter not provided."));if(!t)throw new Error("".concat(o,": Required 'StudyInstanceUID' parameter not provided."));return i.has(t)?i.get(t):(a=n&&n.seriesInstanceUID&&s?c(e,t,n):Object(r.a)(e,t,n),i.set(t,a),a)}function c(e,t,n){var o=n.seriesInstanceUID.split(",");return new Promise((function(i,s){var c=[];o.forEach((function(a){var o=Object.assign({},n,{seriesInstanceUID:a});c.push(Object(r.a)(e,t,o))})),Promise.all(c).then((function(e){var t=e[0],n=[];e.forEach((function(e){n=[].concat(a(n),a(e.series))})),t.series=n,i(t)}),s)}))}function u(e){i.has(e)&&i.delete(e)}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"parse",(function(){return B})),n.d(r,"queryString",(function(){return q})),n.d(r,"paramString",(function(){return z}));var a={};n.r(a),n.d(a,"addToList",(function(){return ne})),n.d(a,"getItem",(function(){return ae})),n.d(a,"forEach",(function(){return re})),n.d(a,"print",(function(){return oe}));var o={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(o),n.d(o,"createList",(function(){return me})),n.d(o,"isList",(function(){return de})),n.d(o,"createTask",(function(){return he})),n.d(o,"isTask",(function(){return ve})),n.d(o,"increaseList",(function(){return ge})),n.d(o,"update",(function(){return ye})),n.d(o,"finish",(function(){return be})),n.d(o,"getOverallProgress",(function(){return Se})),n.d(o,"waitOn",(function(){return we})),n.d(o,"addDeferred",(function(){return Oe})),n.d(o,"setTaskName",(function(){return Ie})),n.d(o,"getTaskByName",(function(){return Ee})),n.d(o,"addObserver",(function(){return Pe})),n.d(o,"removeObserver",(function(){return De}));var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"set",value:function(t,n,r){var a=e.getPathComponents(n),o=null!==a?a.length:0,i=!1;if(o>0&&e.isValidObject(t)){for(var s=0,c=o-1,u=t;s<c;){var l=a[s];if(l in u){if(!e.isValidObject(u[l]))break}else u[l]={};u=u[l],s++}s===c&&(u[a[c]]=r,i=!0)}return i}},{key:"get",value:function(t,n){var r,a=e.getPathComponents(n),o=null!==a?a.length:0;if(o>0&&e.isValidObject(t)){for(var i=0,s=o-1,c=t;i<s;){var u=a[i],l=e.isValidObject(c[u]);if(!(u in c)||!l)break;c=c[u],i++}i===s&&a[s]in c&&(r=c[a[s]])}return r}},{key:"isValidObject",value:function(e){return"object"===i(e)&&null!==e&&e instanceof Object}},{key:"getPathComponents",value:function(e){return"string"==typeof e?e.split("."):null}}],(n=null)&&s(t.prototype,n),r&&s(t,r),e}(),u=n(176),l=function(e){var t="/";if(!e)return t;var n=window.location.origin,r=n.split("/");if(r.length>4){var a=n.indexOf(r[3]);t+=n.substring(a)+e}else t+=e;return t.replace(/\/\/+/g,"/")},f=function(e,t){if(!e||!t)throw new Error("The servers and store must be defined");Object.keys(e).forEach((function(n){e[n].forEach((function(e){var r=Object.assign({},e);r.type=n,t.dispatch({type:"ADD_SERVER",server:r})}))}))},p=n(34),m=n(175),d=n(94);var h=n(8),v=n.n(h),g=n(60),y=n.n(g),b=n(47),S=n(17),w=n(40),O=n(44);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(e){if(e)return"function"==typeof e.getImageId?e.getImageId():e.url},P=function(e){return(Array.isArray(e)?e:[e]).some((function(e){return!e}))},D=function(e){return e&&e.images&&e.images[0]},C=function(e){return E(e)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.a.getAuthorizationHeader();return fetch(e,t).then((function(e){return e.arrayBuffer()}))},x=function(e){return v.a.loadAndCacheImage(e).then((function(e){return e&&e.data&&e.data.byteArray.buffer}))},k=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:S.a.getAuthorizationHeader(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w.a.getHTTPErrorHandler(),i={url:e,headers:a,errorInterceptor:o,requestHooks:[Object(O.a)()]},s=new b.a.DICOMwebClient(i);return s.retrieveInstance({studyInstanceUID:t,seriesInstanceUID:n,sopInstanceUID:r})},j=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getLocalData",value:function(e,t){if(e&&e.localFile){var n=D(e),r=C(n);if(P(r)&&(r=function(e,t){var n=e.find((function(e){return e.displaySets.some((function(e){return e.displaySetInstanceUID===t}))})).series,r=((void 0===n?[]:n)[0]||{}).instances,a=(void 0===r?[]:r)[0];return E(a)}(t,e.displaySetInstanceUID)),!P(r))return y.a.wadouri.loadFileRequest(r)}}},{key:"getDataByImageType",value:function(e){var t=D(e);if(t){var n=C(t),r=T;switch(function(e){var t=/^\w+\:/,n=t.exec(e);return 0===t.lastIndex&&n&&n[0]&&n[0].replace(":","")||""}(n)){case"dicomfile":r=x.bind(this,n);break;case"wadors":var a=t.getData().wadoRoot,o=t.getStudyInstanceUID(),i=t.getSeriesInstanceUID(),s=t.getSOPInstanceUID();if(P([a,o,i,s]))return;r=k.bind(this,a,o,i,s);break;case"wadouri":if(function(e){throw new Error('"'+e+'" is read-only')}("imageId"),n=n.substring(n.indexOf(":")+1),P(n))return;r=T.bind(this,n)}return r()}}},{key:"getDataByDatasetType",value:function(e){var t=e.StudyInstanceUID,n=e.SeriesInstanceUID,r=e.SOPInstanceUID,a=e.authorizationHeaders,o=e.wadoRoot,i=e.wadoUri;return P(o)?P(i)?void 0:T(i,{headers:a}):k(o,t,n,r,a)}},{key:"getLoaderIterator",value:regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocalData(t,n);case 2:return e.next=4,this.getDataByImageType(t);case 4:return e.next=6,this.getDataByDatasetType(t);case 6:case"end":return e.stop()}}),e,this)}))},{key:"findDicomDataPromise",value:function(e,t){var n=this.getLoaderIterator(e,t),r=!0,a=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(c)return c}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}throw new Error("Invalid dicom data loader")}}])&&I(t.prototype,n),r&&I(t,r),e}()),R=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(e),a=[],o=0;o<r.length;o+=n){for(var i=r.slice(o,o+n),s=new Array(i.length),c=0;c<i.length;c++)s[c]=i.charCodeAt(c);var u=new Uint8Array(s);a.push(u)}var l=new Blob(a,{type:t});return l};function N(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){N(o,r,a,i,s,"next",e)}function s(e){N(o,r,a,i,s,"throw",e)}i(void 0)}))}}function _(){return(_=M(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.StudyInstanceUID,i=t.SeriesInstanceUID,s=[],c=d.a.get(o)){e.next=5;break}return e.abrupt("return",s);case 5:if((u=c.getDerivedDatasets({referencedSeriesInstanceUID:i})).length){e.next=8;break}return e.abrupt("return",s);case 8:return l={},u.forEach((function(e){var t=e.Modality;void 0===l[t]&&(l[t]=[]),l[t].push(e)})),e.next=12,Promise.all(Object.keys(l).map(function(){var e=M(regeneratorRuntime.mark((function e(o){var i,s,c,u,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=l[o],!i.some((function(e){return e.isLoaded}))){e.next=4;break}return e.abrupt("return");case 4:if(!i.some((function(e){return e.loadError}))){e.next=6;break}return e.abrupt("return");case 6:if(s=0,c=i[0],i.forEach((function(e){var t=Number("".concat(e.SeriesDate).concat(e.SeriesTime));t>s&&(s=t,c=e)})),e.prev=9,!c.hasOwnProperty("getSourceDisplaySet")||"function"!=typeof c.getSourceDisplaySet){e.next=25;break}if("SEG"!==c.Modality||!r){e.next=21;break}u=function(e){var t=e.message.includes("orthogonal")||e.message.includes("oblique")?"The segmentation has been detected as non coplanar,                    If you really think it is coplanar,                    please adjust the tolerance in the segmentation panel settings (at your own peril!)":e.message;r.error({error:e,message:t}),a.show({title:"DICOM Segmentation Loader",message:t,type:"error",autoClose:!1})},f=-1,p=regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.getSourceDisplaySet(n,!0,u);case 2:return t=e.sent,t.referencedDisplaySet,r=t.activatedLabelmapPromise,e.next=7,r;case 7:f=e.sent,a=new CustomEvent("extensiondicomsegmentationsegselected",{detail:{activatedLabelmapIndex:f}}),document.dispatchEvent(a),o=Number("".concat(c.SeriesDate).concat(c.SeriesTime)),s=0,i.forEach((function(e){var t=Number("".concat(e.SeriesDate).concat(e.SeriesTime));t>s&&t<o&&(s=t,c=e)}));case 13:case"end":return e.stop()}}),e)}));case 15:if(-1!=f){e.next=19;break}return e.delegateYield(p(),"t0",17);case 17:e.next=15;break;case 19:e.next=23;break;case 21:return e.next=23,c.getSourceDisplaySet(n);case 23:e.next=27;break;case 25:return e.next=27,c.load(t,n);case 27:e.next=35;break;case 29:e.prev=29,e.t1=e.catch(9),c.isLoaded=!1,c.loadError=!0,r.error({error:e.t1,message:e.t1.message}),a.show({title:"Error loading derived display set:",message:e.t1.message,type:"error",error:e.t1,autoClose:!1});case 35:case"end":return e.stop()}}),e,null,[[9,29]])})));return function(t){return e.apply(this,arguments)}}()));case 12:f=new CustomEvent("deriveddisplaysetsloadedandcached"),document.dispatchEvent(f);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e,t,n,r){return _.apply(this,arguments)},L=n(211),U=n.n(L);function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function F(e){return e[0].toLowerCase()+e.slice(1)}var B=function(e){return e?U.a.parse(e):{}},q={getQueryFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search;if(t){var n=B(t),r={};return Object.entries(n).forEach((function(e){var t=V(e,2),n=t[0],a=t[1];r[F(n)]=a})),r}}},z={isValidPath:function(e){var t="/".concat(":");return e.indexOf(t)<0},parseParam:function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t=window.atob(e);return t}catch(t){return e}}(e);if(t&&"string"==typeof t)return t.split(";")},replaceParam:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="".concat(":").concat(t);return n?e.replace(r,n):e}};function H(){var e,t,n=new Promise((function(n,r){t=n,e=r}));return Object.freeze({promise:n,resolve:t,reject:e})}var W=n(90);function G(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){$(o,r,a,i,s,"next",e)}function s(e){$(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=t,this.size=0,this.awaiting=null}var t,n,r;return t=e,(n=[{key:"bind",value:function(e){return K(this,e)}},{key:"bindSafe",value:function(e,t){var n=K(this,e);return function(){var e=J(regeneratorRuntime.mark((function e(){var r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.apply(void 0,r);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),t(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function K(e,t){var n=Z.bind(null,e);return function(){var r=J(regeneratorRuntime.mark((function r(){var a,o,i,s,c=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.size>=e.limit)){r.next=2;break}throw new Error("Queue limit reached");case 2:for(a=c.length,o=new Array(a),i=0;i<a;i++)o[i]=c[i];return s=Q(e.awaiting,t,o),e.awaiting=s.then(n,n),e.size++,r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()}function Z(e){e.size>0&&0==--e.size&&(e.awaiting=null)}function Q(e,t,n){return ee.apply(this,arguments)}function ee(){return(ee=J(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.abrupt("return",n.apply(void 0,G(r)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e){if(Array.isArray(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length>0&&se(e,n),e}return null}function re(e,t){return Array.isArray(e)?("function"==typeof t&&ie(e,t),e):null}function ae(e,t){if(Array.isArray(e)){var n=null,r="number"==typeof t?t:-1;if("string"==typeof t){var a=t.indexOf("/");a>0?(r=parseInt(t.slice(0,a),10),a+1<t.length&&(n=t.slice(a+1,t.length))):r=parseInt(t,10)}if(r>=0&&r<e.length){var o=e[r];return ce(o)?null!==n?ae(o[1],n):o[0]:o}}}function oe(e){var t="";if(Array.isArray(e)){var n=[];ie(e,(function(){for(var e=n.length,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];for(var i=0,s=a.length;i<s;++i)i<e&&a[i]===n[i]||(t+="  ".repeat(i)+a[i]+"\n");n=a}))}return t}function ie(e,t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(ce(a)){if(a[1].length>0){ie(a[1],t.bind(null,a[0]));continue}a=a[0]}t(a)}}function se(e,t){var n=t.shift(),r=function(e,t){var n=function(e,t){if("string"==typeof t){for(var n=0,r=e.length;n<r;++n){var a=e[n];if(a===t||ce(a)&&a[0]===t)return n}return-2}return-1}(e,t);-2===n&&(n=e.push(t)-1);return n}(e,n);if(r>=0){if(t.length>0){var a=e[r];return ce(a)||(a=function(e){return[e+"",[]]}(n),e[r]=a),se(a[1],t)}return!0}return!1}function ce(e){return Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&Array.isArray(e[1])}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var le=Symbol("Type"),fe=Symbol("Task"),pe=Symbol("List");function me(){return Ce(pe,{head:null,named:Object.create(null),observers:[]})}function de(e){return Te(pe,e)}function he(e,t){return Ce(fe,{list:de(e)?e:null,next:ve(t)?t:null,failed:!1,awaiting:null,progress:0})}function ve(e){return Te(fe,e)}function ge(e){if(de(e)){var t=he(e,e.head);return e.head=t,ke(e,Se(e)),t}return null}function ye(e,t){ve(e)&&xe(t)&&t<1&&e.progress!==t&&(e.progress=t,de(e.list)&&ke(e.list,Se(e.list)))}function be(e){ve(e)&&(e.progress=1,e.awaiting=null,Object.freeze(e),de(e.list)&&ke(e.list,Se(e.list)))}function Se(e){var t=Object.seal({total:0,partial:0,progress:0,failures:0});if(de(e))for(var n=e.head;ve(n);)t.total++,xe(n.progress)&&(t.partial+=n.progress,1===n.progress&&n.failed&&t.failures++),n=n.next;return t.total>0&&(t.progress=t.partial/t.total),Object.freeze(t)}function we(e,t){var n=ge(e);return ve(n)?(n.awaiting=Promise.resolve(t).then((function(){be(n)}),(function(){n.failed=!0,be(n)})),n):null}function Oe(e){var t=H(),n=we(e,t.promise);return Object.freeze({deferred:t,task:n})}function Ie(e,t,n){return!(!function(e,t){if(de(e)&&ve(t))for(var n=e.head;ve(n);){if(n===t)return!0;n=n.next}return!1}(e,t)||null===e.named||"object"!==ue(e.named)||"string"!=typeof n)&&(e.named[n]=t,!0)}function Ee(e,t){if(de(e)&&null!==e.named&&"object"===ue(e.named)&&"string"==typeof t){var n=e.named[t];if(ve(n))return n}return null}function Pe(e,t){return!(!de(e)||!Array.isArray(e.observers)||"function"!=typeof t)&&(e.observers.push(t),!0)}function De(e,t){if(de(e)&&Array.isArray(e.observers)&&e.observers.length>0){var n=e.observers.indexOf(t);if(n>=0)return e.observers.splice(n,1),!0}return!1}function Ce(e,t){return Object.seal(Object.defineProperty(t,le,{value:e}))}function Te(e,t){return null!==t&&"object"===ue(t)&&t[le]===e}function xe(e){return"number"==typeof e&&e>=0&&e<=1}function ke(e,t){de(e)&&Array.isArray(e.observers)&&e.observers.length>0&&e.observers.slice().forEach((function(n){if("function"==typeof n)try{n(t,e)}catch(e){}}))}var je={guid:p.a,ObjectPath:c,absoluteUrl:l,addServers:f,sortBy:m.a,writeScript:function(e,t){var n=document.createElement("script");n.src=l(e),n.onload=function(){"function"==typeof t&&t(n)},document.body.appendChild(n)},b64toBlob:R,StackManager:u.a,studyMetadataManager:d.a,DicomLoaderService:j,urlUtil:r,loadAndCacheDerivedDisplaySets:A,makeDeferred:H,makeCancelable:function(e){var t=!1,n=Promise.resolve(e).then((function(e){if(t)throw Object.freeze({isCanceled:t});return e}),(function(e){if(t)throw Object.freeze({isCanceled:t,error:e});throw e}));return Object.assign(Object.create(n),{then:n.then.bind(n),cancel:function(){t=!0}})},hotkeys:W.a,Queue:X,isDicomUid:function(e){return"string"==typeof e&&/^\d+(?:\.\d+)*$/.test(e.trim())},resolveObjectPath:function e(t,n,r){if(null!==t&&"object"===te(t)&&"string"==typeof n){var a,o=n.indexOf(".");return o>=0?e(t[n.slice(0,o)],n.slice(o+1,n.length),r):void 0===(a=t[n])&&void 0!==r?r:a}},hierarchicalListUtils:a,progressTrackingUtils:o,xhrRetryRequestHook:O.a};t.a=je},function(e,t,n){"use strict";var r=n(96),a=n(72),o=n(70),i=n(256),s=n(8),c=n.n(s),u=n(60),l=n.n(u),f=n(294),p=n.n(f),m=n(176),d=n(112);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){},S=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"options",{order:"closest",displaySetCount:1,onImageCached:b,requestType:"prefetch",preventCache:!1,prefetchDisplaySetsTimeout:300,maxNumPrefetchRequests:100,includeActiveDisplaySet:!1}),y(this,"cacheFullHandler",(function(){log.warn("Cache full"),r.stopPrefetching()})),this.studies=t||[],n&&(this.options=v({},this.options,{},n),this.options.requestType="prefetch"),c.a.events.addEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandler)}var t,n,r;return t=e,r=[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return e.instance||(e.instance=new e(t,n)),n&&(this.options=v({},this.options,{},n),this.options.requestType="prefetch"),e.instance}}],(n=[{key:"destroy",value:function(){this.stopPrefetching(),c.a.events.removeEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandler)}},{key:"setStudies",value:function(e){this.stopPrefetching(),this.studies=e}},{key:"getElement",value:function(){return this.element}},{key:"prefetch",value:function(e,t){if(this.studies&&this.studies.length){this.element=e;try{this.enabledElement=c.a.getEnabledElement(e)}catch(e){throw new Error("Failed to find the enabled element")}this.stopPrefetching(),this.prefetchDisplaySets(t)}}},{key:"stopPrefetching",value:function(){c.a.imageLoadPoolManager.clearRequestStack("prefetch")}},{key:"prefetchDisplaySetsAsync",value:function(e,t){var n=this;try{this.enabledElement=c.a.getEnabledElement(e)}catch(e){throw new Error("Failed to find the enabled element")}t=t||this.options.prefetchDisplaySetsTimeout,clearTimeout(this.prefetchDisplaySetsHandler),this.prefetchDisplaySetsHandler=setTimeout((function(){n.prefetchDisplaySets(e)}),t)}},{key:"prefetchDisplaySets",value:function(e){var t=this.getDisplaySetsToPrefetch(e),n=this.getImageIdsFromDisplaySets(t);this.prefetchImageIds(n)}},{key:"prefetchImageIds",value:function(e){var t,n=this,r=this.filterCachedImageIds(e),a=c.a.imageLoadPoolManager;a.maxNumRequests=v({},a.maxNumRequests,{prefetch:this.options.maxNumPrefetchRequests}),t=this.options.preventCache?function(e){return c.a.loadImage(e)}:function(e){return c.a.loadAndCacheImage(e)},r.forEach((function(e){a.addRequest(t.bind(n,e),n.options.requestType,{imageId:e})}))}},{key:"getStudy",value:function(e){var t=c.a.metaData.get("StudyInstanceUID",e.imageId);return this.studies.find((function(e){return e.getData().StudyInstanceUID===t}))}},{key:"getSeries",value:function(e,t){var n=c.a.metaData.get("SeriesInstanceUID",t.imageId);return e.getSeriesByUID(n)}},{key:"getInstance",value:function(e,t){var n=c.a.metaData.get("instance",t.imageId);return e.getInstanceByUID(n.SOPInstanceUID)}},{key:"getDisplaySetByUID",value:function(e){var t;return this.studies.forEach((function(n){var r=n.displaySets.find((function(t){return t.displaySetInstanceUID===e}));r&&(t=r)})),t}},{key:"getDisplaySetBySOPInstanceUID",value:function(e,t){return e.find((function(e){return e.images.some((function(e){return e.SOPInstanceUID===t.SOPInstanceUID}))}))}},{key:"getActiveViewportImage",value:function(){if(this.enabledElement)return this.enabledElement.image}},{key:"getDisplaySetsToPrefetch",value:function(e){var t=this.getActiveViewportImage();if(!t)return[];var n=this.getStudy(t),r=this.getSeries(n,t),a=this.getInstance(r,t),o=n.displaySets,i=e?this.getDisplaySetByUID(e):this.getDisplaySetBySOPInstanceUID(o,a),s=this.options.order,c=this[{topdown:"getFirstDisplaySets",downward:"getNextDisplaySets",upward:"getPreviousDisplaySets",closest:"getClosestDisplaySets",all:"getAllDisplaySets"}[s]];return c?c.call(this,o,i,this.options.displaySetCount,this.options.includeActiveDisplaySet):(s&&log.warn("Invalid prefetch order configuration (".concat(s,")")),[])}},{key:"getAllDisplaySets",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a;i++){var s=e[i];o.push(s)}return o}},{key:"getFirstDisplaySets",value:function(e,t,n,r){for(var a=e.length,o=[],i=0;i<a&&n;i++){var s=e[i];(r||s!==t)&&(o.push(s),n--)}return o}},{key:"getPreviousDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=r?a+1:a;return e.slice(0,o).reverse().slice(0,n)}},{key:"getNextDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=r?a:a+1,i=Math.min(o+n,e.length);return e.slice(o,i)}},{key:"getClosestDisplaySets",value:function(e,t,n,r){var a=e.indexOf(t),o=e.length,i=[],s=a-1,c=a+1;for(r&&(i.push(e[a]),n--);(s>=0||c<o)&&n;)s>=0&&(i.push(e[s]),n--,s--),c<o&&n&&(i.push(e[c]),n--,c++);return i}},{key:"getImageIdsFromDisplaySets",value:function(e){var t=this,n=[];return e.forEach((function(e){n=n.concat(t.getImageIdsFromDisplaySet(e))})),n}},{key:"getImageIdsFromDisplaySet",value:function(e){var t=[];return!e.images||e.images.length<1?[]:(e.images.forEach((function(e){var n=e.numFrames;if(n>1)for(var r=0;r<n;r++){var a=Object(d.a)(e,r);t.push(a)}else{var o=Object(d.a)(e);t.push(o)}})),t)}},{key:"filterCachedImageIds",value:function(e){var t=this;return e.filter((function(e){return!t.isImageCached(e)}))}},{key:"isImageCached",value:function(e){var t=c.a.imageCache.imageCache[e];return t&&t.sizeInBytes}}])&&g(t.prototype,n),r&&g(t,r),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?E(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var j=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,e),this.id=e.getNewId(),this.stack=t,this.statsItemsLimit=n.statsItemsLimit||2,this.stats={items:[],total:0,elapsedTime:0,speed:0},this._setProgressData=n._setProgressData,this._clearProgressById=n._clearProgressById,this._addStatsData(0),this._updateProgress()}return k(e,[{key:"_addStatsData",value:function(e){var t=new Date,n=this.stats,r=n.items,a={value:e,date:t};for(r.push(a),n.total+=a.value;r.length>this.statsItemsLimit;){var o=r.shift();n.total-=o.value}if(r.length>1){var i=r[0];n.elapsedTime=(a.date.getTime()-i.date.getTime())/1e3,n.speed=(n.total-i.value)/n.elapsedTime}}},{key:"_getProgressId",value:function(){return"StackProgress:"+this.stack.displaySetInstanceUID}},{key:"_clearProgress",value:function(){var e=this._getProgressId();this._clearProgressById(e)}},{key:"startListening",value:function(){throw new Error("`startListening` must be implemented by child classes")}},{key:"stopListening",value:function(){throw new Error("`stopListening` must be implemented by child classes")}},{key:"destroy",value:function(){this.stopListening(),this._clearProgress()}}],[{key:"getNewId",value:function(){var e=(new Date).getTime().toString().slice(-8),t=parseInt(1e9*Math.random());return e.toString()+t.toString()}}]),e}(),R=function(e){function t(e,n){var r;return T(this,t),C(E(r=O(this,I(t).call(this,e,n))),"_imageLoadProgressEventHandler",(function(e){var t=e.detail,n=r._convertImageIdToDataSetUrl(t.imageId),a=t.loaded-r._lastLoaded;!r._dataSetUrl!==n&&(r._addStatsData(a),r._updateProgress(t),r._lastLoaded=t.loaded)})),r.imageLoadProgressEventHandler=r._imageLoadProgressEventHandler.bind(E(r)),r._dataSetUrl=r._getDataSetUrl(e),r._lastLoaded=0,r._checkCachedData(),r.startListening(),r}return P(t,e),k(t,[{key:"_checkCachedData",value:function(){var e=l.a.wadouri.dataSetCacheManager.get(this._dataSetUrl);if(e){var t=e.byteArray.length;this._updateProgress({percentComplete:100,loaded:t,total:t})}}},{key:"_getImageLoadProgressEventName",value:function(){return"cornerstoneimageloadprogress."+this.id}},{key:"startListening",value:function(){var e=this._getImageLoadProgressEventName();this.stopListening(),c.a.events.addEventListener(e,this.imageLoadProgressEventHandle)}},{key:"stopListening",value:function(){var e=this._getImageLoadProgressEventName();c.a.events.removeEventListener(e,this.imageLoadProgressEventHandle)}},{key:"_updateProgress",value:function(e){var t=this._getProgressId(),n={multiFrame:!1,percentComplete:(e=e||{}).percentComplete,bytesLoaded:e.loaded,bytesTotal:e.total,bytesPerSecond:this.stats.speed};this._setProgressData(t,n)}},{key:"_convertImageIdToDataSetUrl",value:function(e){return e=(e=(e=e.replace(/^(dicomweb:|wadouri:)/i,"")).replace(/frame=\d+&?/i,"")).replace(/&$/,"")}},{key:"_getDataSetUrl",value:function(e){var t=e.imageIds[0];return this._convertImageIdToDataSetUrl(t)}}]),t}(j),N={OnProgress:"StudyLoadingListenerEvents.OnProgress"};function M(e,t){var n=window.Symbol?Symbol("unique"):/unique/;var r=[e,Promise.resolve(n)];Promise.race(r).then((function(e){return t(e===n?"pending":"fulfilled")}),(function(e){return t("rejected")}))}var _=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,t),r.statsItemsLimit=20,(n=O(this,I(t).call(this,e,r))).imageLoadedEventHandler=n._imageLoadedEventHandler.bind(E(n)),n.imageCachePromiseRemovedEventHandler=n._imageCachePromiseRemovedEventHandler.bind(E(n)),n.imageDataMap=n._convertImageIdsArrayToMap(e.imageIds),n.framesStatus=n._createArray(e.imageIds.length,!1),n.loadedCount=0,n._debouncedSetProgressData=p()((function(){var e;(e=n)._setProgressData.apply(e,arguments);var t=S.getInstance();t.prefetch(t.getElement())}),300);var a=!0;return n._checkCachedData(a),n.startListening(),n}return P(t,e),k(t,[{key:"_convertImageIdsArrayToMap",value:function(e){for(var t=new Map,n=0;n<e.length;n++)t.set(e[n],{index:n,loaded:!1});return t}},{key:"_createArray",value:function(e,t){for(var n=[],r=0;r<e;r++)n[r]=t;return n}},{key:"isImageCached",value:function(e){var t=c.a.imageCache.imageCache[e];return t&&t.sizeInBytes}},{key:"_checkCachedData",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.stack.imageIds,r=function(r){var a=n[r],o=c.a.imageCache.getImageLoadObject(a);e.isImageCached(a)&&e._updateFrameStatus(a,!0,t),o&&o.promise&&M(o.promise,(function(n){"fulfilled"===n&&e._updateFrameStatus(a,!0,t)}))},a=0;a<n.length;a++)r(a)}},{key:"_getImageLoadedEventName",value:function(){return"".concat(c.a.EVENTS.IMAGE_LOADED,".").concat(this.id)}},{key:"_getImageCachePromiseRemoveEventName",value:function(){return"".concat(c.a.EVENTS.IMAGE_CACHE_PROMISE_REMOVED,".").concat(this.id)}},{key:"_imageLoadedEventHandler",value:function(e){this._updateFrameStatus(e.detail.image.imageId,!0)}},{key:"_imageCachePromiseRemovedEventHandler",value:function(e){this._updateFrameStatus(e.detail.imageId,!1)}},{key:"startListening",value:function(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName();this.stopListening(),c.a.events.addEventListener(e,this.imageLoadedEventHandler),c.a.events.addEventListener(t,this.imageCachePromiseRemovedEventHandler)}},{key:"stopListening",value:function(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName();c.a.events.removeEventListener(e,this.imageLoadedEventHandler),c.a.events.removeEventListener(t,this.imageCachePromiseRemovedEventHandler)}},{key:"_updateFrameStatus",value:function(e,t,n){var r=this.imageDataMap.get(e);r&&r.loaded!==t&&(t&&this._addStatsData(1),r.loaded=t,this.framesStatus[r.index]=t,this.loadedCount+=t?1:-1,this._updateProgress(n))}},{key:"_setProgressData",value:function(e,t){throw new Error("The _setProgressData function must be provided in StudyLoadingListener's options")}},{key:"_clearProgressById",value:function(e){throw new Error("The _clearProgressById function must be provided in StudyLoadingListener's options")}},{key:"_updateProgress",value:function(e){var t=this.stack.imageIds.length,n=this.loadedCount,r=t-n,a=Math.ceil(n/t*100),o=this._getProgressId(),i={multiFrame:!0,totalFramesCount:t,loadedFramesCount:n,loadingFramesCount:r,percentComplete:a,framesPerSecond:this.stats.speed,framesStatus:this.framesStatus};e?this._debouncedSetProgressData(o,i):this._setProgressData(o,i)}},{key:"_logProgress",value:function(){for(var e=this.stack.imageIds.length,t=this.stack.displaySetInstanceUID,n="[",r=0;r<e;r++){var a=this.framesStatus[r]?"|":".";n+="".concat(a)}n+="]",console.info("".concat(t,": ").concat(n))}}]),t}(j),A=function(){function e(t){T(this,e),this.listeners={},this.options=t}return k(e,[{key:"addStack",value:function(e,t){if(e){var n=e.displaySetInstanceUID;if(!this.listeners[n]){var r=this._createListener(e,t);r&&(this.listeners[n]=r)}}}},{key:"addStudy",value:function(e){var t=this;e.displaySets.forEach((function(n){var r=m.a.findOrCreateStack(e,n);r&&t.addStack(r,{isMultiFrame:n.isMultiFrame})}))}},{key:"addStudies",value:function(e){var t=this;e&&e.length&&e.forEach((function(e){return t.addStudy(e)}))}},{key:"clear",value:function(){for(var e=Object.keys(this.listeners),t=e.length,n=0;n<t;n++){var r=e[n];this.listeners[r].destroy()}this.listeners={}}},{key:"_createListener",value:function(e,t){return"wadors"!==this._getSchema(e)&&t.isMultiFrame?new R(e,this.options):new _(e,this.options)}},{key:"_getSchema",value:function(e){var t=e.imageIds[0];if(t){var n=t.indexOf(":");return t.substring(0,n)}}}],[{key:"getInstance",value:function(t){var n={_setProgressData:function(e,t){var n=new CustomEvent(N.OnProgress,{detail:{progressId:e,progressData:t}});document.dispatchEvent(n)},_clearProgressById:function(e){var t=new CustomEvent(N.OnProgress,{detail:{progressId:e,percentComplete:0}});document.dispatchEvent(t)}};return e._instance||(e._instance=new e(t||n)),e._instance}}]),e}();C(A,"events",N);var L=n(257),U=n(98);function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=Symbol("subscriptions"),B=Symbol("lastSubscriptionId"),q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[F]={},this[B]=0}var t,n,r;return t=e,(n=[{key:"subscribe",value:function(e,t){if(void 0===e)throw new Error("Event name is required");if("function"!=typeof t)throw new Error("Callback must be a function");this[F].hasOwnProperty(e)||(this[F][e]={});var n="sub".concat(this[B]++);this[F][e][n]=t}},{key:"unsubscribe",value:function(e,t){var n=this[F][e]||{};for(var r in n)t?n[r]===t&&delete n[r]:delete n[r]}},{key:"publish",value:function(e){if(void 0===e)throw new Error("Event name is required");for(var t=this[F][e]||{},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o in t)t[o].apply(t,r)}}])&&V(t.prototype,n),r&&V(t,r),e}();function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?$(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=Object.freeze({OnLog:"onLog"}),K=new(function(e){function t(){var e,n;H(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Y($(n=W(this,(e=G(t)).call.apply(e,[this].concat(a)))),"EVENTS",X),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),t}(q)),Z=n(87),Q=n(41),ee=n(94),te=n(118),ne=n(123);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(){return ae(this,t),ie(this,se(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,o=[{key:"_updateStudyCollections",value:function(e){var t=e.getData();t.selected=!0,t.displaySets=e.getDisplaySets(),ee.a.add(e)}}],(a=[{key:"getByInstanceUID",value:function(e,t){return Object(ne.b)(e,t)}},{key:"loadStudy",value:function(e){var n=this;if(!(e instanceof r.a))throw new Q.a("OHIFStudyMetadataSource::loadStudy study is not an instance of StudyMetadata");return new Promise((function(a,o){var i=e.getStudyInstanceUID();if(e instanceof r.a)return OHIF.viewer.Studies.findBy({StudyInstanceUID:i})||t._updateStudyCollections(e),void a(e);n.getByInstanceUID(i).then((function(e){var n=new r.a(e,e.StudyInstanceUID);n.createDisplaySets(),t._updateStudyCollections(n),a(n)})).catch(o)}))}}])&&oe(n.prototype,a),o&&oe(n,o),t}(te.a),le=n(177),fe={OHIFStudyMetadataSource:ue,MetadataProvider:Z.a,CommandsManager:i.a,HotkeysManager:L.a,LogManager:K,ImageSet:U.a,PubSub:q,StudyPrefetcher:S,StudyLoadingListener:A,StackLoadingListener:_,DICOMFileLoadingListener:R,StudyMetadata:r.a,SeriesMetadata:a.a,InstanceMetadata:o.a,TypeSafeCollection:le.a,OHIFError:Q.a,StudyMetadataSource:te.a};t.a=fe},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(10),a=[r.a.ComputedRadiographyImageStorage,r.a.DigitalXRayImageStorageForPresentation,r.a.DigitalXRayImageStorageForProcessing,r.a.DigitalMammographyXRayImageStorageForPresentation,r.a.DigitalMammographyXRayImageStorageForProcessing,r.a.DigitalIntraOralXRayImageStorageForPresentation,r.a.DigitalIntraOralXRayImageStorageForProcessing,r.a.CTImageStorage,r.a.EnhancedCTImageStorage,r.a.LegacyConvertedEnhancedCTImageStorage,r.a.UltrasoundMultiframeImageStorage,r.a.MRImageStorage,r.a.EnhancedMRImageStorage,r.a.EnhancedMRColorImageStorage,r.a.LegacyConvertedEnhancedMRImageStorage,r.a.UltrasoundImageStorage,r.a.SecondaryCaptureImageStorage,r.a.MultiframeSingleBitSecondaryCaptureImageStorage,r.a.MultiframeGrayscaleByteSecondaryCaptureImageStorage,r.a.MultiframeGrayscaleWordSecondaryCaptureImageStorage,r.a.MultiframeTrueColorSecondaryCaptureImageStorage,r.a.XRayAngiographicImageStorage,r.a.EnhancedXAImageStorage,r.a.XRayRadiofluoroscopicImageStorage,r.a.EnhancedXRFImageStorage,r.a.XRay3DAngiographicImageStorage,r.a.XRay3DCraniofacialImageStorage,r.a.BreastTomosynthesisImageStorage,r.a.BreastProjectionXRayImageStorageForPresentation,r.a.BreastProjectionXRayImageStorageForProcessing,r.a.IntravascularOpticalCoherenceTomographyImageStorageForPresentation,r.a.IntravascularOpticalCoherenceTomographyImageStorageForProcessing,r.a.NuclearMedicineImageStorage,r.a.VLEndoscopicImageStorage,r.a.VideoEndoscopicImageStorage,r.a.VLMicroscopicImageStorage,r.a.VideoMicroscopicImageStorage,r.a.VLSlideCoordinatesMicroscopicImageStorage,r.a.VLPhotographicImageStorage,r.a.VideoPhotographicImageStorage,r.a.OphthalmicPhotography8BitImageStorage,r.a.OphthalmicPhotography16BitImageStorage,r.a.OphthalmicTomographyImageStorage,r.a.VLWholeSlideMicroscopyImageStorage,r.a.PositronEmissionTomographyImageStorage,r.a.EnhancedPETImageStorage,r.a.LegacyConvertedEnhancedPETImageStorage,r.a.RTImageStorage],o=function(e){return!!e&&-1!==a.indexOf(e)}},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=Object.freeze(["SEG","DOC","RTSTRUCT","SR","KO","PR"]);function a(e){return r.includes(e)}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){var e=[].slice.call(arguments),t=e.length;return function(n,r){var a,o,i,s,c,u,l;for(l=0;l<t&&(u=0,a=n[s="string"==typeof(i=e[l])?i:i.name],o=r[s],void 0!==i.primer&&(a=i.primer(a),o=i.primer(o)),c=i.reverse?-1:1,a<o&&(u=-1*c),a>o&&(u=1*c),0===u);l++);return u}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(41),a=n(112),o=n(87),i={},s={},c=[];s={createAndAddStack:function(e,t,n,r){var i=n.images;if(i){var s,c=i.length,u=[];i.forEach((function(e,r){var i=e.getData(),l={instance:i,series:n,study:t,numImages:c,imageIndex:r+1},f=i.metadata,p=f.NumberOfFrames;if(p>1)for(var m=0;m<p;m++){l.frameNumber=m,s=Object(a.a)(i,m),u.push(s);var d=e.getData().metadata,h=d.StudyInstanceUID,v=d.SeriesInstanceUID,g=d.SOPInstanceUID;o.a.addImageIdToUIDs(s,{StudyInstanceUID:h,SeriesInstanceUID:v,SOPInstanceUID:g})}else{l.frameNumber=1,s=Object(a.a)(i),u.push(s);var y=f.StudyInstanceUID,b=f.SeriesInstanceUID,S=f.SOPInstanceUID;o.a.addImageIdToUIDs(s,{StudyInstanceUID:y,SeriesInstanceUID:b,SOPInstanceUID:S})}}));var l={StudyInstanceUID:t.StudyInstanceUID,displaySetInstanceUID:n.displaySetInstanceUID,imageIds:u,frameRate:n.frameRate,isClip:n.isClip};return e[n.displaySetInstanceUID]=l,l}}};var u={clearStacks:function(){i={}},makeAndAddStack:function(e,t){return s.createAndAddStack(i,e,t,c)},findStack:function(e){return i[e]},findOrCreateStack:function(e,t){var n=this.findStack(t.displaySetInstanceUID);return n&&n.imageIds||(n=this.makeAndAddStack(e,t)),n},getAllStacks:function(){return i},addStackUpdatedCallback:function(e){if("function"!=typeof e)throw new r.a("callback must be provided as a function");c.push(e)},getConfiguration:function(){return s},setConfiguration:function(e){s=e}};t.a=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(34);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._operationCount=0,this._elementList=[],this._handlers=Object.create(null)}var t,n,a;return t=e,(n=[{key:"_invalidate",value:function(){var e=this._operationCount;this._operationCount=e<2147483647?e+1:0}},{key:"_elements",value:function(e){return!0===e||this._operationCount,this._elementList}},{key:"_elementWithPayload",value:function(e,t){return this._elements(t).find((function(t){return t.payload===e}))}},{key:"_elementWithId",value:function(e,t){return this._elements(t).find((function(t){return t.id===e}))}},{key:"_trigger",value:function(e,t){var n=this._handlers;if(e in n){if(!((n=n[e])instanceof Array))return;for(var r=0,a=n.length;r<a;++r){var o=n[r];u(o)&&o.call(null,t)}}}},{key:"onInsert",value:function(e){if(u(e)){var t=this._handlers.insert;t instanceof Array||(t=[],this._handlers.insert=t),t.push(e)}}},{key:"updateById",value:function(e,t){var n=!1,r=this._elementWithPayload(t,!0);return r?r.id===e&&(n=!0,this._invalidate()):(r=this._elementWithId(e,!0))&&(r.payload=t,n=!0,this._invalidate()),n}},{key:"update",value:function(e){var t=!1;return this._elementWithPayload(e,!0)&&(t=!0,this._invalidate()),t}},{key:"insert",value:function(e){var t=null;return this._elementWithPayload(e,!0)||(t=Object(r.a)(),this._elements(!0).push({id:t,payload:e}),this._invalidate(),this._trigger("insert",{id:t,data:e})),t}},{key:"removeAll",value:function(){for(var e=this._elements(!0),t=e.length,n=t-1;n>=0;n--){var r=e[n];delete r.id,delete r.payload,e[n]=null}e.splice(0,t),this._invalidate()}},{key:"remove",value:function(e){var t=this.findAllEntriesBy(e),n=t.length,r=[];if(n>0){for(var a=this._elements(!0),o=n-1;o>=0;o--){var i=t[o];a.splice(i[2],1),r.push(i[0])}this._invalidate()}return r}},{key:"getElementId",value:function(e){var t=this._elementWithPayload(e);return t&&t.id}},{key:"findById",value:function(e){var t=this._elementWithId(e);return t&&t.payload}},{key:"indexOfElement",value:function(e){return this._elements().indexOf(this._elementWithPayload(e,!0))}},{key:"indexOfId",value:function(e){return this._elements().indexOf(this._elementWithId(e,!0))}},{key:"getElementByIndex",value:function(e){var t=this._elements()[e>=0?e:-1];return t&&t.payload}},{key:"find",value:function(e){var t,n=this;return u(e)&&(t=this._elements().find((function(t,r){return e.call(n,t.payload,t.id,r)}))),t&&t.payload}},{key:"findBy",value:function(e,t){var n;if(s(t)){var r=this.all(t);r.length>0&&(n=s(e)?r.find((function(t){return p(e,t)})):r[0])}else s(e)&&(n=this._elements().find((function(t){return p(e,t.payload)})))&&(n=n.payload);return n}},{key:"findAllEntriesBy",value:function(e){var t=[];return s(e)&&this._elements().forEach((function(n,r){p(e,n.payload)&&t.push([n.payload,n.id,r])})),t}},{key:"findAllBy",value:function(e,t){var n=this.findAllEntriesBy(e).map((function(e){return e[0]}));return s(t)&&"sort"in t&&m(n,t.sort),n}},{key:"forEach",value:function(e){var t=this;u(e)&&this._elements().forEach((function(n,r){e.call(t,n.payload,n.id,r)}))}},{key:"count",value:function(){return this._elements().length}},{key:"all",value:function(e){var t=this._elements().map((function(e){return e.payload}));return s(e)&&"sort"in e&&m(t,e.sort),t}}])&&o(t.prototype,n),a&&o(t,a),e}();function s(e){return e instanceof Object||"object"===a(e)&&null!==e}function c(e){return"string"==typeof e}function u(e){return"function"==typeof e}var l=Object.prototype.hasOwnProperty;function f(e,t){var n;if(s(e)&&c(t)){var r=t.split("."),a=r.length;if(a>0){var o=r[0],i=a>1?r.slice(1).join("."):null;n=e[o],null!==i&&(n=f(n,i))}}return n}function p(e,t){var n=!1;for(var r in e)if(l.call(e,r)){if(e[r]!==f(t,r)){n=!1;break}!0!==n&&(n=!0)}return n}function m(e,t){if(!(e instanceof Array&&function(e){var t=!0;if(e instanceof Array&&e.length>0)for(var n=e.length-1;n>=0;n--){var r=e[n];if(r instanceof Array){var a=r[0],o=r[1];if(c(a)&&("asc"===o||"desc"===o))continue}t=!1;break}return t}(t)))throw new Error("Invalid Arguments");var n=t.length;e.sort((function(e,r){for(var a=0;a<n;){var o=t[a],i=o[0],s="desc"===o[1]?-1:1,c=f(e,i),u=f(r,i);if(c<u)return-1*s;if(c>u)return 1*s;if(++a>=n)return 0}}))}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"arrowAnnotate",(function(){return i})),n.d(r,"bidirectional",(function(){return s})),n.d(r,"ellipticalRoi",(function(){return c})),n.d(r,"circleRoi",(function(){return u})),n.d(r,"freehandMouse",(function(){return l})),n.d(r,"length",(function(){return f})),n.d(r,"nonTarget",(function(){return p})),n.d(r,"rectangleRoi",(function(){return m})),n.d(r,"angle",(function(){return d})),n.d(r,"targetCR",(function(){return h})),n.d(r,"targetNE",(function(){return v})),n.d(r,"targetUN",(function(){return g})),n.d(r,"dicomSRDisplayTool",(function(){return y}));var a={};n.r(a),n.d(a,"LocationSchema",(function(){return re})),n.d(a,"LocationCriterion",(function(){return ae})),n.d(a,"MaxTargetsPerOrganSchema",(function(){return fe})),n.d(a,"MaxTargetsPerOrganCriterion",(function(){return pe})),n.d(a,"MaxTargetsSchema",(function(){return be})),n.d(a,"MaxTargetsCriterion",(function(){return Se})),n.d(a,"MeasurementsLengthSchema",(function(){return Ce})),n.d(a,"MeasurementsLengthCriterion",(function(){return Te})),n.d(a,"ModalitySchema",(function(){return _e})),n.d(a,"ModalityCriterion",(function(){return Ae})),n.d(a,"NonTargetResponseSchema",(function(){return ze})),n.d(a,"NonTargetResponseCriterion",(function(){return He})),n.d(a,"TargetTypeSchema",(function(){return Ke})),n.d(a,"TargetTypeCriterion",(function(){return Ze}));var o={};n.r(o),n.d(o,"recist11",(function(){return ot}));var i={id:"ArrowAnnotate",name:"ArrowAnnotate",toolGroup:"allTools",cornerstoneToolType:"ArrowAnnotate",options:{measurementTable:{displayFunction:function(e){return e.text||""}},caseProgress:{include:!0,evaluate:!0}}},s={id:"Bidirectional",name:"Target",toolGroup:"allTools",cornerstoneToolType:"Bidirectional",options:{measurementTable:{displayFunction:function(e){return e.shortestDiameter?e.longestDiameter+" x "+e.shortestDiameter:e.longestDiameter}},caseProgress:{include:!0,evaluate:!0}}},c={id:"EllipticalRoi",name:"Ellipse",toolGroup:"allTools",cornerstoneToolType:"EllipticalRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},u={id:"CircleRoi",name:"Circle",toolGroup:"allTools",cornerstoneToolType:"CircleRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},l={id:"FreehandMouse",name:"Freehand",toolGroup:"allTools",cornerstoneToolType:"FreehandMouse",options:{measurementTable:{displayFunction:function(e){var t="";return e.meanStdDev&&e.meanStdDev.mean&&!isNaN(e.meanStdDev.mean)&&(t=e.meanStdDev.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},f={id:"Length",name:"Length",toolGroup:"allTools",cornerstoneToolType:"Length",options:{measurementTable:{displayFunction:function(e){var t="";return e.length&&!isNaN(e.length)&&(t=e.length.toFixed(2)+" mm"),t}},caseProgress:{include:!0,evaluate:!0}}},p={id:"NonTarget",name:"Non-Target",toolGroup:"allTools",cornerstoneToolType:"NonTarget",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},m={id:"RectangleRoi",name:"Rectangle",toolGroup:"allTools",cornerstoneToolType:"RectangleRoi",options:{measurementTable:{displayFunction:function(e){var t="",n=e.cachedStats;return n&&n.mean&&!isNaN(n.mean)&&(t=n.mean.toFixed(2)+" HU"),t}},caseProgress:{include:!0,evaluate:!0}}},d={id:"Angle",name:"Angle",toolGroup:"allTools",cornerstoneToolType:"Angle",options:{measurementTable:{displayFunction:function(e){var t="";return e.rAngle&&!isNaN(e.rAngle)&&(t=e.rAngle.toFixed(2)+String.fromCharCode(parseInt("00B0",16))),t}},caseProgress:{include:!0,evaluate:!0}}},h={id:"TargetCR",name:"CR Target",toolGroup:"allTools",cornerstoneToolType:"TargetCR",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},v={id:"TargetNE",name:"NE Target",toolGroup:"allTools",cornerstoneToolType:"TargetNE",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},g={id:"TargetUN",name:"UN Target",toolGroup:"allTools",cornerstoneToolType:"TargetUN",options:{measurementTable:{displayFunction:function(e){return e.response}},caseProgress:{include:!0,evaluate:!0}}},y={id:"DICOMSRDisplayTool",name:"DICOMSRDisplayTool",toolGroup:"allTools",cornerstoneToolType:"DICOMSRDisplayTool",options:{measurementTable:{displayFunction:function(e){return"(SR) ".concat(e.TrackingIdentifier||e.lesionNamingNumber||e.measurementNumber||e.text||"")}},caseProgress:{include:!0,evaluate:!0}}},b=n(9),S=[];Object.keys(r).forEach((function(e){return S.push(r[e])}));var w={measurementTools:[{id:"allTools",name:"Measurements",childTools:S,options:{caseProgress:{include:!0,evaluate:!0}}}],newLesions:[{id:"newTargets",name:"New Targets",toolGroupId:"targets"},{id:"newNonTargets",name:"New Non-Targets",toolGroupId:"nonTargets"}],dataExchange:{retrieve:function(e,t){return b.a.error("retrieveMeasurements"),Promise.resolve()},store:function(e,t){return b.a.error("storeMeasurements"),Promise.resolve()}}};function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{dataExchange:{retrieve:function(e){return b.a.error("retrieveTimepoints"),Promise.resolve()},store:function(e){return b.a.error("storeTimepoints"),Promise.resolve()},remove:function(e){return b.a.error("removeTimepoint"),Promise.resolve()},update:function(e,t){return b.a.error("updateTimepoint"),Promise.resolve()},disassociate:function(e,t){return b.a.error("disassociateStudy"),Promise.resolve()}}}),T={prebaseline:"Pre-Baseline",baseline:"Baseline",followup:"Follow-up"},x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(O(this,e),e.Instance)return e.Instance.initialize(t,n),e.Instance;this.initialize(t,n),e.Instance=this}return E(e,null,[{key:"setConfiguration",value:function(e){Object.assign(C,e)}},{key:"getConfiguration",value:function(){return C}}]),E(e,[{key:"initialize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.currentTimepointId=e,this.comparisonTimepointKey=t.comparisonTimepointKey||"baseline",this.options=t,this.timepoints=[]}},{key:"onTimepointsUpdated",value:function(){"function"==typeof this.options.onTimepointsUpdated?this.options.onTimepointsUpdated(Object.assign([],this.timepoints)):b.a.warn("Timepoints update callback is not defined")}},{key:"calculateVisitNumber",value:function(e){var t=this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).find((function(t){return t.PatientID===e.PatientID&&t.timepointType===e.timepointType})).map((function(e){return e.timepointId})).indexOf(e.timepointId)+1;if(!t)throw new Error("Current timepoint was not in the list of relevant timepoints?");return t}},{key:"retrieveTimepoints",value:function(e){var t=this,n=C.dataExchange.retrieve;if("function"==typeof n)return new Promise((function(r,a){n(e).then((function(e){b.a.info("Timepoint data retrieval"),e.forEach((function(e){var n=t.timepoints.findIndex((function(t){return t.timepointId===e.timepointId}));n<0?t.timepoints.push(e):t.timepoints[n]=e})),t.onTimepointsUpdated(),r()})).catch((function(e){b.a.error("Timepoint retrieval function failed: ".concat(e)),a(e)}))}));b.a.error("Timepoint retrieval function has not been configured.")}},{key:"storeTimepoints",value:function(){var e=C.dataExchange.store;"function"==typeof e?(b.a.info("Preparing to store timepoints"),b.a.info(JSON.stringify(this.timepoints,null,2)),e(this.timepoints).then((function(){return b.a.info("Timepoint storage completed")}))):b.a.error("Timepoint store function has not been configured.")}},{key:"disassociateStudy",value:function(e,t){var n=this,r=C.dataExchange.disassociate;"function"==typeof r?r(e,t).then((function(){b.a.info("Disassociation completed"),n.timepoints=[],n.retrieveTimepoints({})})):b.a.error("Study disassociate function has not been configured.")}},{key:"removeTimepoint",value:function(e){var t=this,n=C.dataExchange.remove;if("function"==typeof n){var r={timepointId:e};b.a.info("Preparing to remove timepoint"),b.a.info(JSON.stringify(r,null,2)),n(r).then((function(){b.a.info("Timepoint removal completed");var n=t.timepoints.findIndex((function(t){return t.timepointId===e}));n>-1&&t.timepoints.splice(n,1),t.onTimepointsUpdated()}))}else b.a.error("Timepoint remove function has not been configured.")}},{key:"updateTimepoint",value:function(e,t){var n=this,r=C.dataExchange.update;if("function"==typeof r){var a={timepointId:e};b.a.info("Preparing to update timepoint"),b.a.info(JSON.stringify(a,null,2)),b.a.info(JSON.stringify(t,null,2)),r(a,t).then((function(){b.a.info("Timepoint updated completed");var r=n.timepoints.findIndex((function(t){return t.timepointId===e}));r>-1&&(n.timepoints[r]=Object.assign({},n.timepoints[r],t)),n.onTimepointsUpdated()}))}else b.a.error("Timepoint update function has not been configured.")}},{key:"all",value:function(e){return(e?this.timepoints.filter(e):this.timepoints).sort((function(e,t){return e.visitDate<t.visitDate?1:-1}))}},{key:"current",value:function(){var e=this;return this.timepoints.find((function(t){return t.timepointId===e.currentTimepointId}))}},{key:"lock",value:function(){var e=this,t=this.timepoints.findIndex((function(t){return t.timepointId===e.currentTimepointId}));t<0||(this.timepoints[t]=Object.assign({},this.timepoints[t],{locked:!0}))}},{key:"prior",value:function(){var e=this.current();if(e)return this.all().find((function(t){return t.visitDate<e.visitDate}))}},{key:"currentAndPrior",value:function(){var e=[],t=this.current();t&&e.push(t);var n=this.prior();return t&&n&&n.timepointId!==t.timepointId&&e.push(n),e}},{key:"currentAndComparison",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.comparisonTimepointKey,t=this.current(),n=this.comparison(e),r=[t];return n&&!r.find((function(e){return e.timepointId===n.timepointId}))&&r.push(n),r}},{key:"isRebaseline",value:function(e){var t=e?this.timepoints.find((function(t){return t.timepointId===e})):this.current();return!!t&&this.timepoints.filter((function(e){return"baseline"===e.timepointType&&e.visitDate<=t.visitDate})).length>1}},{key:"nextBaselineAfterCurrent",value:function(){var e=this.current();return this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).find((function(t){return t.visitDate>e.visitDate&&"baseline"===t.timepointType}))}},{key:"setCurrentTimepointId",value:function(e){this.currentTimepointId=e}},{key:"setUserComparison",value:function(e){this.userComparison=e}},{key:"comparison",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.comparisonTimepointKey;if(this.userComparison)return this.userComparison;var t=this.current();if(t){if("prebaseline"===t.timepointType){var n=this.nextBaselineAfterCurrent();if(n)return n}if("baseline"===t.timepointType){var r=this.prior();if(r)return r}var a=this[e]();if(!a||a.timepointId!==t.timepointId)return a}}},{key:"latestInitialTimepointAfterCurrent",value:function(){var e=this.current();if("followup"!==e.timepointType){var t=this.timepoints.sort((function(e,t){return e.visitDate>t.visitDate?1:-1})).filter((function(t){return t.visitDate>e.visitDate})),n=t.findIndex((function(e){return"followup"===e.timepointType}))-1;return n<0?t[t.length-1]:t[n]}}},{key:"initialTimepointIds",value:function(){var e=this.current();"prebaseline"!==e.timepointType&&"baseline"!==e.timepointType||(e=this.latestInitialTimepointAfterCurrent()||e);var t=e.visitDate,n=(this.timepoints.filter((function(e){return"prebaseline"===e.timepointType&&e.visitDate<=t}))||[]).map((function(e){return e.timepointId})),r=(this.timepoints.filter((function(e){return"baseline"===e.timepointType&&e.visitDate<=t}))||[]).map((function(e){return e.timepointId}));return n.concat(r)}},{key:"baseline",value:function(){var e=this.current().visitDate;return this.all().find((function(t){return"baseline"===t.timepointType&&t.visitDate<=e}))}},{key:"nadir",value:function(){var e=this.current(),t=this.all().find((function(t){return t.timepointId!==e.timepointId&&"nadir"===t.timepointKey&&t.visitDate<=e.visitDate}));return t||this.baseline()}},{key:"key",value:function(){var e=[this.current()],t=this.prior(),n=this.nadir(),r=this.baseline(),a=function(t){return!!e.find((function(e){return e.timepointId===t.timepointId}))};return t&&!1===a(t)&&e.push(t),n&&!1===a(n)&&e.push(n),r&&!1===a(r)&&e.push(r),e}},{key:"study",value:function(e){return this.all().filter((function(t){return t.studyInstanceUIDs.includes(e)}))}},{key:"name",value:function(e){var t=T[e.timepointType];if("baseline"===e.timepointType)return"Baseline";if(e.visitNumber)return"".concat(t," ").concat(e.visitNumber);var n=this.calculateVisitNumber(e);return"".concat(t," ").concat(n)}},{key:"title",value:function(e){for(var t=this.name(e),n=this.all(),r=-1,a=null,o=0;o<n.length;o++){var i=n[o];if(this.currentTimepointId===i.timepointId&&(a=0),null!==a&&(r=a++),i.timepointId===e.timepointId)break}var s={0:["Current"],1:["Prior"]}[r]||[],c=this.nadir();c&&c.timepointId===e.timepointId&&s.push("Nadir");var u="";return s.length&&(u="(".concat(s.join(", "),")")),"".concat(t," ").concat(u)}}]),e}();D(x,"Instance",void 0);var k=n(7),j=n.n(k),R=n(8),N=n.n(R),M=function(e){if(e)switch(e.toolType){case"Bidirectional":case"TargetCR":case"TargetNE":case"TargetUN":return"Target ".concat(e.lesionNamingNumber);case"NonTarget":return"Non-Target ".concat(e.lesionNamingNumber)}},_=function(e){return e.description},A=n(94);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("_"),r=L(n,4),a=r[0],o=r[1],i=r[2],s=r[3],c=A.a.get(a),u=c.getSeriesByUID(o),l=u.getInstanceByUID(i);return l.getImageId(s,t)},V=n(34);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&z(e.prototype,t),n&&z(e,n),e}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},w),J=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(q(this,e),e.Instance)return e.Instance.initialize(t,n),e.Instance;this.initialize(t,n),e.Instance=this}return H(e,null,[{key:"setConfiguration",value:function(e){Object.assign($,e)}},{key:"getConfiguration",value:function(){return $}},{key:"getToolsGroupsMap",value:function(){var e={};return $.measurementTools.forEach((function(t){t.childTools.forEach((function(n){return e[n.id]=t.id}))})),e}},{key:"getToolGroupTools",value:function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];t[r]||(t[r]=[]),t[r].push(n)})),t}},{key:"getToolConfiguration",value:function(t){var n,r=e.getConfiguration(),a=e.getToolsGroupsMap()[t],o=r.measurementTools.find((function(e){return e.id===a}));return o&&(n=o.childTools.find((function(e){return e.id===t}))),{toolGroupId:a,toolGroup:o,tool:n}}},{key:"syncMeasurementAndToolData",value:function(t){b.a.info("syncMeasurementAndToolData");var n=M(t);n&&(t.labels=[n]);var r=j.a.globalImageIdSpecificToolStateManager.saveToolState(),a=t.StudyInstanceUID;if(A.a.get(a)){var o=t.toolType,i=e.getToolConfiguration(o).tool;if(Array.isArray(i.childTools))i.childTools.forEach((function(n){var r=t[n];r&&(r._id=t._id,r.measurementNumber=t.measurementNumber,r.lesionNamingNumber=t.lesionNamingNumber,e.syncMeasurementAndToolData(r))}));else{var s=U(t.imagePath);r[s]||(r[s]={});var c=r[s][o],u=c&&c.data;if(u&&u.length){var l=r[s][o].data,f=!1;if(l.forEach((function(e){if(e._id===t._id)return f=!0,Object.assign(e,t),!1})),!0===f)return}else r[s][o]={data:[]};r[s][o].data.push(t),j.a.globalImageIdSpecificToolStateManager.restoreToolState(r)}}}},{key:"isToolIncluded",value:function(e){return e.options&&e.options.caseProgress&&e.options.caseProgress.include}}]),H(e,[{key:"initialize",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.timepointApi=t,this.options=r,this.toolGroups={},this.tools={},this.toolsGroupsMap=e.getToolsGroupsMap(),this.toolGroupTools=e.getToolGroupTools(this.toolsGroupsMap),$.measurementTools.forEach((function(e){n.toolGroups[e.id]=[],e.childTools.forEach((function(e){n.tools[e.id]=[]}))}))}},{key:"onMeasurementsUpdated",value:function(){"function"==typeof this.options.onMeasurementsUpdated?this.options.onMeasurementsUpdated(Object.assign({},this.tools)):b.a.warn("Measurements update callback is not defined")}},{key:"retrieveMeasurements",value:function(e,t){var n=this,r=$.dataExchange.retrieve,a=$.server;if("function"==typeof r)return new Promise((function(e,t){r(a).then((function(t){t&&(b.a.info("Measurement data retrieval"),b.a.info(t),Object.keys(t).forEach((function(e){t[e].forEach((function(e){var t=e.toolType;n.addMeasurement(t,e)}))}))),e(),n.syncMeasurementsAndToolData(),N.a.getEnabledElements().forEach((function(e){e.image&&N.a.updateImage(e.element)})),n.onMeasurementsUpdated()}),t)}));b.a.error("Measurement retrieval function has not been configured.")}},{key:"storeMeasurements",value:function(t){var n=this,r=$.server,a=$.dataExchange.store;if("function"==typeof a){var o={};$.measurementTools.forEach((function(t){e.isToolIncluded(t)&&t.childTools.forEach((function(r){e.isToolIncluded(r)&&(o[t.id]||(o[t.id]=[]),o[t.id]=o[t.id].concat(n.tools[r.id]))}))}));var i=t?function(e){return e.timepointId===t}:null,s=this.timepointApi.all(i),c=s.map((function(e){return e.timepointId})),u={PatientID:s[0].PatientID,timepointIds:c};return b.a.info("Saving Measurements for timepoints:",s),a(o,u,r).then((function(e){return b.a.info("Measurement storage completed"),e}))}b.a.error("Measurement store function has not been configured.")}},{key:"calculateLesionNamingNumber",value:function(e){var t,n=e.sort((function(e,t){return e.lesionNamingNumber>t.lesionNamingNumber?1:e.lesionNamingNumber<t.lesionNamingNumber?-1:0}));for(t=1;t<n.length+1&&!(t<n[t-1].lesionNamingNumber);t++);return t}},{key:"fetch",value:function(e,t){var n=this;if(!this.toolGroups[e])throw new Error("MeasurementApi: No Collection with the id: ".concat(e));return(t?this.toolGroups[e].filter(t):this.toolGroups[e]).map((function(e){return e.toolId?n.tools[e.toolId].find((function(t){return t._id===e.toolItemId})):{lesionNamingNumber:e.lesionNamingNumber}}))}},{key:"getFirstMeasurement",value:function(t){var n=this,r=[];$.measurementTools.forEach((function(t){if(!e.isToolIncluded(t))return!1;r=r.concat(t.childTools)}));var a=r.filter((function(t){return e.isToolIncluded(t)})),o=void 0;return a.every((function(e){return!(o=n.tools[e.id].find((function(e){return e.timepointId===t&&1===e.measurementNumber})))})),o}},{key:"lesionExistsAtTimepoints",value:function(e,t,n){return!!this.fetch(t,(function(e){return n.includes(e.timepointId)})).find((function(t){return t.lesionNamingNumber===e}))}},{key:"isNewLesionsMeasurement",value:function(t){if(t){var n=e.getToolConfiguration(t.toolType),r=n.tool.parentTool||t.toolType,a=this.timepointApi,o=this.tools[r].find((function(e){return e._id===t._id}))||{},i=o.timepointId||t.timepointId,s=o.lesionNamingNumber||t.lesionNamingNumber;if(a&&i&&n){var c=n.toolGroupId,u=a.timepoints.find((function(e){return e.timepointId===i})),l=a.initialTimepointIds();return!(!l||l.length<1||l.some((function(e){return e===u.timepointId})))&&!1===this.lesionExistsAtTimepoints(s,c,l)}}}},{key:"calculateLesionMaxMeasurementNumber",value:function(e,t){for(var n=this,r=(e?this.toolGroups[e]||[]:Object.keys(this.toolGroups).reduce((function(e,t){return e.push.apply(e,B(n.toolGroups[t])),e}),[])).filter(t).sort((function(e,t){return e.measurementNumber<t.measurementNumber?1:-1})),a=function(e){var t=r[e],a=n.tools[t.toolId].find((function(e){return e._id===t.toolItemId}));if(!n.isNewLesionsMeasurement(a))return{v:a.measurementNumber}},o=0;o<r.length;o++){var i=a(o);if("object"===F(i))return i.v}return 0}},{key:"calculateNewLesionMaxMeasurementNumber",value:function(e,t){for(var n=this,r=this.toolGroups[e].filter(t).sort((function(e,t){return e.measurementNumber<t.measurementNumber?1:-1})),a=function(e){var t=r[e],a=n.tools[t.toolId].find((function(e){return e._id===t.toolItemId}));if(n.isNewLesionsMeasurement(a))return{v:a.measurementNumber}},o=0;o<r.length;o++){var i=a(o);if("object"===F(i))return i.v}return 0}},{key:"calculateMeasurementNumber",value:function(e){var t=this.toolsGroupsMap[e.toolType],n=function(t){return t._id!==e._id};if(!this.isNewLesionsMeasurement(e)){var r=this.calculateLesionMaxMeasurementNumber("targets",n);if("targets"===t)return r;if("nonTargets"===t){var a=this.calculateLesionMaxMeasurementNumber("nonTargets",n);return Math.max(r,a)}return this.calculateLesionMaxMeasurementNumber(null,n)}var o=this.calculateLesionMaxMeasurementNumber("targets",n),i=this.calculateLesionMaxMeasurementNumber("nonTargets",n),s=this.calculateNewLesionMaxMeasurementNumber("targets",n);if("targets"===t)return Math.max(o,i,s);if("nonTargets"===t){var c=this.calculateNewLesionMaxMeasurementNumber("nonTargets",n);return Math.max(o,i,s,c)}return 0}},{key:"getPreviousMeasurement",value:function(e){if(e){var t=e.timepointId,n=e.toolType,r=e.lesionNamingNumber;if(t&&n&&r){var a,o=this.toolsGroupsMap[e.toolType],i=e.additionalData&&e.additionalData.TrialPatientLocationUID;a=i?function(t){return t._id!==e._id&&t.additionalData&&t.additionalData.TrialPatientLocationUID===i}:function(t){return t._id!==e._id&&t.lesionNamingNumber===r};for(var s=this.toolGroupTools[o],c=0;c<s.length;c++){var u=s[c],l=this.tools[u].find(a);if(l)return l}}}}},{key:"hasDuplicateMeasurementNumber",value:function(e){var t=this;if(e){var n=e.toolType,r=e.measurementNumber;if(n&&r){var a=function(t){return t._id!==e._id&&t.measurementNumber===e.measurementNumber};return $.measurementTools.filter((function(e){return"temp"!==e.id})).some((function(e){return!!t.toolGroups[e.id].find(a)||e.childTools.some((function(e){if(t.tools[e.id].find(a))return!0}))}))}}}},{key:"updateNumbering",value:function(e,t,n,r){e.filter(t).forEach((function(e){e[n]+=r}))}},{key:"updateMeasurementNumberForAllMeasurements",value:function(e,t){var n=this,r=function(t){return t._id!==e._id&&t.measurementNumber>=e.measurementNumber};$.measurementTools.filter((function(e){return"temp"!==e.id})).forEach((function(e){n.updateNumbering(n.toolGroups[e.id],r,"measurementNumber",t),e.childTools.forEach((function(e){n.updateNumbering(n.tools[e.id],r,"measurementNumber",t)}))}))}},{key:"addMeasurement",value:function(e,t){var n,r=this.toolsGroupsMap[e],a=this.toolGroups[r],o=this.tools[e],i=o.find((function(e){return e.lesionNamingNumber===t.lesionNamingNumber&&e.toolType===t.toolType}));if(i&&i.location&&(t.location=i.location),i&&i.description&&(t.description=i.description),t._id=Object(V.a)(),t.StudyInstanceUID)n=this.timepointApi.study(t.StudyInstanceUID)[0];else{var s=t.timepointId;n=this.timepointApi.timepoints.find((function(e){return e.timepointId===s}))}if(n){var c=a.find((function(e){return!e.toolId&&e.timepointId===n.timepointId}));if(t.timepointId=n.timepointId,c)t.lesionNamingNumber=c.lesionNamingNumber,t.measurementNumber=c.measurementNumber,a.filter((function(e){return e.timepointId===n.timepointId&&e.lesionNamingNumber===t.lesionNamingNumber})).forEach((function(e){e.toolId=tool.id,e.toolItemId=t._id,e.createdAt=t.createdAt,e.measurementNumber=t.measurementNumber}));else{var u=a.filter((function(e){return e.timepointId===n.timepointId}));t.lesionNamingNumber=this.calculateLesionNamingNumber(u),t.measurementNumber=t.measurementNumber||this.calculateMeasurementNumber(t)+1}var l,f={timepointId:n.timepointId,lesionNamingNumber:t.lesionNamingNumber,measurementNumber:t.measurementNumber},p=this.getPreviousMeasurement(t);if(p){t.lesionNamingNumber=p.lesionNamingNumber,t.measurementNumber=p.measurementNumber,f.lesionNamingNumber=p.lesionNamingNumber,f.measurementNumber=p.measurementNumber,f.additionalData=t.additionalData||{},f.additionalData.TrialPatientLocationUID=p.additionalData&&p.additionalData.TrialPatientLocationUID,f.location=p.location,f.label=p.label,f.description=p.description,f.isSplitLesion=p.isSplitLesion,f.isNodal=p.isNodal;var m=_(p);m&&(f.description=m)}else this.hasDuplicateMeasurementNumber(t)&&this.updateMeasurementNumberForAllMeasurements(t,1);var d=o.findIndex((function(e){return e._id===t._id}));return d>-1?(l=Object.assign({},o[d],f),o[d]=l):(l=Object.assign({},t,f),o.push(l)),t.isReadOnly&&(l.isReadOnly=t.isReadOnly),c||a.push({toolId:e,toolItemId:l._id,timepointId:n.timepointId,StudyInstanceUID:l.StudyInstanceUID,createdAt:l.createdAt,lesionNamingNumber:l.lesionNamingNumber,measurementNumber:l.measurementNumber}),this.onMeasurementsUpdated(),l}}},{key:"updateMeasurement",value:function(e,t){var n=this.tools[e],r=n.findIndex((function(e){return e._id===t._id}));r<0||(n[r]=Object.assign({},t),this.onMeasurementsUpdated())}},{key:"onMeasurementRemoved",value:function(e,t){var n=this,r=t.lesionNamingNumber,a=t.measurementNumber,o=this.toolsGroupsMap[e],i=this.toolGroups[o],s=i.findIndex((function(e){return e.toolItemId===t._id}));if(!(s<0)){if(i.splice(s,1),i.filter((function(e){return e.measurementNumber===a})).map((function(e){return e.timepointId})).length<1){var c=function(e){return e.lesionNamingNumber>=r};this.updateNumbering(i,c,"lesionNamingNumber",-1);var u=$.measurementTools.find((function(e){return e.id===o}));u&&u.childTools&&u.childTools.forEach((function(e){var t=n.tools[e.id];n.updateNumbering(t,c,"lesionNamingNumber",-1)})),this.updateMeasurementNumberForAllMeasurements(t,-1)}this.syncMeasurementsAndToolData(),this.onMeasurementsUpdated()}}},{key:"syncMeasurementsAndToolData",value:function(){var t=this;$.measurementTools.forEach((function(n){e.isToolIncluded(n)&&n.childTools.forEach((function(n){e.isToolIncluded(n)&&t.tools[n.id].forEach((function(t){e.syncMeasurementAndToolData(t)}))}))}))}},{key:"deleteMeasurements",value:function(t,n,r){var a=this,o=Object.keys(r),i=this.toolGroups[n];if(i){var s=i.filter((function(e){return o.every((function(t){return e[t]===r[t]}))})),c=[];if(s.forEach((function(e){if(e.toolId){var t=a.tools[e.toolId],n=t.findIndex((function(t){return t._id===e.toolItemId}));n>-1&&(c.push(t[n]),t.splice(n,1))}})),c.length){var u=r.lesionNamingNumber||c[0].lesionNamingNumber,l=j.a.globalImageIdSpecificToolStateManager.saveToolState();c.forEach((function(n){var r=[],o=e.getToolConfiguration(n.toolType).tool;Array.isArray(o.childTools)?o.childTools.forEach((function(e){var t=n[e];t&&r.push(t)})):r.push(n),r.forEach((function(e){var t=e.imagePath,r=e.toolType,a=U(t);if(a&&l[a]){var o=l[a][r],i=o&&o.data,s=i.find((function(e){return e._id===n._id}));if(s){var c=i.indexOf(s);i.splice(c,1)}}})),a.onMeasurementRemoved(t,n)})),j.a.globalImageIdSpecificToolStateManager.restoreToolState(l);var f=Object.assign({},r);delete f.timepointId,delete f.lesionNamingNumber;var p=Object.keys(f);B(new Set(c.map((function(e){return e.toolType})))).forEach((function(t){a.tools[t].filter((function(e){return e.lesionNamingNumber>u-1&&p.every((function(t){return e[t]===r[t]}))})).forEach((function(t){e.syncMeasurementAndToolData(t)}))}))}}}}]),e}();function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}G(J,"Instance",void 0);var X=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.criterionName=n}var t,n,r;return t=e,(n=[{key:"generateResponse",value:function(e,t){return{passed:!e,isGlobal:!t||!t.length,message:e,measurements:t,criterionName:this.criterionName}}},{key:"getNewTargetNumbers",value:function(e){var t=this.options,n=[],r=new Set;return t.newTarget&&(e.targets.forEach((function(e){var t=e.measurement.measurementNumber;"baseline"===e.timepoint.timepointType&&n.push(t)})),e.targets.forEach((function(e){var t=e.measurement.measurementNumber;"followup"===e.timepoint.timepointType&&(n.includes(t)||r.add(t))}))),r}}])&&Y(t.prototype,n),r&&Y(t,r),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re={type:"object"},ae=function(e){function t(){var e;Z(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ee(this,(e=te(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.targets.concat(e.nonTargets),r=[];return n.forEach((function(e){var t=e.measurement;t.location||r.push(t)})),r.length&&(t="All measurements should have a location"),this.generateResponse(t,r)}}])&&Q(n.prototype,r),a&&Q(n,a),t}(X);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe={type:"object",properties:{limit:{label:"Max targets allowed per organ",type:"integer",minimum:1},newTarget:{label:"Flag to evaluate only new targets",type:"boolean"},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},required:["limit"]},pe=function(e){function t(){var e;ie(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ce(this,(e=ue(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=this.options,r={},a=[],o=this.getNewTargetNumbers(e);if(e.targets.forEach((function(e){var t=e.measurement,i=t.location,s=t.measurementNumber,c=t.isSplitLesion,u=t.isNodal;c||"boolean"==typeof u&&"boolean"==typeof n.isNodal&&n.isNodal!==u||(r[i]||(r[i]=new Set),n.newTarget&&!o.has(s)||r[i].add(s),r[i].size>n.limit&&a.push(t))})),a.length){var i=n.newTarget?"new ":"";t=n.message||"Each organ should not have more than ".concat(n.limit," ").concat(i,"targets.")}return this.generateResponse(t,a)}}])&&se(n.prototype,r),a&&se(n,a),t}(X);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be={type:"object",properties:{limit:{label:"Max targets allowed in study",type:"integer",minimum:0},newTarget:{label:"Flag to evaluate only new targets",type:"boolean"},locationIn:{label:"Filter to evaluate only measurements with the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationNotIn:{label:"Filter to evaluate only measurements without the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},required:["limit"]},Se=function(e){function t(){var e;de(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ve(this,(e=ge(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t=this.options,n=this.getNewTargetNumbers(e),r=[];e.targets.forEach((function(e){var a=e.measurement,o=a.location,i=a.measurementNumber,s=a.isSplitLesion,c=a.isNodal;s||"boolean"==typeof c&&"boolean"==typeof t.isNodal&&t.isNodal!==c||t.newTarget&&!n.has(i)||t.locationIn&&-1===t.locationIn.indexOf(o)||t.locationNotIn&&t.locationNotIn.indexOf(o)>-1||r.push(i)}));var a,o="";if("boolean"==typeof t.isNodal&&(o=t.isNodal?"nodal ":"extranodal "),r.length>t.limit){var i=t.newTarget?"new ":"",s=1===t.limit?"":"s",c=0===t.limit?"":"more than ".concat(t.limit);a=t.message||"The study should not have ".concat(c," ").concat(i).concat(o,"target").concat(s,".")}return this.generateResponse(a)}}])&&he(n.prototype,r),a&&he(n,a),t}(X);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce={type:"object",properties:{longAxis:{label:"Minimum length of long axis",type:"number",minimum:0},shortAxis:{label:"Minimum length of short axis",type:"number",minimum:0},longAxisSliceThicknessMultiplier:{label:"Length of long axis multiplier",type:"number",minimum:0},shortAxisSliceThicknessMultiplier:{label:"Length of short axis multiplier",type:"number",minimum:0},modalityIn:{label:"Filter to evaluate only measurements with the specified modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},modalityNotIn:{label:"Filter to evaluate only measurements without the specified modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationIn:{label:"Filter to evaluate only measurements with the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},locationNotIn:{label:"Filter to evaluate only measurements without the specified locations",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},isNodal:{label:"Filter to evaluate only nodal or extranodal measurements",type:"boolean"},message:{label:"Message to be displayed in case of nonconformity",type:"string"}},anyOf:[{required:["message","longAxis"]},{required:["message","shortAxis"]},{required:["message","longAxisSliceThicknessMultiplier"]},{required:["message","shortAxisSliceThicknessMultiplier"]}]},Te=function(e){function t(){var e;Oe(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ee(this,(e=Pe(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=[],r=this.options,a=r.longAxisSliceThicknessMultiplier,o=r.shortAxisSliceThicknessMultiplier;return e.targets.forEach((function(e){var t=e.metadata,i=e.measurement,s=i.location,c=i.longestDiameter,u=i.shortestDiameter,l=i.isNodal;if(i.childToolsCount){var f=i.bidirectional;c=f&&f.longestDiameter||0,u=f&&f.shortestDiameter||0}var p=t.SliceThickness,m=t.getTagValue("Modality")||"";"boolean"==typeof l&&"boolean"==typeof r.isNodal&&r.isNodal!==l||r.locationIn&&-1===r.locationIn.indexOf(s)||r.modalityIn&&-1===r.modalityIn.indexOf(m)||r.locationNotIn&&r.locationNotIn.indexOf(s)>-1||r.modalityNotIn&&r.modalityNotIn.indexOf(m)>-1||(r.longAxis&&c<r.longAxis||r.shortAxis&&u<r.shortAxis||a&&!isNaN(p)&&c<a*p||o&&!isNaN(p)&&u<o*p)&&n.push(i)})),n.length&&(t=r.message),this.generateResponse(t,n)}}])&&Ie(n.prototype,r),a&&Ie(n,a),t}(X);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e={type:"object",properties:{method:{label:'Specify if it\'s goinig to "allow" or "deny" the modalities',type:"string",enum:["allow","deny"]},measurementTypes:{label:"List of measurement types that will be evaluated",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0},modalities:{label:"List of allowed/denied modalities",type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},required:["method","modalities"]},Ae=function(e){function t(){var e;ke(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Re(this,(e=Ne(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=this.options.measurementTypes||["targets"],r=new Set(this.options.modalities),a=this.options.method,o=[],i=new Set;if(n.forEach((function(t){e[t].forEach((function(e){var t=e.measurement,n=e.metadata.getTagValue("Modality")||"";("allow"===a&&!r.has(n)||"deny"===a&&r.has(n))&&(o.push(t),i.add(n))}))})),o.length){var s=Array.from(i),c=s.join(", "),u=s.length>1?"modalities":"Modality";t="The ".concat(u," ").concat(c," should not be used as a method of measurement")}return this.generateResponse(t,o)}}])&&je(n.prototype,r),a&&je(n,a),t}(X);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze={type:"object"},He=function(e){function t(){var e;Ue(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Fe(this,(e=Be(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.nonTargets,r=[];return n.forEach((function(e){var t=e.measurement;"present"!==(t.response||"").toLowerCase()&&r.push(t)})),r.length&&(t='Non-targets can only be assessed as "present"'),this.generateResponse(t,r)}}])&&Ve(n.prototype,r),a&&Ve(n,a),t}(X);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke={type:"object"},Ze=function(e){function t(){var e;Ge(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Je(this,(e=Ye(t)).call.apply(e,[this].concat(r)))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,e),n=t,(r=[{key:"evaluate",value:function(e){var t,n=e.targets,r=[];return n.forEach((function(e){var t=e.measurement;"Bidirectional"===t.toolType||t.bidirectional||r.push(t)})),r.length&&(t="Target lesions must have measurements (cannot be assessed as CR, UN/NE, EX)"),this.generateResponse(t,r)}}])&&$e(n.prototype,r),a&&$e(n,a),t}(X),Qe=n(645),et=n.n(Qe);function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=Object.assign({},a),rt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this.getCriteriaValidator();if(this.criteria=[],!r(t)){var a="";throw r.errors.forEach((function(e){a+="\noptions".concat(e.dataPath," ").concat(e.message)})),new Error(a)}Object.keys(t).forEach((function(e){var r=t[e],a=nt["".concat(e,"Criterion")];(r instanceof Array?r:[r]).forEach((function(t){return n.criteria.push(new a(t,e))}))}))}var t,n,r;return t=e,r=[{key:"setCriterion",value:function(e,t){nt[e]=t}}],(n=[{key:"getMaxTargets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;return this.criteria.forEach((function(n){var r=e===!!n.options.newTarget;if(n instanceof nt.MaxTargetsCriterion&&r){var a=n.options.limit;a>t&&(t=a)}})),t}},{key:"getCriteriaValidator",value:function(){if(e.criteriaValidator)return e.criteriaValidator;var t={properties:{},definitions:{}};return Object.keys(nt).forEach((function(e){if(nt[e].prototype instanceof X){var n=e.replace(/Criterion$/,""),r="#/definitions/".concat(n);t.definitions[n]=nt["".concat(n,"Schema")],t.properties[n]={oneOf:[{$ref:r},{type:"array",items:{$ref:r}}]}}})),e.criteriaValidator=(new et.a).compile(t),e.criteriaValidator}},{key:"evaluate",value:function(e){var t=[];return this.criteria.forEach((function(n){var r=n.evaluate(e);r.passed||t.push(r)})),t}}])&&tt(t.prototype,n),r&&tt(t,r),e}(),at=n(644),ot=n.t(at,2);function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function st(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){st(o,r,a,i,s,"next",e)}function s(e){st(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ft=Object.assign({},o),pt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ut(this,e),this.measurementApi=t,this.timepointApi=n,this.nonconformities=[],this.groupedNonConformities=[],this.maxTargets=null,this.maxNewTargets=null,this.options=r}var t,n,r,a,o;return t=e,n=[{key:"loadStudy",value:function(e){if("function"!=typeof this.options.loadStudy)throw new Error("loadStudy callback is not defined");return this.options.loadStudy(null,e)}},{key:"validate",value:(o=ct(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getData("baseline"),r=this.getData("followup"),e.next=4,Promise.all([n,r]);case 4:return a=e.sent,o=it(a,2),i=o[0],s=o[1],(c={targets:[],nonTargets:[]}).targets=c.targets.concat(i.targets),c.targets=c.targets.concat(s.targets),c.nonTargets=c.nonTargets.concat(i.nonTargets),c.nonTargets=c.nonTargets.concat(s.nonTargets),this.maxTargets=null,this.maxNewTargets=null,u=this.validateTimepoint("both",t,c),l=this.validateTimepoint("baseline",t,i),f=this.validateTimepoint("followup",t,s),p=l.concat(f).concat(u),m=this.groupNonConformities(p),this.nonconformities=p,this.groupedNonConformities=m,console.warn("nonconformities"),console.warn(p),console.warn("groupedNonConformities"),console.warn(m),e.abrupt("return",p);case 27:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"groupNonConformities",value:function(e){var t={},n=this.measurementApi.toolsGroupsMap;return e.forEach((function(e){if(e.isGlobal)return t.globals=t.globals||{messages:[]},void t.globals.messages.push(e.message);e.measurements.forEach((function(r){var a=n[r.toolType];t[a]=t[a]||{measurementNumbers:{}};var o=t[a],i=r.measurementNumber,s=o.measurementNumbers[i];s||(s=o.measurementNumbers[i]={messages:[],measurements:[]}),s.messages.push(e.message),s.measurements.push(r)}))})),t}},{key:"validateTimepoint",value:function(e,t,n){var r=this,a=this.getEvaluators(e,t),o=[];return a.forEach((function(t){var a=t.getMaxTargets(!1),i=t.getMaxTargets(!0);a&&(r.maxTargets=a),i&&(r.maxNewTargets=i);var s=t.evaluate(n);s.length>0&&s.forEach((function(t){t.timepointType=e})),o=o.concat(s)})),o}},{key:"getEvaluators",value:function(e,t){var n=[];console.warn(ft);var r=t.id.toLowerCase(),a=ft[r];if(a){var o=a[e];o&&n.push(new rt(o))}return n}},{key:"getData",value:(a=ct(regeneratorRuntime.mark((function e(t){var n,r,a,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={targets:[],nonTargets:[]},r=[],(a=function(e){o.measurementApi.fetch(e).forEach((function(a){var i=a.StudyInstanceUID,s=a.timepointId,c=s&&o.timepointApi.timepoints.find((function(e){return e.timepointId===s}));if(c&&("both"===t||c.timepointType===t)){var u=o.loadStudy(i);u.then((function(t){n[e].push({measurement:a,metadata:t.getFirstInstance(),timepoint:c})}),(function(e){throw new Error(e)})),r.push(u)}}))})("targets"),a("nonTargets"),e.next=7,Promise.all(r);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}],r=[{key:"setEvaluationDefinitions",value:function(e,t){ft[e]=t}}],n&&lt(t.prototype,n),r&&lt(t,r),e}(),mt=n(45),dt=function(e,t){t||(t=N.a.getEnabledElement(e).image.imageId);var n=N.a.metaData.get("instance",t),r=n.StudyInstanceUID,a=n.PatientID,o=n.SeriesInstanceUID,i=n.SOPInstanceUID,s=t.split("&frame"),c=void 0!==s[1]?Number(s[1]):0,u=[r,o,i,c].join("_");return{PatientID:a,StudyInstanceUID:r,SeriesInstanceUID:o,SOPInstanceUID:i,frameIndex:c,imagePath:u}};function ht(){N.a.getEnabledElements().forEach((function(e){e.image&&N.a.updateImage(e.element)}))}function vt(e){var t=e.eventData,n=e.tool,r=J.Instance;r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=t.toolType;if(r.tools[o]&&a&&!a.cancelled){b.a.info("CornerstoneToolsMeasurementAdded");var i=dt(t.element),s=Object.assign({},a,i,{lesionNamingNumber:a.lesionNamingNumber,userId:mt.a.getUserId(),toolType:o}),c=r.addMeasurement(o,s);Object.assign(a,c);var u=M(a);u&&(a.labels=[u]),ht(),J.isToolIncluded(n)}}var gt=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,J.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=r.tools[n.parentTool];if(o&&a&&!a.cancelled){b.a.info("CornerstoneToolsMeasurementAdded");var i=dt(t.element),s=Object.assign(i,{userId:mt.a.getUserId()}),c=Object.assign({},a,s),u=o.find((function(e){return e.toolType===n.parentTool&&e.PatientID===i.PatientID&&null===e[n.attribute]}));if(u){var l=n.attribute;c.createdAt=new Date,u[l]=c,u.childToolsCount=(u.childToolsCount||0)+1,r.updateMeasurement(n.parentTool,u),a._id=u._id,a.lesionNamingNumber=u.lesionNamingNumber}else{var f={toolType:n.parentTool,lesionNamingNumber:a.lesionNamingNumber,userId:mt.a.getUserId(),PatientID:i.PatientID,StudyInstanceUID:i.StudyInstanceUID};f[n.attribute]=Object.assign({},a,s);var p=r.addMeasurement(n.parentTool,f);Object.assign(a,p)}var m=M(a);m&&(a.labels=[m]),ht(),J.isToolIncluded(n)}},yt=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,J.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=t.toolType,i=r.tools[o];if(i){b.a.info("CornerstoneToolsMeasurementModified");var s=i.find((function(e){return e._id===a._id}));s&&((s=Object.assign(s,a)).viewport=N.a.getViewport(t.element),r.updateMeasurement(o,s),J.isToolIncluded(n))}},bt=function(e){var t=e.eventData,n=e.tool,r=(e.toolGroupId,e.toolGroup,J.Instance);r||b.a.warn("Measurement API is not initialized");var a=t.measurementData,o=r.tools[n.parentTool];if(o){b.a.info("CornerstoneToolsMeasurementModified");var i=o.find((function(e){return e._id===a._id})),s=i&&i[n.attribute];s&&((s=Object.assign(s,a)).viewport=N.a.getViewport(t.element),i[n.attribute]=s,r.updateMeasurement(n.parentTool,i),J.isToolIncluded(n))}};function St(e){var t=e.eventData,n=e.tool;e.toolGroupId,e.toolGroup;b.a.info("CornerstoneToolsMeasurementRemoved");var r=t.measurementData,a=t.toolType,o=J.Instance;o||b.a.warn("Measurement API is not initialized");var i=o.tools[a];if(i){var s=o.toolsGroupsMap[a],c=i.find((function(e){return e._id===r._id}));if(c){var u=c.lesionNamingNumber,l=c.timepointId;o.deleteMeasurements(a,s,{lesionNamingNumber:u,timepointId:l}),ht(),J.isToolIncluded(n)}}}var wt=function(e){var t=e.eventData,n=e.tool;e.toolGroupId,e.toolGroup;b.a.info("CornerstoneToolsMeasurementRemoved");var r=t.measurementData,a=J.Instance;a||b.a.warn("Measurement API is not initialized");var o=a.tools[n.parentTool];if(o){var i=o.findIndex((function(e){return e._id===r._id})),s=i>-1?o[i]:null;s&&(1===s.childToolsCount?(o.splice(i,1),a.onMeasurementRemoved(n.parentTool,s)):(s[n.attribute]=null,s.childToolsCount=(s.childToolsCount||0)-1,a.updateMeasurement(n.parentTool,s)),ht(),J.isToolIncluded(n))}},Ot=function(e){var t=e.detail;return t.toolName&&(t.toolType=t.toolName),t},It={handleSingleMeasurementAdded:vt,handleChildMeasurementAdded:gt,handleSingleMeasurementModified:yt,handleChildMeasurementModified:bt,handleSingleMeasurementRemoved:St,handleChildMeasurementRemoved:wt,onAdded:function(e){var t=Ot(e),n=t.toolType,r=J.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?gt(s):vt(s))},onModified:function(e){var t=Ot(e),n=t.toolType,r=J.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?bt(s):yt(s))},onRemoved:function(e){var t=Ot(e),n=t.toolType,r=J.getToolConfiguration(n),a=r.toolGroupId,o=r.toolGroup,i=r.tool,s={eventData:t,tool:i,toolGroupId:a,toolGroup:o};i&&(i.parentTool?wt(s):St(s))}},Et={id:"targets",name:"Targets",childTools:[s,h,g,v],options:{caseProgress:{include:!0,evaluate:!0}}},Pt={id:"nonTargets",name:"Non-Targets",childTools:[p],options:{caseProgress:{include:!0,evaluate:!0}}},Dt=n(48),Ct=n.n(Dt),Tt=Ct()([f,c]);Tt.forEach((function(e){e.options=Object.assign({},e.options,{caseProgress:{include:!1,evaluate:!1}})}));var xt={id:"temp",name:"Temporary",childTools:Tt,options:{caseProgress:{include:!1,evaluate:!1}}},kt=Ct()([Et,Pt,xt]);kt.forEach((function(e){e.childTools.forEach((function(t){t.toolGroup=e.id}))}));var jt={TimepointApi:x,MeasurementApi:J,ConformanceCriteria:pt,MeasurementHandlers:It,ltTools:kt,tools:r,getLabel:M,getDescription:_,getImageAttributes:dt,getImageIdForImagePath:U};t.a=jt},function(e,t,n){"use strict";var r=n(17),a=n(47),o=n(40);function i(e,t,n){var a={};return n.forEach((function(n){var o=r.a.getString(n["0020000E"]),i=a[o];i||(i={SeriesInstanceUID:o,SeriesNumber:r.a.getString(n["00200011"]),instances:[]},a[o]=i,i.push(i));var s=r.a.getString(n["00080018"]),c=e.wadoUriRoot+"?requestType=WADO&studyUID="+t+"&seriesUID="+o+"&objectUID="+s+"&contentType=application%2Fdicom";i.instances.push({SOPClassUID:r.a.getString(n["00080016"]),SOPInstanceUID:s,uri:c,InstanceNumber:r.a.getString(n["00200013"])})})),[]}var s=n(212),c=n(44);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if(!e)return"";var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString(),r=e.getDate().toString();return t="0".repeat(4-t.length).concat(t),n="0".repeat(2-n.length).concat(n),r="0".repeat(2-r.length).concat(r),"".concat(t,n,r)}function p(e){var t=[];if(e&&e.length)return e.forEach((function(e){return t.push({StudyInstanceUID:r.a.getString(e["0020000D"]),StudyDate:r.a.getString(e["00080020"]),StudyTime:r.a.getString(e["00080030"]),AccessionNumber:r.a.getString(e["00080050"]),referringPhysicianName:r.a.getString(e["00080090"]),PatientName:r.a.getName(e["00100010"]),PatientID:r.a.getString(e["00100020"]),PatientBirthdate:r.a.getString(e["00100030"]),patientSex:r.a.getString(e["00100040"]),studyId:r.a.getString(e["00200010"]),numberOfStudyRelatedSeries:r.a.getString(e["00201206"]),numberOfStudyRelatedInstances:r.a.getString(e["00201208"]),StudyDescription:r.a.getString(e["00081030"]),modalities:r.a.getString(r.a.getModalities(e["00080060"],e["00080061"]))})})),t}function m(e,t){var n=e.staticWado,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{url:e.qidoRoot,headers:r.a.getAuthorizationHeader(e),errorInterceptor:o.a.getHTTPErrorHandler(),requestHooks:[Object(c.a)()]}),m=n?new s.a(i):new a.a.DICOMwebClient(i);e.qidoSupportsIncludeField=void 0===e.qidoSupportsIncludeField||e.qidoSupportsIncludeField;var d={queryParams:function(e,t){var n=["00081030","00080060"].join(","),r={PatientName:e.PatientName,PatientID:e.PatientID,AccessionNumber:e.AccessionNumber,StudyDescription:e.StudyDescription,ModalitiesInStudy:e.ModalitiesInStudy,limit:e.limit,offset:e.offset,fuzzymatching:e.fuzzymatching,includefield:t?n:"all"};if(e.studyDateFrom||e.studyDateTo){var a=f(new Date(e.studyDateFrom)),o=f(new Date(e.studyDateTo));r.StudyDate="".concat(a,"-").concat(o)}if(e.StudyInstanceUID){var i=e.StudyInstanceUID;i=(i=Array.isArray(i)?i.join():i).replace(/[^0-9.]+/g,"\\"),r.StudyInstanceUID=i}var s={};return Object.keys(r).forEach((function(e){void 0!==r[e]&&""!==r[e]&&(s[e]=r[e])})),s}(t,e.qidoSupportsIncludeField)};return m.searchForStudies(d).then(p)}var d={RetrieveMetadata:n(189).a},h={Studies:m,Instances:function(e,t){var n={url:e.qidoRoot,headers:r.a.getAuthorizationHeader(e),errorInterceptor:o.a.getHTTPErrorHandler()},s=new a.a.DICOMwebClient(n),c=(getQIDOQueryParams(filter,e.qidoSupportsIncludeField),{studyInstanceUID:t});return s.searchForInstances(c).then((function(n){return{wadoUriRoot:e.wadoUriRoot,StudyInstanceUID:t,series:i(e,t,n.data)}}))}},v=n(123),g=n(9);var y=new Map;var b=n(183),S={services:{QIDO:h,WADO:d},loadingDict:{},retrieveStudyMetadata:v.b,deleteStudyMetadataPromise:v.a,retrieveStudiesMetadata:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];t.forEach((function(t){var o=Object(v.b)(e,t,n,r);a.push(o)}));var o=Promise.all(a);return o.catch((function(e){return g.a.warn(e)})),o},getStudyBoxData:!1,searchStudies:function(e,t){var n={qidoRoot:e.qidoRoot,filter:t},r=JSON.stringify(n);if(y.has(r))return y.get(r);var a=m(e,t);return y.set(r,a),a},sortStudy:b.a};t.a=S},,function(e,t,n){"use strict";function r(e,t){var n=function(e,t){var n=e.wadorsuri;if(n)return null===t?n=n.replace(/frames\/(\d+)/,""):(t=t?parseInt(t)+1:1,n=n.replace(/frames\/(\d+)/,"frames/".concat(t))),n}(e,t);if(n)return"wadors:".concat(n)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(17),a=n(159),o=Symbol("INFO");function i(e){var t=e[o];if(!t){var n=r.a.getString(e["00080060"],"").toUpperCase();t=Object.freeze({Modality:n,isLowPriority:Object(a.a)(n),SeriesInstanceUID:r.a.getString(e["0020000E"]),SeriesNumber:r.a.getNumber(e["00200011"],0)||0}),e[o]=t}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var r=n(182);var a={default:function(e,t){return e.SeriesNumber-t.SeriesNumber},seriesInfoSortingCriteria:function(e,t){var n=Object(r.a)(e),a=Object(r.a)(t);return!n.isLowPriority&&a.isLowPriority?-1:n.isLowPriority&&!a.isLowPriority?1:n.SeriesNumber-a.SeriesNumber}},o={default:function(e,t){return e.InstanceNumber-t.InstanceNumber}},i={seriesSortCriteria:a,instancesSortCriteria:o},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default;return e.sort(t)},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return e.sort(t)};function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.default;if(!e||!e.series)throw new Error("Insufficient study data was provided to sortStudy");return s(e.series,n),t&&e.series.forEach((function(e){c(e.instances,r)})),e}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return f}));var r=n(14),a=n(16).a.utils.urlUtil,o=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(0),n.e(1),n.e(4)]).then(n.bind(null,1041))}))})),i=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,1045))}))})),s=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,1044))}))})),c=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(0),n.e(1),n.e(3)]).then(n.bind(null,1046))}))})),u=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(9),n.e(0),n.e(1),n.e(6)]).then(n.bind(null,1042))}))})),l=Object(r.L)((function(){return Object(r.M)((function(){return Promise.all([n.e(9),n.e(0),n.e(1),n.e(6)]).then(n.bind(null,1043))}))})),f=function(){return window.location.reload()},p={default:{viewer:{path:"/viewer/:studyInstanceUIDs",component:i},standaloneViewer:{path:"/viewer",component:c},list:{path:["/studylist","/"],component:s,condition:function(e){return e.showStudyList}},local:{path:"/local",component:u},IHEInvokeImageDisplay:{path:"/IHEInvokeImageDisplay",component:o},login:{path:["/login"],component:l}},gcloud:{viewer:{path:"/projects/:project/locations/:location/datasets/:dataset/dicomStores/:dicomStore/study/:studyInstanceUIDs",component:i,condition:function(e){return!!e.enableGoogleCloudAdapter}},list:{path:"/projects/:project/locations/:location/datasets/:dataset/dicomStores/:dicomStore",component:s,condition:function(e){return e.showStudyList&&!!e.enableGoogleCloudAdapter}}}},m=function(e){var t=[];for(var n in p){var r=p[n];for(var a in r){var o=r[a];("function"!=typeof o.condition||o.condition(e))&&t.push({path:o.path,Component:o.component})}}return t},d=function(e,t,n){var r=e,o=Object.assign({},t,n);for(var i in o)r=a.paramString.replaceParam(r,i,o[i]);return r},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=p.default.viewer.path;return e.enableGoogleCloudAdapter&&(r=p.gcloud.viewer.path),d(r,t,n)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=p.default.list.path;return e.enableGoogleCloudAdapter&&(r=p.gcloud.list.path||r),d(r,t,n)}},,,,function(e,t,n){"use strict";var r=n(47),a=n(17),o=n(87),i=n(181),s=n(60),c=n.n(s),u=function(e){var t=e["00081115"],n=[];return t&&t.Value&&t.Value.forEach((function(e){var t=a.a.getString(e["0020000E"]),r=e["0008114A"],o=[];r&&r.Value.forEach((function(e){o.push({referencedSOPClassUID:a.a.getString(e["00081150"]),referencedSOPInstanceUID:a.a.getString(e["00081155"])})})),n.push({referencedSeriesInstanceUID:t,referencedInstanceSequence:o})})),n};function l(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,s,"next",e)}function s(e){l(o,r,a,i,s,"throw",e)}i(void 0)}))}}function p(e,t){return{series:[],seriesMap:Object.create(null),seriesLoader:null,wadoUriRoot:e.wadoUriRoot,wadoRoot:e.wadoRoot,qidoRoot:e.qidoRoot,PatientName:a.a.getName(t["00100010"]),PatientID:a.a.getString(t["00100020"]),PatientAge:a.a.getNumber(t["00101010"]),PatientSize:a.a.getNumber(t["00101020"]),PatientWeight:a.a.getNumber(t["00101030"]),AccessionNumber:a.a.getString(t["00080050"]),StudyTime:a.a.getString(t["00080030"]),StudyDate:a.a.getString(t["00080020"]),FrameOfReferenceUID:a.a.getString(t["00200052"]),ReferencedSeriesSequence:u(t),modalities:a.a.getString(t["00080061"]),StudyDescription:a.a.getString(t["00081030"]),NumberOfStudyRelatedInstances:a.a.getString(t["00201208"]),StudyInstanceUID:a.a.getString(t["0020000D"]),InstitutionName:a.a.getString(t["00080080"])}}function m(e,t,n,r){var a=[];a.push("requestType=WADO"),a.push("studyUID=".concat(t)),a.push("seriesUID=".concat(n)),a.push("objectUID=".concat(r)),a.push("contentType=application/dicom"),a.push("transferSyntax=*");var o=a.join("&");return"".concat(e.wadoUriRoot,"?").concat(o)}function d(e,t,n,r){return"".concat(e.wadoRoot,"/studies/").concat(t,"/series/").concat(n,"/instances/").concat(r)}function h(e,t,n,r,a){var o=d(e,t,n,r);return a=null!=a||1,"".concat(o,"/frames/").concat(a)}function v(e,t,n){return g.apply(this,arguments)}function g(){return(g=f(regeneratorRuntime.mark((function e(t,n,r){var a,s,u,l,f,p,v,g,y,b,S,w,O,I,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.addInstance(r,{server:t});case 2:if(a=e.sent,s=a.StudyInstanceUID,u=a.SeriesInstanceUID,l=a.SOPInstanceUID,f=function(e){return e.match(/[^.0-9]+/g)},void 0!==s&&!f(s)){e.next=9;break}return"makeSOPInstance: StudyInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance.",console.error("makeSOPInstance: StudyInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance."),e.abrupt("return");case 9:if(void 0!==u&&!f(u)){e.next=13;break}return"makeSOPInstance: SeriesInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance.",console.error("makeSOPInstance: SeriesInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance."),e.abrupt("return");case 13:if(void 0!==l&&!f(l)){e.next=17;break}return"makeSOPInstance: SOPInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance.",console.error("makeSOPInstance: SOPInstanceUID is not conforming with the UID (DICOM UI VR) character repertoire, skipping SOPInstance."),e.abrupt("return");case 17:if((p=n.seriesMap[u])?(void 0===p.SeriesDate&&(p.SeriesDate=a.SeriesDate),void 0===p.SeriesTime&&(p.SeriesTime=a.SeriesTime)):(p={SeriesInstanceUID:u,SeriesDescription:a.SeriesDescription,Modality:a.Modality,SeriesNumber:a.SeriesNumber,SeriesDate:a.SeriesDate,SeriesTime:a.SeriesTime,instances:[]},n.seriesMap[u]=p,n.series.push(p)),v=m(t,s,u,l),g=d(t,s,u,l),y=h(t,s,u,l),b={metadata:a,baseWadoRsUri:g,wadouri:v,wadorsuri:y,wadoRoot:t.wadoRoot,imageRendering:t.imageRendering,thumbnailRendering:t.thumbnailRendering},p.instances.push(b),"wadors"===b.thumbnailRendering||"wadors"===b.imageRendering)if(S=Object.assign(r),w=b.metadata.NumberOfFrames)for(O=0;O<w;O++)I=Object(i.a)(b,O),c.a.wadors.metaDataManager.add(I,S);else E=Object(i.a)(b),c.a.wadors.metaDataManager.add(E,S);return e.abrupt("return",b);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return b.apply(this,arguments)}function b(){return(b=f(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r.map((function(e){return v(t,n,e)}))));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(){var e=f(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.isArray(n)&&n.length>0)){e.next=6;break}return r=n[0],a=p(t,r),e.next=5,y(t,a,n);case 5:return e.abrupt("return",a);case 6:throw new Error("Failed to create study out of provided SOP instance list");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function w(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){w(o,r,a,i,s,"next",e)}function s(e){w(o,r,a,i,s,"throw",e)}i(void 0)}))}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I(this,e),this.server=t,this.studyInstanceUID=n,this.filters=r}var t,n,r,a,o,i,s,c,u;return t=e,(n=[{key:"execLoad",value:(u=O(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.configLoad();case 2:return e.next=4,this.preLoad();case 4:return t=e.sent,e.next=7,this.load(t);case 7:return n=e.sent,e.next=10,this.posLoad(n);case 10:return r=e.sent,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"runLoaders",value:(c=O(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,a=!1,o=void 0,e.prev=3,i=t[Symbol.iterator]();case 5:if(r=(s=i.next()).done){e.next=21;break}return c=s.value,e.prev=7,e.next=10,c();case 10:if(!(n=e.sent)||!n.length){e.next=13;break}return e.abrupt("break",21);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(7),e.t0;case 18:r=!0,e.next=5;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(3),a=!0,o=e.t1;case 27:e.prev=27,e.prev=28,r||null==i.return||i.return();case 30:if(e.prev=30,!a){e.next=33;break}throw o;case 33:return e.finish(30);case 34:return e.finish(27);case 35:if(!t.next().done||n){e.next=37;break}throw new Error("RetrieveMetadataLoader failed");case 37:return e.abrupt("return",n);case 38:case"end":return e.stop()}}),e,null,[[3,23,27,35],[7,15],[28,,30,34]])}))),function(e){return c.apply(this,arguments)})},{key:"configLoad",value:(s=O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"preLoad",value:(i=O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"load",value:(o=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"posLoad",value:(a=O(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})}])&&E(t.prototype,n),r&&E(t,r),e}(),D=n(40),C=n(44);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){x(o,r,a,i,s,"next",e)}function s(e){x(o,r,a,i,s,"throw",e)}i(void 0)}))}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return j(this,t),N(this,M(t).apply(this,arguments))}var n,o,i,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,(o=[{key:"getOptions",value:function(){var e={studyInstanceUID:this.studyInstanceUID},t=this.filters.seriesInstanceUID;return t&&(e.seriesInstanceUID=t),e}},{key:"getLoaders",value:regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.studyInstanceUID,r=this.filters,a=(r=void 0===r?{}:r).seriesInstanceUID,o=this.client,a&&t.push(o.retrieveSeriesMetadata.bind(o,{studyInstanceUID:n,seriesInstanceUID:a})),t.push(o.retrieveStudyMetadata.bind(o,{studyInstanceUID:n})),e.delegateYield(t,"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"configLoad",value:function(){var e=this.server,t=new r.a.DICOMwebClient({url:e.wadoRoot,headers:a.a.getAuthorizationHeader(e),errorInterceptor:D.a.getHTTPErrorHandler(),requestHooks:[Object(C.a)()]});this.client=t}},{key:"load",value:(c=k(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getLoaders(),r=this.runLoaders(n),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"posLoad",value:(s=k(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.server,e.abrupt("return",S(n,t));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})}])&&R(n.prototype,o),i&&R(n,i),t}(P),L=n(212),U=n(33),V=n(183),F=n(182);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Y(o,r,a,i,s,"next",e)}function s(e){Y(o,r,a,i,s,"throw",e)}i(void 0)}))}}var K=U.b.data.DicomMetaDictionary.naturalizeDataset;function Z(e,t,n){var r;t.seriesLoader=Object.freeze({hasNext:function(){return n.hasNext()},next:(r=X(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.next();case 2:return a=r.sent,r.next=5,y(e,t,a.sopInstances);case 5:return r.abrupt("return",t.seriesMap[a.seriesInstanceUID]);case 6:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})})}function Q(e,t,n){return Object.freeze({hasNext:function(){return n.length>0},next:(r=X(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.shift(),r.next=3,e.retrieveSeriesMetadata({studyInstanceUID:t,seriesInstanceUID:a});case 3:return o=r.sent,r.abrupt("return",{studyInstanceUID:t,seriesInstanceUID:a,sopInstances:o});case 5:case"end":return r.stop()}}),r)}))),function(){return r.apply(this,arguments)})});var r}var ee=function(e){function t(){return H(this,t),G(this,$(t).apply(this,arguments))}var n,r,o,i,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,e),n=t,(r=[{key:"configLoad",value:function(){var e=this.server,t=new L.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{url:e.qidoRoot,headers:a.a.getAuthorizationHeader(e),errorInterceptor:D.a.getHTTPErrorHandler(),requestHooks:[Object(C.b)()]}));this.client=t}},{key:"getPreLoaders",value:regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=this.studyInstanceUID,r=this.filters,a=(r=void 0===r?{}:r).seriesInstanceUID,o=this.client,a&&(i={studyInstanceUID:n,queryParams:{SeriesInstanceUID:a}},t.push(o.searchForSeries.bind(o,i))),t.push(o.searchForSeries.bind(o,{studyInstanceUID:n})),e.delegateYield(t,"t0",7);case 7:case"end":return e.stop()}}),e,this)}))},{key:"preLoad",value:(c=X(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getPreLoaders(),e.next=3,this.runLoaders(t);case 3:return n=e.sent,r=Object(V.b)(n,V.c.seriesSortCriteria.seriesInfoSortingCriteria),a=r.map((function(e){return Object(F.a)(e).SeriesInstanceUID})),e.abrupt("return",{seriesInstanceUIDsMap:a,seriesData:n});case 7:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"load",value:(s=X(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.client,r=this.studyInstanceUID,a=Q(n,r,t.seriesInstanceUIDsMap),e.next=4,a.next();case 4:return o=e.sent,e.abrupt("return",{sopInstances:o.sopInstances,asyncLoader:a,seriesData:t.seriesData});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"posLoad",value:(i=X(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.server,r=t.sopInstances,a=t.asyncLoader,o=t.seriesData,e.next=4,S(n,r);case 4:return i=e.sent,o.map(K).forEach((function(e,t){var n={SeriesInstanceUID:e.SeriesInstanceUID,SeriesDescription:e.SeriesDescription,SeriesNumber:e.SeriesNumber,Modality:e.Modality,instances:[]};i.series[t]?i.series[t]=Object.assign(n,i.series[t]):i.series[t]=n,i.seriesMap[e.SeriesInstanceUID]=i.series[t]})),a.hasNext()&&Z(n,i,a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&W(n.prototype,r),o&&W(n,o),t}(P);function te(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){te(o,r,a,i,s,"next",e)}function s(e){te(o,r,a,i,s,"throw",e)}i(void 0)}))}}function re(){return(re=ne(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},a=0!=t.enableStudyLazyLoad?ee:A,o=new a(t,n,r),i=o.execLoad(),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.a=function(e,t){return re.apply(this,arguments)}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(144),c=n.n(s),u=n(209),l=n(148),f=(n(699),n(147)),p=n(19),m=n.n(p);function d(e){return a.a.createElement("div",{className:"loadingIndicator",style:{position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto",textAlign:"center",pointerEvents:"none"}},a.a.createElement("p",null,"Error"),a.a.createElement("p",{className:"description"},"An error has occurred."),a.a.createElement("p",{className:"details"},e.details))}d.propTypes={details:i.a.string};var h=d;function v(e){return a.a.createElement("div",{className:"loading-indicator",style:{position:"absolute",top:0,left:0,right:0,bottom:0,margin:"auto",textAlign:"center",pointerEvents:"none"}},"Loading ",e.percentComplete)}v.propTypes={percentComplete:i.a.number};var g=v;function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function b(e){var t,n,o=e.active,i=e.width,s=e.height,c=e.imageSrc,u=e.imageId,l=e.stackPercentComplete,p=e.error,d=e.showProgressBar,v=y(Object(r.useState)(!1),2),b=v[0],S=v[1],w=y(Object(r.useState)(!1),2),O=w[0],I=(w[1],y(Object(r.useState)({}),2)),E=I[0],P=I[1],D=Object(r.createRef)();p||O?t=a.a.createElement(h,null):b&&(t=a.a.createElement(g,null));var C=d&&void 0!==l,T=function(){return u&&!c},x=function(){n&&(S(!0),n.then((function(e){P(e)})).catch((function(e){e.isCanceled})))},k=function(){T()&&(n=f.a.makeCancelable(cornerstone.loadAndCacheImage(u)))},j=Object(r.useCallback)((function(){n&&n.cancel()}));return Object(r.useEffect)((function(){return function(){j()}}),[j]),Object(r.useEffect)((function(){E.imageId&&(cornerstone.renderToCanvas(D.current,E),S(!1))}),[D,E,E.imageId]),Object(r.useEffect)((function(){E.imageId&&E.imageId===u||(j(),k(),x())}),[x,E.imageId,u,j,k]),a.a.createElement("div",{className:m()("ImageThumbnail",{active:o})},a.a.createElement("div",{className:"image-thumbnail-canvas"},T()?a.a.createElement("canvas",{ref:D,width:i,height:s}):a.a.createElement("img",{className:"static-image",src:c,height:s,alt:""})),t,C&&a.a.createElement("div",{className:"image-thumbnail-progress-bar"},a.a.createElement("div",{className:"image-thumbnail-progress-bar-inner",style:{width:"".concat(l,"%")}})),b&&a.a.createElement("div",{className:"image-thumbnail-loading-indicator"}))}b.propTypes={active:i.a.bool,imageSrc:i.a.string,imageId:i.a.string,error:i.a.bool,width:i.a.number,height:i.a.number,stackPercentComplete:i.a.number.isRequired,showProgressBar:i.a.bool},b.defaultProps={active:!1,error:!1,stackPercentComplete:0,width:217,height:123,showProgressBar:!0};var S=b,w=n(20),O=n(86),I=n(79);n(747);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return C}));var P=l.a.StudyLoadingListener;function D(e){var t=e.SeriesDescription,n=e.SeriesNumber,o=e.numImageFrames,i=e.hasWarnings,s=e.hasDerivedDisplaySets,c=E(Object(r.useState)([]),2),u=c[0],l=c[1],f=E(Object(r.useState)([]),2),p=f[0],d=f[1];Object(r.useEffect)((function(){var e=!1;return i.then((function(t){e||l(t)})),s.then((function(t){e||d(t)})),function(){e=!0}}),[i,s]);var h=!t,v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.a.createElement("div",{className:m()("item item-series",n)},a.a.createElement("div",{className:"icon"},t),a.a.createElement("div",{className:"value"},e))},g=function(e){if(Array.isArray(e)){var t=e.map((function(e,t){return a.a.createElement("li",{key:t},e)}));return a.a.createElement("ol",null,t)}return a.a.createElement(a.a.Fragment,null,e)};return a.a.createElement("div",{className:m()("series-details",{"info-only":h})},a.a.createElement("div",{className:"series-description"},t),function(e,t,n,r){if(e||t)return a.a.createElement("div",{className:"series-information"},a.a.createElement(a.a.Fragment,null,void 0!==e?v(e,"S:"):a.a.createElement(a.a.Fragment,null)),a.a.createElement(a.a.Fragment,null,void 0!==t?v(t,"","image-frames"):a.a.createElement(a.a.Fragment,null)),function(e){return a.a.createElement(a.a.Fragment,null,e?a.a.createElement("div",{className:"derived"},a.a.createElement(w.a,{name:"link"})):a.a.createElement(a.a.Fragment,null))}(r),function(e,t){return a.a.createElement(a.a.Fragment,null,t&&0!=t.length?a.a.createElement(I.a,{key:e,placement:"left",overlay:a.a.createElement(O.a,{placement:"left",className:"in tooltip-warning",id:"tooltip-left"},a.a.createElement("div",{className:"warningTitle"},"Series Inconsistencies"),a.a.createElement("div",{className:"warningContent"},g(t)))},a.a.createElement("div",{className:m()("warning")},a.a.createElement("span",{className:"warning-icon"},a.a.createElement(w.a,{name:"exclamation-triangle"})))):a.a.createElement(a.a.Fragment,null))}(e,n))}(n,o,u,p))}function C(e){var t=e.active,n=e.altImageText,o=e.error,i=e.displaySetInstanceUID,s=e.imageId,l=e.imageSrc,f=e.StudyInstanceUID,p=e.onClick,d=e.onDoubleClick,h=e.onMouseDown,v=e.supportsDrag,g=e.showProgressBar,y=E(Object(r.useState)(0),2),b=y[0],w=y[1];Object(r.useEffect)((function(){var e=c()((function(e){var t=e.detail,n=t.progressId,r=t.progressData;if("StackProgress:".concat(i)===n){var a=r?r.percentComplete:0;a>b&&w(a)}}),100);return document.addEventListener(P.events.OnProgress,e),function(){document.removeEventListener(P.events.OnProgress,e)}}),[i]);var O=E(Object(u.c)({item:{StudyInstanceUID:f,displaySetInstanceUID:i,type:"thumbnail"},canDrag:function(e){return v}}),3),I=(O[0],O[1]),C=(O[2],l||s),T=void 0!==n;return a.a.createElement("div",{ref:I,className:m()("thumbnail",{active:t}),onClick:p,onDoubleClick:d,onMouseDown:h},C&&a.a.createElement(S,{active:t,imageSrc:l,imageId:s,error:o,stackPercentComplete:b,showProgressBar:g}),!C&&T&&a.a.createElement("div",{className:"alt-image-text p-x-1"},a.a.createElement("h1",null,n)),D(e))}var T=function(){};C.propTypes={supportsDrag:i.a.bool,id:i.a.string.isRequired,displaySetInstanceUID:i.a.string.isRequired,StudyInstanceUID:i.a.string.isRequired,imageSrc:i.a.string,imageId:i.a.string,error:i.a.bool,active:i.a.bool,stackPercentComplete:i.a.number,altImageText:i.a.string,SeriesDescription:i.a.string,SeriesNumber:i.a.oneOfType([i.a.string,i.a.number]),hasWarnings:i.a.instanceOf(Promise),hasDerivedDisplaySets:i.a.instanceOf(Promise),numImageFrames:i.a.number,onDoubleClick:i.a.func,onClick:i.a.func,onMouseDown:i.a.func,showProgressBar:i.a.bool},C.defaultProps={supportsDrag:!1,active:!1,error:!1,stackPercentComplete:0,onDoubleClick:T,onClick:T,onMouseDown:T}},,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return m}));var l,f,p,m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this,e))).staticWado=e.staticWado,n}var n,r,l,f,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"searchForStudies",value:(f=regeneratorRuntime.mark((function e(n){var r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.staticWado){e.next=2;break}return e.abrupt("return",s(c(t.prototype),"searchForStudies",this).call(this,n));case 2:return e.next=4,s(c(t.prototype),"searchForStudies",this).call(this,n);case 4:if(r=e.sent,a=n.queryParams){e.next=8;break}return e.abrupt("return",r);case 8:return o=r.filter((function(e){for(var n=0,r=Object.keys(t.filterKeys);n<r.length;n++){var o=r[n];if(!i.filterItem(o,a,e))return!1}return!0})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})),p=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=f.apply(e,t);function i(e){a(o,n,r,i,s,"next",e)}function s(e){a(o,n,r,i,s,"throw",e)}i(void 0)}))},function(e){return p.apply(this,arguments)})},{key:"compareValues",value:function(e,t){var n=this;if(Array.isArray(e))return e.find((function(e){return n.compareValues(e,t)}));if(Array.isArray(t))return t.find((function(t){return n.compareValues(e,t)}));if(t&&t.Alphabetic&&(t=t.Alphabetic),"string"==typeof t){if(0===t.length)return!0;if(0===e.length||"*"===e)return!0;if("*"===e[0]&&"*"===e[e.length-1])return console.log("Comparing ".concat(t," to ").concat(e.substring(1,e.length-1))),-1!=t.indexOf(e.substring(1,e.length-1));if("*"===e[e.length-1])return-1!=t.indexOf(e.substring(0,e.length-1));if("*"===e[0])return t.indexOf(e.substring(1))===t.length-e.length+1}return e===t}},{key:"compareDateRange",value:function(e,t){if(!t)return!0;var n=e.indexOf("-");if(-1===n)return this.compareValues(e,t);var r=e.substring(0,n),a=e.substring(n+1);return(!r||t>=r)&&(!a||t<=a)}},{key:"filterItem",value:function(e,n,r){var a=t.filterKeys[e]||e;if(!n)return!0;var o=n[e]||n[a];if(!o)return!0;var i=r[e]||r[a];if(!i)return!1;if("DA"==i.vr)return this.compareDateRange(o,i.Value[0]);var s=i.Value;return this.compareValues(o,s)&&!0}}])&&o(n.prototype,r),l&&o(n,l),t}(n(47).a.DICOMwebClient);p={StudyInstanceUID:"0020000D",PatientName:"00100010","00100020":"mrn",PatientID:"00100020",StudyDescription:"00081030",StudyDate:"00080020",ModalitiesInStudy:"00080061",AccessionNumber:"00080050"},(f="filterKeys")in(l=m)?Object.defineProperty(l,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):l[f]=p},,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(647),a=Object(r.createSelector)([function(e){return e.viewports.activeViewportIndex},function(e){return e.viewports.layout.viewports},function(e){return e.viewports.viewportSpecificData}],(function(e,t,n){var r=["VIEWER"],a=t[e]||{},o=n[e]||{},i=a.plugin||o.plugin;if(i){var s="ACTIVE_VIEWPORT::".concat(i.toUpperCase());r.push(s)}return r}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(277),a=n(0),o={createLogoComponentFn:function(e){return Object(r.a)()}},i=n.n(a).a.createContext(o);t.a=i},function(e,t,n){"use strict";var r=n(9);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getAppState,a=t.getActiveContexts;o(this,e),this.contexts={},n&&a||r.a.warn("CommandsManager was instantiated without getAppState() or getActiveContexts()"),this._getAppState=n,this._getActiveContexts=a}var t,n,s;return t=e,(n=[{key:"createContext",value:function(e){if(e)return this.contexts[e]?this.clearContext(e):void(this.contexts[e]={})}},{key:"getContext",value:function(e){var t=this.contexts[e];if(t)return t}},{key:"clearContext",value:function(e){e&&(this.contexts[e]={})}},{key:"registerCommand",value:function(e,t,n){if("object"===a(n)){var r=this.getContext(e);r&&(r[t]=n)}}},{key:"getCommand",value:function(e,t){var n,r=this,a=[];if(t){var o=this.getContext(t);o&&a.push(o)}else this._getActiveContexts().forEach((function(e){var t=r.getContext(e);t&&a.push(t)}));if(0!==a.length)return a.forEach((function(t){t[e]&&(n=t[e])})),n}},{key:"runCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=this.getCommand(e,n);if(a){var o=a.commandFn,i=a.storeContexts,s=void 0===i?[]:i,c=a.options,u={},l=this._getAppState();return s.forEach((function(e){u[e]=l[e]})),u=Object.assign({},u,c,t),"function"!=typeof o?void r.a.warn('No commandFn was defined for command "'.concat(e,'"')):o(u)}r.a.warn('Command "'.concat(e,'" not found in current context'))}}])&&i(t.prototype,n),s&&i(t,s),e}();t.a=s},function(e,t,n){"use strict";var r=n(90),a=n(9);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hotkeyDefinitions={},this.hotkeyDefaults=[],this.isEnabled=!0,t||a.a.warn("HotkeysManager instantiated without a commandsManager. Hotkeys will be unable to find and run commands."),this._servicesManager=n,this._commandsManager=t}var t,n,o;return t=e,(n=[{key:"record",value:function(e){return r.a.record(e)}},{key:"disable",value:function(){this.isEnabled=!1,r.a.pause()}},{key:"enable",value:function(){this.isEnabled=!0,r.a.unpause()}},{key:"setHotkeys",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var n=this._getValidDefinitions(t);n.forEach((function(t){return e.registerHotkeys(t)}))}catch(e){var r=this._servicesManager.services,a=r.UINotificationService,o=r.LoggerService,i="Error while setting hotkeys";o.error({error:e,message:i}),a.show({title:"Hotkeys Manager",message:i,type:"error",autoClose:!1})}}},{key:"setDefaultHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._getValidDefinitions(e);this.hotkeyDefaults=t}},{key:"_getValidDefinitions",value:function(e){return Array.isArray(e)?c(e):this._parseToArrayLike(e)}},{key:"_parseToArrayLike",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i({},t);return Object.entries(n).map((function(t){return e._parseToHotKeyObj(t[0],t[1])}))}},{key:"_parseToHotKeyObj",value:function(e,t){return i({commandName:e},t)}},{key:"registerHotkeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.commandName,n=e.keys,r=e.label;if(t){var o=this.hotkeyDefinitions[t];if(o){var i=o.keys;this._unbindHotkeys(t,i),a.a.info("Unbinding ".concat(t," from ").concat(i))}this.hotkeyDefinitions[t]={keys:n,label:r},this._bindHotkeys(t,n),a.a.info("Binding ".concat(t," to ").concat(n))}else a.a.warn('No command was defined for hotkey "'.concat(n,'"'))}},{key:"restoreDefaultBindings",value:function(){this.setHotkeys(this.hotkeyDefaults)}},{key:"destroy",value:function(){this.hotkeyDefaults=[],this.hotkeyDefinitions={},r.a.reset()}},{key:"_bindHotkeys",value:function(e,t){var n=this;if(""!==t&&void 0!==t){var a=t instanceof Array?t.join("+"):t;r.a.bind(a,(function(t){t.preventDefault(),t.stopPropagation(),n._commandsManager.runCommand(e,{evt:t})}))}}},{key:"_unbindHotkeys",value:function(e,t){if(""!==t&&void 0!==t)if(t instanceof Array){var n=t.join("+");this._unbindHotkeys(e,n)}else r.a.unbind(t)}}])&&u(t.prototype,n),o&&u(t,o),e}();t.a=l},,,function(e,t,n){"use strict";var r=n(9),a=n(179),o=n(147),i=n(33),s=n(47),c=n(17),u=n(148),l=n(98),f={ImagingMeasurementReport:"126000",ImageLibrary:"111028",ImagingMeasurements:"126010",MeasurementGroup:"125007",ImageLibraryGroup:"126200",TrackingUniqueIdentifier:"112040",TrackingIdentifier:"112039",Finding:"121071",FindingSite:"G-C0E3",CornerstoneFreeText:"CORNERSTONEFREETEXT",Score:"246262008"},p={INFERRED_FROM:"INFERRED FROM",SELECTED_FROM:"SELECTED FROM"},m={SRT:"SRT",cornerstoneTools4:"CST4"},d=function(e){return Array.isArray(e)?e:[e]},h=function(e,t){var n=e.CodeMeaning,r=t.NumericValue,a=t.MeasurementUnitsCodeSequence.CodeValue,o=r?Number(r).toFixed(1):"";return{label:n,value:"".concat(o," ").concat(a)}},v=function(e){var t=e.ValueType,n={ValueType:t,GraphicType:e.GraphicType,GraphicData:e.GraphicData};if("SCOORD"===t){var r=e.ContentSequence.ReferencedSOPSequence;n.ReferencedSOPSequence=r}else if("SCOORD3D"===t)if(e.ReferencedFrameOfReferenceUID)n.ReferencedFrameOfReferenceSequence=e.ReferencedFrameOfReferenceUID;else if(e.ContentSequence){var a=e.ContentSequence.ReferencedFrameOfReferenceSequence;n.ReferencedFrameOfReferenceSequence=a}return n},g=function(e){var t=e.find((function(e){return"SCOORD"===e.ValueType||"SCOORD3D"===e.ValueType}));if(t){var n=e.find((function(e){return"UIDREF"===e.ValueType})),r=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.TrackingIdentifier})),a=e.filter((function(e){return"NUM"===e.ValueType})),o={loaded:!1,labels:[],coords:[v(t)],TrackingUniqueIdentifier:n.UID,TrackingIdentifier:r.TextValue};return a.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.ContentSequence,r=e.MeasuredValueSequence;e.ConceptNameCodeSequence.CodeValue===f.Score&&n.forEach((function(e){[p.SELECTED_FROM,p.INFERRED_FROM].includes(e.RelationshipType)&&e.ReferencedSOPSequence&&o.coords.forEach((function(t){t.ReferencedSOPSequence=e.ReferencedSOPSequence}))})),r&&o.labels.push(h(t,r))})),o}console.warn("graphic ValueType ".concat(t.ValueType," not currently supported, skipping annotation."))},y="TEXT",b="POINT",S="MULTIPOINT",w="POLYLINE",O="CIRCLE",I="ELLIPSE",E="POLYGON",P=function(e){var t=e.filter((function(e){return"NUM"===e.ValueType})),n=e.filter((function(e){return"CODE"===e.ValueType})),r=e.find((function(e){return"UIDREF"===e.ValueType})),a=e.find((function(e){return"IMAGE"===e.ValueType})),o=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.TrackingIdentifier})),i=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.Finding})),s=e.filter((function(e){return e.ConceptNameCodeSequence.CodingSchemeDesignator===m.SRT&&e.ConceptNameCodeSequence.CodeValue===f.FindingSite})),c={loaded:!1,labels:[],coords:[],TrackingUniqueIdentifier:r.UID,TrackingIdentifier:o.TextValue};if(i&&i.ConceptCodeSequence.CodingSchemeDesignator===m.cornerstoneTools4&&i.ConceptCodeSequence.CodeValue===f.CornerstoneFreeText&&c.labels.push({label:"CORNERSTONEFREETEXT",value:i.ConceptCodeSequence.CodeMeaning}),s.length){var u=s.find((function(e){return e.ConceptCodeSequence.CodingSchemeDesignator===m.cornerstoneTools4&&e.ConceptCodeSequence.CodeValue===f.CornerstoneFreeText}));u&&c.labels.push({label:"CORNERSTONEFREETEXT",value:u.ConceptCodeSequence.CodeMeaning})}return t.forEach((function(e){var t=e.ConceptNameCodeSequence,n=e.ContentSequence,r=e.MeasuredValueSequence;if(n){var a=n.ValueType;if("SCOORD"!==!a||"SCOORD3D"!==!a){var o=v(n);o&&c.coords.push(o),r&&c.labels.push(h(t,r))}else console.warn("Graphic ".concat(a," not currently supported, skipping annotation."))}else console.warn("Graphic ".concat(n," missing, skipping annotation."))})),0===t.length&&a&&n.forEach((function(e){var t=e.ConceptCodeSequence,n=e.ConceptNameCodeSequence;if(t&&n){var r=y,o={ValueType:e.ValueType,GraphicType:r,GraphicData:[0,0],ReferencedSOPSequence:a.ReferencedSOPSequence};c.coords.push(o),c.labels.push({label:n.CodeMeaning,labelCodingSchemeDesignator:n.CodingSchemeDesignator,value:t.CodeMeaning,valueCodingSchemeDesignator:t.CodingSchemeDesignator})}else console.warn("Graphic missing, skipping annotation.")})),c},D=function(e){return e.some((function(e){return"SCOORD"===e.ValueType||"SCOORD3D"===e.ValueType}))?g(e):P(e)},C=function(e){var t=e.find((function(e){return e.ConceptNameCodeSequence.CodeValue===f.ImagingMeasurements})),n=d(t.ContentSequence).filter((function(e){return e.ConceptNameCodeSequence.CodeValue===f.MeasurementGroup})),r=[];return n.forEach((function(e){var t=e.ContentSequence,n=D(t);n&&r.push(n)})),r};function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=i.a.Cornerstone;var k=n(7),j=n.n(k),R=n(16),N={DICOM_SR_DISPLAY_TOOL:"DICOMSRDisplayTool"},M=n(89),_=n.n(M),A=n(1063),L=function(e,t,n,r){var a,o=r.ImageOrientationPatient,i=r.ImagePositionPatient,s=r.PixelSpacing,c=r.SliceThickness?r.SliceThickness:1,u=[[o[0]*s[0],o[3]*s[1],c,i[0]],[o[1]*s[0],o[4]*s[1],c,i[1]],[o[2]*s[0],o[5]*s[1],c,i[2]],[0,0,0,1]],l=Object(A.a)(u),f=function(e,t){return{x:t[0][0]*e.x+t[0][1]*e.y+t[0][2]*e.z+t[0][3],y:t[1][0]*e.x+t[1][1]*e.y+t[1][2]*e.z+t[1][3],z:t[2][0]*e.x+t[2][1]*e.y+t[2][2]*e.z+t[2][3]}};switch(e){case y:a=[{x:t[0],y:t[1]}];break;case b:if(a=[],"SCOORD3D"===n)for(var p=0;p<t.length;p+=3){var m={x:t[p],y:t[p+1],z:t[p+2]};a.push(f(m,l))}else for(var d=0;d<t.length;d+=2)a.push({x:t[d],y:t[d+1]});break;case S:if(a=[],"SCOORD3D"===n)for(var h=0;h<t.length;h+=3){var v={x:t[h],y:t[h+1],z:t[h+2]};a.push(f(v,l))}else for(var g=0;g<t.length;g+=2)a.push({x:t[g],y:t[g+1]});break;case w:if(a=[],"SCOORD3D"===n)for(var P=0;P<t.length;P+=3){var D={x:t[P],y:t[P+1],z:t[P+2]};a.push(f(D,l))}else for(var C=0;C<t.length;C+=2)a.push({x:t[C],y:t[C+1]});break;case E:a=[];for(var T=0;T<t.length;T+=3){var x={x:t[T],y:t[T+1],z:t[T+2]};a.push(f(x,l))}break;case O:var k={x:t[0],y:t[1]},j={x:t[2],y:t[3]};a={center:k,radius:_.a.point.distance(k,j)};break;case I:console.warn("ROTATED ELLIPSE NOT YET SUPPORTED!");var R=[{x:t[0],y:t[1]},{x:t[2],y:t[3]}],N=[{x:t[4],y:t[5]},{x:t[6],y:t[7]}],M=_.a.point.distance(N[0],N[1]),L={x:(N[1].x-N[0].x)/M,y:(N[1].y-N[0].y)/M},U=M/2;a={corner1:{x:R[0].x+L.x*U,y:R[0].y+L.y*U},corner2:{x:R[1].x-L.x*U,y:R[1].y-L.y*U}}}return a},U=j.a.globalImageIdSpecificToolStateManager;function V(e,t,n,r){var a=N.DICOM_SR_DISPLAY_TOOL,o={TrackingUniqueIdentifier:e.TrackingUniqueIdentifier,TrackingIdentifier:e.TrackingIdentifier,renderableData:{},labels:e.labels,isSRText:e.isSRText};e.coords.forEach((function(e){var t=e.GraphicType,r=e.GraphicData,a=e.ValueType;void 0===o.renderableData[t]&&(o.renderableData[t]=[]),o.renderableData[t].push(L(t,r,a,n))}));var i=U.saveToolState();void 0===i[t]&&(i[t]={});var s=i[t];void 0===s[a]&&(s[a]={data:[]});var c=s[a];return o.description="Read-only annotation",o.isReadOnly=!0,c.data.push(o),F({measurementData:o,toolName:a,imageId:t}),e.loaded=!0,e.imageId=t,e.displaySetInstanceUID=r,e.ReferencedSOPInstanceUID=e.coords[0].ReferencedSOPSequence.ReferencedSOPInstanceUID,e}var F=function(e){var t=e.measurementData,n=e.toolName,r=e.imageId,a=R.a.measurements.MeasurementApi.Instance,o=n;if(a.tools[o]&&t&&!t.cancelled){var i=R.a.measurements.getImageAttributes(null,r),s=Object.assign({},t,i,{lesionNamingNumber:t.lesionNamingNumber,userId:R.a.user.getUserId(),toolType:o}),c=a.addMeasurement(o,s);Object.assign(t,c);var u=R.a.measurements.getLabel(t);u&&(t.labels=[u])}},B=function(e,t){var n=e.measurements;if(t instanceof l.a){var r=t.sopClassUIDs,a=t.images;if(0!==(n=n.filter((function(e){return e.coords.some((function(e){if(void 0===e.ReferencedSOPSequence){for(var t=0;t<a.length;++t){var n=a[t].getData().metadata;if(n.FrameOfReferenceUID===e.ReferencedFrameOfReferenceSequence){var o=[0,0,0],i=n.ImageOrientationPatient;o[0]=i[1]*i[5]-i[2]*i[4],o[1]=i[2]*i[3]-i[0]*i[5],o[2]=i[0]*i[4]-i[1]*i[3];for(var s=0,c=0;c<3;++c)s+=o[c]*n.ImagePositionPatient[c];if(!(Math.abs(s-e.GraphicData[2])>1)){e.ReferencedSOPSequence={ReferencedSOPClassUID:n.SOPClassUID,ReferencedSOPInstanceUID:n.SOPInstanceUID};break}}}if(void 0===e.ReferencedSOPSequence)return!1}return r.includes(e.ReferencedSOPSequence.ReferencedSOPClassUID)}))}))).length){var o=a.map((function(e){return e.getImageId()})),i=a.map((function(e){return e.SOPInstanceUID})),s=new Map;n.forEach((function(n){n.coords.forEach((function(r,c){if(void 0!==r.ReferencedSOPSequence){var u=i.findIndex((function(e){return e===r.ReferencedSOPSequence.ReferencedSOPInstanceUID}));if(u>-1){e.referencedDisplaySets.includes(t)||e.referencedDisplaySets.push(t);var l=o[u],f=a[u].getData().metadata;if("TEXT"===r.GraphicType){var p=n.labels[c].label+n.labels[c].value,m=s.get(p);m||(m="hsla("+Math.floor(360*Math.random())+", 70%, 30%, 1)",s.set(p,m)),n.labels[c].color=m,n.isSRText=!0,n.labels[c].visible=!0,t.SRLabels.push({ReferencedSOPInstanceUID:r.ReferencedSOPSequence.ReferencedSOPInstanceUID,labels:n.labels[c]}),0===c&&V(n,l,f,t.displaySetInstanceUID)}else V(n,l,f,t.displaySetInstanceUID)}}}))}))}}},q=function(e){var t=e.servicesManager,n=e.displaySets,r=t.services.MeasurementService,a=n.filter((function(e){return"SR"===e.Modality})),o=n.filter((function(e){return"SR"!==e.Modality&&"SEG"!==e.Modality&&"RTSTRUCT"!==e.Modality}));o.forEach((function(e){e.SRLabels=[]})),a.forEach((function(e){var t=e.metadata;if(t){var n=t.ContentSequence;e.measurements=C(n);var a=r.getSourceMappings("CornerstoneTools","4");e.isHydrated=!1,e.isRehydratable=function(e,t){if(!t||!t.length)return!1;var n=t.map((function(e){return e.definition})),r=e.measurements,a=Object.keys(x).filter((function(e){return"function"==typeof x[e].isValidCornerstoneTrackingIdentifier})),o=[];a.forEach((function(e){n.includes(e)&&o.push(x[e])}));for(var i=function(e){var t=r[e].TrackingIdentifier;if(o.some((function(e){return e.isValidCornerstoneTrackingIdentifier(t)})))return{v:!0}},s=0;s<r.length;s++){var c=i(s);if("object"===T(c))return c.v}return!1}(e,a),e.isLoaded=!0,o.forEach((function(t){B(e,t)}))}}))},z=function(e,t){var n;return e.find((function(e){return!!e.images&&!!(n=e.images.find((function(e){return e.getSOPInstanceUID()===t})))})),n},H=(u.a.LogManager,function(e,t,n,r){return[e,t,n,r].join("_")}),W=function(e,t,n){var r=i.b.data.DicomMessage.readFile(e),a=i.b.data.DicomMetaDictionary.naturalizeDataset(r.dict),o=n.servicesManager.services,s=o.LoggerService,c=o.UINotificationService;if(n&&n.servicesManager)try{q({servicesManager:n.servicesManager,displaySets:t})}catch(e){var u=a.SeriesDescription||"";return s.error({error:e,message:e.message}),void c.show({title:"Failed to parse ".concat(u," SR display set"),message:e.message,type:"error",autoClose:!1})}var l,f=i.b.adapters.Cornerstone.MeasurementReport;try{l=f.generateToolState(a)}catch(e){var p=a.SeriesDescription||"";return s.error({error:e,message:e.message}),void c.show({title:"Failed to parse ".concat(p," measurement report"),message:e.message,type:"error",autoClose:!1})}var m={},d=0;return Object.keys(l).forEach((function(e){var n=l[e];m[e]=[],n.forEach((function(n){var r=z(t,n.sopInstanceUid),a=r._study,o=r._series,i=a.StudyInstanceUID,s=a.PatientID,c=o.SeriesInstanceUID,u=n.sopInstanceUid,l=n.frameIndex,f=H(i,c,u,l),p=r.getImageId();if(p){var h=Object.assign({},n,{imageId:p,imagePath:f,SOPInstanceUID:u,SeriesInstanceUID:c,StudyInstanceUID:i,PatientID:s,measurementNumber:++d,timepointId:"TimepointId",toolType:e,_id:p+d});m[e].push(h)}}))})),m},G=n(8),$=n.n(G),J=n(178),Y=function(e){return!!i.b.adapters.Cornerstone[e]},X=function(e){var t=i.b.adapters.Cornerstone.MeasurementReport,n=J.a.getImageIdForImagePath,a={},o=[];return Object.keys(e).forEach((function(t){e[t].forEach((function(e){var t=e.toolType,r=e.imagePath;if(Y(t)){var i=n(r);a[i]=a[i]||{},a[i][t]=a[i][t]||{data:[]},a[i][t].data.push(e)}else o.push(t)}))})),o.length>0&&r.a.warn("[DICOMSR] Tooltypes not supported: ".concat(o.join(", "))),{dataset:t.generateReport(a,$.a.metaData).dataset}},K=function(e){var t=[];return e.forEach((function(e){e.getDisplaySets&&(t=t.concat(e.getDisplaySets()))})),t},Z=n(40),Q=n(44);function ee(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ee(o,r,a,i,s,"next",e)}function s(e){ee(o,r,a,i,s,"throw",e)}i(void 0)}))}}var ne=function(){var e=te(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,u,l,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={url:r,headers:c.a.getAuthorizationHeader(),errorInterceptor:Z.a.getHTTPErrorHandler(),requestHooks:[Object(Q.a)()]},i=new s.a.DICOMwebClient(o),u=t.getFirstInstance(),l={studyInstanceUID:u.getStudyInstanceUID(),seriesInstanceUID:u.getSeriesInstanceUID(),sopInstanceUID:u.getSOPInstanceUID()},e.next=6,i.retrieveInstance(l);case 6:return f=e.sent,p=K(n),m=W(f,p,a),e.abrupt("return",m);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),re=function(){var e=te(regeneratorRuntime.mark((function e(t,n){var r,a,o,u,l,f,p,m,d,h,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=X(t),a=r.dataset,o=i.b.data,u=o.DicomMetaDictionary,l=o.DicomDict,f={FileMetaInformationVersion:a._meta.FileMetaInformationVersion.Value,MediaStorageSOPClassUID:a.SOPClassUID,MediaStorageSOPInstanceUID:a.SOPInstanceUID,TransferSyntaxUID:"1.2.840.10008.1.2.1",ImplementationClassUID:u.uid(),ImplementationVersionName:"dcmjs-0.0"},p=u.denaturalizeDataset(f),(m=new l(p)).dict=u.denaturalizeDataset(a),d=m.write(),h={url:n,headers:c.a.getAuthorizationHeader(),errorInterceptor:Z.a.getHTTPErrorHandler(),requestHooks:[Object(Q.a)()]},v=new s.a.DICOMwebClient(h),g={datasets:[d]},e.next=12,v.storeInstances(g);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae=function(e){var t=e.getFirstInstance().getData().metadata.SOPClassUID;return["1.2.840.10008.5.1.4.1.1.88.22","1.2.840.10008.5.1.4.1.1.11.1","1.2.840.10008.5.1.4.1.1.88.34"].includes(t)},oe=function(e,t){return e._data.SeriesDate>t._data.SeriesDate||e._data.SeriesDate===t._data.SeriesDate&&e._data.SeriesTime>t._data.SeriesTime},ie=function(e){var t;return e.forEach((function(e){(e.getSeries?e.getSeries():[]).forEach((function(e){e&&0!==e.getInstanceCount()&&ae(e)&&(t&&!oe(e,t)||(t=e))}))})),t};function se(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var ce={retrieveMeasurements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.a.info("[DICOMSR] retrieveMeasurements"),!e||"dicomWeb"!==e.type)return r.a.error("[DICOMSR] DicomWeb server is required!"),Promise.reject({});var n=e.wadoRoot,a=o.a.studyMetadataManager.all(),i=ie(a);return i?ne(i,a,n,t):Promise.resolve({})},storeMeasurements:function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,o){var i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.a.info("[DICOMSR] storeMeasurements"),o&&"dicomWeb"===o.type){e.next=4;break}return r.a.error("[DICOMSR] DicomWeb server is required!"),e.abrupt("return",Promise.reject({}));case 4:return i=o.wadoRoot,s=Object.keys(t)[0],c=t[s][0],u=c&&c.StudyInstanceUID,e.prev=8,e.next=11,re(t,i);case 11:return u&&a.a.deleteStudyMetadataPromise(u),e.abrupt("return",{message:"Measurements saved successfully"});case 15:throw e.prev=15,e.t0=e.catch(8),r.a.error("[DICOMSR] Error while saving the measurements: ".concat(e.t0.message)),new Error("Error while saving the measurements.");case 19:case"end":return e.stop()}}),e,null,[[8,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){se(o,r,a,i,s,"next",e)}function s(e){se(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),isToolSupported:Y};t.a=ce},function(e,t,n){"use strict";var r={setViewportActive:function(e){return{type:"VIEWPORT::SET_ACTIVE",viewportIndex:e}},setViewportSpecificData:function(e,t){return{type:"VIEWPORT::SET",viewportIndex:e,viewportSpecificData:t}},setViewportLayoutAndData:function(e,t){return{type:"VIEWPORT::SET_VIEWPORT_LAYOUT_AND_DATA",numRows:e.numRows,numColumns:e.numColumns,viewports:e.viewports,viewportSpecificData:t}},setLayout:function(e){return{type:"VIEWPORT::SET_LAYOUT",numRows:e.numRows,numColumns:e.numColumns,viewports:e.viewports}},clearViewportSpecificData:function(e){return{type:"VIEWPORT::CLEAR",viewportIndex:e}},setActiveViewportSpecificData:function(e){return{type:"VIEWPORT::SET_ACTIVE_SPECIFIC_DATA",viewportSpecificData:e}},setUserPreferences:function(e){return{type:"SET_USER_PREFERENCES",state:e}},setExtensionData:function(e,t){return{type:"SET_EXTENSION_DATA",extension:e,data:t}},setTimepoints:function(e){return{type:"SET_TIMEPOINTS",state:e}},setMeasurements:function(e){return{type:"SET_MEASUREMENTS",state:e}},setStudyData:function(e,t){return{type:"SET_STUDY_DATA",StudyInstanceUID:e,data:t}},setServers:function(e){return{type:"SET_SERVERS",servers:e}}};function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EXTENSION_DATA":var n=t.extension,r=e[n]||{},a=t.data,c=i({},n,o({},r,{},a));return o({},e,{},c);default:return e}},u={windowLevelData:{1:{description:"Soft tissue",window:"550",level:"40"},2:{description:"Lung",window:"150",level:"-600"},3:{description:"Liver",window:"150",level:"90"},4:{description:"Bone",window:"2500",level:"480"},5:{description:"Brain",window:"80",level:"40"},6:{description:"Trest",window:"1",level:"1"},7:{description:"",window:"",level:""},8:{description:"",window:"",level:""},9:{description:"",window:"",level:""},10:{description:"",window:"",level:""}},generalPreferences:{}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PREFERENCES":return Object.assign({},e,t.state);default:return e}},f=n(269),p=n.n(f);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var g={servers:[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SERVER":var n=p()([].concat(v(e.servers),[t.server]),"id");return n.forEach((function(e){return e.active=!0})),d({},e,{servers:n});case"ACTIVATE_SERVER":var r=d({},t.server,{active:!0}),a=e.servers;return a.forEach((function(e){return e.active=!1})),d({},e,{servers:p()([].concat(v(a),[r]),"wadoRoot")});case"SET_SERVERS":return d({},e,{servers:t.servers});default:return e}},b=n(48),S=n.n(b),w={studyData:{}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STUDY_DATA":var n=S()(e.studyData);return n[t.StudyInstanceUID]=S()(t.data),Object.assign({},e,{studyData:n});default:return e}},I={timepoints:[],measurements:[]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TIMEPOINTS":return Object.assign({},e,{timepoints:t.state});case"SET_MEASUREMENTS":return Object.assign({},e,{measurements:t.state});default:return e}},P=n(226);function D(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(P.b)(!1);var k={numRows:1,numColumns:1,activeViewportIndex:0,layout:{viewports:[{}]},viewportSpecificData:{}},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e*t,a=S()(n);return r<Object.keys(a).length&&Object.keys(a).forEach((function(e){e>r-1&&delete a[e]})),a},R=function(e,t,n){return n>e*t-1?k.activeViewportIndex:n},N={extensions:c,preferences:l,servers:y,studies:O,timepointManager:E,viewports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0,n=!1;switch(t.type){case"VIEWPORT::SET_ACTIVE":return Object(P.a)(e,(function(e){e.activeViewportIndex=R(e.numRows,e.numColumns,t.viewportIndex)}));case"VIEWPORT::SET_LAYOUT":var r=t.numRows,a=t.numColumns,o=j(r,a,e.viewportSpecificData),i=R(r,a,e.activeViewportIndex);return T({},e,{numRows:t.numRows,numColumns:t.numColumns,layout:{viewports:D(t.viewports)},viewportSpecificData:o,activeViewportIndex:i});case"VIEWPORT::SET_VIEWPORT_LAYOUT_AND_DATA":var s=t.numRows,c=t.numColumns,u=j(s,c,t.viewportSpecificData),l=R(s,c,e.activeViewportIndex);return T({},e,{numRows:t.numRows,numColumns:t.numColumns,layout:{viewports:D(t.viewports)},viewportSpecificData:u,activeViewportIndex:l});case"VIEWPORT::SET":return Object(P.a)(e,(function(e){e.viewportSpecificData[t.viewportIndex]=e.viewportSpecificData[t.viewportIndex]||{},Object.keys(t.viewportSpecificData).forEach((function(n){e.viewportSpecificData[t.viewportIndex][n]=t.viewportSpecificData[n]})),t.viewportSpecificData&&t.viewportSpecificData.plugin&&(e.layout.viewports[t.viewportIndex].plugin=t.viewportSpecificData.plugin)}));case"VIEWPORT::SET_ACTIVE_SPECIFIC_DATA":n=!0;case"VIEWPORT::SET_SPECIFIC_DATA":var f=S()(e.layout),p=n?e.activeViewportIndex:t.viewportIndex,m=S()(e.viewportSpecificData);return m[p]=T({},t.viewportSpecificData),t.viewportSpecificData&&t.viewportSpecificData.plugin&&(f.viewports[p].plugin=t.viewportSpecificData.plugin),T({},e,{layout:f,viewportSpecificData:m});case"VIEWPORT::CLEAR":var d=S()(e.viewportSpecificData);return t.viewportIndex?(d[t.viewportIndex]={},T({},e,{viewportSpecificData:d})):k;default:return e}}},M=window.localStorage,_={saveState:function(e){try{var t=JSON.stringify(e);M.setItem("state",t)}catch(e){}},loadState:function(){try{var e=M.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}},A=window.sessionStorage,L={reducers:N,actions:r,localStorage:_,sessionStorage:{saveState:function(e){try{var t=JSON.stringify(e);A.setItem("state",t)}catch(e){}},loadState:function(){try{var e=A.getItem("state");if(!e)return;return JSON.parse(e)}catch(e){return}}}};t.a=L},,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(93),i=n(38),s=n(1),c=n.n(s),u=n(63),l=n(130),f=n(16),p=n(14),m=n(8),d=n.n(m),h=n(7),v=n.n(h),g=n(641),y=n.n(g),b=n(642),S=n.n(b),w=n(89),O=n.n(w),I=f.a.log;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=["Length","EllipticalRoi","RectangleRoi","ArrowAnnotate"],C=function(e){var t=function(e){var t=d.a.getEnabledElement(e).image.imageId,n=d.a.metaData.get("instance",t);return{SOPInstanceUID:n.SOPInstanceUID,FrameOfReferenceUID:n.FrameOfReferenceUID,SeriesInstanceUID:n.SeriesInstanceUID}},n=function(t){var n=e.VALUE_TYPES,r=n.POLYLINE;return{Length:r,EllipticalRoi:n.ELLIPSE,RectangleRoi:r,ArrowAnnotate:n.POINT}[t]},r=function(e){var t=[];return Object.keys(e).map((function(n){if(["start","end"].includes(n)){var r={};e[n].x&&(r.x=e[n].x),e[n].y&&(r.y=e[n].y),t.push(r)}})),t},a=function(e){return e.map((function(e,t){return t%10==0?{start:e}:{end:e}})).reduce((function(e,t){return Object.assign(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t))}),{})};return{toAnnotation:function(e,t){var n=e.id,r=e.label,o=e.description,i=e.points,s=e.unit;return{toolName:t,measurementData:{sopInstanceUid:e.SOPInstanceUID,frameOfReferenceUID:e.FrameOfReferenceUID,SeriesInstanceUID:e.referenceSeriesUID,unit:s,text:r,description:o,handles:a(i),_measurementServiceId:n}}},toMeasurement:function(e){var a,o=e.element,i=e.measurementData,s=e.toolType||e.toolName||i.toolType;if(a=s,!D.includes(a))throw new Error("Tool not supported");var c=t(o),u=c.SOPInstanceUID,l=c.FrameOfReferenceUID,f=c.SeriesInstanceUID;return[].push(i.handles),{id:i._measurementServiceId,SOPInstanceUID:u,FrameOfReferenceUID:l,referenceSeriesUID:f,label:i.text,description:i.description,unit:i.unit,area:i.cachedStats&&i.cachedStats.area,type:n(s),points:r(i.handles)}}}},T={TrackingUniqueIdentifier:null,trackingIdentifiersByEnabledElementUUID:{}};var x={state:T,getters:{trackingUniqueIdentifiersForElement:function(e){var t=d.a.getEnabledElement(e).uuid;return T.trackingIdentifiersByEnabledElementUUID[t]?T.trackingIdentifiersByEnabledElementUUID[t]:{trackingUniqueIdentifiers:[]}}},setters:{trackingUniqueIdentifiersForElement:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=d.a.getEnabledElement(e),a=r.uuid;T.trackingIdentifiersByEnabledElementUUID[a]={trackingUniqueIdentifiers:t,activeIndex:n}},activeTrackingUniqueIdentifierForElement:function(e,t){var n=d.a.getEnabledElement(e).uuid,r=T.trackingIdentifiersByEnabledElementUUID[n];if(r){var a=r.trackingUniqueIdentifiers.findIndex((function(e){return e===t}));r.activeIndex=a}}}},k=n(276);function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){var t=e.servicesManager,n=e.configuration,r=t.services,a=r.UIDialogService,o=r.MeasurementService;v.a.register("module",k.a,x);var i=function(e,t,n){if(a)var r=a.create({centralize:!0,isDraggable:!1,content:p.y.InputDialog,useLastPosition:!1,showOverlay:!0,contentProps:{title:"Enter your annotation",label:"New label",measurementData:e?{description:e.text}:{},onClose:function(){return a.dismiss({id:r})},onSubmit:function(e){n(e),a.dismiss({id:r})}}})},s=n.csToolsConfig,c=n.stackPrefetch,u=void 0===c?{maxImagesToPrefetch:1/0,preserveExistingPool:!1,maxSimultaneousRequests:20}:c,l=f.a.cornerstone.metadataProvider;d.a.metaData.addProvider(l.get.bind(l),9999),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.cornerstoneTools=v.a,v.a.external.cornerstone=d.a,v.a.external.Hammer=S.a,v.a.external.cornerstoneMath=O.a,v.a.init(e),v.a.loadHandlerManager.setErrorLoadingHandler((function(e,t,n){throw I.error(t),n}));var t="Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif";v.a.textStyle.setFont("16px ".concat(t)),v.a.toolStyle.setToolWidth(2),v.a.toolColors.setToolColor("rgb(255, 255, 0)"),v.a.toolColors.setActiveColor("rgb(0, 255, 0)"),v.a.store.state.touchProximity=40,v.a.stackPrefetch.setConfiguration({maxImagesToPrefetch:e.maxImagesToPrefetch,preserveExistingPool:e.preserveExistingPool,maxSimultaneousRequests:e.maxSimultaneousRequests})}(N({},s||{globalToolSyncEnabled:!0,showSVGCursors:!0,autoResizeViewports:!1},{},u));var m={touch:[v.a.PanMultiTouchTool,v.a.ZoomTouchPinchTool],annotations:[v.a.ArrowAnnotateTool,v.a.BidirectionalTool,v.a.LengthTool,v.a.AngleTool,v.a.FreehandRoiTool,v.a.EllipticalRoiTool,v.a.DragProbeTool,v.a.RectangleRoiTool],other:[v.a.PanTool,v.a.ZoomTool,v.a.WwwcTool,v.a.WwwcRegionTool,v.a.MagnifyTool,v.a.StackScrollTool,v.a.StackScrollMouseWheelTool,v.a.OverlayTool]},h=[];Object.keys(m).forEach((function(e){return h.push.apply(h,j(m[e]))})),A(o);var g={ArrowAnnotate:{configuration:{getTextCallback:function(e,t){return i(null,0,e)},changeTextCallback:function(e,t,n){return i(e,0,n)}}}};h.forEach((function(e){var t=e.name.replace("Tool",""),r=(n.tools||{})[t]||{},a=g[t]||{},o=y()(a,function(e,t){var r=m.annotations.filter((function(e){return!["RectangleRoiTool","EllipticalRoiTool"].includes(e.name)})),a=N({},e);return!1!==n.hideHandles&&r.includes(t)&&(e.configuration?a.configuration.drawHandlesOnHover=!0:a.configuration={drawHandlesOnHover:!0}),a}(r,e));v.a.addTool(e,o)}));var b=v.a.importInternal("base/BaseAnnotationTool");h.forEach((function(e){if(e.prototype instanceof b){var t=(new e).name;v.a.setToolPassive(t)}})),v.a.setToolActive("Pan",{mouseButtonMask:4}),v.a.setToolActive("Zoom",{mouseButtonMask:2}),v.a.setToolActive("Wwwc",{mouseButtonMask:1}),v.a.setToolActive("StackScrollMouseWheel",{}),v.a.setToolActive("PanMultiTouch",{pointers:2}),v.a.setToolActive("ZoomTouchPinch",{}),v.a.setToolEnabled("Overlay",{})}var A=function(e){var t=function(e){var t=C(e),n=t.toAnnotation,r=t.toMeasurement,a=e.createSource("CornerstoneTools","4"),o={valueType:e.VALUE_TYPES.POLYLINE,points:2};return e.addMapping(a,"Length",o,n,r),a}(e),n=t.id,r=t.addOrUpdate,a=t.getAnnotation;d.a.events.addEventListener(d.a.EVENTS.ELEMENT_ENABLED,(function(t){var o=e.EVENTS,i=o.MEASUREMENT_ADDED,s=o.MEASUREMENT_UPDATED;e.subscribe(i,(function(e){var t=e.source,r=e.measurement;if(![n].includes(t.id)){var o=a("Length",r.id);console.log("Measurement Service [Cornerstone]: Measurement added",r),console.log("Mapped annotation:",o)}})),e.subscribe(s,(function(e){var t=e.source,r=e.measurement;if(![n].includes(t.id)){var o=a("Length",r.id);console.log("Measurement Service [Cornerstone]: Measurement updated",r),console.log("Mapped annotation:",o)}}));var c=function(e,t){var n=t.measurementData;Object.assign(n,{_measurementServiceId:e})};[v.a.EVENTS.MEASUREMENT_ADDED,v.a.EVENTS.MEASUREMENT_MODIFIED].forEach((function(e){t.detail.element.addEventListener(e,(function(t){var n=t.detail;console.log("Cornerstone Element Event: ".concat(e)),function(e){try{var t=e.toolName,n=e.toolType,a=e.measurementData,o=t||a.toolType||n;e.id=a._measurementServiceId;var i=r(o,e);a._measurementServiceId||c(i,e)}catch(e){console.warn("Failed to add or update measurement:",e)}}(n)}))}))}))},L=n(261),U=L.a.actions.setLayout,V=function(){var e=U({numRows:1,numColumns:1,viewports:[{plugin:"cornerstone"}]});window.store.dispatch(e)},F=n(62),B=n(147),q=function(e){var t=e.onClose,n=e.activeViewportIndex,r=Object(F.a)(n);return a.a.createElement(p.K,{onClose:t,minimumSize:100,maximumSize:1e4,defaultSize:512,canvasClass:"cornerstone-canvas",activeViewport:r,enableViewport:function(e){e&&d.a.enable(e)},disableViewport:function(e){e&&d.a.disable(e)},updateViewportPreview:function(e,t,n){return new Promise((function(r){d.a.fitToWindow(e),e.addEventListener("cornerstoneimagerendered",(function a(o){var i=d.a.getEnabledElement(o.target).element,s="image/"+n,c=t.toDataURL(s,1),u=i.offsetHeight,l=i.offsetWidth;if(u>512||l>512){var f=512/Math.max(u,l);l*=f,u*=f}r({dataUrl:c,width:u,height:l}),e.removeEventListener("cornerstoneimagerendered",a)}))}))},loadImage:function(e,t,n,r){return new Promise((function(a){if(e&&t){var o=d.a.getEnabledElement(e),i=Object.assign({},o.viewport);delete i.scale,i.translation={x:0,y:0},d.a.loadImage(o.image.imageId).then((function(e){d.a.displayImage(t,e),d.a.setViewport(t,i),d.a.resize(t,!0);var o=Math.min(n||e.width,1e4),s=Math.min(r||e.height,1e4);a({image:e,width:o,height:s})}))}}))},toggleAnnotations:function(e,t){v.a.store.state.tools.forEach((function(n){var r=n.name;e?v.a.setToolEnabledForElement(t,r):v.a.setToolDisabledForElement(t,r)}))},downloadBlob:function(e,t,n,r){var a="".concat(e,".").concat(t),o="image/".concat(t);if(r.msToBlob&&"jpeg"===t){var i=r.toDataURL(o,1),s=B.a.b64toBlob(i.replace("data:image/jpeg;base64,",""),o);return window.navigator.msSaveBlob(s,a)}n.querySelector("canvas").toBlob((function(e){var t=window.URL||window.webkitURL,n=document.createElement("a");n.href=t.createObjectURL(e),n.download=a,document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}})};q.propTypes={onClose:c.a.func,activeViewportIndex:c.a.number.isRequired};var z=q,H=v.a.import("util/scroll"),W=f.a.utils.studyMetadataManager,G=f.a.redux.actions.setViewportSpecificData,$=function(){d.a.getEnabledElements().forEach((function(e){e.image&&d.a.updateImage(e.element)}))},J=function(e){var t=e.servicesManager,n={rotateViewport:function(e){var t=e.viewports,n=e.rotation,r=Object(F.a)(t.activeViewportIndex);if(r){var a=d.a.getViewport(r);a.rotation+=n,d.a.setViewport(r,a)}},flipViewportHorizontal:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);if(n){var r=d.a.getViewport(n);r.hflip=!r.hflip,d.a.setViewport(n,r)}},flipViewportVertical:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);if(n){var r=d.a.getViewport(n);r.vflip=!r.vflip,d.a.setViewport(n,r)}},scaleViewport:function(e){var t=e.direction,n=e.viewports,r=Object(F.a)(n.activeViewportIndex),a=.15*t;if(r)if(a){var o=d.a.getViewport(r);o.scale+=a,d.a.setViewport(r,o)}else d.a.fitToWindow(r)},resetViewport:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);n&&d.a.reset(n)},invertViewport:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);if(n){var r=d.a.getViewport(n);r.invert=!r.invert,d.a.setViewport(n,r)}},setToolActive:function(e){var t=e.toolName;t||console.warn("No toolname provided to setToolActive command"),v.a.setToolActive(t,{mouseButtonMask:1})},clearAnnotations:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);if(n){var r=d.a.getEnabledElement(n);if(r&&r.image){var a=v.a.globalImageIdSpecificToolStateManager.toolState;if(a&&!1!==a.hasOwnProperty(r.image.imageId)){var o=a[r.image.imageId],i=[];Object.keys(o).forEach((function(e){o[e].data.forEach((function(t){var n=t._id,r=t.lesionNamingNumber,a=t.measurementNumber;n&&i.push({toolType:e,_id:n,lesionNamingNumber:r,measurementNumber:a})}))})),i.forEach((function(e){f.a.measurements.MeasurementHandlers.onRemoved({detail:{toolType:e.toolType,measurementData:e}})}))}}}},nextImage:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);H(n,1)},previousImage:function(e){var t=e.viewports,n=Object(F.a)(t.activeViewportIndex);H(n,-1)},getActiveViewportEnabledElement:function(e){var t=e.viewports;return Object(F.a)(t.activeViewportIndex)},showDownloadViewportModal:function(e){var n=e.title,r=e.viewports.activeViewportIndex,a=t.services.UIModalService;a&&a.show({content:z,title:n,contentProps:{activeViewportIndex:r,onClose:a.hide}})},updateTableWithNewMeasurementData:function(e){var t=e.toolType,n=e.measurementNumber,r=e.location,a=e.description,o=f.a.measurements.MeasurementApi.Instance;o.tools[t].filter((function(e){return e.measurementNumber===n})).forEach((function(e){e.location=r,e.description=a,o.updateMeasurement(e.toolType,e)})),o.syncMeasurementsAndToolData(),$()},getNearbyToolData:function(e){var t=e.element,n=e.canvasCoordinates,r=e.availableToolTypes,a={},o=!1;return r.forEach((function(e){var r=v.a.getToolState(t,e);if(r)return r.data.forEach((function(r,i){var s=v.a.getToolForElement(t,e);s||(s=v.a.getToolForElement(t,"".concat(e,"Tool"))),s?s.pointNearTool(t,r,n)&&(o=!0,a.tool=r,a.index=i,a.toolType=e):console.warn("Tool not found.")})),!o&&void 0})),o?a:void 0},removeToolState:function(e){var t=e.element,n=e.toolType,r=e.tool;v.a.removeToolState(t,n,r),d.a.updateImage(t)},setCornerstoneLayout:function(){V()},setWindowLevel:function(e){var t=e.viewports,n=e.window,r=e.level,a=Object(F.a)(t.activeViewportIndex);if(a){var o=d.a.getViewport(a);o.voi={windowWidth:Number(n),windowCenter:Number(r)},d.a.setViewport(a,o)}},jumpToImage:function(e){var t=e.StudyInstanceUID,n=e.SOPInstanceUID,r=e.frameIndex,a=e.activeViewportIndex,o=e.refreshViewports,i=void 0===o||o,s=W.get(t).findDisplaySet((function(e){return e.images&&e.images.find((function(e){return e.getSOPInstanceUID()===n}))}));s&&(s.SOPInstanceUID=n,s.frameIndex=r,window.store.dispatch(G(a,s)),i&&$())}};return{actions:n,definitions:{jumpToImage:{commandFn:n.jumpToImage,storeContexts:[],options:{}},getNearbyToolData:{commandFn:n.getNearbyToolData,storeContexts:[],options:{}},removeToolState:{commandFn:n.removeToolState,storeContexts:[],options:{}},updateTableWithNewMeasurementData:{commandFn:n.updateTableWithNewMeasurementData,storeContexts:[],options:{}},showDownloadViewportModal:{commandFn:n.showDownloadViewportModal,storeContexts:["viewports"],options:{}},getActiveViewportEnabledElement:{commandFn:n.getActiveViewportEnabledElement,storeContexts:["viewports"],options:{}},rotateViewportCW:{commandFn:n.rotateViewport,storeContexts:["viewports"],options:{rotation:90}},rotateViewportCCW:{commandFn:n.rotateViewport,storeContexts:["viewports"],options:{rotation:-90}},invertViewport:{commandFn:n.invertViewport,storeContexts:["viewports"],options:{}},flipViewportVertical:{commandFn:n.flipViewportVertical,storeContexts:["viewports"],options:{}},flipViewportHorizontal:{commandFn:n.flipViewportHorizontal,storeContexts:["viewports"],options:{}},scaleUpViewport:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:1}},scaleDownViewport:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:-1}},fitViewportToWindow:{commandFn:n.scaleViewport,storeContexts:["viewports"],options:{direction:0}},resetViewport:{commandFn:n.resetViewport,storeContexts:["viewports"],options:{}},clearAnnotations:{commandFn:n.clearAnnotations,storeContexts:["viewports"],options:{}},nextImage:{commandFn:n.nextImage,storeContexts:["viewports"],options:{}},previousImage:{commandFn:n.previousImage,storeContexts:["viewports"],options:{}},setToolActive:{commandFn:n.setToolActive,storeContexts:[],options:{}},setZoomTool:{commandFn:n.setToolActive,storeContexts:[],options:{toolName:"Zoom"}},setCornerstoneLayout:{commandFn:n.setCornerstoneLayout,storeContexts:[],options:{},context:"VIEWER"},setWindowLevel:{commandFn:n.setWindowLevel,storeContexts:["viewports"],options:{}}},defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"}},Y={COMMAND:"command",SET_TOOL_ACTIVE:"setToolActive",BUILT_IN:"builtIn"},X={CINE:"CINE",DOWNLOAD_SCREEN_SHOT:"DOWNLOAD_SCREEN_SHOT"},K={definitions:[{id:"StackScroll",label:"Stack Scroll",icon:"bars",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"StackScroll"}},{id:"Zoom",label:"Zoom",icon:"search-plus",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Zoom"}},{id:"Wwwc",label:"Levels",icon:"level",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Wwwc"}},{id:"Pan",label:"Pan",icon:"arrows",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Pan"}},{id:"Length",label:"Length",icon:"measure-temp",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Length"}},{id:"ArrowAnnotate",label:"Annotate",icon:"measure-non-target",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"ArrowAnnotate"}},{id:"Angle",label:"Angle",icon:"angle-left",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Angle"}},{id:"Reset",label:"Reset",icon:"reset",type:Y.COMMAND,commandName:"resetViewport"},{id:"Cine",label:"CINE",icon:"youtube",type:Y.BUILT_IN,options:{behavior:X.CINE}},{id:"More",label:"More",icon:"ellipse-circle",buttons:[{id:"Magnify",label:"Magnify",icon:"circle",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Magnify"}},{id:"WwwcRegion",label:"ROI Window",icon:"stop",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"WwwcRegion"}},{id:"DragProbe",label:"Probe",icon:"dot-circle",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"DragProbe"}},{id:"EllipticalRoi",label:"Ellipse",icon:"circle-o",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"EllipticalRoi"}},{id:"RectangleRoi",label:"Rectangle",icon:"square-o",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"RectangleRoi"}},{id:"Invert",label:"Invert",icon:"adjust",type:Y.COMMAND,commandName:"invertViewport"},{id:"RotateRight",label:"Rotate Right",icon:"rotate-right",type:Y.COMMAND,commandName:"rotateViewportCW"},{id:"FlipH",label:"Flip H",icon:"ellipse-h",type:Y.COMMAND,commandName:"flipViewportHorizontal"},{id:"FlipV",label:"Flip V",icon:"ellipse-v",type:Y.COMMAND,commandName:"flipViewportVertical"},{id:"Clear",label:"Clear",icon:"trash",type:Y.COMMAND,commandName:"clearAnnotations"},{id:"Bidirectional",label:"Bidirectional",icon:"measure-target",type:Y.SET_TOOL_ACTIVE,commandName:"setToolActive",commandOptions:{toolName:"Bidirectional"}},{id:"Download",label:"Download",icon:"create-screen-capture",type:Y.BUILT_IN,options:{behavior:X.DOWNLOAD_SCREEN_SHOT,togglable:!0}}]},{id:"Exit2DMPR",label:"Exit 2D MPR",icon:"times",type:Y.COMMAND,commandName:"setCornerstoneLayout",context:"ACTIVE_VIEWPORT::VTK"}],defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"},Z=n(646);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ee=a.a.lazy((function(){return Promise.all([n.e(14),n.e(15)]).then(n.bind(null,1150))})),te=function(e){return a.a.createElement(a.a.Suspense,{fallback:a.a.createElement("div",null,"Loading...")},a.a.createElement(ee,e))},ne={id:"cornerstone",version:Z.a,preRegistration:function(e){var t=e.servicesManager,n=e.configuration;_({servicesManager:t,configuration:void 0===n?{}:n})},getViewportModule:function(e){var t=e.commandsManager,n=e.appConfig;return function(e){var r=n.studyPrefetcher,o=r&&!r.enabled;return a.a.createElement(te,Q({},e,{onNewImage:function(e){e.refreshViewports=!1,t.runCommand("jumpToImage",e)},isStackPrefetchEnabled:o}))}},getToolbarModule:function(){return K},getCommandsModule:function(e){var t=e.servicesManager;return J({servicesManager:t})}},re=n(256),ae=n(1058),oe=n(257),ie=n(1059),se=n(1060),ce=n(1061),ue=n(1064),le=n(1062),fe=n(1057),pe=n(120),me=n(60),de=n.n(me),he=n(145),ve=n.n(he),ge=n(83);function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(e,t){if(e&&t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{automaticSilentRenew:!0,revokeAccessTokenOnSignout:!0,filterProtocolClaims:!0}),r=Object(o.createUserManager)(n);return Object(o.loadUser)(e,r),r}},we=!1;var Oe=n(97),Ie=n(648);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var De=L.a.reducers,Ce=L.a.localStorage,Te=L.a.sessionStorage,xe=[Ie.a],ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Oe.d;De.oidc=o.reducer;var je=Object(Oe.c)(De),Re=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Ce.loadState(),{},Te.loadState());window.config&&!0===window.config.disableServersCache&&delete Re.servers;var Ne=Object(Oe.e)(je,Re,ke(Oe.a.apply(void 0,xe)));Ne.subscribe((function(){Ce.saveState({preferences:Ne.getState().preferences}),Te.saveState({servers:Ne.getState().servers})}));var Me=Ne;function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=function(e){var t=e.commandsManager,n=L.a.actions,r=n.setViewportActive,a=n.setActiveViewportSpecificData,o={updateActiveViewport:function(e){var t=e.viewports,n=e.direction,a=t.viewportSpecificData,o=t.activeViewportIndex,i=Object.keys(a).length-1,s=o+n;s=(s=s>i?0:s)<0?i:s,Me.dispatch(r(s))},setWindowLevelPreset:function(e){var n=e.viewports,r=e.preset,a=Me.getState().preferences,o=void 0===a?{}:a,i=o.windowLevelData&&o.windowLevelData[r],s=i.window,c=i.level;s&&c&&t.runCommand("setWindowLevel",{viewports:n,window:s,level:c})},updateViewportDisplaySet:function(e){var t=e.viewports,n=e.direction,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(n,!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.viewportSpecificData)[t.activeViewportIndex],o=B.a.studyMetadataManager.get(r.StudyInstanceUID);if(o){var i=o.getDisplaySets(),s=i.findIndex((function(e){return e.displaySetInstanceUID===r.displaySetInstanceUID}));if(!(s<0)){var c=i[s+n];c&&Me.dispatch(a(c))}}}};return{definitions:{incrementActiveViewport:{commandFn:o.updateActiveViewport,storeContexts:["viewports"],options:{direction:1}},decrementActiveViewport:{commandFn:o.updateActiveViewport,storeContexts:["viewports"],options:{direction:-1}},windowLevelPreset1:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:1}},windowLevelPreset2:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:2}},windowLevelPreset3:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:3}},windowLevelPreset4:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:4}},windowLevelPreset5:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:5}},windowLevelPreset6:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:6}},windowLevelPreset7:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:7}},windowLevelPreset8:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:8}},windowLevelPreset9:{commandFn:o.setWindowLevelPreset,storeContexts:["viewports"],options:{preset:9}},nextViewportDisplaySet:{commandFn:o.updateViewportDisplaySet,storeContexts:["viewports"],options:{direction:1}},previousViewportDisplaySet:{commandFn:o.updateViewportDisplaySet,storeContexts:["viewports"],options:{direction:-1}}},defaultContext:"VIEWER"}},Ue={id:"generic-viewer-commands",get version(){return window.version},getCommandsModule:function(e){var t=e.commandsManager;return Le({commandsManager:t})}},Ve=n(260),Fe=n(6),Be=n.n(Fe),qe=n(178).a.MeasurementApi,ze=B.a.studyMetadataManager;function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=f.a.redux.actions.setViewportSpecificData,$e=f.a.measurements.MeasurementApi;function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="...",n=e.location,r=void 0===n?"":n,a=e.description,o=void 0===a?"":a,i=r+(o?" (".concat(o,")"):"");return i||t}function Ye(e,t,n){var r=[];return e.forEach((function(e){t.forEach((function(t){var a={displayText:"..."};e.timepointId===t.timepointId&&(a.displayText=n(e)),r.push(a)}))})),r}function Xe(e,t){var n=f.a.measurements.MeasurementApi.getConfiguration().measurementTools,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){return t=t.concat(e.childTools)})),t}(n),a=n.map((function(e){return{groupName:e.name,groupId:e.id,measurements:[]}}));return Object.keys(e).forEach((function(n){var o,i=e[n],s=r.find((function(e){return e.id===n})),c=s.options.measurementTable.displayFunction,u=(o="measurementNumber",i.reduce((function(e,t){return(e[t[o]]=e[t[o]]||[]).push(t),e}),{}));Object.keys(u).forEach((function(e){var n,r,o=u[e],i=o[0],l=i.measurementNumber,f=i.lesionNamingNumber,p=i.toolType,m=i.isReadOnly,d=i._id,h=(n=p,{hasWarnings:!(r=Ve.a.isToolSupported(n)),warningTitle:r?"":"Unsupported Tool",warningList:r?[]:["".concat(n," cannot be persisted at this time")]}),v=h.hasWarnings,g=h.warningTitle,y=h.warningList,b={itemNumber:f,label:Je(i),labels:i.labels,isSRText:i.isSRText,measurementId:d,measurementNumber:l,lesionNamingNumber:f,toolType:p,hasWarnings:v,isReadOnly:m,warningTitle:g,warningList:y,isSplitLesion:!1,data:Ye(o,t,c)};a.find((function(e){return e.groupId===s.toolGroup})).measurements.push(b)}))})),a.forEach((function(e){e.measurements.sort((function(e,t){return e.lesionNamingNumber>t.lesionNamingNumber?1:-1}))})),a}function Ke(e){return e&&e.length?[{label:"Study date:",key:"StudyDate",date:Be()(e[0].latestDate).format("DD-MMM-YY")}]:[]}var Ze=Object(u.b)((function(e){var t=e.timepointManager,n=e.servers,r=t.timepoints,a=t.measurements,o=function(e){if("dicomWeb"===e)return function(){return f.a.measurements.MeasurementApi.Instance.storeMeasurements()}}(n.servers.find((function(e){return!0===e.active})).type);return{timepoints:Ke(r),measurementCollection:Xe(a,r),timepointManager:e.timepointManager,viewports:e.viewports,saveFunction:o}}),(function(e,t){return{dispatchRelabel:function(e,n,r){e.persist();var a=r&&r.activeViewportIndex||0,o=d.a.getEnabledElements();if(!o||o.length<=a)f.a.log.error("Failed to find the enabled element");else{var i=n.toolType,s=n.measurementId,c=$e.Instance.tools[i].find((function(e){return e._id===s})),u=Object.assign({},c,{location:null});t.onRelabel&&t.onRelabel(u)}},dispatchEditDescription:function(e,n,r){e.persist();var a=r&&r.activeViewportIndex||0,o=d.a.getEnabledElements();if(!o||o.length<=a)f.a.log.error("Failed to find the enabled element");else{var i=n.toolType,s=n.measurementId,c=$e.Instance.tools[i].find((function(e){return e._id===s}));t.onEditDescription&&t.onEditDescription(c)}},dispatchJumpToRowItem:function(t,n,r,a){(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{invertViewportTimepointsOrder:!1,childToolKey:null},a=t.layout.viewports,o=t.activeViewportIndex,i=a[o];if(i.vtk){var s=new Error("Measurements are not supported by the MPR mode."),c=jn.services,u=c.UINotificationService,l=c.LoggerService;return l.error({error:s,message:s.message}),u.show({title:"Measurements panel",message:s.message,type:"warning",autoClose:!0}),{viewportSpecificData:[],layout:[]}}var f=t.layout.viewports.length,p=n.timepoints.length,m=n.measurements,d=n.timepoints,h=Math.min(p,f),v=e.toolType,g=e.measurementNumber;r.invertViewportTimepointsOrder&&d.reverse();for(var y=m[v],b=[],S=function(e){var t=d[e].timepointId,n=y.find((function(e){return e.timepointId===t&&e.measurementNumber===g}));if(!n)return b.push(null),"continue";var a=n,o=qe.getToolConfiguration(v).tool;if(r.childToolKey)a=n[r.childToolKey];else if(Array.isArray(o.childTools)){var i=o.childTools.find((function(e){return!!n[e]}));a=n[i]}b.push(a)},w=0;w<h;w++)S(w);var O=function(e,t){if(e.images&&e.images.length)return e.images.find((function(e){return e.getSOPInstanceUID()===t}))},I=[];return b.forEach((function(e,n){if(e){var r=ze.get(e.StudyInstanceUID);if(!r)throw new Error("Study not found.");var a=r.findDisplaySet((function(t){return O(t,e.SOPInstanceUID)}));if(!a)throw new Error("Display set not found.");a.SOPInstanceUID=e.SOPInstanceUID,e.frameIndex&&(a.frameIndex=e.frameIndex),n=(n+t.activeViewportIndex)%f,I.push({viewportIndex:n,displaySet:a})}})),{viewportSpecificData:I,layout:[]}})(t,n,r,e,a).viewportSpecificData.forEach((function(t){var n=t.viewportIndex,r=t.displaySet;e(Ge(n,r))}));var o=t.toolType,i=t.measurementNumber,s=$e.Instance;Object.keys(s.tools).forEach((function(e){s.tools[e].forEach((function(e){e.active=!1}))})),s.tools[o].filter((function(e){return e.measurementNumber===i})).forEach((function(e){e.active=!0})),s.syncMeasurementsAndToolData(),d.a.getEnabledElements().forEach((function(e){e.image&&d.a.updateImage(e.element)}))}}}),(function(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({timepoints:e.timepoints,saveFunction:e.saveFunction,measurementCollection:e.measurementCollection,onSaveComplete:n.onSaveComplete,selectedMeasurementNumber:n.selectedMeasurementNumber},t,{onItemClick:function(n,r){var a=e.viewports,o=e.timepointManager;t.dispatchJumpToRowItem(r,a,o,{invertViewportTimepointsOrder:!1,childToolKey:null})},onRelabelClick:function(n,r){var a=e.viewports;t.dispatchRelabel(n,r,a)},onEditDescriptionClick:function(n,r){var a=e.viewports;t.dispatchEditDescription(n,r,a)},onDeleteClick:function(e,t){f.a.measurements.MeasurementHandlers.onRemoved({detail:{toolType:t.toolType,measurementData:{_id:t.measurementId,lesionNamingNumber:t.lesionNamingNumber,measurementNumber:t.measurementNumber}}})}})}))(p.n),Qe=n(144),et=n.n(Qe),tt=n(48),nt=n.n(tt),rt=n(215);n(1002);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt,ft,pt,mt=function(e){function t(){return ot(this,t),st(this,ct(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement(rt.CSSTransition,{in:this.props.displayComponent,appear:!0,timeout:500,classNames:"labelling",onExited:this.props.onTransitionExit},this.props.children)}}])&&it(n.prototype,r),o&&it(n,o),t}(r.Component);lt=mt,ft="propTypes",pt={children:c.a.node.isRequired,displayComponent:c.a.bool.isRequired,onTransitionExit:c.a.func.isRequired},ft in lt?Object.defineProperty(lt,ft,{value:pt,enumerable:!0,configurable:!0,writable:!0}):lt[ft]=pt;var dt=["Abdomen/Chest Wall","Adrenal","Bladder","Bone","Brain","Breast","Colon","Esophagus","Extremities","Gallbladder","Kidney","Liver","Lung","Lymph Node","Mediastinum/Hilum","Muscle","Neck","Other Soft Tissue","Ovary","Pancreas","Pelvis","Peritoneum/Omentum","Prostate","Retroperitoneum","Small Bowel","Spleen","Stomach","Subcutaneous"].map((function(e){return{label:e,value:e}}));n(1006);function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t){return!t||"object"!==ht(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wt=function(e){function t(){return vt(this,t),yt(this,bt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"simpleDialog ".concat(this.props.rootClass),ref:this.props.componentRef,style:this.props.componentStyle},a.a.createElement("form",{onSubmit:this.props.onConfirm},a.a.createElement("div",{className:"header"},a.a.createElement("span",{className:"closeBtn",onClick:this.props.onClose},a.a.createElement("span",{className:"closeIcon"},"x")),a.a.createElement("h4",{className:"title"},this.props.headerTitle)),a.a.createElement("div",{className:"content"},this.props.children),a.a.createElement("div",{className:"footer"},a.a.createElement("button",{type:"button",className:"btn btn-cancel",onClick:this.props.onClose},"Cancel"),a.a.createElement("button",{type:"button",className:"btn btn-confirm",onClick:this.props.onConfirm},"Confirm"))))}}])&&gt(n.prototype,r),o&&gt(n,o),t}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(wt,"defaultProps",{componentStyle:{},rootClass:""}),wt.propTypes={headerTitle:c.a.string.isRequired,onClose:c.a.func.isRequired,onConfirm:c.a.func.isRequired};var Ot=wt;n(1007);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xt=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Pt(t).call(this,e),n=!a||"object"!==It(a)&&"function"!=typeof a?Dt(r):a,Tt(Dt(n),"onClose",(function(){n.props.onCancel()})),Tt(Dt(n),"onConfirm",(function(e){e.preventDefault(),n.props.onUpdate(n.state.description)})),Tt(Dt(n),"handleChange",(function(e){n.setState({description:e.target.value})})),n.state={description:e.measurementData.description||""},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){this.props.description!==e.description&&this.setState({description:this.props.description})}},{key:"render",value:function(){return a.a.createElement(Ot,{headerTitle:"Edit Description",onClose:this.onClose,onConfirm:this.onConfirm,rootClass:"editDescriptionDialog"},a.a.createElement("input",{value:this.state.description,className:"simpleDialogInput",id:"description",autoComplete:"off",autoFocus:!0,onChange:this.handleChange}))}}])&&Et(n.prototype,r),o&&Et(n,o),t}(r.Component);Tt(xt,"propTypes",{description:c.a.string,measurementData:c.a.object.isRequired,onCancel:c.a.func.isRequired,onUpdate:c.a.func.isRequired});n(1008);function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(n,!0).forEach((function(t){Rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Mt=function(e){var t=e.measurementData,n=e.editLocation,o=e.editDescription,i=e.skipAddLabelButton,s=e.updateLabelling,c=e.labellingDoneCallback,u=e.editDescriptionOnDialog,l=Nt(Object(r.useState)(),2),f=l[0],m=l[1],d=Nt(Object(r.useState)(!0),2),h=d[0],v=d[1],g=Object(r.useRef)(),y=Nt(Object(r.useState)({measurementData:t,editLocation:n,editDescription:o,skipAddLabelButton:i}),2),b=y[0],S=y[1];Object(r.useEffect)((function(){var e=nt()(t);o&&(e.description=void 0),n&&(e.location=void 0);var r=n;o||n||(r=!0),S((function(t){return jt({},t,{editLocation:r,measurementData:e})}))}),[o,n,t]),Object(r.useEffect)((function(){g.current&&g.current.focus()}),[b]);var w=function(e){return S((function(e){return jt({},e,{editLocation:!0})}))},O=function(){g.current.focus(),S((function(e){return jt({},e,{editDescription:!0})}))},I=function(){var e=nt()(b).description,t=void 0===e?"":e;g.current.value=t,S((function(e){return jt({},e,{editDescription:!1})}))},E=function(e){"Enter"===e.key&&P()},P=function(){var e=g.current.value;s({description:e}),S((function(t){return jt({},t,{description:e,editDescription:!1})}))},D=function(e,t){var n=t.value,r=t.label;s({location:n}),S((function(e){return jt({},e,{editLocation:!1,measurementData:jt({},e.measurementData,{location:n,locationLabel:r})})}))},C=function(){S((function(e){return jt({},e,{skipAddLabelButton:!0,editLocation:!1})}))},T=function(){return v(!1)};return u?a.a.createElement(xt,{onCancel:c,onUpdate:function(e){s({description:e}),c()},measurementData:b.measurementData}):a.a.createElement(mt,{displayComponent:h,onTransitionExit:c},a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"labellingComponent ".concat(b.editDescription&&"editDescription"),onMouseLeave:function(){return m(setTimeout(T,1e3))},onMouseEnter:function(){f&&(clearTimeout(f),m(null))}},function(){var e=b.skipAddLabelButton,t=b.editLocation,n=b.measurementData,r=n.description,o=n.locationLabel,i=n.location;return e?t?a.a.createElement(p.x,{items:dt,columns:1,onSelected:D,selectTreeFirstTitle:"Assign Label"}):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"checkIconWrapper",onClick:T},a.a.createElement(p.j,{name:"check",className:"checkIcon"})),a.a.createElement("div",{className:"locationDescriptionWrapper"},a.a.createElement("div",{className:"location"},o),a.a.createElement("div",{className:"description"},a.a.createElement("input",{id:"descriptionInput",ref:g,defaultValue:r||"",autoComplete:"off",onKeyPress:E}))),a.a.createElement("div",{className:"commonButtons"},a.a.createElement("button",{type:"button",className:"commonButton left",onClick:w},"Relabel"),a.a.createElement("button",{type:"button",className:"commonButton right",onClick:O},r?"Edit ":"Add ","Description")),a.a.createElement("div",{className:"editDescriptionButtons"},a.a.createElement("button",{type:"button",className:"commonButton left",onClick:I},"Cancel"),a.a.createElement("button",{type:"button",className:"commonButton right",onClick:P},"Save"))):a.a.createElement("button",{type:"button",className:"addLabelButton",onClick:C},i?"Edit":"Add"," Label")}())))};Mt.propTypes={measurementData:c.a.object.isRequired,labellingDoneCallback:c.a.func.isRequired,updateLabelling:c.a.func.isRequired,initialTopDistance:c.a.number,skipAddLabelButton:c.a.bool,editLocation:c.a.bool,editDescription:c.a.bool,editDescriptionOnDialog:c.a.bool},Mt.defaultProps={skipAddLabelButton:!1,editLocation:!1,editDescription:!1,editDescriptionOnDialog:!1};var _t=Mt,At=["Angle","Bidirectional","Length","FreehandMouse","EllipticalRoi","CircleRoi","RectangleRoi"],Lt=function(e){var t=e.onSetLabel,n=e.onSetDescription,r=e.isTouchEvent,o=e.eventData,i=e.onClose,s=e.onDelete,c=[{label:"Delete measurement",actionType:"Delete",action:function(e){var t=e.nearbyToolData,n=e.eventData;return s(t,n)}},{label:"Relabel",actionType:"setLabel",action:function(e){var n=e.nearbyToolData,r=e.eventData,a=n.tool;t(r,a)}},{actionType:"setDescription",action:function(e){var t=e.nearbyToolData,r=e.eventData,a=t.tool;n(r,a)}}],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=kn.runCommand("getNearbyToolData",{element:e.element,canvasCoordinates:e.currentPoints.canvas,availableToolTypes:At});if(!t||!n||"arrowAnnotate"!==n.toolType){var r=[];return n&&c.forEach((function(t){t.params={eventData:e,nearbyToolData:n},"setDescription"===t.actionType&&(t.label="".concat(n.tool.description?"Edit":"Add"," Description")),r.push(t)})),r}}(o,r);return a.a.createElement("div",{className:"ToolContextMenu"},a.a.createElement(p.d,{items:u,onClick:function(e){(0,e.action)(e.params),i&&i()}}))};Lt.propTypes={isTouchEvent:c.a.bool.isRequired,eventData:c.a.object,onClose:c.a.func,onSetDescription:c.a.func,onSetLabel:c.a.func,onDelete:c.a.func},Lt.defaultProps={isTouchEvent:!1};var Ut=Lt;function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(n,!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qt=f.a.measurements.MeasurementHandlers,zt=qt.onAdded,Ht=qt.onRemoved,Wt=qt.onModified,Gt={added:zt,removed:Ht,modified:et()((function(e){return Wt(e)}),300)};function $t(e){var t=e.servicesManager,n=e.commandsManager,r=(e.configuration,t.services.UIDialogService),a=function(e,t){return Gt[e](t)},o=a.bind(this,"added"),i=a.bind(this,"removed"),s=a.bind(this,"modified"),c=a.bind(this,"labelmapModified"),u=function(e){return{x:e&&e.currentPoints.client.x||0,y:e&&e.currentPoints.client.y||0}},l=function(e,t,a){r?r.create(Ft({id:"labelling",isDraggable:!1,showOverlay:!0,centralize:!0,content:_t,contentProps:Ft({measurementData:a,labellingDoneCallback:function(){return r.dismiss({id:"labelling"})},updateLabelling:function(e){return function(e,t){var r=e.location,a=e.description,o=e.response;r&&(t.location=r),t.description=a||"",o&&(t.response=o),n.runCommand("updateTableWithNewMeasurementData",t)}(e,a)}},t)},e)):console.warn("Unable to show dialog; no UI Dialog Service available.")},f=function(e){r?r.create({eventData:e.detail,content:Ut,contentProps:{isTouchEvent:!0}}):console.warn("Unable to show dialog; no UI Dialog Service available.")},p=function(){return m()},m=function(){r?(r.dismiss({id:"context-menu"}),r.dismiss({id:"labelling"})):console.warn("Unable to show dialog; no UI Dialog Service available.")},h=function(e){3===e.detail.event.which?function(e){r?(r.dismiss({id:"context-menu"}),r.create({id:"context-menu",isDraggable:!1,preservePosition:!1,defaultPosition:u(e.detail),content:Ut,contentProps:{eventData:e.detail,onDelete:function(e,t){var r=t.element;n.runCommand("removeToolState",{element:r,toolType:e.toolType,tool:e.tool})},onClose:function(){return r.dismiss({id:"context-menu"})},onSetLabel:function(e,t){l({centralize:!0,isDraggable:!1},{skipAddLabelButton:!0,editLocation:!0},t)},onSetDescription:function(e,t){l({defaultPosition:u(e)},{editDescriptionOnDialog:!0},t)}}})):console.warn("Unable to show dialog; no UI Dialog Service available.")}(e):m()};d.a.events.addEventListener(d.a.EVENTS.ELEMENT_ENABLED,(function(e){var t=e.detail.element;t.addEventListener(v.a.EVENTS.MEASUREMENT_ADDED,o),t.addEventListener(v.a.EVENTS.MEASUREMENT_REMOVED,i),t.addEventListener(v.a.EVENTS.MEASUREMENT_MODIFIED,s),t.addEventListener(v.a.EVENTS.LABELMAP_MODIFIED,c),t.addEventListener(v.a.EVENTS.TOUCH_PRESS,f),t.addEventListener(v.a.EVENTS.MOUSE_CLICK,h),t.addEventListener(v.a.EVENTS.TOUCH_START,p)})),d.a.events.addEventListener(d.a.EVENTS.ELEMENT_DISABLED,(function(e){var t=e.detail.element;t.removeEventListener(v.a.EVENTS.MEASUREMENT_ADDED,o),t.removeEventListener(v.a.EVENTS.MEASUREMENT_REMOVED,i),t.removeEventListener(v.a.EVENTS.MEASUREMENT_MODIFIED,s),t.removeEventListener(v.a.EVENTS.LABELMAP_MODIFIED,c),t.removeEventListener(v.a.EVENTS.TOUCH_PRESS,f),t.removeEventListener(v.a.EVENTS.MOUSE_CLICK,h),t.removeEventListener(v.a.EVENTS.TOUCH_START,p)}))}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(n,!0).forEach((function(t){Xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kt={id:"measurements-table",get version(){return window.version},preRegistration:function(e){var t=e.servicesManager,n=e.commandsManager,r=e.configuration;$t({servicesManager:t,commandsManager:n,configuration:void 0===r?{}:r})},getPanelModule:function(e){var t=e.servicesManager,n=e.commandsManager,r=t.services,o=r.UINotificationService,i=r.UIDialogService,s=function(e,t){i?(i.dismiss({id:"labelling"}),i.create({id:"labelling",centralize:!0,isDraggable:!1,showOverlay:!0,content:_t,contentProps:Yt({measurementData:t,labellingDoneCallback:function(){return i.dismiss({id:"labelling"})},updateLabelling:function(e){var r=e.location,a=e.description,o=e.response;t.location=r||t.location,t.description=a||"",t.response=o||t.response,n.runCommand("updateTableWithNewMeasurementData",t)}},e)})):console.warn("Unable to show dialog; no UI Dialog Service available.")};return{menuOptions:[{icon:"list",label:"Measurements",target:"measurement-panel"}],components:[{id:"measurement-panel",component:function(){return a.a.createElement(Ze,{onRelabel:function(e){return s({editLocation:!0,skipAddLabelButton:!0},e)},onEditDescription:function(e){return s({editDescriptionOnDialog:!0},e)},onSaveComplete:function(e){o&&o.show(e)}})}}],defaultContext:["VIEWER"]}}},Zt=n(82),Qt=n(649),en=n(185),tn=n(274),nn=function(e){var t=e.progress,n=e.animationDuration;return a.a.createElement("div",{style:{background:"#29d",height:2,left:0,marginLeft:"".concat(100*(-1+t),"%"),position:"fixed",top:0,transition:"margin-left ".concat(n,"ms linear"),width:"100%",zIndex:1031}},a.a.createElement("div",{style:{boxShadow:"0 0 10px #29d, 0 0 5px #29d",display:"block",height:"100%",opacity:1,position:"absolute",right:0,transform:"rotate(3deg) translate(0px, -4px)",width:100}}))},rn=function(e){var t=e.children,n=e.isFinished,r=e.animationDuration;return a.a.createElement("div",{style:{opacity:n?0:1,pointerEvents:"none",transition:"opacity ".concat(r,"ms linear")}},t)};n(1010),n(1011),n(1012);function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?ln(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mn=Object(p.L)((function(){return Object(p.M)((function(){return n.e(2).then(n.bind(null,1148))}))})),dn=function(e){function t(){var e,n;on(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return pn(ln(n=cn(this,(e=un(t)).call.apply(e,[this].concat(a)))),"state",{isLoading:!1}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(t,n){e.props.setContext&&e.props.setContext(window.location.pathname)}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.userManager,i=this.context.appConfig,s=void 0===i?{}:i;if(r&&(!n||n.expired)){var c=this.props.location,u=c.pathname,l=c.search;return"/callback"!==u&&sessionStorage.setItem("ohif-redirect-to",JSON.stringify({pathname:u,search:l})),a.a.createElement(Zt.c,null,a.a.createElement(Zt.a,{exact:!0,path:"/silent-refresh.html",onEnter:en.d}),a.a.createElement(Zt.a,{exact:!0,path:"/logout-redirect",render:function(){return a.a.createElement(o.SignoutCallbackComponent,{userManager:r,successCallback:function(){return console.log("Signout successful")},errorCallback:function(e){console.warn(e),console.warn("Signout failed")}})}}),a.a.createElement(Zt.a,{path:"/callback",render:function(){return a.a.createElement(mn,{userManager:r})}}),a.a.createElement(Zt.a,{path:"/login",component:function(){var t=new URLSearchParams(e.props.location.search),n=t.get("iss"),a=t.get("login_hint"),o=t.get("target_link_uri");return n!==(null!==s.oidc&&s.oidc[0].authority)?(console.error("iss of /login does not match the oidc authority"),null):(r.removeUser().then((function(){if(null!==o){var e={pathname:new URL(o).pathname};sessionStorage.setItem("ohif-redirect-to",JSON.stringify(e))}else sessionStorage.setItem("ohif-redirect-to",JSON.stringify({pathname:"/"}));null!==a?r.signinRedirect({login_hint:a}):r.signinRedirect()})),null)}}),a.a.createElement(Zt.a,{component:function(){return r.getUser().then((function(e){e?r.signinSilent():r.signinRedirect()})),null}}))}var f=en.a(s),m=this.props.location.pathname,d=!f.find((function(e){return Object(Zt.e)(m,{path:e.path,exact:!0})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Qt.a,{isAnimating:this.state.isLoading},(function(e){var t=e.isFinished,n=e.progress,r=e.animationDuration;return a.a.createElement(rn,{isFinished:t,animationDuration:r},a.a.createElement(nn,{progress:n,animationDuration:r}))})),a.a.createElement(Zt.a,{exact:!0,path:"/silent-refresh.html",onEnter:en.d}),a.a.createElement(Zt.a,{exact:!0,path:"/logout-redirect.html",onEnter:en.d}),!d&&f.map((function(t){var n=t.path,r=t.Component;return a.a.createElement(Zt.a,{key:n,exact:!0,path:n},(function(t){var n=t.match;return a.a.createElement(rt.CSSTransition,{in:null!==n,timeout:300,classNames:"fade",unmountOnExit:!0,onEnter:function(){e.setState({isLoading:!0})},onEntered:function(){e.setState({isLoading:!1})}},null===n?a.a.createElement(a.a.Fragment,null):a.a.createElement(p.f,{context:n.url},a.a.createElement(r,{match:n,location:e.props.location})))}))})),d&&a.a.createElement(tn.a,null))}}])&&sn(n.prototype,r),i&&sn(n,i),t}(r.Component);pn(dn,"contextType",ge.c),pn(dn,"propTypes",{history:c.a.object.isRequired,user:c.a.object,setContext:c.a.func,userManager:c.a.object,location:c.a.object});var hn=Object(u.b)((function(e){return{user:e.oidc.user}}),null)(dn),vn=Object(p.J)(Object(Zt.g)(hn)),gn=n(214),yn=n(255),bn=n(278);function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return kn})),n.d(t,"c",(function(){return Tn})),n.d(t,"d",(function(){return Rn})),n.d(t,"e",(function(){return jn}));var Tn,xn={getAppState:function(){return Me.getState()},getActiveContexts:function(){return Object(gn.a)(Me.getState())}},kn=new re.a(xn),jn=new ae.a,Rn=new oe.a(kn,jn);window.store=Me,window.ohif=window.ohif||{},window.ohif.app={commandsManager:kn,hotkeysManager:Rn,servicesManager:jn,extensionManager:Tn};var Nn=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=En(t).call(this,e))||"object"!==Sn(a)&&"function"!=typeof a?Pn(r):a,Cn(Pn(n),"_appConfig",void 0),Cn(Pn(n),"_userManager",void 0);var o=e.config,i=e.defaultExtensions;n._appConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(n,!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{showStudyList:!0,cornerstoneExtensionConfig:{},extensions:[],routerBasename:"/"},{},"function"==typeof o?o({servicesManager:jn}):o);var s,c,u,l,p=n._appConfig,m=p.servers,h=p.hotkeys,v=p.cornerstoneExtensionConfig,g=p.extensions,y=p.oidc;return s=n._appConfig,(u=window.process)&&u.env&&u.env.PUBLIC_URL&&(c=u.env.PUBLIC_URL),window.info={version:"0.0.50",homepage:c},window.cornerstone=d.a,window.cornerstoneWADOImageLoader=de.a,de.a.external.cornerstone=d.a,de.a.external.dicomParser=ve.a,f.a.user.getAccessToken=function(){var e=window.store.getState();if(e.oidc&&e.oidc.user)return e.oidc.user.access_token},f.a.errorHandler.getHTTPErrorHandler=function(){return s.httpErrorHandler},de.a.configure({beforeSend:function(e){var t=f.a.DICOMWeb.getAuthorizationHeader();t.Authorization&&e.setRequestHeader("Authorization",t.Authorization)},errorInterceptor:function(e){"function"==typeof s.httpErrorHandler&&s.httpErrorHandler(e)}}),n.initUserManager(y),l=[ie.a,se.a,ce.a,ue.a,le.a],jn.registerServices(l),function(e,t,n){Tn=new fe.a({commandsManager:kn,servicesManager:jn,appConfig:n,api:{contexts:ge.b,hooks:{useAppContext:ge.d}}});var r=[Ue,[ne,t]];!0!==n.disableMeasurementPanel&&r.push(Kt);var a=r.concat(e);Tn.registerExtensions(a)}([].concat(wn(i),wn(g)),v,n._appConfig),function(e){var t=JSON.parse(localStorage.getItem("hotkey-definitions")||"{}");t&&Object.keys(t).length>0?Rn.setHotkeys(t):Rn.setHotkeys(e);Rn.setDefaultHotKeys(e)}(h),function(e){e&&B.a.addServers(e,Me)}(m),function(){var e={maxWebWorkers:Math.max(Math.min(navigator.hardwareConcurrency-1,6),1),startWebWorkersOnDemand:!0,taskConfiguration:{decodeTask:{initializeCodecsOnStartup:!1,usePDFJS:!1,strict:!1}}};we||(de.a.webWorkerManager.initialize(e),we=!0)}(),n}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this._appConfig,t=e.whiteLabeling,n=e.routerBasename,r=jn.services,s=r.UINotificationService,c=r.UIDialogService,f=r.UIModalService,m=(r.MeasurementService,r.LoggerService);return this._userManager?a.a.createElement(p.f,{context:"App"},a.a.createElement(u.a,{store:Me},a.a.createElement(ge.a,{config:this._appConfig},a.a.createElement(i.a,{i18n:pe.a},a.a.createElement(o.OidcProvider,{store:Me,userManager:this._userManager},a.a.createElement(bn.a.Provider,{value:this._userManager},a.a.createElement(l.a,{basename:n},a.a.createElement(yn.a.Provider,{value:t},a.a.createElement(p.m,{service:m},a.a.createElement(p.z,{service:s},a.a.createElement(p.e,{service:c},a.a.createElement(p.o,{modal:p.p,service:f},a.a.createElement(vn,{userManager:this._userManager}))))))))))))):a.a.createElement(p.f,{context:"App"},a.a.createElement(u.a,{store:Me},a.a.createElement(ge.a,{config:this._appConfig},a.a.createElement(i.a,{i18n:pe.a},a.a.createElement(l.a,{basename:n},a.a.createElement(yn.a.Provider,{value:t},a.a.createElement(p.m,{service:m},a.a.createElement(p.z,{service:s},a.a.createElement(p.e,{service:c},a.a.createElement(p.o,{modal:p.p,service:f},a.a.createElement(vn,null)))))))))))}},{key:"initUserManager",value:function(e){if(e&&e.length){var t=this._appConfig.oidc[0],n=window.location,r=n.protocol,a=n.host,o=this._appConfig.routerBasename,i="".concat(r,"//").concat(a).concat(o),s=t.redirect_uri||"/callback",c=t.silent_redirect_uri||"/silent-refresh.html",u=t.post_logout_redirect_uri||"/",l=Object.assign({},t,{redirect_uri:Mn(s,i),silent_redirect_uri:Mn(c,i),post_logout_redirect_uri:Mn(u,i)});this._userManager=Se(Me,l)}}}])&&In(n.prototype,r),s&&In(n,s),t}(r.Component);function Mn(e,t){return function(e){return e.includes("http://")||e.includes("https://")}(e)?e:("/"===t[t.length-1]&&(t=t.slice(0,t.length-1)),t+e)}Cn(Nn,"propTypes",{config:c.a.oneOfType([c.a.func,c.a.shape({routerBasename:c.a.string.isRequired,oidc:c.a.array,whiteLabeling:c.a.shape({createLogoComponentFn:c.a.func}),extensions:c.a.array})]).isRequired,defaultExtensions:c.a.array}),Cn(Nn,"defaultProps",{config:{showStudyList:!0,oidc:[],extensions:[]},defaultExtensions:[]});var _n=Nn;t.b=_n},,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n.n(r),o=(n(1009),n(130)),i=n(83);function s(e){var t=e.message,n=void 0===t?"Sorry, this page does not exist.":t,r=e.showGoBackButton,s=void 0===r||r,c=Object(i.d)();return a.a.createElement("div",{className:"not-found"},a.a.createElement("div",null,a.a.createElement("h4",null,n),s&&c.appConfig.showStudyList&&a.a.createElement("h5",null,a.a.createElement(o.b,{to:"/"},"Go back to the Study List"))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(210);n(748);function c(e){var t=e.studies,n=e.onThumbnailClick,r=e.onThumbnailDoubleClick,o=e.supportsDrag,i=e.showThumbnailProgressBar;return a.a.createElement("div",{className:"study-browser"},a.a.createElement("div",{className:"scrollable-study-thumbnails"},t.map((function(e,t){var c=e.StudyInstanceUID;return e.thumbnails.map((function(e,u){var l=e.active,f=e.altImageText,p=e.displaySetInstanceUID,m=e.imageId,d=e.derivedDisplaySetsNumber,h=e.numImageFrames,v=e.SeriesDescription,g=e.SeriesNumber,y=e.hasWarnings,b=e.hasDerivedDisplaySets;return a.a.createElement("div",{key:e.displaySetInstanceUID,className:"thumbnail-container","data-cy":"thumbnail-list"},a.a.createElement(s.a,{active:l,supportsDrag:o,key:"".concat(t,"_").concat(u),id:"".concat(t,"_").concat(u),StudyInstanceUID:c,altImageText:f,imageId:m,derivedDisplaySetsNumber:d,displaySetInstanceUID:p,numImageFrames:h,SeriesDescription:v,SeriesNumber:g,hasWarnings:y,hasDerivedDisplaySets:b,onClick:n.bind(void 0,p),onDoubleClick:r,showProgressBar:i}))}))})).flat()))}var u=function(){};c.propTypes={studies:i.a.arrayOf(i.a.shape({StudyInstanceUID:i.a.string.isRequired,thumbnails:i.a.arrayOf(i.a.shape({altImageText:i.a.string,displaySetInstanceUID:i.a.string.isRequired,imageId:i.a.string,derivedDisplaySetsNumber:i.a.number,numImageFrames:i.a.number,SeriesDescription:i.a.string,SeriesNumber:i.a.number,stackPercentComplete:i.a.number}))})).isRequired,supportsDrag:i.a.bool,onThumbnailClick:i.a.func,onThumbnailDoubleClick:i.a.func,showThumbnailProgressBar:i.a.bool},c.defaultProps={studies:[],supportsDrag:!0,onThumbnailClick:u,onThumbnailDoubleClick:u,showThumbnailProgressBar:!0}},function(e,t,n){"use strict";var r="org.ohif.dicom-sr";t.a=r;"".concat(r,".sopClassHandlerModule.").concat("dicom-sr")},function(e,t,n){"use strict";n(1013);var r=n(14),a=n(0),o=n.n(a);t.a=function(){return o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"header-brand",href:"http://ohif.org"},o.a.createElement(r.j,{name:"ohif-logo",className:"header-logo-image"}),o.a.createElement(r.j,{name:"ohif-text-logo",className:"header-logo-text"}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r).a.createContext();t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"name":"@ohif/i18n","version":"0.53.0","description":"Internationalization library for The OHIF Viewer","author":"OHIF","license":"MIT","repository":"OHIF/Viewers","main":"dist/index.umd.js","module":"src/index.js","engines":{"node":">=10","npm":">=6","yarn":">=1.16.0"},"files":["dist","README.md"],"publishConfig":{"access":"public"},"scripts":{"dev":"cross-env NODE_ENV=development webpack --config .webpack/webpack.dev.js --watch --debug --output-pathinfo","dev:i18n":"yarn run dev","build":"cross-env NODE_ENV=production webpack --config .webpack/webpack.prod.js","build:package":"yarn run build","prepublishOnly":"yarn run build","pullTranslations":"./pullTranslations.sh","test:unit":"echo \'platform/i18n: missing unit tests\'","test:unit:ci":"echo \'platform/i18n: missing unit tests\'"},"peerDependencies":{"i18next":"^17.0.3","i18next-browser-languagedetector":"^3.0.1","react":"^16.8.6","react-dom":"^16.8.6","react-i18next":"^10.11.0"},"dependencies":{"@babel/runtime":"^7.5.5","classnames":"^2.2.6","i18next-locize-backend":"^2.0.0","locize-editor":"^2.0.0","locize-lastused":"^1.1.0","rollup-plugin-json":"^4.0.0"},"devDependencies":{"i18next":"^15.1.3","i18next-browser-languagedetector":"^3.0.1","locize-cli":"^4.8.0","react-i18next":"^10.11.0"}}')},function(e){e.exports=JSON.parse('{"Browser":"Browser","Build Number":"Build Number","Latest Master Commits":"Letzter Master Commit","More details":"Mehr Details","Name":"Name","OHIF Viewer - About":"OHIF Viewer","OS":"OS","Report an issue":"Problem melden","Repository URL":"Repository URL","Value":"Wert","Version Information":"Versionsinformation","Visit the forum":"Das Forum besuchen"}')},function(e){e.exports=JSON.parse('{"Acquired":"Akquiriert","Angle":"Winkel","Axial":"Axial","Bidirectional":"Bidirektional","Brush":"Pinsel","CINE":"CINE","Cancel":"Abbruch","Circle":"Kreis","Clear":"Entfernen","Coronal":"Coronal","Crosshairs":"Kreuzlinien","Download":"Herunterladen","Ellipse":"Ellipse","Elliptical":"Elliptisch","Flip H":"Spiegeln H","Flip V":"Spiegeln V","Freehand":"Freihand","Invert":"Invertieren","Layout":"$t(Common:Layout)","Length":"Länge","Levels":"Levels","Magnify":"Vergrössern","Manual":"Manuell","Measurements":"Messungen","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Verschieben","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Messung","ROI Window":"ROI Fenster","Rectangle":"Rechteck","Reset":"$t(Common:Reset)","Reset to Defaults":"Standardwerte","Rotate Right":"Rechts drehen","Sagittal":"Sagittal","Save":"Speichern","Stack Scroll":"Stapel","Stop":"$t(Common:Stop)","Themes":"Themes","Zoom":"Zoom"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Zum ersten $t(Common:Image)","Skip to last image":"Zum letzten $t(Common:Image)","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Close":"Schliessen","Image":"Bild","Layout":"Layout","Measurements":"Messungen","More":"Mehr","Next":"Nächstes","Play":"Abspielen","Previous":"Zurück","Reset":"Zurücksetzen","RowsPerPage":"Zeilen pro Seite","Series":"Serie","Show":"Zeigen","Stop":"Stopp","StudyDate":"Studien Datum"}')},function(e){e.exports=JSON.parse('{"Clear dates":"Zeiträume löschen","End Date":"Bis","Start Date":"Ab"}')},function(e){e.exports=JSON.parse('{"About":"Über","Back to Viewer":"Zurück zum Viewer","INVESTIGATIONAL USE ONLY":"NICHT ZUR BEFUNDUNG FREIGEGEBEN","Options":"Optionen","Preferences":"Einstellungen","Study list":"Studienliste"}')},function(e){e.exports=JSON.parse('{"Criteria nonconformities":"Kriterien für Nichtkonformität","Delete":"Löschen","Description":"Beschreibung","MAX":"MAX","NonTargets":"NichtZiele","Relabel":"Umbenennen","Targets":"Ziele"}')},function(e){e.exports=JSON.parse('{"AccessionNumber":"Accession #","Empty":"Leer","MRN":"MRN","Modality":"Modalität","PatientName":"Patientenname","StudyDate":"Studiendatum","StudyDescription":"Beschreibung","StudyList":"Studienliste"}')},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","No hotkeys found":"Keine Tastaturkürzel konfiguriert. Tastaturkürzel können in der app-config.js Datei der Anwendung konfiguriert werden.","Reset to Defaults":"$t(Buttons:Reset to Defaults)","ResetDefaultMessage":"Einstellungen erfolgreich zurückgesetzt. <br /> Sie müssen <strong>Speichern</strong> um dieses abzuschliessen.","Save":"$t(Buttons:Save)","SaveMessage":"Einstellungen gesichert","User Preferences":"Benutzereinstellungen"}')},function(e){e.exports=JSON.parse('{"emptyFilenameError":"Dateiname kann nicht leer sein.","fileType":"Dateityp","filename":"Dateiname","formTitle":"Bitte geben Sie die Dimensionen, Dateiname und den gewünschten Dateityp an.","imageHeight":"Bildhöhe (px)","imagePreview":"Bild Vorschau","imageWidth":"Bildbreite (px)","keepAspectRatio":"Seitenverhältnis erbehalten","loadingPreview":"Bildvorschau laden...","minHeightError":"Die minimale Höhe beträgt 100 Pixel.","minWidthError":"Die minimale Breiete beträgt 100 Pixel.","showAnnotations":"Annotationen anzeigen"}')},function(e){e.exports=JSON.parse('{"Browser":"Browser","Build Number":"Build Number","Latest Master Commits":"Latest Master Commits","More details":"More details","Name":"Name","OHIF Viewer - About":"OHIF Viewer - About","OS":"OS","Report an issue":"Report an issue","Repository URL":"Repository URL","Value":"Value","Version Information":"Version Information","Visit the forum":"Visit the forum"}')},function(e){e.exports=JSON.parse('{"Acquired":"Acquired","Angle":"Angle","Axial":"Axial","Bidirectional":"Bidirectional","Brush":"Brush","CINE":"CINE","Cancel":"Cancel","Circle":"Circle","Clear":"Clear","Coronal":"Coronal","Crosshairs":"Crosshairs","Download":"Download","Ellipse":"Ellipse","Elliptical":"Elliptical","Flip H":"Flip H","Flip V":"Flip V","Freehand":"Freehand","Invert":"Invert","Layout":"$t(Common:Layout)","Length":"Length","Levels":"Levels","Magnify":"Magnify","Manual":"Manual","Measurements":"Measurements","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Pan","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Probe","ROI Window":"ROI Window","Rectangle":"Rectangle","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) to Defaults","Rotate Right":"Rotate Right","Sagittal":"Sagittal","Save":"Save","Stack Scroll":"Stack Scroll","Stop":"$t(Common:Stop)","Themes":"Themes","Zoom":"Zoom"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Skip to first $t(Common:Image)","Skip to last image":"Skip to last $t(Common:Image)","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Close":"Close","Image":"Image","Layout":"Layout","Measurements":"Measurements","More":"More","Next":"Next","Play":"Play","Previous":"Previous","Reset":"Reset","RowsPerPage":"rows per page","Series":"Series","Show":"Show","Stop":"Stop","StudyDate":"Study Date"}')},function(e){e.exports=JSON.parse('{"Clear dates":"Clear dates","End Date":"End Date","Start Date":"Start Date"}')},function(e){e.exports=JSON.parse('{"About":"About","Back to Viewer":"Back to Viewer","INVESTIGATIONAL USE ONLY":"INVESTIGATIONAL USE ONLY","Options":"Options","Preferences":"Preferences","Study list":"Study list"}')},function(e){e.exports=JSON.parse('{"Criteria nonconformities":"Criteria nonconformities","Delete":"Delete","Description":"Description","MAX":"MAX","NonTargets":"NonTargets","Relabel":"Relabel","Targets":"Targets"}')},function(e){e.exports=JSON.parse('{"AccessionNumber":"Accession #","Empty":"Empty","MRN":"MRN","Modality":"Modality","PatientName":"Patient Name","StudyDate":"Study Date","StudyDescription":"Description","StudyList":"Study List"}')},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","No hotkeys found":"No hotkeys are configured for this application. Hotkeys can be configured in the application\'s app-config.js file.","Reset to Defaults":"$t(Buttons:Reset to Defaults)","ResetDefaultMessage":"Preferences successfully reset to default. <br /> You must <strong>Save</strong> to perform this action.","Save":"$t(Buttons:Save)","SaveMessage":"Preferences saved","User Preferences":"User Preferences"}')},function(e){e.exports=JSON.parse('{"emptyFilenameError":"The file name cannot be empty.","fileType":"File Type","filename":"File Name","formTitle":"Please specify the dimensions, filename, and desired type for the output image.","imageHeight":"Image height (px)","imagePreview":"Image Preview","imageWidth":"Image width (px)","keepAspectRatio":"Keep aspect ratio","loadingPreview":"Loading Image Preview...","minHeightError":"The minimum valid height is 100px.","minWidthError":"The minimum valid width is 100px.","showAnnotations":"Show Annotations"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Acquired":"Adquirido","Angle":"Ángulo","Axial":"Axial","Bidirectional":"Bidireccional","Brush":"Cepillo","CINE":"CINE","Cancel":"Cancelar","Circle":"Círculo","Clear":"Limpiar","Coronal":"Coronal","Crosshairs":"Punto de mira","Download":"Descargar","Ellipse":"Elipse","Elliptical":"Elíptico","Flip H":"Voltear H","Flip V":"Voltear V","Freehand":"Mano alzada","Invert":"Negativo","Layout":"$t(Common:Layout)","Length":"Longitud","Levels":"W/L","Magnify":"Lupa","Manual":"Manual","Measurements":"Medidas","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Mover","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Probar","ROI Window":"Ventana ROI","Rectangle":"Rectángulo","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) por defecto","Rotate Right":"Girar ->","Sagittal":"Sagital","Save":"Guardar","Stack Scroll":"Scroll","Stop":"$t(Common:Stop)","Themes":"Temas","Zoom":"Ampliar"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Image) $t(Common:Next)","Play / Stop":"$t(Common:Play) / Stop","Previous image":"$t(Common:Image) $t(Common:Previous)","Skip to first image":"Ir a la primera $t(Common:Image)","Skip to last image":"Ir a la última $t(Common:Image)","fps":"imágenes/seg."}')},function(e){e.exports=JSON.parse('{"Image":"Imagen","Layout":"Formato","Measurements":"Medidas","More":"Más","Next":"Siguiente","Play":"Play","Previous":"Anterior","Reset":"Restaurar","RowsPerPage":"filas por página","Series":"Secuencia","Show":"Mostrar","Stop":"Detener","StudyDate":"Fecha de estudo"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"Acerca de","Back to Viewer":"Volver al visor","INVESTIGATIONAL USE ONLY":"SOLO USO PARA INVESTIGACIÓN","Options":"Opciones","Preferences":"Preferencias","Study list":"Lista de estudios"}')},function(e){e.exports=JSON.parse('{"Criteria nonconformities":"Criterios disconformes","Delete":"Borrar","Description":"Descripción","MAX":"Máximo","NonTargets":"No objetivos","Relabel":"Re-etiquetar","Targets":"Objetivos"}')},function(e){e.exports=JSON.parse('{"AccessionNumber":"Número de Adhesión","Empty":"vacío","MRN":"MRN","Modality":"Modalidad","PatientName":"Nombre del paciente","StudyDate":"Fetcha de estudio","StudyDescription":"Descripción","StudyList":"Lista de Estudio"}')},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Preferencias de Usuario"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Acquired":"Acquis","Angle":"Angle","Axial":"Axial","Bidirectional":"Bi-directionel","Brush":"Brosse","CINE":"Ciné","Cancel":"Annuler","Circle":"Cercle","Clear":"Effacer","Coronal":"Coronal","Crosshairs":"Repère","Ellipse":"Ellipse","Elliptical":"Elliptique","Flip H":"Flip H","Flip V":"Flip V","Freehand":"Main levée","Invert":"Inverser","Layout":"$t(Common:Layout)","Length":"Longueur","Levels":"Niveaux","Magnify":"Agrandir","Manual":"Manuel","Measurements":"Mesures","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Déplacer","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Sonde","ROI Window":"ROI fenêtrage","Rectangle":"Rectangle","Reset":"$t(Common:Reset)","Reset to Defaults":"Valeurs d\'usine","Rotate Right":"Tourner à droite","Sagittal":"Sagittal","Save":"Sauvegarder","Stack Scroll":"Défilement","Stop":"$t(Common:Stop)","Themes":"Themes","Zoom":"Zoom"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Play) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Retour à la première $t(Common:Image)","Skip to last image":"Aller à la dernière $t(Common:Image)","fps":"ips"}')},function(e){e.exports=JSON.parse('{"Image":"Image","Layout":"Disposition","More":"Plus","Next":"Suivant","Play":"Play","Previous":"Précédent","Reset":"Reset","Stop":"Stop"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"A Propos","Back to Viewer":"Retour au viewer","INVESTIGATIONAL USE ONLY":"Seulement pour utilisation expérimentale","Options":"Options","Preferences":"Préférences","Study list":"Liste d\'études"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Préférences utilisateur"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Acquired":"取得済","Angle":"分度器","Axial":"アキシャル","Bidirectional":"両方向","Brush":"ブラシ","CINE":"シネ","Cancel":"キャンセル","Circle":"サークル","Clear":"クリア","Coronal":"コロナル","Crosshairs":"クロスヘアー","Ellipse":"楕円","Elliptical":"楕円","Flip H":"左右反転","Flip V":"上下反転","Freehand":"フリーハンド","Invert":"反転","Layout":"$t(Common:Layout)","Length":"長さ","Levels":"レベル","Magnify":"拡大","Manual":"マニュアル","Measurements":"測定","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"パン","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"プローブ","ROI Window":"ROIウィンドウ","Rectangle":"長方形","Reset":"$t(Common:Reset)","Reset to Defaults":"デフォルトへ$t(Common:Reset)","Rotate Right":"右に回転","Sagittal":"サジタル","Save":"保存","Stack Scroll":"スタックスクロール","Stop":"$t(Common:Stop)","Themes":"テーマ","Zoom":"ズーム"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"$t(Common:Image)最初にスキップ","Skip to last image":"$t(Common:Image)最後にスキップ","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Image":"画像","Layout":"レイアウト","More":"もっと","Next":"次へ","Play":"プレイ","Previous":"前へ","Reset":"リセット","Stop":"ストップ"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"につい","Back to Viewer":"前のビュー","INVESTIGATIONAL USE ONLY":"調査用のみ","Options":"オプション","Preferences":"プレファレンス","Study list":"スタディリスト"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"ユーザプレファレンス"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Circle":"Cirkel","More":"Meer","Pan":"Pan","Zoom":"Inzoomen"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"More":"Meer"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"Over","INVESTIGATIONAL USE ONLY":"ALLEEN VOOR ONDERZOEK","Options":"Opties","Preferences":"Voorkeuren","Study list":"Studie Overzicht"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Browser":"Navegador","Build Number":"Número da compilação","Latest Master Commits":"Últimos Commits na Master","More details":"Mais detalhes","Name":"Nome","OHIF Viewer - About":"OHIF Viewer - Sobre","OS":"SO","Report an issue":"Informar um problema","Repository URL":"URL do Repositório","Value":"Valor","Version Information":"Informação da Versão","Visit the forum":"Visite o fórum"}')},function(e){e.exports=JSON.parse('{"Acquired":"Adquirido","Angle":"Ângulo","Axial":"Axial","Bidirectional":"Bidirecional","Brush":"Pincel","CINE":"CINE","Cancel":"Cancelar","Circle":"Círculo","Clear":"Limpar","Coronal":"Coronal","Crosshairs":"Localizador","Download":"Baixar","Ellipse":"Elipse","Elliptical":"Elíptico","Flip H":"Inverter H","Flip V":"Inverter V","Freehand":"Desenho livre","Invert":"Inverter","Layout":"Layout","Length":"Tamanho","Levels":"Níveis","Magnify":"Ampliar","Manual":"Manual","Measurements":"Medidas","More":"Mais","Next":"Próximo","Pan":"Arrastar","Play":"Tocar","Previous":"Anterior","Probe":"Prova","ROI Window":"Janela ROI","Rectangle":"Retângulo","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) para o Padrão","Rotate Right":"Girar à direita","Sagittal":"Sagital","Save":"Salvar","Stack Scroll":"Navegar Stacks","Stop":"Parar","Themes":"Temas","Zoom":"Zoom"}')},function(e){e.exports=JSON.parse('{"Next image":"Próxima imagem","Play / Stop":"Tocar / Parar","Previous image":"Imagem Anterior","Skip to first image":"Pular para a primeira imagem","Skip to last image":"Pular para a última imagem","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Close":"Fechar","Image":"Imagem","Layout":"Layout","More":"Mais","Next":"Próximo","Play":"Play","Previous":"Anterior","Reset":"Restaurar","Stop":"Stop"}')},function(e){e.exports=JSON.parse('{"Clear dates":"Limpar datas","End Date":"Data Final","Start Date":"Data Inicial"}')},function(e){e.exports=JSON.parse('{"About":"Quem somos","Back to Viewer":"Voltar para o Viewer","INVESTIGATIONAL USE ONLY":"APENAS PARA USO INVESTIGATIVO","Options":"Opções","Preferences":"Preferências","Study list":"Lista de estudos"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Cancel":"Cancelar","Reset to Defaults":"$t(Common:Reset) para Padrão","ResetDefaultMessage":"Preferências resetadas com sucesso. <br /> Você deve <strong>Salvar</strong> para que essa ação seja realizada.","Save":"Salvar","SaveMessage":"Preferências salvas","User Preferences":"Preferências do Usuário"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Browser":"Браузер","Build Number":"Номер сборки","Latest Master Commits":"Последние коммиты в мастер","More details":"Больше подробностей","Name":"Имя","OHIF Viewer - About":"OHIF Viewer - помощь","OS":"ОС","Report an issue":"Сообщить о проблеме","Repository URL":"Ссылка репозитория","Value":"Значение","Version Information":"Информация о версии","Visit the forum":"Посетить форум"}')},function(e){e.exports=JSON.parse('{"Acquired":"Полученные","Angle":"Угол","Annotate":"Примечание","Axial":"По оси","Bidirectional":"Двунаправленная","Brush":"Кисть","CINE":"Видео","Cancel":"Отменить","Circle":"Круг","Clear":"Очистить","Coronal":"Корональный","Crosshairs":"Перекрестие","Download":"Скачать","Ellipse":"Эллипс","Elliptical":"Эллиптический","Flip H":"Перевернуть ↔","Flip V":"Перевернуть ↕","Freehand":"От руки","Invert":"Инвертировать","Layout":"$t(Common:Layout)","Length":"Длина","Levels":"Уровни","Magnify":"Увеличить","Manual":"Ручной","Measurements":"Измерения","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Переместить","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Проба","ROI Window":"Главная область","Rectangle":"Прямоугольник","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) к настройкам по-умолчанию","Rotate Right":"Повернуть вправо","Sagittal":"Сагиттальный","Save":"Сохранить","Stack Scroll":"Прокрутка серии","Stop":"$t(Common:Stop)","Themes":"Темы","Zoom":"Лупа"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Пропустить к первому $t(Common:Image)","Skip to last image":"Пропустить к последнему $t(Common:Image)","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Close":"Закрыть","Image":"Изображение","Last 30 days":"30 дней","Last 7 days":"7 дней","Layout":"Разбивка","Measurements":"Измерения","More":"Больше","Next":"Следующая","Play":"Проиграть","Previous":"Предыдущая","Reset":"Сбросить","RowsPerPage":"строк на странице","Series":"Серия","Show":"Показать","Stop":"Остановить","StudyDate":"Дата исследования","StudyList":"Список исследований","Today":"Сегодня"}')},function(e){e.exports=JSON.parse('{"Clear dates":"Очистить даты","End Date":"Дата конца","Start Date":"Дата начала"}')},function(e){e.exports=JSON.parse('{"About":"Справка","Back to Viewer":"Назад к Просмотрщику","INVESTIGATIONAL USE ONLY":"ТОЛЬКО ДЛЯ ИССЛЕДОВАНИЙ","Options":"Опции","Preferences":"Настройки","Study List":"Список исследований"}')},function(e){e.exports=JSON.parse('{"Criteria nonconformities":"Критерии несоответствия","Delete":"Удалить","Description":"Описание","MAX":"МАКС","Measurements":"Измерения","NonTargets":"Нецелевые","Relabel":"Переназначить","StudyDate":"Дата исследования","Targets":"Цели"}')},function(e){e.exports=JSON.parse('{"AccessionNumber":"Номер доступа","Description":"Описание","Empty":"Пусто","MRN":"MRN","Modality":"Модальность","PatientName":"Имя пациента","StudyDate":"Дата исследования","StudyDescription":"Описание"}')},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","No hotkeys found":"Не найдено горячих клавиш","Reset to Defaults":"$t(Buttons:Reset to Defaults)","ResetDefaultMessage":"Настройки успешно сброшены. <br /> Вы должны <strong>Сохранить</strong> это действие нажав на кнопку.","Save":"$t(Buttons:Save)","SaveMessage":"Настройки сохранены","User Preferences":"Пользовательские настройки"}')},function(e){e.exports=JSON.parse('{"emptyFilenameError":"Имя файла не может быть пустым.","fileType":"Тип файла","filename":"Имя файла","formTitle":"Пожалуйста, укажите разрешение, имя файла и желаемый тип изображения.","imageHeight":"Высота картинки (px)","imagePreview":"Предпросмотр","imageWidth":"Ширина картинки (px)","keepAspectRatio":"Сохранить соотношение сторон","loadingPreview":"Загружаю предпросмотр картинки...","minHeightError":"Минимальная высота - 100px.","minWidthError":"Минимальная ширина - 100px.","showAnnotations":"Показать аннотации"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Acquired":"Đã lấy","Angle":"Góc","Axial":"Trục","Bidirectional":"Hai hướng","Brush":"Bút lông","CINE":"Duyệt tự động","Cancel":"Hủy bỏ","Circle":"Vòng tròn","Clear":"Xóa","Coronal":"Mặt phẳng vành","Crosshairs":"Vị trí tương quan","Ellipse":"Đo Elip","Elliptical":"Elip","Flip H":"Lật ngang","Flip V":"Lật dọc","Freehand":"Bằng tay","Invert":"Ảnh dương bản","Layout":"$t(Common:Layout)","Length":"Thước đo chiều dài","Levels":"Độ sáng","Magnify":"Phóng đại một phần","Manual":"Thủ công","Measurements":"Đo lường","More":"$t(Common:More)","Next":"$t(Common:Next)","Pan":"Di chuyển","Play":"$t(Common:Play)","Previous":"$t(Common:Previous)","Probe":"Thông tin điểm ảnh","ROI Window":"ROI Window","Rectangle":"Đo chữ nhật","Reset":"$t(Common:Reset)","Reset to Defaults":"$t(Common:Reset) đến mặc định","Rotate Right":"Xoay phải","Sagittal":"Mặt phẳng đứng dọc","Save":"Lưu","Stack Scroll":"Duyệt","Stop":"$t(Common:Stop)","Themes":"Giao diện","Zoom":"Thu phóng"}')},function(e){e.exports=JSON.parse('{"Next image":"$t(Common:Next) $t(Common:Image)","Play / Stop":"$t(Common:Play) / $t(Common:Stop)","Previous image":"$t(Common:Previous) $t(Common:Image)","Skip to first image":"Bỏ qua đến đầu $t(Common:Image)","Skip to last image":"Bỏ qua đến cuối $t(Common:Image)","fps":"fps"}')},function(e){e.exports=JSON.parse('{"Image":"Ảnh","Layout":"Cách bố trí","Measurements":"Đo lường","More":"Thêm","Next":"Tiếp theo","Play":"Phát","Previous":"Về sau","Reset":"Đặt lại","RowsPerPage":"trên 1 trang","Series":"Tập ảnh","Show":"Hiển thị","Stop":"Dừng","StudyDate":"Ngày chụp"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"Về chúng tôi","Back to Viewer":"Ảnh vừa xem","INVESTIGATIONAL USE ONLY":"Chỉ dùng cho nghiên cứu","Options":"Lựa chọn","Preferences":"Thiết lập","Study list":"Danh sách"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"AccessionNumber":"Mã phiểu","Empty":"Rỗng","MRN":"Mã Bệnh nhân","Modality":"Thiết bị","PatientName":"Tên Bệnh nhân","StudyDate":"Ngày chụp","StudyDescription":"Diễn giải","StudyList":"Danh sách"}')},function(e){e.exports=JSON.parse('{"Cancel":"$t(Buttons:Cancel)","Reset to Defaults":"$t(Buttons:Reset to Defaults)","Save":"$t(Buttons:Save)","User Preferences":"Thiết lập theo người dùng"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"Acquired":"已获取","Angle":"角度","Axial":"轴状面","Bidirectional":"双向","Brush":"橡皮擦","CINE":"播放动画","Cancel":"取消","Circle":"圆","Clear":"清除","Coronal":"冠状面","Crosshairs":"十字线","Ellipse":"椭圆","Elliptical":"椭圆的","Flip H":"左右翻转","Flip V":"上下翻转","Freehand":"自由画线","Invert":"灰度反转","Layout":"显示窗口","Length":"长度","Levels":"层级","Magnify":"放大镜","Manual":"手动","Measurements":"测量","More":"更多","Next":"下一个","Pan":"移动","Play":"播放","Previous":"上一个","Probe":"探针","ROI Window":"选择对比度","Rectangle":"矩形","Reset":"复原","Reset to Defaults":"返回默认","Rotate Right":"顺时针旋转","Sagittal":"矢状面","Save":"保存","Stack Scroll":"滑动切换图层","Stop":"停止","Themes":"主题","Zoom":"放大"}')},function(e){e.exports=JSON.parse('{"Next image":"下一个图像","Play / Stop":"播放/停止","Previous image":"上一个图像","Skip to first image":"跳转到第一个图像","Skip to last image":"跳转到最后一个图像","fps":"帧率"}')},function(e){e.exports=JSON.parse('{"Image":"图像","Layout":"显示窗口","Measurements":"测量值","More":"更多","Next":"下一个","Play":"播放","Previous":"上一个","Reset":"复原","RowsPerPage":"每页条数","Series":"序列","Show":"显示","Stop":"停止","StudyDate":"时间"}')},function(e){e.exports=JSON.parse("{}")},function(e){e.exports=JSON.parse('{"About":"关于","Back to Viewer":"返回视图","INVESTIGATIONAL USE ONLY":"研究用途","Options":"选项","Preferences":"偏好","Study list":"研究列表"}')},function(e){e.exports=JSON.parse('{"Criteria nonconformities":"不合标准","Delete":"删除","Description":"描述","MAX":"最大","NonTargets":"非靶向","Relabel":"重新标记","Targets":"靶向"}')},function(e){e.exports=JSON.parse('{"Empty":"无","Modality":"成像设备","PatientName":"患者姓名","StudyDate":"检查日期","StudyDescription":"描述","StudyList":"检查列表"}')},function(e){e.exports=JSON.parse('{"Cancel":"取消","Reset to Defaults":"返回默认","Save":"保存","User Preferences":"用户偏好"}')},function(e){e.exports=JSON.parse("{}")},,,,,,function(e,t,n){"use strict";t.a={COMMANDS:"commandsModule",PANEL:"panelModule",SOP_CLASS_HANDLER:"sopClassHandlerModule",TOOLBAR:"toolbarModule",VIEWPORT:"viewportModule"}},function(e){e.exports=JSON.parse('{"both":{"Location":{}},"baseline":{"TargetType":{},"MaxTargetsPerOrgan":{"limit":2},"MaxTargets":{"limit":5},"MeasurementsLength":[{"longAxis":10,"longAxisSliceThicknessMultiplier":2,"modalityIn":["CT","MR"],"locationNotIn":["Lymph Node"],"message":"Extranodal lesions must be >= 10mm long axis AND >= double the acquisition slice thickness by CT and MR"},{"shortAxis":20,"longAxis":20,"modalityIn":["PX","XA"],"locationNotIn":["Lymph Node"],"message":"Extranodal lesions must be >= 20mm on chest x-ray (although x-rays rarely used for clinical trial assessment)"},{"shortAxis":15,"shortAxisSliceThicknessMultiplier":2,"modalityIn":["CT","MR"],"locationIn":["Lymph Node"],"message":"Nodal lesions must be >= 15mm short axis AND >= double the acquisition slice thickness by CT and MR"}]},"followup":{}}')},,function(e){e.exports=JSON.parse('{"a":"2.12.16"}')},,,,,,,,,,,,,,function(e){e.exports=JSON.parse('{"a":"1.12.42"}')},function(e){e.exports=JSON.parse('{"a":"1.3.24"}')},,function(e){e.exports=JSON.parse('{"a":"0.7.21"}')},function(e){e.exports=JSON.parse('{"a":"0.7.14"}')},function(e){e.exports=JSON.parse('{"a":"0.52.0"}')},function(e){e.exports=JSON.parse('{"a":"1.1.2"}')},function(e){e.exports=JSON.parse('{"a":"4.12.51"}')},,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(73),i=n(16),s=n(63),c=n(1),u=n.n(c),l=(n(1021),function(e){var t=Object(r.useCallback)((function(){var t=e.setViewportActive;e.viewportIndex!==e.activeViewportIndex&&t()}));return Object(r.useEffect)((function(){var n=function(n){(e.onScroll(e.viewportIndex)||{}).uid===n.detail.uid&&t()};return window.addEventListener("vtkscrollevent",n),function(){return window.removeEventListener("vtkscrollevent",n)}}),[e,e.onScroll,e.viewportIndex,t]),a.a.createElement("div",{className:"vtk-viewport-handler",style:{width:"100%",height:"100%",position:"relative"},onClick:t},a.a.createElement(o.View2D,e))});l.propTypes={setViewportActive:u.a.func.isRequired,viewportIndex:u.a.number.isRequired,activeViewportIndex:u.a.number.isRequired,onScroll:u.a.func},l.defaultProps={onScroll:function(){}};var f=l;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=i.a.redux.actions,v=h.setViewportActive,g=h.setViewportSpecificData,y=Object(s.b)((function(e,t){var n;e.extensions&&e.extensions.vtk&&(n=e.extensions.vtk);var r=t.viewportIndex,a=r===e.viewports.activeViewportIndex,o=e.viewports.layout.viewports[r].vtk||{};return m({activeViewportIndex:e.viewports.activeViewportIndex,layout:e.viewports.layout,isActive:a},o,{},n,{enableStackPrefetch:a})}),(function(e,t){var n=t.viewportIndex;return{setViewportActive:function(){e(v(n))},setViewportSpecificData:function(t){e(g(n,t))}}}),(function(e,t,n){var r=e.afterCreation;return m({},e,{},t,{},n,{onCreated:function(e){r&&"function"==typeof r&&r(e)}})}))(f),b=(n(1022),n(38));function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){return w(this,t),I(this,E(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e;return this.props.percentComplete&&100!==this.props.percentComplete&&(e="".concat(this.props.percentComplete,"%")),a.a.createElement(a.a.Fragment,null,this.props.error?a.a.createElement("div",{className:"imageViewerErrorLoadingIndicator loadingIndicator"},a.a.createElement("div",{className:"indicatorContents"},a.a.createElement("h4",null,"Error Loading Image"),a.a.createElement("p",{className:"description"},"An error has occurred."),a.a.createElement("p",{className:"details"},this.props.error.message))):a.a.createElement("div",{className:"imageViewerLoadingIndicator loadingIndicator"},a.a.createElement("div",{className:"indicatorContents"},a.a.createElement("p",null,this.props.t("Loading..."),a.a.createElement("i",{className:"fa fa-spin fa-circle-o-notch fa-fw"}),e))))}}])&&O(n.prototype,r),o&&O(n,o),t}(r.PureComponent);D(C,"propTypes",{percentComplete:u.a.number.isRequired,error:u.a.object}),D(C,"defaultProps",{percentComplete:0,error:null});var T=Object(b.d)("Common")(C),x=n(8),k=n.n(x),j=n(7),R=n.n(j),N=n(21),M=n(122),_=n(265),A=n(258);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?z(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=R.a.getModule("segmentation"),$=i.a.utils.StackManager,J={},Y={},X=function(e){function t(){var e,n;V(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return W(z(n=B(this,(e=q(t)).call.apply(e,[this].concat(a)))),"state",{volumes:null,paintFilterLabelMapImageData:null,paintFilterBackgroundImageData:null,percentComplete:0,isLoaded:!1}),W(z(n),"getViewportData",(function(e,r,a,i,s,c){var u,l,f=n.props.servicesManager.services.UINotificationService,p=t.getCornerstoneStack(e,r,a,i,s,c),m=Object(o.getImageData)(p.imageIds,a),d=p.imageIds[0],h=G.state,v=h.series[d];if(v){var g=v.activeLabelmapIndex,y=v.labelmaps3D[g];v.labelmaps3D.length>1&&0===n.props.viewportIndex&&f.show({title:"Overlapping Segmentation Found",message:"Overlapping segmentations cannot be displayed when in MPR mode",type:"info"}),n.segmentsDefaultProperties=y.segmentsHidden.map((function(e){return{visible:!e}}));var b="".concat(d,"_").concat(g);if(Y[b])u=Y[b];else{var S,w,O,I,E=y.buffer;u=M.default.newInstance();var P=N.default.newInstance({numberOfComponents:1,values:new Uint16Array(E)});u.getPointData().setScalars(P),(S=u).setDimensions.apply(S,U(m.dimensions)),(w=u).setSpacing.apply(w,U(m.vtkImageData.getSpacing())),(O=u).setOrigin.apply(O,U(m.vtkImageData.getOrigin())),(I=u).setDirection.apply(I,U(m.vtkImageData.getDirection())),Y[b]=u}l=h.colorLutTables[y.colorLUTIndex]}return{imageDataObject:m,labelmapDataObject:u,labelmapColorLUT:l}})),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,i=[{key:"init",value:function(){console.log("OHIFVTKViewport init()")}},{key:"destroy",value:function(){console.log("OHIFVTKViewport destroy()"),$.clearStacks()}},{key:"getCornerstoneStack",value:function(e,t,n,r,a){var o=e.find((function(e){return e.StudyInstanceUID===t})),i=o.displaySets.find((function(e){return e.displaySetInstanceUID===n})),s=$.findOrCreateStack(o,i),c=Object.assign({},s);if(void 0!==a)c.currentImageIdIndex=a;else if(r){var u=c.imageIds.findIndex((function(e){return k.a.metaData.get("SOPInstanceUID",e)===r}));u>-1&&(c.currentImageIdIndex=u)}else c.currentImageIdIndex=0;return c}}],(r=[{key:"getOrCreateVolume",value:function(e,t){if(J[t])return J[t];var n=e.vtkImageData,r=e.imageMetaData0,a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if("PT"===n)return{lower:0,upper:5};var r=isNaN(t)||isNaN(e);return r?{lower:0,upper:512}:{lower:t-e/2,upper:t+e/2}}(r.windowWidth,r.windowCenter,r.modality),o=a.lower,i=a.upper,s=_.default.newInstance(),c=A.default.newInstance();s.setMapper(c),c.setInputData(n),s.getProperty().getRGBTransferFunction(0).setRange(o,i);var u=n.getSpacing(),l=(u[0]+u[1]+u[2])/6;return c.setSampleDistance(l),c.setMaximumSamplesPerRay(4e3),J[t]=s,s}},{key:"setStateFromProps",value:function(){var e=this,t=this.props.viewportData,n=t.studies,r=t.displaySet,a=r.StudyInstanceUID,o=r.displaySetInstanceUID,i=r.sopClassUIDs,s=r.SOPInstanceUID,c=r.frameIndex;i.length>1&&console.warn("More than one SOPClassUID in the same series is not yet supported.");var u=n.find((function(e){return e.StudyInstanceUID===a})),l={studyDate:u.studyDate,studyTime:u.studyTime,studyDescription:u.studyDescription,patientName:u.patientName,patientId:u.patientId,seriesNumber:String(r.seriesNumber),seriesDescription:r.seriesDescription};try{var f=this.getViewportData(n,a,o,s,c),p=f.imageDataObject,m=f.labelmapDataObject,d=f.labelmapColorLUT;this.imageDataObject=p;var h=this.getOrCreateVolume(p,o);this.setState({percentComplete:0,dataDetails:l},(function(){e.loadProgressively(p),setTimeout((function(){e.setState({volumes:[h],paintFilterLabelMapImageData:m,paintFilterBackgroundImageData:p.vtkImageData,labelmapColorLUT:d})}),200)}))}catch(t){console.error("Failed to load 2D MPR",t);var v=this.props.servicesManager.services,g=v.UINotificationService,y=v.LoggerService;if(0===this.props.viewportIndex){var b=t.message.includes("buffer")?"Dataset is too big to display in MPR":t.message;y.error({error:t,message:b}),g.show({title:"Failed to load 2D MPR",message:b,type:"error",autoClose:!1,action:{label:"Exit 2D MPR",onClick:function(t){(0,t.close)(),e.props.commandsManager.runCommand("setCornerstoneLayout")}}})}this.setState({isLoaded:!0})}}},{key:"componentDidMount",value:function(){this.setStateFromProps()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.viewportData.displaySet,r=e.viewportData.displaySet;n.displaySetInstanceUID===r.displaySetInstanceUID&&n.SOPInstanceUID===r.SOPInstanceUID&&n.frameIndex===r.frameIndex||this.setStateFromProps()}},{key:"loadProgressively",value:function(e){var t=this;Object(o.loadImageData)(e);var n=e.isLoading,r=e.imageIds;if(n){var a=r.length;e.onPixelDataInserted((function(e){var n=Math.floor(100*e/a);n!==t.state.percentComplete&&t.setState({percentComplete:n})})),e.onAllPixelDataInserted((function(){t.setState({isLoaded:!0})})),e.onPixelDataInsertedError((function(e){var n=t.props.servicesManager.services,r=n.UINotificationService,a=n.LoggerService;t.hasError||(0===t.props.viewportIndex&&(a.error({error:e,message:e.message}),r.show({title:"MPR Load Error",message:e.message,type:"error",autoClose:!1})),t.hasError=!0)}))}else this.setState({isLoaded:!0})}},{key:"render",value:function(){var e=this,t=null,n=G.configuration;return this.props.children&&this.props.children.length&&(t=this.props.children.map((function(t,n){return t&&a.a.cloneElement(t,{viewportIndex:e.props.viewportIndex,key:n})}))),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative"}},!this.state.isLoaded&&a.a.createElement(T,{percentComplete:this.state.percentComplete}),this.state.volumes&&a.a.createElement(y,{volumes:this.state.volumes,paintFilterLabelMapImageData:this.state.paintFilterLabelMapImageData,paintFilterBackgroundImageData:this.state.paintFilterBackgroundImageData,viewportIndex:this.props.viewportIndex,dataDetails:this.state.dataDetails,labelmapRenderingOptions:{colorLUT:this.state.labelmapColorLUT,globalOpacity:n.fillAlpha,visible:n.renderFill,outlineThickness:n.outlineWidth,renderOutline:n.renderOutline,segmentsDefaultProperties:this.segmentsDefaultProperties,onNewSegmentationRequested:function(){e.setStateFromProps()}},onScroll:this.props.onScroll})),")}",t)}}])&&F(n.prototype,r),i&&F(n,i),t}(r.Component);W(X,"propTypes",{viewportData:u.a.shape({studies:u.a.array.isRequired,displaySet:u.a.shape({StudyInstanceUID:u.a.string.isRequired,displaySetInstanceUID:u.a.string.isRequired,sopClassUIDs:u.a.arrayOf(u.a.string),SOPInstanceUID:u.a.string,frameIndex:u.a.number})}),viewportIndex:u.a.number.isRequired,children:u.a.node,onScroll:u.a.func,servicesManager:u.a.object.isRequired}),W(X,"defaultProps",{onScroll:function(){}}),W(X,"id","OHIFVTKViewport");t.default=X},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,function(e,t){},,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){var r={"./af":298,"./af.js":298,"./ar":299,"./ar-dz":300,"./ar-dz.js":300,"./ar-kw":301,"./ar-kw.js":301,"./ar-ly":302,"./ar-ly.js":302,"./ar-ma":303,"./ar-ma.js":303,"./ar-sa":304,"./ar-sa.js":304,"./ar-tn":305,"./ar-tn.js":305,"./ar.js":299,"./az":306,"./az.js":306,"./be":307,"./be.js":307,"./bg":308,"./bg.js":308,"./bm":309,"./bm.js":309,"./bn":310,"./bn-bd":311,"./bn-bd.js":311,"./bn.js":310,"./bo":312,"./bo.js":312,"./br":313,"./br.js":313,"./bs":314,"./bs.js":314,"./ca":315,"./ca.js":315,"./cs":316,"./cs.js":316,"./cv":317,"./cv.js":317,"./cy":318,"./cy.js":318,"./da":319,"./da.js":319,"./de":320,"./de-at":321,"./de-at.js":321,"./de-ch":322,"./de-ch.js":322,"./de.js":320,"./dv":323,"./dv.js":323,"./el":324,"./el.js":324,"./en-au":325,"./en-au.js":325,"./en-ca":326,"./en-ca.js":326,"./en-gb":327,"./en-gb.js":327,"./en-ie":328,"./en-ie.js":328,"./en-il":329,"./en-il.js":329,"./en-in":330,"./en-in.js":330,"./en-nz":331,"./en-nz.js":331,"./en-sg":332,"./en-sg.js":332,"./eo":333,"./eo.js":333,"./es":334,"./es-do":335,"./es-do.js":335,"./es-mx":336,"./es-mx.js":336,"./es-us":337,"./es-us.js":337,"./es.js":334,"./et":338,"./et.js":338,"./eu":339,"./eu.js":339,"./fa":340,"./fa.js":340,"./fi":341,"./fi.js":341,"./fil":342,"./fil.js":342,"./fo":343,"./fo.js":343,"./fr":344,"./fr-ca":345,"./fr-ca.js":345,"./fr-ch":346,"./fr-ch.js":346,"./fr.js":344,"./fy":347,"./fy.js":347,"./ga":348,"./ga.js":348,"./gd":349,"./gd.js":349,"./gl":350,"./gl.js":350,"./gom-deva":351,"./gom-deva.js":351,"./gom-latn":352,"./gom-latn.js":352,"./gu":353,"./gu.js":353,"./he":354,"./he.js":354,"./hi":355,"./hi.js":355,"./hr":356,"./hr.js":356,"./hu":357,"./hu.js":357,"./hy-am":358,"./hy-am.js":358,"./id":359,"./id.js":359,"./is":360,"./is.js":360,"./it":361,"./it-ch":362,"./it-ch.js":362,"./it.js":361,"./ja":363,"./ja.js":363,"./jv":364,"./jv.js":364,"./ka":365,"./ka.js":365,"./kk":366,"./kk.js":366,"./km":367,"./km.js":367,"./kn":368,"./kn.js":368,"./ko":369,"./ko.js":369,"./ku":370,"./ku.js":370,"./ky":371,"./ky.js":371,"./lb":372,"./lb.js":372,"./lo":373,"./lo.js":373,"./lt":374,"./lt.js":374,"./lv":375,"./lv.js":375,"./me":376,"./me.js":376,"./mi":377,"./mi.js":377,"./mk":378,"./mk.js":378,"./ml":379,"./ml.js":379,"./mn":380,"./mn.js":380,"./mr":381,"./mr.js":381,"./ms":382,"./ms-my":383,"./ms-my.js":383,"./ms.js":382,"./mt":384,"./mt.js":384,"./my":385,"./my.js":385,"./nb":386,"./nb.js":386,"./ne":387,"./ne.js":387,"./nl":388,"./nl-be":389,"./nl-be.js":389,"./nl.js":388,"./nn":390,"./nn.js":390,"./oc-lnc":391,"./oc-lnc.js":391,"./pa-in":392,"./pa-in.js":392,"./pl":393,"./pl.js":393,"./pt":394,"./pt-br":395,"./pt-br.js":395,"./pt.js":394,"./ro":396,"./ro.js":396,"./ru":397,"./ru.js":397,"./sd":398,"./sd.js":398,"./se":399,"./se.js":399,"./si":400,"./si.js":400,"./sk":401,"./sk.js":401,"./sl":402,"./sl.js":402,"./sq":403,"./sq.js":403,"./sr":404,"./sr-cyrl":405,"./sr-cyrl.js":405,"./sr.js":404,"./ss":406,"./ss.js":406,"./sv":407,"./sv.js":407,"./sw":408,"./sw.js":408,"./ta":409,"./ta.js":409,"./te":410,"./te.js":410,"./tet":411,"./tet.js":411,"./tg":412,"./tg.js":412,"./th":413,"./th.js":413,"./tk":414,"./tk.js":414,"./tl-ph":415,"./tl-ph.js":415,"./tlh":416,"./tlh.js":416,"./tr":417,"./tr.js":417,"./tzl":418,"./tzl.js":418,"./tzm":419,"./tzm-latn":420,"./tzm-latn.js":420,"./tzm.js":419,"./ug-cn":421,"./ug-cn.js":421,"./uk":422,"./uk.js":422,"./ur":423,"./ur.js":423,"./uz":424,"./uz-latn":425,"./uz-latn.js":425,"./uz.js":424,"./vi":426,"./vi.js":426,"./x-pseudo":427,"./x-pseudo.js":427,"./yo":428,"./yo.js":428,"./zh-cn":429,"./zh-cn.js":429,"./zh-hk":430,"./zh-hk.js":430,"./zh-mo":431,"./zh-mo.js":431,"./zh-tw":432,"./zh-tw.js":432};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=780},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(681);var r=n(272),a=n(0),o=n.n(a),i=n(26),s=n.n(i),c=n(14),u=n(144),l=n.n(u),f=n(73),p=n(3),m=n(261).a.actions.setViewportLayoutAndData;function d(e,t){var n=m(e,t);window.store.dispatch(n)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new Promise((function(a,o){var i=[],s=n*r;t&&t.length!==s&&o(new Error("viewportProps is supplied but its length is not equal to numViewports"));for(var c={},u=0;u<s;u++)i.push({}),c[u]=e,c[u].plugin="vtk";var l=[];i.forEach((function(e,n){l[n]=null;var r=t[n];i[n]=Object.assign({},i[n],{vtk:v({mode:"mpr",afterCreation:function(e){l[n]=e,l.every((function(e){return!!e}))&&a(l)}},r)})})),d({numRows:n,numColumns:r,viewports:i},c)}))}function b(e,t,n,r,a,o){return new Promise((function(e,i){var s=a.viewports.slice();s[t]=Object.assign({},s[t],{vtk:{mode:"mpr",afterCreation:function(t){e(t)}}}),d({numRows:n,numColumns:r,viewports:s},o)}))}var S=n(155),w=n(671);function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){I(o,r,a,i,s,"next",e)}function s(e){I(o,r,a,i,s,"throw",e)}i(void 0)}))}}var P=S.b.BlendMode,D=function(e){var t,n=e.commandsManager,r=e.servicesManager.services,a=r.UINotificationService,o=r.LoggerService,i={};function s(e){return c.apply(this,arguments)}function c(){return(c=E(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.numRows,r=t.numColumns,a=t.layout,o=t.viewportSpecificData,s=t.activeViewportIndex,!(c=a.viewports[s])||"vtk"!==c.plugin){e.next=5;break}if(!i[s]){e.next=5;break}return e.abrupt("return",i[s]);case 5:if(o[s],u){e.next=16;break}return e.prev=7,e.next=10,b(0,s,n,r,a,o);case 10:u=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new Error(e.t0);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,null,[[7,13]])})))).apply(this,arguments)}function u(e,t,n){var r=e.genericRenderWindow.getRenderWindow(),a=r.getInteractor().getInteractorStyle();a.setSliceNormal.apply(a,O(t)),a.setViewUp.apply(a,O(n)),r.render()}function m(){var e=n.runCommand("getActiveViewportEnabledElement"),t=cornerstone.getEnabledElement(e);if(t){var r=t.image.imageId;if("PT"!==cornerstone.metaData.get("Modality",r)){var a=t.viewport.voi;return{windowWidth:a.windowWidth,windowCenter:a.windowCenter}}}}function d(e){var t=e.windowWidth,n=e.windowCenter,r=n-t/2,a=n+t/2;i[0].volumes[0].getProperty().getRGBTransferFunction(0).setRange(r,a),i.forEach((function(e){e.updateVOI(t,n)}))}var h,v,g,S,I,D,C,T,x=function(e,t){var n=t.getIndexToWorld(),r=p.e.create();return e[0]+=.5,e[1]+=.5,e[2]+=.5,p.e.set(r,e[0],e[1],e[2]),p.e.transformMat4(r,r,n),r},k={getVtkApis:function(e){var t=e.index;return i[t]},resetMPRView:function(){i.forEach((function(e){return e.resetOrientation()})),t&&d(t),i[0].svgWidgets.rotatableCrosshairsWidget.resetCrosshairs(i,0)},axial:(T=E(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,e.next=3,s(n);case 3:r=e.sent,i[n.activeViewportIndex]=r,u(r,[0,0,1],[0,-1,0]);case 6:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)}),sagittal:(C=E(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,e.next=3,s(n);case 3:r=e.sent,i[n.activeViewportIndex]=r,u(r,[1,0,0],[0,0,1]);case 6:case"end":return e.stop()}}),e)}))),function(e){return C.apply(this,arguments)}),coronal:(D=E(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,e.next=3,s(n);case 3:r=e.sent,i[n.activeViewportIndex]=r,u(r,[0,1,0],[0,0,1]);case 6:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),requestNewSegmentation:(I=E(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,r=Object.values(n.viewportSpecificData),a=r.map(function(){var e=E(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i[r]){e.next=6;break}return e.next=4,s(n);case 4:a=e.sent,i[r]=a;case 6:a.requestNewSegmentation(),a.updateImage();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=5,Promise.all(a);case 5:case"end":return e.stop()}}),e)}))),function(e){return I.apply(this,arguments)}),jumpToSlice:(S=E(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,u,l,p,m,d,h,v,g,y,b,S,O,I,E,P,D,C,T;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.viewports,r=t.studies,a=t.StudyInstanceUID,o=t.displaySetInstanceUID,c=t.SOPClassUID,u=t.SOPInstanceUID,l=t.segmentNumber,p=t.frameIndex,m=t.frame,d=t.done,h=void 0===d?function(){}:d,v=i[n.activeViewportIndex]){e.next=7;break}return e.next=5,s(n);case 5:v=e.sent,i[n.activeViewportIndex]=v;case 7:for(g=w.default.getCornerstoneStack(r,a,o,c,u,p),y=Object(f.getImageData)(g.imageIds,o),b=0,S=0,O=0,I=0,E=y.dimensions[1],P=y.dimensions[0],D=0;D<E;D++)for(C=0;C<P;C++)m.pixelData[b]===l&&(S+=C,O+=D,I++),b++;T=x([S/=I,O/=I,p],y.vtkImageData),v.svgWidgets.rotatableCrosshairsWidget.moveCrosshairs(T,i),h();case 22:case"end":return e.stop()}}),e)}))),function(e){return S.apply(this,arguments)}),setSegmentationConfiguration:(g=E(regeneratorRuntime.mark((function e(t){var n,r,a,o,c,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,r=t.globalOpacity,a=t.visible,o=t.renderOutline,c=t.outlineThickness,u=Object.values(n.viewportSpecificData),l=u.map(function(){var e=E(regeneratorRuntime.mark((function e(t,u){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=i[u]){e.next=6;break}return e.next=4,s(n);case 4:l=e.sent,i[u]=l;case 6:l.setGlobalOpacity(r),l.setVisibility(a),l.setOutlineThickness(c),l.setOutlineRendering(o),l.updateImage();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=5,Promise.all(l);case 5:case"end":return e.stop()}}),e)}))),function(e){return g.apply(this,arguments)}),setSegmentConfiguration:(v=E(regeneratorRuntime.mark((function e(t){var n,r,a,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.viewports,r=t.visible,a=t.segmentNumber,o=Object.values(n.viewportSpecificData),c=o.map(function(){var e=E(regeneratorRuntime.mark((function e(t,o){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i[o]){e.next=6;break}return e.next=4,s(n);case 4:c=e.sent,i[o]=c;case 6:c.setSegmentVisibility(a,r),c.updateImage();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=5,Promise.all(c);case 5:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),enableRotateTool:function(){i.forEach((function(e,t){var n=f.vtkInteractorStyleMPRRotate.newInstance();e.setInteractorStyle({istyle:n,configuration:{apis:i,apiIndex:t,uid:e.uid}})}))},enableCrosshairsTool:function(){i.forEach((function(e,t){var n=f.vtkInteractorStyleRotatableMPRCrosshairs.newInstance();e.setInteractorStyle({istyle:n,configuration:{apis:i,apiIndex:t,uid:e.uid}})}));var e=i[0].svgWidgets.rotatableCrosshairsWidget;e.getReferenceLines()||e.resetCrosshairs(i,0)},enableLevelTool:function(){var e=l()((function(e,t,n){e.forEach((function(e){e.updateVOI(t,n)}))}),16,{trailing:!0}),t={setOnLevelsChanged:function(t){var n=t.windowCenter,r=t.windowWidth;i.forEach((function(e){e.genericRenderWindow.getRenderWindow().render()})),e(i,r,n)}};i.forEach((function(e,n){var r=f.vtkInteractorStyleMPRWindowLevel.newInstance();e.setInteractorStyle({istyle:r,callbacks:t,configuration:{apis:i,apiIndex:n,uid:e.uid}})}))},setSlabThickness:function(e){var t=e.slabThickness;i.forEach((function(e){e.setSlabThickness(t)}))},changeSlabThickness:function(e){var t=e.change;i.forEach((function(e){var n=Math.max(e.getSlabThickness()+t,.1);e.setSlabThickness(n)}))},setBlendModeToComposite:function(){i.forEach((function(e){var t=e.genericRenderWindow.getRenderWindow(),n=t.getInteractor().getInteractorStyle(),r=e.getSlabThickness(),a=e.volumes[0].getMapper();a.setBlendModeToComposite&&a.setBlendModeToComposite(),n.setSlabThickness&&n.setSlabThickness(r),t.render()}))},setBlendModeToMaximumIntensity:function(){i.forEach((function(e){var t=e.genericRenderWindow.getRenderWindow(),n=e.volumes[0].getMapper();n.setBlendModeToMaximumIntensity&&n.setBlendModeToMaximumIntensity(),t.render()}))},setBlendMode:function(e){var t=e.blendMode;i.forEach((function(e){var n=e.genericRenderWindow.getRenderWindow();e.volumes[0].getMapper().setBlendMode(t),n.render()}))},mpr2d:(h=E(regeneratorRuntime.mark((function e(n){var r,s,c,u,l,p,h,v,g,b,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.viewports,s=r.viewportSpecificData[r.activeViewportIndex],c=m(),t=c,u=[{orientation:{sliceNormal:[0,0,1],viewUp:[0,-1,0]}},{orientation:{sliceNormal:[1,0,0],viewUp:[0,0,1]}},{orientation:{sliceNormal:[0,1,0],viewUp:[0,0,1]}}],e.prev=5,e.next=8,y(s,u,1,3);case 8:i=e.sent,e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(5),new Error(e.t0);case 14:c&&d(c),i.forEach((function(e,t){e.addSVGWidget(f.vtkSVGRotatableCrosshairsWidget.newInstance(),"rotatableCrosshairsWidget");var n=e.uid,r=f.vtkInteractorStyleRotatableMPRCrosshairs.newInstance();e.setInteractorStyle({istyle:r,configuration:{apis:i,apiIndex:t,uid:n}}),e.svgWidgets.rotatableCrosshairsWidget.setApiIndex(t),e.svgWidgets.rotatableCrosshairsWidget.setApis(i)})),l=i[0],i[0].svgWidgets.rotatableCrosshairsWidget.resetCrosshairs(i,0),(p=i[0].genericRenderWindow.getOpenGLRenderWindow()).getWebgl2()||(h=p.getContext(),v=h.getParameter(h.MAX_TEXTURE_SIZE),g=v*v/4,(b=l.volumes[0].getMapper().getInputData().getDimensions())[0]*b[1]*b[2]>g&&(S="This volume is too large to fit in WebGL 1 textures and will display incorrectly. Please use a different browser to view this data",o.error({message:S}),a.show({title:"Browser does not support WebGL 2",message:S,type:"error",autoClose:!1})));case 20:case"end":return e.stop()}}),e,null,[[5,11]])}))),function(e){return h.apply(this,arguments)})};return window.vtkActions=k,{definitions:{requestNewSegmentation:{commandFn:k.requestNewSegmentation,storeContexts:["viewports"],options:{}},jumpToSlice:{commandFn:k.jumpToSlice,storeContexts:["viewports"],options:{}},setSegmentationConfiguration:{commandFn:k.setSegmentationConfiguration,storeContexts:["viewports"],options:{}},setSegmentConfiguration:{commandFn:k.setSegmentConfiguration,storeContexts:["viewports"],options:{}},axial:{commandFn:k.axial,storeContexts:["viewports"],options:{}},coronal:{commandFn:k.coronal,storeContexts:["viewports"],options:{}},sagittal:{commandFn:k.sagittal,storeContexts:["viewports"],options:{}},enableRotateTool:{commandFn:k.enableRotateTool,options:{}},enableCrosshairsTool:{commandFn:k.enableCrosshairsTool,options:{}},enableLevelTool:{commandFn:k.enableLevelTool,options:{}},resetMPRView:{commandFn:k.resetMPRView,options:{}},setBlendModeToComposite:{commandFn:k.setBlendModeToComposite,options:{blendMode:P.COMPOSITE_BLEND}},setBlendModeToMaximumIntensity:{commandFn:k.setBlendModeToMaximumIntensity,options:{blendMode:P.MAXIMUM_INTENSITY_BLEND}},setBlendModeToMinimumIntensity:{commandFn:k.setBlendMode,options:{blendMode:P.MINIMUM_INTENSITY_BLEND}},setBlendModeToAverageIntensity:{commandFn:k.setBlendMode,options:{blendMode:P.AVERAGE_INTENSITY_BLEND}},setSlabThickness:{commandFn:k.setSlabThickness,options:{}},increaseSlabThickness:{commandFn:k.changeSlabThickness,options:{change:3}},decreaseSlabThickness:{commandFn:k.changeSlabThickness,options:{change:-3}},mpr2d:{commandFn:k.mpr2d,storeContexts:["viewports"],options:{},context:"VIEWER"},getVtkApiForViewportIndex:{commandFn:k.getVtkApis,context:"VIEWER"}},defaultContext:"ACTIVE_VIEWPORT::VTK"}},C=n(1),T=n.n(C),x=n(19),k=n.n(x);n(1023);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=.1,A=1e3,L=.1,U=function(e){var t=e.label;return o.a.createElement("div",{className:"toolbar-button-label"},t)};U.propTypes={label:T.a.string.isRequired};var V=function(e){var t=e.value,n=e.min,r=e.max,a=e.onChange;return o.a.createElement("div",{className:"toolbar-slider-container"},o.a.createElement("label",{htmlFor:"toolbar-slider"},t,"mm"),o.a.createElement(c.t,{value:t,min:n,max:r,step:L,onChange:a,id:"toolbar-slider"}))};V.propTypes={value:T.a.number.isRequired,min:T.a.number.isRequired,max:T.a.number.isRequired,onChange:T.a.func.isRequired};function F(e){e.parentContext;var t=e.toolbarClickCallback,n=e.button,r=(e.activeButtons,e.isActive),i=e.className,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.operationButtons&&e.operationButtons[0]}(n),u=j(Object(a.useState)(function(e){return{value:_,sliderMin:_,sliderMax:A,modeChecked:void 0,operation:e}}(s)),2),l=u[0],f=u[1],p=n.label,m=n.operationButtons,d=function(e,t){return k()("toolbar-button","slab-thickness",t,{active:e})}(r,i),h=function(e){return e.operationButtons.map((function(e){return{key:e.label,value:e.id}}))}(n);return Object(a.useEffect)((function(){!function(e,t,n,r){if("boolean"==typeof t){var a=r.deactivateButton,o=t?e:a;n&&o&&n(o)}}(l.operation,l.modeChecked,t,n)}),[l.modeChecked,l.operation]),Object(a.useEffect)((function(){!function(e,t,n,r){if(t&&n){n(function(e,t){var n=N({},e);return n.commandOptions=N({},e.commandOptions,{slabThickness:t}),n}(r.actionButton,e),event)}}(l.value,l.modeChecked,t,n)}),[l.operation,l.modeChecked,l.value]),o.a.createElement("div",{className:d},o.a.createElement("div",{className:"container"},o.a.createElement(V,{value:l.value,min:l.sliderMin,max:l.sliderMax,onChange:function(e){var t=Number(e.target.value);t!==l.value&&f(N({},l,{value:t,modeChecked:!0}))}}),o.a.createElement(U,{key:"toolbar-label",label:p})),o.a.createElement("div",{className:"controller"},o.a.createElement(c.b,{label:"mode",checked:l.modeChecked,onChange:function(e){f(N({},l,{modeChecked:e}))}}),o.a.createElement(c.q,{key:"toolbar-select",options:h,value:h[0].value,onChange:function(e){var t=m.find((function(t){return t.id===e}));t!==l.operation&&f(N({},l,{operation:t}))}})))}F.propTypes={parentContext:T.a.object.isRequired,toolbarClickCallback:T.a.func.isRequired,button:T.a.object.isRequired,activeButtons:T.a.array.isRequired,isActive:T.a.bool,className:T.a.string};var B=F,q=n(63),z=n(147),H=z.a.studyMetadataManager,W=!0;function G(e){e.parentContext;var t=e.toolbarClickCallback,n=e.button,r=(e.activeButtons,e.isActive),a=(e.className,n.id),i=n.label,s=n.icon,u=Object(q.d)((function(e){var t=e.viewports,n=void 0===t?{}:t;return{viewportSpecificData:n.viewportSpecificData,activeViewportIndex:n.activeViewportIndex}})),l=u.viewportSpecificData,f=u.activeViewportIndex;return W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e[t])return!1;var n=e[t],r=n.displaySetInstanceUID,a=n.StudyInstanceUID,o=H.all(),i=o.find((function(e){return e.studyInstanceUID===a}));if(!i)return!1;var s=i._displaySets.find((function(e){return e.displaySetInstanceUID===r}));return!!s&&s.isReconstructable}(l,f),o.a.createElement(o.a.Fragment,null,W&&o.a.createElement(c.H,{key:a,label:i,icon:s,onClick:function(e){return t(n,e)},isActive:r}))}G.propTypes={parentContext:T.a.object.isRequired,toolbarClickCallback:T.a.func.isRequired,button:T.a.object.isRequired,activeButtons:T.a.array.isRequired,isActive:T.a.bool,className:T.a.string};var $="command",J="setToolActive",Y={definitions:[{id:"Crosshairs",label:"Crosshairs",icon:"crosshairs",type:J,commandName:"enableCrosshairsTool",commandOptions:{}},{id:"WWWC",label:"WWWC",icon:"level",type:J,commandName:"enableLevelTool",commandOptions:{}},{id:"Reset",label:"Reset",icon:"reset",type:$,commandName:"resetMPRView",commandOptions:{}},{id:"changeSlabThickness",label:"Slab Thickness",icon:"soft-tissue",CustomComponent:B,commandName:"setSlabThickness",actionButton:{id:"setSlabThickness",label:"slider",type:$,commandName:"setSlabThickness",commandOptions:{}},deactivateButton:{id:"setBlendModeToComposite",type:J,commandName:"setBlendModeToComposite",commandOptions:{}},operationButtons:[{id:"setBlendModeToMaximumIntensity",label:"MIP",type:J,commandName:"setBlendModeToMaximumIntensity",commandOptions:{}},{id:"setBlendModeToMinimumIntensity",label:"MinIP",type:J,commandName:"setBlendModeToMinimumIntensity",commandOptions:{}},{id:"setBlendModeToAverageIntensity",label:"AvgIP",type:J,commandName:"setBlendModeToAverageIntensity",commandOptions:{}}]},{id:"2DMPR",label:"2D MPR",icon:"cube",CustomComponent:G,type:$,commandName:"mpr2d",context:"ACTIVE_VIEWPORT::CORNERSTONE"}],defaultContext:"ACTIVE_VIEWPORT::VTK"};function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function te(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=n(660);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var se=Object(c.L)((function(){return Object(c.M)((function(){return Promise.resolve().then(n.bind(null,671))}))})),ce={id:"vtk",version:oe.a,getViewportModule:function(e){var t=e.commandsManager,n=e.servicesManager;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function r(){return Z(this,r),te(this,ne(r).apply(this,arguments))}return re(r,n),ee(r,[{key:"render",value:function(){return o.a.createElement(e,K({},this.props,{onScroll:function(e){return t.runCommand("getVtkApiForViewportIndex",{index:e})}}))}}]),r}(o.a.Component)}((function(e){return o.a.createElement(se,ie({},e,{servicesManager:n,commandsManager:t}))}),t)},getToolbarModule:function(){return Y},getCommandsModule:function(e){var t=e.commandsManager,n=e.servicesManager;return D({commandsManager:t,servicesManager:n})}},ue=n(643),le=Object.values({BASIC_TEXT_SR:"1.2.840.10008.5.1.4.1.1.88.11",ENHANCED_SR:"1.2.840.10008.5.1.4.1.1.88.22",COMPREHENSIVE_SR:"1.2.840.10008.5.1.4.1.1.88.33",COMPREHENSIVE_3D_SR:"1.2.840.10008.5.1.4.1.1.88.34",PROCEDURE_LOG_STORAGE:"1.2.840.10008.5.1.4.1.1.88.40",MAMMOGRAPHY_CAD_SR:"1.2.840.10008.5.1.4.1.1.88.50",CHEST_CAD_SR:"1.2.840.10008.5.1.4.1.1.88.65",X_RAY_RADIATION_DOSE_SR:"1.2.840.10008.5.1.4.1.1.88.67",ACQUISITION_CONTEXT_SR_STORAGE:"1.2.840.10008.5.1.4.1.1.88.71"}),fe={id:"OHIFDicomHtmlSopClassHandler",type:ue.a.SOP_CLASS_HANDLER,sopClassUIDs:le,getDisplaySetFromSeries:function(e,t,n,r){var a=e.getFirstInstance(),o=a.getData().metadata,i=o.SeriesDescription,s=o.SeriesNumber,c=o.SeriesDate,u=o.SeriesTime,l={plugin:"html",Modality:"SR",displaySetInstanceUID:z.a.guid(),wadoRoot:t.getData().wadoRoot,wadoUri:a.getData().wadouri,SOPInstanceUID:a.getSOPInstanceUID(),SeriesInstanceUID:e.getSeriesInstanceUID(),StudyInstanceUID:t.getStudyInstanceUID(),SeriesDescription:i,metadata:o,SeriesDate:c,SeriesTime:u,SeriesNumber:s,authorizationHeaders:r,sopClassUids:le,images:e._instances,isDerived:!0,referencedDisplaySets:[],getSourceDisplaySet:function(){return l.referencedDisplaySets}};return l}},pe=n(661),me=o.a.lazy((function(){return n.e(16).then(n.bind(null,1152))})),de=function(e){return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(me,e))},he={id:"html",version:pe.a,getViewportModule:function(){return de},getSopClassHandlerModule:function(){return fe}},ve=n(16),ge=n(7),ye=n.n(ge),be=n(8),Se=n.n(be),we=ye.a.importInternal,Oe=we("drawing/draw"),Ie=we("drawing/drawLine"),Ee=we("drawing/getNewContext");function Pe(e,t,n){var r=Ee(e.canvasContext.canvas),a=e.element,o=Se.a.pixelToCanvas(a,t),i=a.clientWidth,s=a.clientHeight;Oe(r,(function(e){Ie(e,a,{x:o.x+10,y:o.y},{x:i,y:o.y},n,"canvas"),Ie(e,a,{x:o.x-10,y:o.y},{x:0,y:o.y},n,"canvas"),Ie(e,a,{x:o.x,y:o.y+10},{x:o.x,y:s},n,"canvas"),Ie(e,a,{x:o.x,y:o.y-10},{x:o.x,y:0},n,"canvas")}))}function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re={DICOM_SEG_TEMP_CROSSHAIRS_TOOL:"DICOMSegTempCrosshairsTool"}.DICOM_SEG_TEMP_CROSSHAIRS_TOOL,Ne=Object(ge.getModule)("segmentation").getters,Me=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ce(this,t);var r={mixins:["enabledOrDisabledBinaryTool"],name:Re},a=Object.assign(r,n);return(e=xe(this,ke(t).call(this,a)))._rtStructModule=ye.a.getModule("rtstruct"),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,e),n=t,(r=[{key:"renderToolData",value:function(e){var t=e.detail,n=(t.element,Object(ge.getToolState)(e.currentTarget,this.name));if(n)for(var r=0;r<n.data.length;r++)Pe(t,n.data[r].center,{color:ge.toolColors.getActiveColor(),lineWidth:1}),n.data.pop()}}])&&Te(n.prototype,r),a&&Te(n,a),t}(Object(ge.importInternal)("base/BaseTool"));Me.addCrosshair=function(e,t,n){var r=Ne.labelmap3D(e),a=ye.a.getToolState(e,"stack"),o=Se.a.getEnabledElement(e).image,i=o.rows,s=o.columns;if(a){for(var c=a.data[0].imageIds.findIndex((function(e){return e===t})),u=r.labelmaps2D[c].pixelData,l=0,f=0,p=0,m=0;m<i;m++)for(var d=0;d<s;d++)u[m*s+d]===n&&(p++,l+=d+.5,f+=m+.5);l/=p,f/=p;var h=ge.globalImageIdSpecificToolStateManager.saveToolState();h[t]||(h[t]={});var v=h[t];v[Re]?v[Re].data||(v[Re].data=[]):v[Re]={data:[]},v[Re].data.push({center:{x:l,y:f},segmentNumber:n}),"enabled"!==ye.a.getToolForElement(e,Re).mode&&ye.a.setToolEnabled(Re)}};var _e={definitions:[],defaultContext:"ACTIVE_VIEWPORT::CORNERSTONE"},Ae=n(33);function Le(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ue(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ue(o,r,a,i,s,"next",e)}function s(e){Ue(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Fe(e,t,n,r,a,o){return Be.apply(this,arguments)}function Be(){return(Be=Ve(regeneratorRuntime.mark((function e(t,n,r,a,o,i){var s,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=ye.a.getModule("segmentation"),c=s.setters,u=qe(t[0]),l=ze(a),c.labelmap3DByFirstImageId(t[0],r,u,a,t.length,o,l),n.labelmapSegments||(n.labelmapSegments={}),n.labelmapSegments[u]=i.length?Array.from(new Set(i.filter((function(e){return!!e})).reduce((function(e,t){return e.concat(t)})))):[],n.labelmapIndex=u,console.log("Segmentation loaded."),f=new CustomEvent("extensiondicomsegmentationsegloaded",{detail:{imageIds:t,segDisplaySet:n,labelmapBuffer:r,segMetadata:a,segmentsOnFrame:o,labelmapSegments:i}}),document.dispatchEvent(f),e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){var t=ye.a.getModule("segmentation").state.series[e],n=0;if(t){var r=t.labelmaps3D;n=r.length;for(var a=0;a<r.length;a++)if(!r[a]){n=a;break}}return n}function ze(e){var t=ye.a.getModule("segmentation"),n=t.setters,r=t.state.colorLutTables,a=function(){for(var e=ye.a.getModule("segmentation").state.colorLutTables,t=e.length,n=0;n<e.length;n++)if(!e[n]){t=n;break}return t}(),o=e.data;if(!o.some((function(e){return e&&(e.ROIDisplayColor||e.RecommendedDisplayCIELabValue)})))return 0;for(var i=[],s=0;s<o.length;s++){var c=o[s];if(c){var u=c.ROIDisplayColor,l=c.RecommendedDisplayCIELabValue;if(l){var f=Ae.b.data.Colors.dicomlab2RGB(l).map((function(e){return Math.round(255*e)}));i[s]=[].concat(Le(f),[255])}else i[s]=u?[].concat(Le(u),[255]):Le(r[0][s])}}return i.shift(),n.colorLUT(a,i),a}var He=n(9);function We(){cornerstone.getEnabledElements().forEach((function(e){cornerstone.updateImage(e.element)}))}function Ge(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function $e(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ge(o,r,a,i,s,"next",e)}function s(e){Ge(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Je=z.a.studyMetadataManager;function Ye(e,t,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=$e(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c,u,l,f,p,m,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>3&&void 0!==d[3]?d[3]:function(){},o=d.length>4&&void 0!==d[4]?d[4]:function(e){console.error(e.message)},i=Je.get(t.StudyInstanceUID),s=i.getFirstImageId(t.displaySetInstanceUID),c=ye.a.getModule("segmentation"),u=c.state,l=u.series[s],f=l?l.activeLabelmapIndex:void 0,(p=!0===r.hasOverlapping?r.originLabelMapIndex:r.labelmapIndex)!==f){e.next=11;break}return He.a.warn("".concat(f," is already the active labelmap")),e.abrupt("return",p);case 11:if(r.isLoaded||r.loadError){e.next=26;break}return e.prev=12,e.next=15,r.load(t,n);case 15:e.next=26;break;case 17:return e.prev=17,e.t0=e.catch(12),r.isLoaded=!1,r.loadError=!0,r.segLoadErrorMessagge=e.t0.message,o(e.t0),m=new CustomEvent("segmentationLoadingError"),document.dispatchEvent(m),e.abrupt("return",-1);case 26:return p=!0===r.hasOverlapping?r.originLabelMapIndex:r.labelmapIndex,u=ye.a.getModule("segmentation").state,(l=u.series[s])&&(l.activeLabelmapIndex=p),We(),a(),e.abrupt("return",p);case 33:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}var Ke=n(95);function Ze(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,o=Ke.a.StudyMetadata.getReferencedDisplaySet(t,e);return r&&(n=Ye(o,e,t,void 0,a)),{referencedDisplaySet:o,activatedLabelmapPromise:n}}function Qe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}var et=ve.a.utils.DicomLoaderService,tt=Ae.b.data,nt=tt.DicomMessage,rt=tt.DicomMetaDictionary,at=Object.values({DICOM_SEG:"1.2.840.10008.5.1.4.1.1.66.4"});function ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;return Ae.b.adapters.Cornerstone.Segmentation.generateToolState(t,e,cornerstone.metaData,r,n,a)}function it(e,t,n){var r=e.find((function(e){return e.StudyInstanceUID===t})).displaySets.filter((function(e){return e.SeriesInstanceUID===n}));return r.length>1&&console.warn("More than one display set with the same SeriesInstanceUID. This is not supported yet..."),r[0].images.map((function(e){return e.getImageId()}))}var st=n(6),ct=n.n(st),ut=(n(1024),function(e){var t=e.defaultColor,n=e.index,r=e.onNext,a=e.onPrev;return o.a.createElement("div",{className:"dcmseg-brush-color-selector"},o.a.createElement("div",{className:"selector-active-segment",style:{backgroundColor:t}},n),o.a.createElement("div",{className:"selector-buttons"},o.a.createElement("button",{onClick:a},"Previous"),o.a.createElement("button",{onClick:r},"Next")))});ut.propTypes={defaultColor:T.a.string.isRequired,index:T.a.oneOfType([T.a.number,T.a.string]).isRequired,onNext:T.a.func.isRequired,onPrev:T.a.func.isRequired};n(1025);var lt=function(e){var t=e.value,n=e.onChange,r=e.min,a=e.max,i=e.step;return o.a.createElement("div",{className:"dcmseg-brush-radius"},o.a.createElement("label",{htmlFor:"dcmseg-brush-radius"},"Brush Radius"),o.a.createElement(c.t,{value:t,min:r,max:a,step:i,onChange:n,id:"dcmseg-brush-radius"}))};lt.propTypes={value:T.a.number.isRequired,onChange:T.a.number,min:T.a.number,max:T.a.number,step:T.a.number},lt.defaultProps={onChange:function(){},min:1,max:50,step:1};n(1026);var ft=function(e){var t=e.onClick,n=e.title,r=e.description;return o.a.createElement("li",{className:"dcmseg-segmentation-item",onClick:t},o.a.createElement("div",{className:"segmentation-meta"},o.a.createElement("div",{className:"segmentation-meta-title"},n),o.a.createElement("div",{className:"segmentation-meta-description"},r)))};ft.propTypes={onClick:T.a.func.isRequired,title:T.a.string.isRequired,description:T.a.string.isRequired},ft.defaultProps={description:""};var pt=ft;n(1027);function mt(){return(mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(n,!0).forEach((function(t){vt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var yt=function(e){var t=e.configuration,n=e.onBack,r=e.onChange,i=e.servicesManager,s=e.disabledFields,c=void 0===s?[]:s,u=gt(Object(a.useState)({renderFill:t.renderFill,renderOutline:t.renderOutline,shouldRenderInactiveLabelmaps:t.shouldRenderInactiveLabelmaps,fillAlpha:t.fillAlpha,outlineAlpha:t.outlineAlpha,outlineWidth:t.outlineWidth,fillAlphaInactive:t.fillAlphaInactive,outlineAlphaInactive:t.outlineAlphaInactive,segsTolerance:t.segsTolerance}),2),l=u[0],f=u[1];Object(a.useEffect)((function(){r(l)}),[l]);var p,m=function(e){f((function(t){return ht({},t,vt({},e,!t[e]))}))},d=function(e,t){f((function(n){return ht({},n,vt({},e,t))}))},h=document.getElementById("segToleranceValue");h&&(h.onchange=(p=function(){var e=i.services,t=e.UINotificationService,n=e.LoggerService,r=new Error("Segmentation loader tolerance changed.        This operation can potentially generate errors in the Segmentation parsing.");n.error({error:r,message:r.message}),t.show({title:"Segmentation panel",message:r.message,type:"warning",autoClose:!0})},function(){p&&(p.apply(void 0,arguments),p=null)}));var v=function(e){return parseFloat(e/100).toFixed(2)};return o.a.createElement("div",{className:"dcmseg-segmentation-settings"},o.a.createElement("div",{className:"settings-title"},o.a.createElement("h3",null,"Segmentations Settings"),o.a.createElement("button",{className:"return-button",onClick:n},"Back")),o.a.createElement("div",{className:"settings-group",style:{marginBottom:l.renderFill?15:0}},o.a.createElement(bt,{label:"Segment Fill",checked:l.renderFill,onChange:function(){return m("renderFill")}}),l.renderFill&&o.a.createElement(St,{label:"Opacity",step:1,min:0,max:100,value:100*l.fillAlpha,onChange:function(e){return d("fillAlpha",v(e.target.value))},showPercentage:!0})),o.a.createElement("div",{className:"settings-group",style:{marginBottom:l.renderOutline?15:0}},o.a.createElement(bt,{label:"Segment Outline",checked:l.renderOutline,onChange:function(){return m("renderOutline")}}),l.renderOutline&&o.a.createElement(o.a.Fragment,null,!c.includes("outlineAlpha")&&o.a.createElement(St,{value:100*l.outlineAlpha,label:"Opacity",showPercentage:!0,step:1,min:0,max:100,onChange:function(e){return d("outlineAlpha",v(e.target.value))}}),!c.includes("outlineWidth")&&o.a.createElement(St,{value:l.outlineWidth,label:"Width",showValue:!0,step:1,min:0,max:5,onChange:function(e){return d("outlineWidth",parseInt(e.target.value))}}))),(l.renderFill||l.renderOutline)&&!c.includes("shouldRenderInactiveLabelmaps")&&o.a.createElement("div",{className:"settings-group",style:{marginBottom:l.shouldRenderInactiveLabelmaps?15:0}},o.a.createElement(bt,{label:"Render inactive segmentations",checked:l.shouldRenderInactiveLabelmaps,onChange:function(){return m("shouldRenderInactiveLabelmaps")}}),l.shouldRenderInactiveLabelmaps&&o.a.createElement(o.a.Fragment,null,l.renderFill&&!c.includes("fillAlphaInactive")&&o.a.createElement(St,{label:"Fill Opacity",showPercentage:!0,step:1,min:0,max:100,value:100*l.fillAlphaInactive,onChange:function(e){return d("fillAlphaInactive",v(e.target.value))}}),l.renderOutline&&!c.includes("outlineAlphaInactive")&&o.a.createElement(St,{label:"Outline Opacity",showPercentage:!0,step:1,min:0,max:100,value:100*l.outlineAlphaInactive,onChange:function(e){return d("outlineAlphaInactive",v(e.target.value))}}))),o.a.createElement("div",{className:"settings-group",style:{marginBottom:15}},o.a.createElement("label",{style:{margin:"0 15px"}},"Tolerance:",o.a.createElement("input",{id:"segToleranceValue",style:{margin:"0 15px"},label:"Tolerance",onKeyPress:function(e){e.key.match(/[^-.e0-9]+/g)&&e.preventDefault()},onChange:function(e){d("segsTolerance",e.target.value)},value:l.segsTolerance}))))},bt=function(e){var t=e.label,n=e.checked,r=e.onChange;return o.a.createElement("div",{className:"custom-check"},o.a.createElement("label",null,o.a.createElement("span",null,t),o.a.createElement("input",{type:"checkbox",checked:n,onChange:r})))},St=function(e){var t=e.label,n=e.onChange;return o.a.createElement("div",{className:"range"},o.a.createElement("label",{htmlFor:"range"},t),o.a.createElement(c.t,mt({},e,{onChange:function(e){e.persist(),n(e)}})))};yt.propTypes={configuration:T.a.shape({renderFill:T.a.bool.isRequired,renderOutline:T.a.bool.isRequired,shouldRenderInactiveLabelmaps:T.a.bool.isRequired,fillAlpha:T.a.oneOfType([T.a.string,T.a.number]).isRequired,outlineAlpha:T.a.oneOfType([T.a.string,T.a.number]).isRequired,outlineWidth:T.a.number.isRequired,fillAlphaInactive:T.a.oneOfType([T.a.string,T.a.number]).isRequired,outlineAlphaInactive:T.a.oneOfType([T.a.string,T.a.number]).isRequired,segsTolerance:T.a.oneOfType([T.a.string,T.a.number]).isRequired}).isRequired,onBack:T.a.func.isRequired,onChange:T.a.func.isRequired};var wt=yt,Ot=n(223);n(1030);function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Et=function(e){var t=e.color;return o.a.createElement("div",{className:"segment-color",style:{backgroundColor:"rgba(".concat(t.join(","),")")}})};Et.propTypes={color:T.a.array.isRequired};var Pt=function(e){var t=e.index,n=e.label,r=e.onClick,i=e.itemClass,s=e.color,u=e.labelmap3D,l=e.visible,f=e.onVisibilityChange,p=It(Object(a.useState)(l),2),m=p[0],d=p[1];Object(a.useEffect)((function(){d(l)}),[l]);return o.a.createElement("div",{className:"dcmseg-segment-item"},o.a.createElement(c.E,{key:t,itemKey:t,itemIndex:t,itemClass:i,itemMeta:o.a.createElement(Et,{color:s}),itemMetaClass:"segment-color-section",onItemClick:function(){return r(t)}},o.a.createElement("div",null,o.a.createElement("div",{className:"segment-label",style:{marginBottom:4}},o.a.createElement("a",{"data-tip":!0,"data-for":"SegmentHover".concat(t)},o.a.createElement("span",null,n)),o.a.createElement(Ot.a,{id:"SegmentHover".concat(t),delayShow:250,place:"right",border:!0,type:"light"},o.a.createElement("span",null,n)),o.a.createElement(c.j,{className:"eye-icon ".concat(m&&"--visible"),name:m?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(e){e.stopPropagation();var n=!m;d(n),f(n,t,u)}})),!1,!1)))};Pt.propTypes={index:T.a.oneOfType([T.a.string,T.a.number]).isRequired,label:T.a.string.isRequired,onClick:T.a.func,itemClass:T.a.string,color:T.a.array.isRequired},Pt.defaultProps={itemClass:"",onClick:function(){}};var Dt=Pt,Ct=n(668);function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(n,!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=getComputedStyle(document.body),Rt=jt.getPropertyValue("--ui-gray-darker"),Nt=jt.getPropertyValue("--active-color"),Mt=jt.getPropertyValue("--default-color"),_t=jt.getPropertyValue("--ui-gray-dark"),At={singleValue:function(e,t){return xt({},e,{width:"100%"})},control:function(e,t){return xt({},e,{cursor:"pointer",background:Rt,borderRadius:t.isFocused?"5px 5px 5px 5px":5,borderColor:t.isFocused?Nt:Mt,boxShadow:(t.isFocused,null),minHeight:"50px","&:hover":{borderColor:Nt}})},menu:function(e){return xt({},e,{borderRadius:5,background:Rt})},option:function(e,t){return xt({},e,{cursor:"pointer","&:first-of-type":{borderTopLeftRadius:5,borderTopRightRadius:5},"&:last-of-type":{borderBottomLeftRadius:5,borderBottomRightRadius:5},background:t.isSelected?_t:Rt,"&:hover":{background:_t}})}},Lt=function(e){var t=e.value,n=e.formatOptionLabel,r=e.options;return o.a.createElement(Ct.a,{value:void 0===t?null:t,formatOptionLabel:n,styles:At,options:r})};n(1031);function Ut(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vt(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(n,!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ht=z.a.studyMetadataManager,Wt=function(e){var t=e.studies,n=e.viewports,r=e.activeIndex,i=e.isOpen,s=e.onSegmentItemClick,u=e.onSegmentVisibilityChange,l=e.onConfigurationChange,f=e.onDisplaySetLoadFailure,p=e.onSelectedSegmentationChange,m=e.activeContexts,d=void 0===m?[]:m,h=e.contexts,v=void 0===h?{}:h,g=e.servicesManager,y=function(){return d.includes(v.VTK)},b=ye.a.getModule("segmentation").configuration;void 0===b.segsTolerance&&(b.segsTolerance=.01);var S=b.radius||10,w=zt(Object(a.useState)({brushRadius:S,brushColor:"rgba(221, 85, 85, 1)",selectedSegment:0,selectedSegmentation:0,showSettings:!1,labelMapList:[],segmentList:[],segmentsHidden:[],segmentNumbers:[],isLoading:!1,isDisabled:!0}),2),O=w[0],I=w[1],E=function(){return n[r]},P=function(e){var t;(t=E().StudyInstanceUID,Ht.get(t).getDerivedDatasets({Modality:"SEG"})).forEach((function(t){t.tolerance=e,t.isLoaded=!1,t.loadError=!1}))},D=function(){var e=V();return e.labelmaps3D[e.activeLabelmapIndex]},C=function(){return D().activeSegmentIndex},T=function(){return D().labelmaps2D},x=function(e){var t=C(),n=E();if(e!==t){D().activeSegmentIndex=e;var r,a=n.StudyInstanceUID,o=Ht.get(a).getDisplaySets(),i=V().activeLabelmapIndex;return o.forEach((function(t){t.labelmapSegments&&Object.keys(t.labelmapSegments).forEach((function(n){t.labelmapSegments[n].includes(e)&&(i=n,r=!0===t.hasOverlapping?t.originLabelMapIndex:n)}))})),V().activeLabelmapIndex=i,r&&I((function(e){return Bt({},e,{selectedSegmentation:r})})),We(),e}He.a.info("".concat(t," is already the active segment"))};Object(a.useEffect)((function(){var e=function(e){He.a.warn("Segmentation Panel: labelmap modified",e),R()};return document.addEventListener("extensiondicomsegmentationsegloaded",R),document.addEventListener("extensiondicomsegmentationsegselected",j),ye.a.store.state.enabledElements.forEach((function(t){return t.addEventListener("cornerstonetoolslabelmapmodified",e)})),function(){document.removeEventListener("extensiondicomsegmentationsegloaded",R),document.removeEventListener("extensiondicomsegmentationsegselected",j),ye.a.store.state.enabledElements.forEach((function(t){return t.removeEventListener("cornerstonetoolslabelmapmodified",e)}))}}),[r,n]);var j=function(e){var t=e.detail.activatedLabelmapIndex;-1!==t&&I((function(e){return Bt({},e,{selectedSegmentation:t})}))},R=function(){var e=E(),t=!e||!e.StudyInstanceUID;if(!t)if(V()){var n=N(),r=U(),a=r.items,o=r.numbers,i=r.segmentsHidden;I((function(e){return Bt({},e,{segmentsHidden:i,segmentNumbers:o,labelMapList:n,segmentList:a,isDisabled:t})}))}else I((function(e){return Bt({},e,{segmentsHidden:[],segmentNumbers:[],labelMapList:[],segmentList:[],isDisabled:t})}))};Object(a.useEffect)((function(){R()}),[n,r,i,O.selectedSegmentation,d,O.isLoading]),Object(a.useEffect)((function(){I((function(e){return Bt({},e,{showSettings:e.showSettings&&!i})}))}),[i]);var N=function(){var e=E();return Gt(e.StudyInstanceUID,e.SeriesInstanceUID).filter((function(e){return!0!==e.loadError})).map((function(n,r){var a,o,i=n.labelmapIndex,s=n.originLabelMapIndex,c=n.hasOverlapping,u=n.SeriesDate,l=n.SeriesTime,m="".concat(u,":").concat(l).split(".")[0],d=ct()(m,"YYYYMMDD:HHmmss").format("ddd, MMM Do YYYY, h:mm:ss a");return{value:!0===c?s:i,title:n.SeriesDescription,description:d,onClick:(a=regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ye(e,t,n,p,f);case 2:a=r.sent,I((function(e){return Bt({},e,{selectedSegmentation:a})}));case 4:case"end":return r.stop()}}),r)})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){Vt(o,n,r,i,s,"next",e)}function s(e){Vt(o,n,r,i,s,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})}}))},M=function(e){x(e),O.selectedSegment===e||I((function(t){return Bt({},t,{selectedSegment:e})}));var n=[];T().forEach((function(t,r){t.segmentsOnLabelmap.includes(e)&&n.push(r)}));var a,o=(a=n).reduce((function(e,t){return e+t}))/a.length,i=n.reduce((function(e,t){return Math.abs(t-o)<Math.abs(e-o)?t:e}));if(d.includes(v.CORNERSTONE)){var c=A(),u=ye.a.getToolState(c,"stack");if(!u)return;var l=u.data[0].imageIds,f=l[i],p=l.indexOf(f),m=Se.a.metaData.get("SOPInstanceUID",f),h=Se.a.metaData.get("StudyInstanceUID",f);Me.addCrosshair(c,f,e),s({StudyInstanceUID:h,SOPInstanceUID:m,frameIndex:p,activeViewportIndex:r})}if(y()){var g=D(),b=function(){var e=E(),t=e.StudyInstanceUID,n=e.displaySetInstanceUID;return Ht.get(t).getDisplaySets().find((function(e){return e.displaySetInstanceUID===n}))}(),S=g.labelmaps2D[i];s({studies:t,StudyInstanceUID:b.StudyInstanceUID,displaySetInstanceUID:b.displaySetInstanceUID,SOPClassUID:E().sopClassUIDs[0],SOPInstanceUID:b.SOPInstanceUID,segmentNumber:e,frameIndex:i,frame:S})}},_=function(){var e=ye.a.getModule("segmentation").state,t=D().colorLUTIndex;return e.colorLutTables[t]},A=function(){return Se.a.getEnabledElements()[r].element},L=function(e,t,n){var r=[];n.metadata.hasOverlapping?V().labelmaps3D.filter((function(e){var t=e.metadata;return n.metadata.segmentationSeriesInstanceUID===t.segmentationSeriesInstanceUID})).filter((function(e){return e.labelmaps2D.some((function(e){return e.segmentsOnLabelmap.includes(t)}))})).forEach((function(n){n.segmentsHidden[t]=!e,r=Ut(new Set([].concat(Ut(r),Ut(n.segmentsHidden))))})):(n.segmentsHidden[t]=!e,r=Ut(n.segmentsHidden));I((function(e){return Bt({},e,{segmentsHidden:r})})),R(),We(),y()&&u(t,e)},U=function(){for(var e=T().reduce((function(e,t){if(t)for(var n=t.segmentsOnLabelmap,r=0;r<n.length;r++)e.includes(n[r])||0===n[r]||e.push(n[r]);return e}),[]).sort((function(e,t){return e-t})),t=D(),n=_(),r=t.metadata&&t.metadata.data,a=[],i=[],s=0;s<e.length;s++){var c=e[s],u=n[c],l="(unlabeled)",f=c;if(r){var p=t.metadata.data[c];p&&(f=p.SegmentNumber,l=p.SegmentLabel)}var m=O.selectedSegment===f;i.push(f),a.push(o.a.createElement(Dt,{key:f,itemClass:"segment-item ".concat(m&&"selected"),onClick:M,label:l,index:f,color:u,labelmap3D:t,visible:!t.segmentsHidden[c],onVisibilityChange:L}))}return{items:a,numbers:i,segmentsHidden:t.segmentsHidden}},V=function(){var e,t,n,r=ye.a.getModule("segmentation"),a=(e=E(),t=e.StudyInstanceUID,n=e.displaySetInstanceUID,Ht.get(t).getFirstImageId(n));return r.state.series[a]},F=O.labelMapList.find((function(e){return e.value===O.selectedSegmentation}));return O.showSettings?o.a.createElement(wt,{disabledFields:y()?["outlineAlpha","shouldRenderInactiveLabelmaps"]:[],configuration:b,onBack:function(){return I((function(e){return Bt({},e,{showSettings:!1})}))},onChange:function(e){b.renderFill=e.renderFill,b.renderOutline=e.renderOutline,b.shouldRenderInactiveLabelmaps=e.shouldRenderInactiveLabelmaps,b.fillAlpha=e.fillAlpha,b.outlineAlpha=e.outlineAlpha,b.outlineWidth=e.outlineWidth,b.fillAlphaInactive=e.fillAlphaInactive,b.outlineAlphaInactive=e.outlineAlphaInactive,b.segsTolerance=e.segsTolerance,l(e),P(b.segsTolerance),We()},servicesManager:g}):o.a.createElement("div",{className:k()("dcmseg-segmentation-panel",{disabled:O.isDisabled})},!1,o.a.createElement(c.j,{className:"cog-icon",name:"cog",width:"25px",height:"25px",onClick:function(){return I((function(e){return Bt({},e,{showSettings:!0})}))}}),o.a.createElement("h3",null,"Segmentations"),o.a.createElement("div",{className:"segmentations"},o.a.createElement(Lt,{value:F,formatOptionLabel:pt,options:O.labelMapList})),o.a.createElement($t,{count:O.segmentList.length,isVisible:O.segmentsHidden.filter((function(e){return!0===e})).length<O.segmentNumbers.length&&O.segmentNumbers.length>0,onVisibilityChange:function(e){var t=[],n=D();O.segmentNumbers.forEach((function(r){y()&&u(r,e),n.segmentsHidden[r]=!e,t=Ut(new Set([].concat(Ut(t),Ut(n.segmentsHidden))))})),I((function(e){return Bt({},e,{segmentsHidden:t})})),R(),We()}},o.a.createElement(c.v,null,o.a.createElement(c.D,{headless:!0},O.segmentList))))};Wt.propTypes={viewports:T.a.shape({displaySetInstanceUID:T.a.string,frameRate:T.a.any,InstanceNumber:T.a.number,isMultiFrame:T.a.bool,isReconstructable:T.a.bool,Modality:T.a.string,plugin:T.a.string,SeriesDate:T.a.string,SeriesDescription:T.a.string,SeriesInstanceUID:T.a.string,SeriesNumber:T.a.any,SeriesTime:T.a.string,sopClassUIDs:T.a.arrayOf(T.a.string),StudyInstanceUID:T.a.string}),activeIndex:T.a.number.isRequired,studies:T.a.array.isRequired,isOpen:T.a.bool.isRequired},Wt.defaultProps={};var Gt=function(e,t){var n=Ht.get(e).getDerivedDatasets({referencedSeriesInstanceUID:t,Modality:"SEG"});return n.sort((function(e,t){var n=Number("".concat(e.SeriesDate).concat(e.SeriesTime));return Number("".concat(t.SeriesDate).concat(t.SeriesTime))-n})),n},$t=function(e){var t=e.count,n=e.children,r=e.isVisible,i=e.onVisibilityChange,s=zt(Object(a.useState)(r),2),u=s[0],l=s[1];return Object(a.useEffect)((function(){l(r)}),[r]),o.a.createElement("div",{className:"SegmentsSection"},o.a.createElement("div",{className:"header"},o.a.createElement("div",null,"Segments"),o.a.createElement("div",{className:"icons"},o.a.createElement(c.j,{className:"eye-icon ".concat(u&&"expanded"),name:u?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(){var e=!u;l(e),i(e)}}),o.a.createElement("div",{className:"count"},t))),n)};$t.defaultProps={onVisibilityChange:function(){}};var Jt=Wt,Yt=n(663),Xt=ve.a.utils.studyMetadataManager,Kt=function(e){var t=e.commandsManager;return{definitions:{jumpToFirstSegment:{commandFn:{jumpToFirstSegment:function(e){var n,r=e.viewports;try{var a=r.activeViewportIndex,o=r.viewportSpecificData[a],i=o.StudyInstanceUID,s=o.displaySetInstanceUID,c=Xt.get(i).getFirstImageId(s),u=ye.a.getModule("segmentation").state.series[c],l=u.labelmaps3D[u.activeLabelmapIndex].labelmaps2D,f=l.find((function(e){return!!e})).segmentsOnLabelmap[0],p=[];l.forEach((function(e,t){e.segmentsOnLabelmap.includes(f)&&p.push(t)}));var m=(n=p).reduce((function(e,t){return e+t}))/n.length,d=p.reduce((function(e,t){return Math.abs(t-m)<Math.abs(e-m)?t:e})),h=Se.a.getEnabledElements()[a].element,v=ye.a.getToolState(h,"stack");if(!v)return;var g=v.data[0].imageIds,y=g[d],b=g.indexOf(y),S=Se.a.metaData.get("SOPInstanceUID",y);Se.a.getEnabledElements().forEach((function(e){Se.a.updateImage(e.element)})),Me.addCrosshair(h,y,f),Se.a.getEnabledElements().forEach((function(e){Se.a.updateImage(e.element)}));t.runCommand("jumpToImage",{StudyInstanceUID:i,SOPInstanceUID:S,frameIndex:b,activeViewportIndex:a,refreshViewports:!1})}catch(e){console.log("Error in moving to the first segment slice")}}}.jumpToFirstSegment,storeContexts:["viewports"],options:{}}},defaultContext:"VIEWER"}};function Zt(){return(Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Qt=ve.a.utils.studyMetadataManager,en={id:"com.ohif.dicom-segmentation",version:Yt.a,preRegistration:function(e){var t=e.servicesManager,n=e.configuration;!function(e){e.servicesManager,e.configuration;var t=ye.a.BrushTool;[t,ye.a.SphericalBrushTool,ye.a.CorrectionScissorsTool].forEach((function(e){return ye.a.addTool(e)})),ye.a.addTool(t,{name:"BrushEraser",configuration:{alwaysEraseOnClick:!0}}),ye.a.addTool(Me)}({servicesManager:t,configuration:void 0===n?{}:n})},getToolbarModule:function(e){e.servicesManager;return _e},getPanelModule:function(e){var t=e.commandsManager,n=e.api,r=e.servicesManager,a=r.services,i=a.UINotificationService,s=a.LoggerService,c=function(e){var t=new CustomEvent("segmentation-panel-tab-updated",{detail:e});document.dispatchEvent(t)};return document.addEventListener("segseriesselected",(function(){t.runCommand("jumpToFirstSegment")})),document.addEventListener("extensiondicomsegmentationsegloaded",(function(e){var t=e.detail,n=t.segDisplaySet,r=t.segMetadata,a=Qt.get(n.StudyInstanceUID).getDerivedDatasets({referencedSeriesInstanceUID:r.seriesInstanceUid,Modality:"SEG"});c({badgeNumber:a.length,target:"segmentation-panel"})})),{menuOptions:[{icon:"list",label:"Segmentations",target:"segmentation-panel",stateEvent:"segmentation-panel-tab-updated",isDisabled:function(e,t){if(!e)return!0;for(var n=0;n<e.length;n++){var r=e[n];if(r&&r.series)for(var a=0;a<r.series.length;a++){if("SEG"===r.series[a].Modality){if(t){var o=Qt.get(t.StudyInstanceUID);if(!o)return;var i=o.getDerivedDatasets({referencedSeriesInstanceUID:t.SeriesInstanceUID,Modality:"SEG"});c({badgeNumber:i.length,target:"segmentation-panel"})}return!1}}}return!0}}],components:[{id:"segmentation-panel",component:function(e){var a=n.hooks.useAppContext().activeContexts;return o.a.createElement(Jt,Zt({},e,{activeContexts:a,contexts:n.contexts,onSegmentItemClick:function(e){t.runCommand("jumpToImage",e),t.runCommand("jumpToSlice",e)},onSegmentVisibilityChange:function(e,n){t.runCommand("setSegmentConfiguration",{segmentNumber:e,visible:n})},onConfigurationChange:function(e){t.runCommand("setSegmentationConfiguration",{globalOpacity:e.fillAlpha,outlineThickness:e.outlineWidth,renderOutline:e.renderOutline,visible:e.renderFill})},onSelectedSegmentationChange:function(){t.runCommand("requestNewSegmentation")},onDisplaySetLoadFailure:function(e){var t=e.message.includes("orthogonal")||e.message.includes("oblique")?"The segmentation has been detected as non coplanar,              If you really think it is coplanar,              please adjust the tolerance in the segmentation panel settings (at your own peril!)":e.message;s.error({error:e,message:t}),i.show({title:"DICOM Segmentation Loader",message:t,type:"error",autoClose:!1})},servicesManager:r}))}}],defaultContext:["VIEWER"]}},getCommandsModule:function(e){var t=e.commandsManager,n=e.servicesManager;return Kt({commandsManager:t,servicesManager:n})},getSopClassHandlerModule:function(e){return e.servicesManager,{id:"OHIFDicomSegSopClassHandler",type:ue.a.SOP_CLASS_HANDLER,sopClassUIDs:at,getDisplaySetFromSeries:function(e,t,n,r){var a=e.getFirstInstance(),o=a.getData().metadata,i=o.SeriesDate,s=o.SeriesTime,c=o.SeriesDescription,u=o.FrameOfReferenceUID,l=o.SOPInstanceUID,f=o.SeriesInstanceUID,p=o.StudyInstanceUID,m=o.SeriesNumber,d={Modality:"SEG",displaySetInstanceUID:z.a.guid(),wadoRoot:t.getData().wadoRoot,wadoUri:a.getData().wadouri,SOPInstanceUID:l,SeriesInstanceUID:f,StudyInstanceUID:p,FrameOfReferenceUID:u,authorizationHeaders:r,isDerived:!0,referencedDisplaySetUID:null,labelmapIndex:null,isLoaded:!1,loadError:!1,hasOverlapping:!1,SeriesDate:i,SeriesTime:s,SeriesNumber:m,SeriesDescription:c,metadata:o,tolerance:.01,getSourceDisplaySet:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return Ze(e,d,t,n)}};return d.load=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,u,l,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.isLoaded=!0,r=t.StudyInstanceUID,e.next=4,et.findDicomDataPromise(d,n);case 4:return a=e.sent,o=nt.readFile(a),rt.naturalizeDataset(o.dict)._meta=rt.namifyDataset(o.meta),i=it(n,r,t.SeriesInstanceUID),e.next=11,ot(a,i,d.tolerance);case 11:if(void 0!==(s=e.sent)){e.next=14;break}return e.abrupt("return");case 14:if(c=s.labelmapBufferArray,u=s.segMetadata,l=s.segmentsOnFrame,f=s.segmentsOnFrameArray,!(c.length>1)){e.next=35;break}p=[],m=0;case 18:if(!(m<c.length)){e.next=29;break}return u.segmentationSeriesInstanceUID=d.SeriesInstanceUID,u.hasOverlapping=!0,e.t0=p,e.next=24,Fe(i,d,c[m],u,l,f[m]);case 24:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 26:++m,e.next=18;break;case 29:d.hasOverlapping=!0,d.originLabelMapIndex=p[0],p[0],console.warn("Overlapping segments!"),e.next=40;break;case 35:return u.segmentationSeriesInstanceUID=d.SeriesInstanceUID,u.hasOverlapping=!1,e.next=39,Fe(i,d,c[0],u,l,[]);case 39:e.sent;case 40:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Qe(o,r,a,i,s,"next",e)}function s(e){Qe(o,r,a,i,s,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),d}}}},tn={RTSTRUCT_DISPLAY_TOOL:"RTStructDisplayTool"},nn=ye.a.importInternal,rn=nn("drawing/draw"),an=nn("drawing/drawLine"),on=nn("drawing/getNewContext");function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mn=Object(ge.importInternal)("drawing/draw"),dn=Object(ge.importInternal)("drawing/drawCircle"),hn=Object(ge.importInternal)("drawing/drawJoinedLines"),vn=Object(ge.importInternal)("drawing/getNewContext"),gn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};cn(this,t);var r={mixins:["enabledOrDisabledBinaryTool"],name:tn.RTSTRUCT_DISPLAY_TOOL},a=Object.assign(r,n);return(e=ln(this,fn(t).call(this,a)))._rtStructModule=cornerstoneTools.getModule("rtstruct"),e}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,e),n=t,(r=[{key:"renderToolData",value:function(e){var t=e.detail,n=this._rtStructModule,r=Object(ge.getToolState)(e.currentTarget,this.name);if(r){for(var a,o=n.configuration,i=o.lineWidth,s=o.opacity,c=(o.highlightOpacity,vn(t.canvasContext.canvas)),u=0;u<r.data.length;u++){var l=r.data[u];if(!1!==n.getters.structureSet(l.structureSetSeriesInstanceUid).visible){var f=n.getters.ROIContour(l.structureSetSeriesInstanceUid,l.ROINumber);if(!1!==f.visible){var p=l.handles.points;if(p.length){var m=f.colorArray,d={color:"rgba(".concat(m[0],",").concat(m[1],",").concat(m[2],",").concat(s,")"),lineWidth:i};switch(l.highlight&&(a={x:0,y:0},p.forEach((function(e){a.x+=e.x,a.y+=e.y})),a.x/=p.length,a.y/=p.length,delete l.highlight),l.type){case"CLOSED_PLANAR":this._renderClosedPlanar(c,t.element,p,d);break;case"POINT":this._renderPoint(c,t.element,p,d);break;case"OPEN_PLANAR":this._renderOpenPlanar(c,t.element,p,d)}}}}}a&&function(e,t,n){var r=on(e.canvasContext.canvas),a=e.element,o=Se.a.pixelToCanvas(a,t),i=a.clientWidth,s=a.clientHeight;rn(r,(function(e){an(e,a,{x:o.x+10,y:o.y},{x:i,y:o.y},n,"canvas"),an(e,a,{x:o.x-10,y:o.y},{x:0,y:o.y},n,"canvas"),an(e,a,{x:o.x,y:o.y+10},{x:o.x,y:s},n,"canvas"),an(e,a,{x:o.x,y:o.y-10},{x:o.x,y:0},n,"canvas")}))}(t,a,{color:ge.toolColors.getActiveColor(),lineWidth:1})}}},{key:"_renderClosedPlanar",value:function(e,t,n,r){mn(e,(function(e){hn(e,t,n[n.length-1],n,r)}))}},{key:"_renderPoint",value:function(e,t,n,r){mn(e,(function(e){dn(e,t,n[0],3,r)}))}},{key:"_renderOpenPlanar",value:function(e,t,n,r){mn(e,(function(e){hn(e,t,n[0],n,r)}))}}])&&un(n.prototype,r),a&&un(n,a),t}(Object(ge.importInternal)("base/BaseTool")),yn=ye.a.globalImageIdSpecificToolStateManager;function bn(e,t,n){return!!e.some((function(e){return e.structureSetSeriesInstanceUid===t&&e.ROINumber===n}))}function Sn(){Se.a.getEnabledElements().forEach((function(e){e.image&&Se.a.updateImage(e.element)}))}var wn={StructureSets:[]};function On(e){return wn.StructureSets.find((function(t){return t.SeriesInstanceUID===e}))}function In(e,t){var n=On(e);if(n)return n.ROIContours.find((function(e){return e.ROINumber===t}))}function En(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=On(e);n&&(n.ROIContours.forEach((function(e){e.visible=t})),Sn())}function Pn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=In(e,t);r&&(r.visible=n,Sn())}var Dn={getters:{structureSet:On,ROIContour:In,structuresSetsWhichReferenceSeriesInstanceUid:function(e){return wn.StructureSets.filter((function(t){return function(e,t){return e.referencedSeriesSequence.some((function(e){return e.SeriesInstanceUID===t}))}(t,e)}))},imageIdOfCenterFrameOfROIContour:function(e,t,n){for(var r=tn.RTSTRUCT_DISPLAY_TOOL,a=yn.saveToolState(),o=[],i=0;i<n.length;i++){var s=a[n[i]];if(s&&s[r]&&s[r].data)bn(s[r].data,e,t)&&o.push(i)}return n[o[Math.floor(o.length/2)]]}},setters:{structureSet:function(e){wn.StructureSets.push(e)},hideROIContour:function(e,t){Pn(e,t,!1)},showROIContour:function(e,t){Pn(e,t,!0)},toggleROIContour:function(e,t){var n=In(e,t);n&&(n.visible=!n.visible,Sn())},hideStructureSet:function(e){En(e,!1)},showStructureSet:function(e){En(e,!0)},toggleStructureSet:function(e){var t=On(e);t&&(t.visible=!t.visible,Sn())}},state:wn,configuration:{lineWidth:3,opacity:.75,highlightOpacity:.5}},Cn={TOOL_NAMES:{RT_STRUCT_DISPLAY_TOOL:"RTStructDisplayTool"}};n(17);function Tn(e,t){for(var n=t.rowCosines,r=t.columnCosines,a=t.rowPixelSpacing,o=t.columnPixelSpacing,i=t.imagePositionPatient,s=[n[0],n[1],n[2]],c=[r[0],r[1],r[2]],u=[i[0],i[1],i[2]],l=0,f=0,p={x:0,y:0},m=0;m<s.length;m++)Math.abs(s[m])>p.x&&(l=m,p.x=Math.abs(s[m])),Math.abs(c[m])>p.y&&(f=m,p.y=Math.abs(c[m]));var d=l,h=f,v={x:Math.pow(s[0],2)+Math.pow(s[1],2)+Math.pow(s[2],2),y:Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)};if(v.x<.99||v.y<.99)throw Error("Direction cosines do not sum to 1 in quadrature. There is likely a mistake in the DICOM metadata."+"directionCosineMagnitudes: ".concat(v.x,", ").concat(v.y));for(var g=[void 0,c[d],s[d],void 0,s[h],c[h]],y=0;y<e.length;y++){var b=[e[y].x-u[0],e[y].y-u[1],e[y].z-u[2]];g[0]=b[d],g[3]=b[h];var S=(g[0]-g[1]*g[3]/g[5])/(g[2]*a*(1-g[1]*g[4]/(g[2]*g[5]))),w=(g[3]-g[4]*S*a)/(g[5]*o);e[y].x=S+.5,e[y].y=w+.5,delete e[y].z}}function xn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kn(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function jn(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){kn(o,r,a,i,s,"next",e)}function s(e){kn(o,r,a,i,s,"throw",e)}i(void 0)}))}}var Rn=Ae.b.data.Colors.dicomlab2RGB,Nn=ye.a.globalImageIdSpecificToolStateManager,Mn=ve.a.utils.DicomLoaderService;function _n(){return(_n=jn(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,c,u,l,f,p,m,d,h,v,g,y,b,S,w,O,I,E,P,D,C,T,x,k,j,R,N,M,_,A,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ye.a.getModule("rtstruct"),t.isLoaded=!0,o=n.StudyInstanceUID,i=n.SeriesInstanceUID,e.next=5,Mn.findDicomDataPromise(t,r);case 5:s=e.sent,c=Ae.b.data.DicomMessage.readFile(s),(u=Ae.b.data.DicomMetaDictionary.naturalizeDataset(c.dict))._meta=Ae.b.data.DicomMetaDictionary.namifyDataset(c.meta),l=Nn.saveToolState(),f=u.StructureSetROISequence,p=u.ROIContourSequence,m=u.RTROIObservationsSequence,d=u.StructureSetLabel,h={StructureSetLabel:d,SeriesInstanceUID:u.SeriesInstanceUID,ROIContours:[],referencedSeriesSequence:t.metadata.ReferencedSeriesSequence,visible:!0},a.setters.structureSet(h),v=Fn(r,o,i),g=tn.RTSTRUCT_DISPLAY_TOOL,y=0;case 16:if(!(y<p.length)){e.next=51;break}if(b=p[y],S=b.ReferencedROINumber,w=b.ContourSequence){e.next=21;break}return e.abrupt("continue",48);case 21:O=!1,I=Bn(w),E=0;case 24:if(!(E<I.length)){e.next=47;break}if(P=I[E],D=P.ContourImageSequence,C=P.ContourData,T=P.NumberOfContourPoints,x=P.ContourGeometricType,k=D?D.ReferencedSOPInstanceUID:qn(C,x,T,v),j=Vn(v,k)){e.next=30;break}return e.abrupt("continue",44);case 30:R=Un(l,j,g),N=Se.a.metaData.get("imagePlaneModule",j),M=[],_=void 0,e.t0=x,e.next="CLOSED_PLANAR"===e.t0||"OPEN_PLANAR"===e.t0||"POINT"===e.t0?37:43;break;case 37:for(O=!0,A=0;A<3*T;A+=3)M.push({x:C[A],y:C[A+1],z:C[A+2]});return Tn(M,N),_={handles:{points:M},type:x,structureSetSeriesInstanceUid:u.SeriesInstanceUID,ROINumber:S},R.push(_),e.abrupt("break",44);case 43:return e.abrupt("continue",44);case 44:E++,e.next=24;break;case 47:An(h,f,m,b,O);case 48:y++,e.next=16;break;case 51:Ln(g),L=new CustomEvent("extensiondicomrtrtloaded",{detail:{rtStructDisplaySet:t,referencedDisplaySet:n,studies:r}}),document.dispatchEvent(L);case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(e,t,n,r,a){var o=t.find((function(e){return e.ROINumber===r.ReferencedROINumber})),i={ROINumber:o.ROINumber,ROIName:o.ROIName,ROIGenerationAlgorithm:o.ROIGenerationAlgorithm,ROIDescription:o.ROIDescription,isSupported:a,visible:!0};!function(e,t){var n=e.ROIDisplayColor,r=e.RecommendedDisplayCIELabValue;!n&&r&&(n=Rn(r));if(n)t.colorArray=xn(n);else{var a=ye.a.getModule("segmentation").getters.colorForSegmentIndexColorLUT(0,t.ROINumber);t.colorArray=xn(a)}}(r,i),n&&function(e,t,n){var r=t.find((function(e){return e.ReferencedROINumber===n}));if(r){var a=r.ObservationNumber,o=r.ROIObservationDescription,i=r.RTROIInterpretedType,s=r.ROIInterpreter;e.RTROIObservations={ObservationNumber:a,ROIObservationDescription:o,RTROIInterpretedType:i,ROIInterpreter:s}}}(i,n,r.ReferencedROINumber),e.ROIContours.push(i)}function Ln(e){Se.a.getEnabledElements().forEach((function(t){var n=t.element,r=t.image;"enabled"!==ye.a.getToolForElement(n,e).mode&&ye.a.setToolEnabled(e),r&&Se.a.updateImage(n)}))}function Un(e,t,n){!1===e.hasOwnProperty(t)&&(e[t]={});var r=e[t];return!1===r.hasOwnProperty(n)&&(r[n]={data:[]}),r[n].data}var Vn=function(e,t){var n=e.find((function(e){return e.sopInstanceUID===t}));return n?n.imageId:null};function Fn(e,t,n){var r=e.find((function(e){return e.StudyInstanceUID===t})).displaySets.filter((function(e){return e.SeriesInstanceUID===n}));return r.length>1&&console.warn("More than one display set with the same SeriesInstanceUID. This is not supported yet..."),r[0].images.map((function(e){return{imageId:e.getImageId(),sopInstanceUID:e.getSOPInstanceUID()}}))}function Bn(e){return Array.isArray(e)?e:[e]}function qn(e,t,n,r){var a,o={distance:1/0,sopInstanceUID:null};switch(t){case"POINT":a=e;break;case"CLOSED_PLANAR":case"OPEN_PLANAR":a=[0,0,0];for(var i=0;i<3*n;i+=3)a[0]+=e[i],a[1]+=e[i+1],a[2]+=e[i+2];a[0]/=n,a[1]/=n,a[2]/=n}return r.forEach((function(e){var t=e.imageId,n=Se.a.metaData.get("imagePlaneModule",t),r=function(e,t){var n=t.rowCosines,r=t.columnCosines,a=t.imagePositionPatient,o=[];p.e.cross(o,n,r);var i=o[0],s=o[1],c=o[2],u=-i*a[0]-s*a[1]-c*a[2];return Math.abs(i*e[0]+s*e[1]+c*e[2]+u)}(a,n);r<o.distance&&(o.distance=r,o.sopInstanceUID=e.sopInstanceUID)})),o.sopInstanceUID}function zn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Ke.a.StudyMetadata.getReferencedDisplaySet(t,e);return n&&t.load(r,e),r}var Hn=Object.values({DICOM_RT_STRUCT:"1.2.840.10008.5.1.4.1.1.481.3"});function Wn(e){return Array.isArray(e)?e:[e]}var Gn={id:"OHIFDicomRTStructSopClassHandler",type:ue.a.SOP_CLASS_HANDLER,sopClassUIDs:Hn,getDisplaySetFromSeries:function(e,t,n,r){var a,o,i,s=e.getFirstInstance(),c=s.getData().metadata,u=c.SeriesDate,l=c.SeriesTime,f=c.SeriesNumber,p=c.SeriesDescription,m=c.FrameOfReferenceUID,d=c.SOPInstanceUID,h=c.SeriesInstanceUID,v=c.StudyInstanceUID,g=(a={Modality:"RTSTRUCT",displaySetInstanceUID:z.a.guid(),wadoRoot:t.getData().wadoRoot,wadoUri:s.getData().wadouri,SOPInstanceUID:d,SeriesInstanceUID:h,StudyInstanceUID:v,FrameOfReferenceUID:m,authorizationHeaders:r,metadata:c,isDerived:!0,referencedDisplaySetUID:null,labelmapIndex:null,isLoaded:!1,SeriesDate:u,SeriesTime:l,SeriesNumber:f,SeriesDescription:p},i=c,(o="metadata")in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,a);if(!c.ReferencedSeriesSequence){var y=c.ReferencedFrameOfReferenceSequence;y&&(c.ReferencedSeriesSequence=function(e){var t=[];return Wn(e).forEach((function(e){Wn(e.RTReferencedStudySequence).forEach((function(e){Wn(e.RTReferencedSeriesSequence).forEach((function(e){var n=[],r=e.ContourImageSequence,a=e.SeriesInstanceUID;Wn(r).forEach((function(e){n.push({ReferencedSOPInstanceUID:e.ReferencedSOPInstanceUID,ReferencedSOPClassUID:e.ReferencedSOPClassUID})}));var o={SeriesInstanceUID:a,ReferencedInstanceSequence:n};t.push(o)}))}))})),t}(y))}return g.getSourceDisplaySet=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return zn(e,g,t)},g.load=function(e,t){return function(e,t,n){return _n.apply(this,arguments)}(g,e,t).catch((function(e){throw g.isLoaded=!1,g.loadError=!0,new Error(e)}))},g}};n(1032),n(1033);function $n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Jn=function(e){var t=e.color;return o.a.createElement("div",{className:"item-color",style:{backgroundColor:"rgba(".concat(t.join(","),")")}})};Jn.propTypes={color:T.a.array.isRequired};var Yn=function(e){var t=e.index,n=e.label,r=e.isDisabled,i=e.onClick,s=e.itemClass,u=e.color,l=e.visible,f=void 0===l||l,p=e.onVisibilityChange,m=e.selected,d=void 0!==m&&m,h=$n(Object(a.useState)(f),2),v=h[0],g=h[1];Object(a.useEffect)((function(){g(f)}),[f]);var y="dcmrt-structure-set-item";d&&(y+=" selected"),r&&(y+=" isDisabled");var b=o.a.createElement("span",null,o.a.createElement(c.j,{name:"exclamation-triangle"})),S=o.a.createElement(c.E,{key:t,itemKey:t,itemIndex:t,itemClass:s,itemMeta:r?b:o.a.createElement(Jn,{color:u}),itemMetaClass:"item-color-section",onItemClick:function(){r||i()}},o.a.createElement("div",null,o.a.createElement("div",{className:"item-label",style:{marginBottom:4}},o.a.createElement("a",{"data-tip":!0,"data-for":"StructureHover".concat(t)},o.a.createElement("span",null,n)),o.a.createElement(Ot.a,{id:"StructureHover".concat(t),delayShow:250,place:"right",border:!0,type:"light"},o.a.createElement("span",null,n)),!r&&o.a.createElement(c.j,{className:"eye-icon ".concat(v&&"--visible"),name:v?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(e){if(e.stopPropagation(),!r){var t=!v;g(t),p(t)}}})),!1,!1));return o.a.createElement("div",{className:y},o.a.createElement(o.a.Fragment,null,r?o.a.createElement(c.r,{key:t,placement:"left",overlay:o.a.createElement(c.I,{placement:"left",className:"in tooltip-warning",id:"tooltip-left"},o.a.createElement("div",{className:"warningTitle"},"Unsupported Region"),o.a.createElement("div",{className:"warningContent"},"Contour type currently unsupported."))},o.a.createElement("div",null,S)):o.a.createElement(o.a.Fragment,null,S," ")))};Yn.propTypes={index:T.a.oneOfType([T.a.string,T.a.number]).isRequired,label:T.a.string.isRequired,onClick:T.a.func,itemClass:T.a.string,color:T.a.array.isRequired},Yn.defaultProps={itemClass:"",onClick:function(){}};var Xn=Yn;n(1034);function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qn=function(e){var t=e.configuration,n=e.onBack,r=e.onChange,a=function(e,n){r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(n,!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,Zn({},e,n)))};return o.a.createElement("div",{className:"dcmrt-settings"},o.a.createElement("div",{className:"settings-title"},o.a.createElement("h3",null,"RT Structure Set Settings"),o.a.createElement("button",{className:"return-button",onClick:n},"Back")),o.a.createElement((function(e){var t=e.title,n=e.children;return o.a.createElement("div",{className:"settings-section"},o.a.createElement("div",{className:"header"},t),o.a.createElement("div",{className:"content"},n))}),{title:"Segment Outline"},o.a.createElement("div",{className:"range"},o.a.createElement("label",{htmlFor:"range"},"Opacity"),o.a.createElement(c.t,{showPercentage:!0,step:1,min:0,max:100,value:100*t.opacity,onChange:function(e){return a("opacity",(t=e.target.value,parseFloat(t/100).toFixed(2)));var t}})),o.a.createElement("div",{className:"range"},o.a.createElement("label",{htmlFor:"range"},"Width"),o.a.createElement(c.t,{showValue:!0,step:1,min:1,max:5,value:t.lineWidth,onChange:function(e){return a("lineWidth",parseInt(e.target.value))}}))))};Qn.propTypes={configuration:T.a.shape({lineWidth:T.a.oneOfType([T.a.number,T.a.string]).isRequired,opacity:T.a.oneOfType([T.a.number,T.a.string]).isRequired}).isRequired,onBack:T.a.func.isRequired,onChange:T.a.func.isRequired};var er=Qn,tr=(n(1035),function(e){var t=e.height,n=void 0===t?"200px":t,r=e.width,a=void 0===r?"200px":r,i=e.expand,s=void 0!==i&&i;return o.a.createElement("div",{style:s?{height:"100%",width:"100%"}:{}},o.a.createElement("svg",{style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:a,height:n,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},o.a.createElement("g",{transform:"rotate(0 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(30 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(60 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(90 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(120 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(150 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(180 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(210 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(240 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(270 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(300 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}))),o.a.createElement("g",{transform:"rotate(330 50 50)"},o.a.createElement("rect",{x:"49",y:"24",rx:"0",ry:"0",width:"2",height:"12",fill:"#20a5d6"},o.a.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})))))});function nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var rr=function(e){var t=e.title,n=e.children,r=e.visible,i=void 0!==r&&r,s=e.expanded,u=void 0!==s&&s,l=e.loading,f=void 0!==l&&l,p=e.hideVisibleButton,m=void 0!==p&&p,d=e.onVisibilityChange,h=void 0===d?function(){}:d,v=e.onExpandChange,g=void 0===v?function(){}:v,y=nr(Object(a.useState)(u),2),b=y[0],S=y[1],w=nr(Object(a.useState)(i),2),O=w[0],I=w[1];return Object(a.useEffect)((function(){I(i)}),[i]),o.a.createElement("div",{className:"dcmrt-panel-section",style:{marginBottom:b?0:2,height:b?"100%":"unset"}},o.a.createElement("div",{className:"header"},o.a.createElement("div",null,t),o.a.createElement("div",{className:"icons"},!m&&o.a.createElement(c.j,{className:"eye-icon ".concat(O&&"expanded"),name:O?"eye":"eye-closed",width:"20px",height:"20px",onClick:function(){var e=!O;I(e),h(e)}}),o.a.createElement(c.j,{className:"angle-double-".concat(b?"down":"up"," ").concat(b&&"expanded"),name:"angle-double-".concat(b?"down":"up"),width:"20px",height:"20px",onClick:function(){var e=!b;S(e),g(e)}}))),f&&b&&o.a.createElement(tr,{expand:!0,height:"70px",width:"70px"}),n)};rr.propTypes={title:T.a.string.isRequired,children:T.a.oneOfType([T.a.node,T.a.func]).isRequired,visible:T.a.bool,expanded:T.a.bool,onVisibilityChange:T.a.func},rr.defaultProps={visible:!1,expanded:!1,onVisibilityChange:function(){}};var ar=rr;function or(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ir(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){or(o,r,a,i,s,"next",e)}function s(e){or(o,r,a,i,s,"throw",e)}i(void 0)}))}}function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(n,!0).forEach((function(t){ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var fr=tn.RTSTRUCT_DISPLAY_TOOL,pr=z.a.studyMetadataManager,mr=function(){Se.a.getEnabledElements().forEach((function(e){e.image&&Se.a.updateImage(e.element)}))},dr=function(e){var t=e.studies,n=e.activeIndex,r=e.isOpen,i=e.onContourItemClick,s=e.activeContexts,u=void 0===s?[]:s,l=e.contexts,f=void 0===l?{}:l,p=e.activeViewport,m=e.getActiveViewport,d=lr(Object(a.useState)(),2),h=d[0],v=d[1],g={referencedDisplaysets:[],sets:[],selectedSet:null,isLocked:!1},y=lr(Object(a.useState)(g),2),b=y[0],S=y[1],w=lr(Object(a.useState)(!1),2),O=w[0],I=w[1];Object(a.useEffect)((function(){return E(),document.addEventListener("rt-panel-tab-updated",E),function(){document.removeEventListener("rt-panel-tab-updated",E)}}),[]),Object(a.useEffect)((function(){var e=pr.get(p.StudyInstanceUID).getDerivedDatasets({referencedSeriesInstanceUID:p.SeriesInstanceUID,Modality:"RTSTRUCT"});S((function(t){return cr({},t,{isLocked:!e.length})}))}),[p]);var E=function(){var e=m(),t=ye.a.getModule("rtstruct"),n=t.state.StructureSets;if(n&&n.length){var r=t.getters.structuresSetsWhichReferenceSeriesInstanceUid(e.SeriesInstanceUID),a=pr.get(e.StudyInstanceUID).getDerivedDatasets({referencedSeriesInstanceUID:e.SeriesInstanceUID,Modality:"RTSTRUCT"});if(r.length){var o=r[0];S({referencedDisplaysets:a,selectedSet:o,sets:r})}else S(g)}};Object(a.useEffect)((function(){I(O&&!r)}),[r]);var P=function(e,t){var r=e.ROINumber,a=e.ROIName,s=e.RTROIObservations,c=e.colorArray,l=e.visible,p=e.isSupported,m="";s&&s.RTROIInterpretedType&&(m="(".concat(s.RTROIInterpretedType,")"));var d=h&&h===r;return o.a.createElement(Xn,{key:r,selected:d,isDisabled:!p,onClick:function(){if(v(d?null:r),u.includes(f.CORNERSTONE)){var e=Se.a.getEnabledElements()[n].element,t=ye.a.getToolState(e,"stack");if(!t)return;var a=t.data[0].imageIds,o=ye.a.getModule("rtstruct").getters.imageIdOfCenterFrameOfROIContour(b.selectedSet.SeriesInstanceUID,r,a);ye.a.globalImageIdSpecificToolStateManager.saveToolState()[o][fr].data.find((function(e){return e.ROINumber===r})).highlight=!0;var s=a.indexOf(o),c=Se.a.metaData.get("SOPInstanceUID",o),l=Se.a.metaData.get("StudyInstanceUID",o);i({StudyInstanceUID:l,SOPInstanceUID:c,frameIndex:s,activeViewportIndex:n})}},label:"".concat(a," ").concat(m),index:r,color:c,visible:l,onVisibilityChange:function(){ye.a.getModule("rtstruct").setters.toggleROIContour(b.selectedSet.SeriesInstanceUID,r)}})};if(O){var D=ye.a.getModule("rtstruct");return o.a.createElement(er,{configuration:D.configuration,onBack:function(){return I(!1)},onChange:function(e){var t=ye.a.getModule("rtstruct");t.configuration.lineWidth=e.lineWidth,t.configuration.opacity=e.opacity,mr()}})}return o.a.createElement("div",{className:"dcmrt-panel"},o.a.createElement("div",{className:"dcmrt-panel-header"}," ",!b.isLocked&&o.a.createElement(c.j,{className:"cog-icon",name:"cog",width:"25px",height:"25px",onClick:function(){return I(!0)}}),o.a.createElement("h3",null,"RT Structure Sets")),!b.isLocked&&!b.referencedDisplaysets.length&&o.a.createElement(tr,{expand:!0,height:"70px",width:"70px"}),b.sets&&b.referencedDisplaysets.map((function(e){var n=e.SeriesInstanceUID,r=e.metadata,a=e.isLoaded,i=ye.a.getModule("rtstruct").getters.structuresSetsWhichReferenceSeriesInstanceUid(p.SeriesInstanceUID).find((function(e){return e.SeriesInstanceUID===n}));return i?o.a.createElement(ar,{key:n,title:r.StructureSetLabel,loading:!a||!i,visible:a&&i&&i.visible,hideVisibleButton:!a,expanded:a&&i.SeriesInstanceUID===b.selectedSet.SeriesInstanceUID,onVisibilityChange:function(e){var t=ye.a.getModule("rtstruct");e?t.setters.showStructureSet(i.SeriesInstanceUID):t.setters.hideStructureSet(i.SeriesInstanceUID);var n=t.getters.structuresSetsWhichReferenceSeriesInstanceUid(p.SeriesInstanceUID);S((function(e){return cr({},e,{sets:n})})),mr()},onExpandChange:ir(regeneratorRuntime.mark((function r(){var o,i,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a){r.next=7;break}return r.next=3,e.load(p,t);case 3:o=ye.a.getModule("rtstruct"),i=o.getters.structuresSetsWhichReferenceSeriesInstanceUid(p.SeriesInstanceUID),s=i.find((function(e){return e.SeriesInstanceUID===n})),S((function(e){return cr({},e,{selectedSet:s,sets:i})}));case 7:case"end":return r.stop()}}),r)})))},o.a.createElement(c.v,null,o.a.createElement(c.D,{headless:!0},a&&i.ROIContours.map((function(e){return P(e)}))))):null})))};dr.propTypes={viewports:T.a.shape({displaySetInstanceUID:T.a.string,frameRate:T.a.any,InstanceNumber:T.a.number,isMultiFrame:T.a.bool,isReconstructable:T.a.bool,Modality:T.a.string,plugin:T.a.string,SeriesDate:T.a.string,SeriesDescription:T.a.string,SeriesInstanceUID:T.a.string,SeriesNumber:T.a.any,SeriesTime:T.a.string,sopClassUIDs:T.a.arrayOf(T.a.string),StudyInstanceUID:T.a.string}),activeIndex:T.a.number.isRequired,studies:T.a.array.isRequired,isOpen:T.a.bool.isRequired},dr.defaultProps={};var hr=dr,vr=n(664);function gr(){return(gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var yr=z.a.studyMetadataManager,br={id:"rt",version:vr.a,preRegistration:function(e){var t=e.servicesManager,n=e.configuration;!function(e){e.servicesManager;var t=e.configuration,n=void 0===t?{}:t,r=Object.assign({},Cn,n);tn.RT_STRUCT_DISPLAY_TOOL=r.TOOL_NAMES.RT_STRUCT_DISPLAY_TOOL,ye.a.register("module","rtstruct",Dn),ye.a.addTool(gn)}({servicesManager:t,configuration:void 0===n?{}:n})},getPanelModule:function(e){var t=e.commandsManager,n=(e.servicesManager,e.api),r=function(e){var t=new CustomEvent("rt-panel-tab-updated",{detail:e});document.dispatchEvent(t)};return document.addEventListener("extensiondicomrtrtloaded",(function(e){var t=e.detail,n=t.rtStructDisplaySet,a=t.referencedDisplaySet,o=yr.get(n.StudyInstanceUID).getDerivedDatasets({referencedSeriesInstanceUID:a.SeriesInstanceUID,Modality:"RTSTRUCT"});r({badgeNumber:o.length,target:"rt-panel"})})),{menuOptions:[{icon:"list",label:"RTSTRUCT",target:"rt-panel",stateEvent:"rt-panel-tab-updated",isDisabled:function(e,t){if(!e)return!0;if(t){var n=yr.get(t.StudyInstanceUID);if(!n)return;var a=n.getDerivedDatasets({referencedSeriesInstanceUID:t.SeriesInstanceUID,Modality:"RTSTRUCT"});if(a&&a.some((function(e){return["RTSTRUCT"].includes(e.Modality)})))return r({badgeNumber:a.length,target:"rt-panel"}),!1}return!0}}],components:[{id:"rt-panel",component:function(e){var r=n.hooks.useAppContext().activeContexts;return o.a.createElement(hr,gr({},e,{onContourItemClick:function(e){t.runCommand("jumpToImage",e)},activeContexts:r,contexts:n.contexts}))}}],defaultContext:["VIEWER"]}},getSopClassHandlerModule:function(e){e.servicesManager;return Gn}},Sr=ve.a.utils,wr={id:"DicomMicroscopySopClassHandlerPlugin",sopClassUIDs:["1.2.840.10008.5.1.4.1.1.77.1.6"],getDisplaySetFromSeries:function(e,t,n){var r=e.getFirstInstance(),a=r.getData().metadata,o=a.SeriesDescription,i=a.SeriesNumber,s=a.ContentDate,c=a.ContentTime;return{plugin:"microscopy",Modality:"SM",displaySetInstanceUID:Sr.guid(),dicomWebClient:n,SOPInstanceUID:r.getSOPInstanceUID(),SeriesInstanceUID:e.getSeriesInstanceUID(),StudyInstanceUID:t.getStudyInstanceUID(),SeriesDescription:o,SeriesDate:s,SeriesTime:c,SeriesNumber:i,metadata:a}}},Or=n(665);function Ir(){return(Ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Er=o.a.lazy((function(){return Promise.all([n.e(17),n.e(18)]).then(n.bind(null,1149))})),Pr={id:"microscopy",version:Or.a,getViewportModule:function(e){var t=e.servicesManager;return function(e){return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(Er,Ir({},e,{servicesManager:t})))}},getSopClassHandlerModule:function(){return wr}},Dr={id:"OHIFDicomPDFSopClassHandlerPlugin",type:ue.a.SOP_CLASS_HANDLER,sopClassUIDs:["1.2.840.10008.5.1.4.1.1.104.1"],getDisplaySetFromSeries:function(e,t,n,r){var a=e.getFirstInstance(),o=a.getData().metadata,i=o.ContentDate,s=o.ContentTime,c=o.SeriesDescription,u=o.SeriesNumber;return{plugin:"pdf",Modality:"DOC",displaySetInstanceUID:z.a.guid(),wadoRoot:t.getData().wadoRoot,wadoUri:a.getData().wadouri,SOPInstanceUID:a.getSOPInstanceUID(),SeriesInstanceUID:e.getSeriesInstanceUID(),StudyInstanceUID:t.getStudyInstanceUID(),SeriesDescription:c,SeriesDate:i,SeriesTime:s,SeriesNumber:u,metadata:o,authorizationHeaders:r}}},Cr=n(666),Tr=o.a.lazy((function(){return Promise.all([n.e(12),n.e(13)]).then(n.bind(null,1151))})),xr=function(e){return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(Tr,e))},kr={id:"pdf",version:Cr.a,getViewportModule:function(){return xr},getSopClassHandlerModule:function(){return Dr}},jr=n(667),Rr={};window&&(Rr=window.config||{},window.version=jr.a);var Nr={config:Rr,defaultExtensions:[ce,he,Pr,kr,en,br]},Mr=o.a.createElement(r.b,Nr,null);s.a.render(Mr,document.getElementById("root"))},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(643),a=n(9);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this,a=t.commandsManager,o=t.servicesManager,i=t.api,s=t.appConfig,c=void 0===s?{}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modules={},this.registeredExtensionIds=[],this.registeredExtensionVesions={},this.moduleTypeNames=Object.values(r.a),this._commandsManager=a,this._servicesManager=o,this._appConfig=c,this._api=i,this.moduleTypeNames.forEach((function(e){n.modules[e]=[]}))}var t,n,s;return t=e,(n=[{key:"registerExtensions",value:function(e){var t=this;e.forEach((function(e){if(Array.isArray(e)){var n=o(e,2),r=n[0],a=n[1];t.registerExtension(r,a)}else t.registerExtension(e)}))}},{key:"registerExtension",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var r=e.id,o=e.version;r||(r=Math.random().toString(36).substr(2,5),a.a.warn("Extension ID not set. Using random string ID: ".concat(r))),this.registeredExtensionIds.includes(r)?a.a.warn("Extension ID ".concat(r," has already been registered. Exiting before duplicating modules.")):(e.preRegistration&&e.preRegistration({servicesManager:this._servicesManager,commandsManager:this._commandsManager,appConfig:this._appConfig,configuration:n}),this.moduleTypeNames.forEach((function(a){var o=t._getExtensionModule(a,e,r,n);o&&(t._initSpecialModuleTypes(a,o),t.modules[a].push({extensionId:r,module:o}))})),this.registeredExtensionIds.push(r),this.registeredExtensionVesions[r]=o)}else a.a.warn("Attempting to register a null/undefined extension. Exiting early.")}},{key:"_getExtensionModule",value:function(e,t,n,r){var o,i="get"+((o=e).charAt(0).toUpperCase()+o.substr(1)),s=t[i];if(s)try{var c=s({servicesManager:this._servicesManager,commandsManager:this._commandsManager,appConfig:this._appConfig,configuration:r,api:this._api,extensionManager:this});return c||a.a.warn("Null or undefined returned when registering the ".concat(i," module for the ").concat(n," extension")),c}catch(e){a.a.error("Exception thrown while trying to call ".concat(i," for the ").concat(n," extension"))}}},{key:"_initSpecialModuleTypes",value:function(e,t){switch(e){case"commandsModule":var n=t.definitions,r=t.defaultContext;if(!n||0===Object.keys(n).length)return void a.a.warn("Commands Module contains no command definitions");this._initCommandsModule(n,r)}}},{key:"_initCommandsModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"VIEWER";this._commandsManager.getContext(n)||this._commandsManager.createContext(n),Object.keys(e).forEach((function(r){var a=e[r];a.context&&!t._commandsManager.getContext(a.context)&&t._commandsManager.createContext(a.context),t._commandsManager.registerCommand(a.context||n,r,a)}))}}])&&i(t.prototype,n),s&&i(t,s),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(9);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services={},this.registeredServiceNames=[]}var t,n,i;return t=e,(n=[{key:"registerService",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e?e.name?this.registeredServiceNames.includes(e.name)?r.a.warn("Service name ".concat(e.name," has already been registered. Exiting before duplicating services.")):e.create?(this.services[e.name]=e.create({configuration:t}),this.registeredServiceNames.push(e.name)):r.a.warn("Service create factory function not defined. Exiting early."):r.a.warn("Service name not set. Exiting early."):r.a.warn("Attempting to register a null/undefined service. Exiting early.")}},{key:"registerServices",value:function(e){var t=this;e.forEach((function(e){if(Array.isArray(e)){var n=a(e,2),r=n[0],o=n[1];t.registerService(r,o)}else t.registerService(e)}))}}])&&o(t.prototype,n),i&&o(t,i),e}()},function(e,t,n){"use strict";var r="UINotificationService",a=[],o={name:r,hide:function(e){return i._hide({id:e})},show:function(e){var t=e.title,n=e.message,r=e.duration,a=void 0===r?5e3:r,o=e.position,s=void 0===o?"bottomRight":o,c=e.type,u=void 0===c?"info":c,l=e.autoClose,f=void 0===l||l,p=e.action,m=void 0===p?null:p;return i._show({title:t,message:n,duration:a,position:s,type:u,autoClose:f,action:m})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(i._hide=t);if(n)for(i._show=n;a.length>0;){var r=a.pop();i._show(r)}}},i={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(e){a.push(e),console.warn("show() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return o}}},function(e,t,n){"use strict";var r="UIModalService",a={name:r,hide:function(){return o._hide()},show:function(e){var t=e.content,n=void 0===t?null:t,r=e.contentProps,a=void 0===r?null:r,i=e.shouldCloseOnEsc,s=void 0!==i&&i,c=e.isOpen,u=void 0===c||c,l=e.onClose,f=void 0===l?null:l,p=e.closeButton,m=void 0===p||p,d=e.title,h=void 0===d?null:d,v=e.fullscreen,g=void 0!==v&&v,y=e.customClassName,b=void 0===y?null:y,S=e.showScrollbar,w=void 0!==S&&S,O=e.noScroll,I=void 0!==O&&O;return o._show({content:n,contentProps:a,shouldCloseOnEsc:s,isOpen:u,onClose:f,closeButton:m,title:h,fullscreen:g,customClassName:b,showScrollbar:w,noScroll:I})},setServiceImplementation:function(e){var t=e.hide,n=e.show;t&&(o._hide=t);n&&(o._show=n)}},o={_hide:function(){return console.warn("hide() NOT IMPLEMENTED")},_show:function(){return console.warn("show() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},function(e,t,n){"use strict";var r="UIDialogService",a={name:r,dismiss:function(e){var t=e.id;return o._dismiss({id:t})},dismissAll:function(){return o._dismissAll()},create:function(e){var t=e.id,n=e.content,r=e.contentProps,a=e.onStart,i=e.onDrag,s=e.onStop,c=e.centralize,u=void 0!==c&&c,l=e.preservePosition,f=void 0===l||l,p=e.isDraggable,m=void 0===p||p,d=e.showOverlay,h=void 0!==d&&d,v=e.defaultPosition;return o._create({id:t,content:n,contentProps:r,onStart:a,onDrag:i,onStop:s,centralize:u,preservePosition:f,isDraggable:m,showOverlay:h,defaultPosition:v})},setServiceImplementation:function(e){var t=e.dismiss,n=e.dismissAll,r=e.create;t&&(o._dismiss=t);n&&(o._dismissAll=n);r&&(o._create=r)}},o={_dismiss:function(){return console.warn("dismiss() NOT IMPLEMENTED")},_dismissAll:function(){return console.warn("dismissAll() NOT IMPLEMENTED")},_create:function(){return console.warn("create() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},function(e,t,n){"use strict";var r="LoggerService",a={name:r,info:function(e){var t=e.message,n=e.displayOnConsole;return o._info({message:t,displayOnConsole:n})},error:function(e){var t=e.error,n=e.stack,r=e.message,a=e.displayOnConsole;return o._error({error:t,stack:n,message:r,displayOnConsole:a})},setServiceImplementation:function(e){var t=e.info,n=e.error;t&&(o._info=t);n&&(o._error=n)}},o={_info:function(){return console.warn("info() NOT IMPLEMENTED")},_error:function(){return console.warn("error() NOT IMPLEMENTED")}};t.a={name:r,create:function(e){e.configuration;return a}}},,function(e,t,n){"use strict";var r=n(9),a=n(34),o={subscribe:function(e,t){var n=this;if(this._isValidEvent(e)){var r=Object(a.a)(),o={id:r,callback:t};return console.info("Subscribing to '".concat(e,"'.")),Array.isArray(this.listeners[e])?this.listeners[e].push(o):this.listeners[e]=[o],{unsubscribe:function(){return n._unsubscribe(e,r)}}}throw new Error("Event ".concat(e," not supported."))},publish:function(e,t){var n=Object.keys(this.listeners).length>0,r=Array.isArray(this.listeners[e]);n&&r&&this.listeners[e].forEach((function(e){e.callback(t)}))},_unsubscribe:function(e,t){if(!this.listeners[e])return;var n=this.listeners[e];Array.isArray(n)?this.listeners[e]=n.filter((function(e){return e.id!==t})):this.listeners[e]=void 0},_isValidEvent:function(e){return Object.values(this.EVENTS).includes(e)}};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=["id","SOPInstanceUID","FrameOfReferenceUID","referenceStudyUID","referenceSeriesUID","label","description","type","unit","area","mean","stdDev","length","shortestDiameter","longestDiameter","text","points","source"],f={MEASUREMENT_UPDATED:"event::measurement_updated",INTERNAL_MEASUREMENT_UPDATED:"event:internal_measurement_updated",MEASUREMENT_ADDED:"event::measurement_added",RAW_MEASUREMENT_ADDED:"event::raw_measurement_added",MEASUREMENT_REMOVED:"event::measurement_removed",MEASUREMENTS_CLEARED:"event::measurements_cleared",JUMP_TO_MEASUREMENT:"event:jump_to_measurement"},p={POLYLINE:"value_type::polyline",POINT:"value_type::point",BIDIRECTIONAL:"value_type::shortAxisLongAxis",ELLIPSE:"value_type::ellipse",MULTIPOINT:"value_type::multipoint",CIRCLE:"value_type::circle"},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_arrayOfObjects",(function(e){return Object.entries(e).map((function(e){return u({},e[0],e[1])}))})),this.sources={},this.mappings={},this.measurements={},this.listeners={},this._jumpToMeasurementCache={},Object.defineProperty(this,"EVENTS",{value:f,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this,"VALUE_TYPES",{value:p,writable:!1,enumerable:!0,configurable:!1}),Object.assign(this,o)}var t,n,i;return t=e,(n=[{key:"getMeasurements",value:function(){var e=this,t=this._arrayOfObjects(this.measurements);return t&&t.map((function(t){return e.measurements[Object.keys(t)[0]]}))}},{key:"getMeasurement",value:function(e){var t=null,n=this.measurements[e];return n&&Object.keys(n).length>0&&(t=this.measurements[e]),t}},{key:"createSource",value:function(e,t){var n=this;if(!e)throw new Error("Source name not provided.");if(!t)throw new Error("Source version not provided.");var o=Object(a.a)(),i={id:o,name:e,version:t,addOrUpdate:function(e,t){return n.addOrUpdate(i,e,t)},remove:function(e){return n.remove(e,i)},getAnnotation:function(e,t){return n.getAnnotation(i,e,t)}};return r.a.info("New '".concat(e,"@").concat(t,"' source added.")),this.sources[o]=i,i}},{key:"getSource",value:function(e,t){return this.sources[this._getSourceId(e,t)]}},{key:"getSourceMappings",value:function(e,t){return this.mappings[this._getSourceId(e,t)]}},{key:"_getSourceId",value:function(e,t){var n=this.sources;return Object.keys(n).find((function(r){var a=n[r];return a.name===e&&a.version===t}))}},{key:"addMapping",value:function(e,t,n,a,o){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!n)throw new Error("Matching criteria not provided.");if(!t)throw new Error("Definition not provided.");if(!a)throw new Error("Mapping function to source schema not provided.");if(!o)throw new Error("Measurement mapping function not provided.");var i={matchingCriteria:n,definition:t,toSourceSchema:a,toMeasurementSchema:o};Array.isArray(this.mappings[e.id])?this.mappings[e.id].push(i):this.mappings[e.id]=[i],r.a.info("New measurement mapping added to source '".concat(this._getSourceInfo(e),"'."))}},{key:"getAnnotation",value:function(e,t,n){if(this._isValidSource(e))if(t){var a=this._getMappingByMeasurementSource(n,t),o=this.getMeasurement(n);if(a)return a.toSourceSchema(o,t);var i=this._getMatchingMapping(e,t,o);if(i)return r.a.info("Matching mapping found:",i),(0,i.toSourceSchema)(o,i.definition)}else r.a.warn("No source definition provided. Exiting early.");else r.a.warn("Invalid source. Exiting early.")}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.measurements[e]){var a=s({},t,{modifiedTimestamp:Math.floor(Date.now()/1e3)});return r.a.info("Updating internal measurement representation...",a),this.measurements[e]=a,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:t.source,measurement:a,notYetUpdatedAtSource:n}),a.id}}},{key:"addRawMeasurement",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this._isValidSource(e)){var c=this._getSourceInfo(e);if(t)if(this._sourceHasMappings(e)){var u={};try{(u=o(n)).source=e}catch(e){return void r.a.warn("Failed to map '".concat(c,"' measurement for definition ").concat(t,":"),e.message)}if(this._isValidMeasurement(u)){var l=n.id;l||(l=Object(a.a)(),r.a.warn("Measurement ID not found. Generating UID: ".concat(l)));var f=s({},u,{modifiedTimestamp:Math.floor(Date.now()/1e3),id:l});return this.measurements[l]?(r.a.info("Measurement already defined. Updating measurement.",f),this.measurements[l]=f,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:f})):(r.a.info("Measurement added.",f),this.measurements[l]=f,this.publish(this.EVENTS.RAW_MEASUREMENT_ADDED,{source:e,measurement:f,data:n,dataSource:i})),f.id}r.a.warn("Attempting to add or update a invalid measurement provided by '".concat(c,"'. Exiting early."))}else r.a.warn("No measurement mappings found for '".concat(c,"' source. Exiting early."));else r.a.warn("No source definition provided. Exiting early.")}else r.a.warn("Invalid source. Exiting early.")}},{key:"addOrUpdate",value:function(e,t,n){if(!this._isValidSource(e))throw new Error("Invalid source.");if(!t)throw new Error("No source definition provided.");if("stack"!=t&&"stackPrefetch"!=t){var o=this._getSourceInfo(e);if(!this._sourceHasMappings(e))throw new Error("No measurement mappings found for '".concat(o,"' source. Exiting early."));var i={};try{(i=(0,this.mappings[e.id].find((function(e){return e.definition===t})).toMeasurementSchema)(n)).source=e}catch(e){throw new Error("Failed to map '".concat(o,"' measurement for definition ").concat(t,":"),e.message)}if(!this._isValidMeasurement(i))throw new Error("Attempting to add or update a invalid measurement provided by '".concat(o,"'. Exiting early."));var c=n.id;c||(c=Object(a.a)(),r.a.info("Measurement ID not found. Generating UID: ".concat(c)));var u=s({},i,{modifiedTimestamp:Math.floor(Date.now()/1e3),id:c});return this.measurements[c]?(r.a.info("Measurement already defined. Updating measurement.",u),this.measurements[c]=u,this.publish(this.EVENTS.MEASUREMENT_UPDATED,{source:e,measurement:u,notYetUpdatedAtSource:!1})):(r.a.info("Measurement added.",u),this.measurements[c]=u,this.publish(this.EVENTS.MEASUREMENT_ADDED,{source:e,measurement:u})),u.id}}},{key:"remove",value:function(e,t){e&&this.measurements[e]?(delete this.measurements[e],this.publish(this.EVENTS.MEASUREMENT_REMOVED,{source:t,measurement:e})):r.a.warn("No id provided, or unable to find measurement by id.")}},{key:"clearMeasurements",value:function(){this.measurements={},this._jumpToMeasurementCache={},this.publish(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"jumpToMeasurement",value:function(e,t){var n=this.measurements[t];if(n){this._addJumpToMeasurement(e,t);var a=this.EVENTS.JUMP_TO_MEASUREMENT,o=Object.keys(this.listeners).length>0,i=Array.isArray(this.listeners[a]);o&&i&&this.listeners[a].forEach((function(t){t.callback({viewportIndex:e,measurement:n})}))}else r.a.warn("No id provided, or unable to find measurement by id.")}},{key:"_addJumpToMeasurement",value:function(e,t){this._jumpToMeasurementCache[e]=t}},{key:"getJumpToMeasurement",value:function(e){return this._jumpToMeasurementCache[e]}},{key:"removeJumpToMeasurement",value:function(e){delete this._jumpToMeasurementCache[e]}},{key:"_getMappingByMeasurementSource",value:function(e,t){var n=this.getMeasurement(e);if(this._isValidSource(n.source))return this.mappings[n.source.id].find((function(e){return e.definition===t}))}},{key:"clear",value:function(){this.measurements={},this.publish(this.EVENTS.MEASUREMENTS_CLEARED)}},{key:"_getMatchingMapping",value:function(e,t,n){return this.mappings[e.id].filter((function(e){return e.definition===t})).find((function(e){var t=e.matchingCriteria;return!!(t.type===n.type&&(t.properties&&t.properties.every((function(e){return n.hasOwnProperty(e)}))||n.points&&n.points.length===t.points))}))}},{key:"_getSourceInfo",value:function(e){return"".concat(e.name,"@").concat(e.version)}},{key:"_isValidSource",value:function(e){return e&&this.sources[e.id]}},{key:"_sourceHasMappings",value:function(e){return Array.isArray(this.mappings[e.id])&&this.mappings[e.id].length}},{key:"_isValidMeasurement",value:function(e){return Object.keys(e).forEach((function(e){if(!l.includes(e))return r.a.warn("Invalid measurement key: ".concat(e)),!1})),!0}}])&&c(t.prototype,n),i&&c(t,i),e}();t.a={name:"MeasurementService",create:function(e){e.configuration;return new m}}}]);
//# sourceMappingURL=app.bundle.40e2b893458aaf14a136.js.map